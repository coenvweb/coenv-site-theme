jQuery(document).ready(function(){"use strict";new jQuery.CoEnvAdmin}),function($,window){"use strict";$.CoEnvAdmin=function(options,element){this.options=options,this.element=$(element),this._create(options)},$.CoEnvAdmin.settings={},$.CoEnvAdmin.prototype._create=function(options){this.options=$.extend(!0,{},$.CoEnvAdmin.settings,options),this.checked=[],this._init()},$.CoEnvAdmin.prototype._init=function(){this._addCheckboxes()},$.CoEnvAdmin.prototype._addCheckboxes=function(){function addCheckboxes(){$secondLevelItems.each(function(){var $item=$(this),$checkbox=$('<p class="field-subheader description"></p>'),itemID=$item.attr("id").split("-").pop();$checkbox.append('<label for="edit-menu-item-subheader-'+itemID+'"></label>'),$checkbox.find("label").append('<input type="checkbox" id="edit-menu-item-subheader-'+itemID+'" value="subheader" name="menu-item-subheader['+itemID+']"> Show child items</input>'),$.inArray(itemID,_this.checked)>-1?(console.log(itemID),$checkbox.find("input").attr("checked","checked")):$checkbox.find("input").removeAttr("checked"),$item.find("p.field-link-target").after($checkbox)})}var $form=$("#update-nav-menu"),$secondLevelItems=$form.find(".menu-item-depth-1"),secondLevelItemIds=[],_this=this;$.each($secondLevelItems,function(){secondLevelItemIds.push($(this).attr("id").split("-").pop())}),this._getChecked(secondLevelItemIds).then(function(){addCheckboxes()})},$.CoEnvAdmin.prototype._getChecked=function(ids){var data,dfd=new $.Deferred,_this=this;return data={action:"coenv_ajax_get_menu_status",ids:ids},$.post(window.ajaxurl,data,function(response){_this.checked=$.parseJSON(response),dfd.resolve()}),dfd.promise()},$.CoEnvAdmin.prototype.option=function(key){$.isPlainObject(key)&&(this.options=$.extend(!0,this.options,key))},$.fn.coenvadmin=function(options){if("string"==typeof options){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,"coenvadmin");return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?void instance[options].apply(instance,args):void console.log("error",'no such method "'+options+'" for coenvadmin instance'):void console.log("error",'cannot call methods on coenvadmin prior to initialization; attempted to call method "'+options+'"')})}else this.each(function(){var instance=$.data(this,"coenvadmin");instance?(instance.option(options||{}),instance._init()):$.data(this,"coenvadmin",new $.CoEnvAdmin(options,this))});return this}}(jQuery,window,document);