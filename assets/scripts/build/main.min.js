/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});

/**
 * jQuery.fastClick.js
 *
 * Work around the 300ms delay for the click event in some mobile browsers.
 *
 * Code based on <http://code.google.com/mobile/articles/fast_buttons.html>
 *
 * @usage
 * $('button').fastClick(function() {alert('clicked!');});
 *
 * @license Under Creative Commons Attribution 3.0 License
 * @author Dave Hulbert (dave1010)
 * @version 0.2 2011-09-20
 */

/*global document, window, jQuery, Math */

(function($) {

$.fn.fastClick = function(handler) {
	return $(this).each(function(){
		$.FastButton($(this)[0], handler);
	});
};

$.FastButton = function(element, handler) {
	var startX, startY;

	var reset = function() {
		$(element).unbind('touchend');
		$("body").unbind('touchmove.fastClick');
	};

	var onClick = function(event) {
		event.stopPropagation();
		reset();
		handler.call(this, event);

		if (event.type === 'touchend') {
			$.clickbuster.preventGhostClick(startX, startY);
		}
	};

	var onTouchMove = function(event) {
		if (Math.abs(event.originalEvent.touches[0].clientX - startX) > 10 ||
			Math.abs(event.originalEvent.touches[0].clientY - startY) > 10) {
			reset();
		}
	};

	var onTouchStart = function(event) {
		event.stopPropagation();

		$(element).bind('touchend', onClick);
		$("body").bind('touchmove.fastClick', onTouchMove);

		startX = event.originalEvent.touches[0].clientX;
		startY = event.originalEvent.touches[0].clientY;
	};

	$(element).bind({
		touchstart: onTouchStart,
		click: onClick
	});
};

$.clickbuster = {
	coordinates: [],

	preventGhostClick: function(x, y) {
		$.clickbuster.coordinates.push(x, y);
		window.setTimeout($.clickbuster.pop, 2500);
	},

	pop: function() {
		$.clickbuster.coordinates.splice(0, 2);
	},

	onClick: function(event) {
		var x, y, i;
		for (i = 0; i < $.clickbuster.coordinates.length; i += 2) {
			x = $.clickbuster.coordinates[i];
			y = $.clickbuster.coordinates[i + 1];
			if (Math.abs(event.clientX - x) < 25 && Math.abs(event.clientY - y) < 25) {
				event.stopPropagation();
				event.preventDefault();
			}
		}
	}
};

$(function(){
	if (document.addEventListener){
		document.addEventListener('click', $.clickbuster.onClick, true);
	} else if (document.attachEvent){
		// for IE 7/8
		document.attachEvent('onclick', $.clickbuster.onClick);
	}
});

}(jQuery));

/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery throttle / debounce: Sometimes, less is more!
//
// *Version: 1.1, Last updated: 3/7/2010*
// 
// Project Home - http://benalman.com/projects/jquery-throttle-debounce-plugin/
// GitHub       - http://github.com/cowboy/jquery-throttle-debounce/
// Source       - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.js
// (Minified)   - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.min.js (0.7kb)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Throttle - http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/
// Debounce - http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - none, 1.3.2, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-throttle-debounce/unit/
// 
// About: Release History
// 
// 1.1 - (3/7/2010) Fixed a bug in <jQuery.throttle> where trailing callbacks
//       executed later than they should. Reworked a fair amount of internal
//       logic as well.
// 1.0 - (3/6/2010) Initial release as a stand-alone project. Migrated over
//       from jquery-misc repo v0.4 to jquery-throttle repo v1.0, added the
//       no_trailing throttle parameter and debounce functionality.
// 
// Topic: Note for non-jQuery users
// 
// jQuery isn't actually required for this plugin, because nothing internal
// uses any jQuery methods or properties. jQuery is just used as a namespace
// under which these methods can exist.
// 
// Since jQuery isn't actually required for this plugin, if jQuery doesn't exist
// when this plugin is loaded, the method described below will be created in
// the `Cowboy` namespace. Usage will be exactly the same, but instead of
// $.method() or jQuery.method(), you'll need to use Cowboy.method().

(function(window,undefined){
  '$:nomunge'; // Used by YUI compressor.
  
  // Since jQuery really isn't required for this plugin, use `jQuery` as the
  // namespace only if it already exists, otherwise use the `Cowboy` namespace,
  // creating it if necessary.
  var $ = window.jQuery || window.Cowboy || ( window.Cowboy = {} ),
    
    // Internal method reference.
    jq_throttle;
  
  // Method: jQuery.throttle
  // 
  // Throttle execution of a function. Especially useful for rate limiting
  // execution of handlers on events like resize and scroll. If you want to
  // rate-limit execution of a function to a single time, see the
  // <jQuery.debounce> method.
  // 
  // In this visualization, | is a throttled-function call and X is the actual
  // callback execution:
  // 
  // > Throttled with `no_trailing` specified as false or unspecified:
  // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
  // > X    X    X    X    X    X        X    X    X    X    X    X
  // > 
  // > Throttled with `no_trailing` specified as true:
  // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
  // > X    X    X    X    X             X    X    X    X    X
  // 
  // Usage:
  // 
  // > var throttled = jQuery.throttle( delay, [ no_trailing, ] callback );
  // > 
  // > jQuery('selector').bind( 'someevent', throttled );
  // > jQuery('selector').unbind( 'someevent', throttled );
  // 
  // This also works in jQuery 1.4+:
  // 
  // > jQuery('selector').bind( 'someevent', jQuery.throttle( delay, [ no_trailing, ] callback ) );
  // > jQuery('selector').unbind( 'someevent', callback );
  // 
  // Arguments:
  // 
  //  delay - (Number) A zero-or-greater delay in milliseconds. For event
  //    callbacks, values around 100 or 250 (or even higher) are most useful.
  //  no_trailing - (Boolean) Optional, defaults to false. If no_trailing is
  //    true, callback will only execute every `delay` milliseconds while the
  //    throttled-function is being called. If no_trailing is false or
  //    unspecified, callback will be executed one final time after the last
  //    throttled-function call. (After the throttled-function has not been
  //    called for `delay` milliseconds, the internal counter is reset)
  //  callback - (Function) A function to be executed after delay milliseconds.
  //    The `this` context and all arguments are passed through, as-is, to
  //    `callback` when the throttled-function is executed.
  // 
  // Returns:
  // 
  //  (Function) A new, throttled, function.
  
  $.throttle = jq_throttle = function( delay, no_trailing, callback, debounce_mode ) {
    // After wrapper has stopped being called, this timeout ensures that
    // `callback` is executed at the proper times in `throttle` and `end`
    // debounce modes.
    var timeout_id,
      
      // Keep track of the last time `callback` was executed.
      last_exec = 0;
    
    // `no_trailing` defaults to falsy.
    if ( typeof no_trailing !== 'boolean' ) {
      debounce_mode = callback;
      callback = no_trailing;
      no_trailing = undefined;
    }
    
    // The `wrapper` function encapsulates all of the throttling / debouncing
    // functionality and when executed will limit the rate at which `callback`
    // is executed.
    function wrapper() {
      var that = this,
        elapsed = +new Date() - last_exec,
        args = arguments;
      
      // Execute `callback` and update the `last_exec` timestamp.
      function exec() {
        last_exec = +new Date();
        callback.apply( that, args );
      };
      
      // If `debounce_mode` is true (at_begin) this is used to clear the flag
      // to allow future `callback` executions.
      function clear() {
        timeout_id = undefined;
      };
      
      if ( debounce_mode && !timeout_id ) {
        // Since `wrapper` is being called for the first time and
        // `debounce_mode` is true (at_begin), execute `callback`.
        exec();
      }
      
      // Clear any existing timeout.
      timeout_id && clearTimeout( timeout_id );
      
      if ( debounce_mode === undefined && elapsed > delay ) {
        // In throttle mode, if `delay` time has been exceeded, execute
        // `callback`.
        exec();
        
      } else if ( no_trailing !== true ) {
        // In trailing throttle mode, since `delay` time has not been
        // exceeded, schedule `callback` to execute `delay` ms after most
        // recent execution.
        // 
        // If `debounce_mode` is true (at_begin), schedule `clear` to execute
        // after `delay` ms.
        // 
        // If `debounce_mode` is false (at end), schedule `callback` to
        // execute after `delay` ms.
        timeout_id = setTimeout( debounce_mode ? clear : exec, debounce_mode === undefined ? delay - elapsed : delay );
      }
    };
    
    // Set the guid of `wrapper` function to the same of original callback, so
    // it can be removed in jQuery 1.4+ .unbind or .die by using the original
    // callback as a reference.
    if ( $.guid ) {
      wrapper.guid = callback.guid = callback.guid || $.guid++;
    }
    
    // Return the wrapper function.
    return wrapper;
  };
  
  // Method: jQuery.debounce
  // 
  // Debounce execution of a function. Debouncing, unlike throttling,
  // guarantees that a function is only executed a single time, either at the
  // very beginning of a series of calls, or at the very end. If you want to
  // simply rate-limit execution of a function, see the <jQuery.throttle>
  // method.
  // 
  // In this visualization, | is a debounced-function call and X is the actual
  // callback execution:
  // 
  // > Debounced with `at_begin` specified as false or unspecified:
  // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
  // >                          X                                 X
  // > 
  // > Debounced with `at_begin` specified as true:
  // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
  // > X                                 X
  // 
  // Usage:
  // 
  // > var debounced = jQuery.debounce( delay, [ at_begin, ] callback );
  // > 
  // > jQuery('selector').bind( 'someevent', debounced );
  // > jQuery('selector').unbind( 'someevent', debounced );
  // 
  // This also works in jQuery 1.4+:
  // 
  // > jQuery('selector').bind( 'someevent', jQuery.debounce( delay, [ at_begin, ] callback ) );
  // > jQuery('selector').unbind( 'someevent', callback );
  // 
  // Arguments:
  // 
  //  delay - (Number) A zero-or-greater delay in milliseconds. For event
  //    callbacks, values around 100 or 250 (or even higher) are most useful.
  //  at_begin - (Boolean) Optional, defaults to false. If at_begin is false or
  //    unspecified, callback will only be executed `delay` milliseconds after
  //    the last debounced-function call. If at_begin is true, callback will be
  //    executed only at the first debounced-function call. (After the
  //    throttled-function has not been called for `delay` milliseconds, the
  //    internal counter is reset)
  //  callback - (Function) A function to be executed after delay milliseconds.
  //    The `this` context and all arguments are passed through, as-is, to
  //    `callback` when the debounced-function is executed.
  // 
  // Returns:
  // 
  //  (Function) A new, debounced, function.
  
  $.debounce = function( delay, at_begin, callback ) {
    return callback === undefined
      ? jq_throttle( delay, at_begin, false )
      : jq_throttle( delay, callback, at_begin !== false );
  };
  
})(this);

/* Modernizr 2.6.2 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-svg-touch-shiv-cssclasses-teststyles-prefixes
 */
;window.Modernizr=function(a,b,c){function x(a){j.cssText=a}function y(a,b){return x(m.join(a+";")+(b||""))}function z(a,b){return typeof a===b}function A(a,b){return!!~(""+a).indexOf(b)}function B(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:z(f,"function")?f.bind(d||b):f}return!1}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n={svg:"http://www.w3.org/2000/svg"},o={},p={},q={},r=[],s=r.slice,t,u=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},v={}.hasOwnProperty,w;!z(v,"undefined")&&!z(v.call,"undefined")?w=function(a,b){return v.call(a,b)}:w=function(a,b){return b in a&&z(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=s.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(s.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(s.call(arguments)))};return e}),o.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:u(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},o.svg=function(){return!!b.createElementNS&&!!b.createElementNS(n.svg,"svg").createSVGRect};for(var C in o)w(o,C)&&(t=C.toLowerCase(),e[t]=o[C](),r.push((e[t]?"":"no-")+t));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)w(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},x(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=m,e.testStyles=u,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+r.join(" "):""),e}(this,this.document);
/*global jQuery */
/*jshint browser:true */
/*!
* FitVids 1.1
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
*/

(function( $ ){

  "use strict";

  $.fn.fitVids = function( options ) {
    var settings = {
      customSelector: null
    };

    if(!document.getElementById('fit-vids-style')) {
      // appendStyles: https://github.com/toddmotto/fluidvids/blob/master/dist/fluidvids.js
      var head = document.head || document.getElementsByTagName('head')[0];
      var css = '.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';
      var div = document.createElement('div');
      div.innerHTML = '<p>x</p><style id="fit-vids-style">' + css + '</style>';
      head.appendChild(div.childNodes[1]);
    }

    if ( options ) {
      $.extend( settings, options );
    }

    return this.each(function(){
      var selectors = [
        "iframe[src*='player.vimeo.com']",
        "iframe[src*='youtube.com']",
        "iframe[src*='youtube-nocookie.com']",
        "iframe[src*='kickstarter.com'][src*='video.html']",
        "object",
        "embed"
      ];

      if (settings.customSelector) {
        selectors.push(settings.customSelector);
      }

      var $allVideos = $(this).find(selectors.join(','));
      $allVideos = $allVideos.not("object object"); // SwfObj conflict patch

      $allVideos.each(function(){
        var $this = $(this);
        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }
        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),
            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),
            aspectRatio = height / width;
        if(!$this.attr('id')){
          var videoID = 'fitvid' + Math.floor(Math.random()*999999);
          $this.attr('id', videoID);
        }
        $this.wrap('<div class="fluid-width-video-wrapper"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+"%");
        $this.removeAttr('height').removeAttr('width');
      });
    });
  };
// Works with either jQuery or Zepto
})( window.jQuery || window.Zepto );

/*! http://mths.be/placeholder v2.0.9 by @mathias */
(function(factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD
		define(['jquery'], factory);
	} else {
		// Browser globals
		factory(jQuery);
	}
}(function($) {

	// Opera Mini v7 doesn’t support placeholder although its DOM seems to indicate so
	var isOperaMini = Object.prototype.toString.call(window.operamini) == '[object OperaMini]';
	var isInputSupported = 'placeholder' in document.createElement('input') && !isOperaMini;
	var isTextareaSupported = 'placeholder' in document.createElement('textarea') && !isOperaMini;
	var valHooks = $.valHooks;
	var propHooks = $.propHooks;
	var hooks;
	var placeholder;

	if (isInputSupported && isTextareaSupported) {

		placeholder = $.fn.placeholder = function() {
			return this;
		};

		placeholder.input = placeholder.textarea = true;

	} else {

		placeholder = $.fn.placeholder = function() {
			var $this = this;
			$this
				.filter((isInputSupported ? 'textarea' : ':input') + '[placeholder]')
				.not('.placeholder')
				.bind({
					'focus.placeholder': clearPlaceholder,
					'blur.placeholder': setPlaceholder
				})
				.data('placeholder-enabled', true)
				.trigger('blur.placeholder');
			return $this;
		};

		placeholder.input = isInputSupported;
		placeholder.textarea = isTextareaSupported;

		hooks = {
			'get': function(element) {
				var $element = $(element);

				var $passwordInput = $element.data('placeholder-password');
				if ($passwordInput) {
					return $passwordInput[0].value;
				}

				return $element.data('placeholder-enabled') && $element.hasClass('placeholder') ? '' : element.value;
			},
			'set': function(element, value) {
				var $element = $(element);

				var $passwordInput = $element.data('placeholder-password');
				if ($passwordInput) {
					return $passwordInput[0].value = value;
				}

				if (!$element.data('placeholder-enabled')) {
					return element.value = value;
				}
				if (value === '') {
					element.value = value;
					// Issue #56: Setting the placeholder causes problems if the element continues to have focus.
					if (element != safeActiveElement()) {
						// We can't use `triggerHandler` here because of dummy text/password inputs :(
						setPlaceholder.call(element);
					}
				} else if ($element.hasClass('placeholder')) {
					clearPlaceholder.call(element, true, value) || (element.value = value);
				} else {
					element.value = value;
				}
				// `set` can not return `undefined`; see http://jsapi.info/jquery/1.7.1/val#L2363
				return $element;
			}
		};

		if (!isInputSupported) {
			valHooks.input = hooks;
			propHooks.value = hooks;
		}
		if (!isTextareaSupported) {
			valHooks.textarea = hooks;
			propHooks.value = hooks;
		}

		$(function() {
			// Look for forms
			$(document).delegate('form', 'submit.placeholder', function() {
				// Clear the placeholder values so they don't get submitted
				var $inputs = $('.placeholder', this).each(clearPlaceholder);
				setTimeout(function() {
					$inputs.each(setPlaceholder);
				}, 10);
			});
		});

		// Clear placeholder values upon page reload
		$(window).bind('beforeunload.placeholder', function() {
			$('.placeholder').each(function() {
				this.value = '';
			});
		});

	}

	function args(elem) {
		// Return an object of element attributes
		var newAttrs = {};
		var rinlinejQuery = /^jQuery\d+$/;
		$.each(elem.attributes, function(i, attr) {
			if (attr.specified && !rinlinejQuery.test(attr.name)) {
				newAttrs[attr.name] = attr.value;
			}
		});
		return newAttrs;
	}

	function clearPlaceholder(event, value) {
		var input = this;
		var $input = $(input);
		if (input.value == $input.attr('placeholder') && $input.hasClass('placeholder')) {
			if ($input.data('placeholder-password')) {
				$input = $input.hide().nextAll('input[type="password"]:first').show().attr('id', $input.removeAttr('id').data('placeholder-id'));
				// If `clearPlaceholder` was called from `$.valHooks.input.set`
				if (event === true) {
					return $input[0].value = value;
				}
				$input.focus();
			} else {
				input.value = '';
				$input.removeClass('placeholder');
				input == safeActiveElement() && input.select();
			}
		}
	}

	function setPlaceholder() {
		var $replacement;
		var input = this;
		var $input = $(input);
		var id = this.id;
		if (input.value === '') {
			if (input.type === 'password') {
				if (!$input.data('placeholder-textinput')) {
					try {
						$replacement = $input.clone().attr({ 'type': 'text' });
					} catch(e) {
						$replacement = $('<input>').attr($.extend(args(this), { 'type': 'text' }));
					}
					$replacement
						.removeAttr('name')
						.data({
							'placeholder-password': $input,
							'placeholder-id': id
						})
						.bind('focus.placeholder', clearPlaceholder);
					$input
						.data({
							'placeholder-textinput': $replacement,
							'placeholder-id': id
						})
						.before($replacement);
				}
				$input = $input.removeAttr('id').hide().prevAll('input[type="text"]:first').attr('id', id).show();
				// Note: `$input[0] != input` now!
			}
			$input.addClass('placeholder');
			$input[0].value = $input.attr('placeholder');
		} else {
			$input.removeClass('placeholder');
		}
	}

	function safeActiveElement() {
		// Avoid IE9 `document.activeElement` of death
		// https://github.com/mathiasbynens/jquery-placeholder/pull/99
		try {
			return document.activeElement;
		} catch (exception) {}
	}

}));

/*!
 * hoverIntent v1.8.1 // 2014.08.11 // jQuery v1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */
 
/* hoverIntent is similar to jQuery's built-in "hover" method except that
 * instead of firing the handlerIn function immediately, hoverIntent checks
 * to see if the user's mouse has slowed down (beneath the sensitivity
 * threshold) before firing the event. The handlerOut function is only
 * called after a matching handlerIn.
 *
 * // basic usage ... just like .hover()
 * .hoverIntent( handlerIn, handlerOut )
 * .hoverIntent( handlerInOut )
 *
 * // basic usage ... with event delegation!
 * .hoverIntent( handlerIn, handlerOut, selector )
 * .hoverIntent( handlerInOut, selector )
 *
 * // using a basic configuration object
 * .hoverIntent( config )
 *
 * @param  handlerIn   function OR configuration object
 * @param  handlerOut  function OR selector for delegation OR undefined
 * @param  selector    selector OR undefined
 * @author Brian Cherne <brian(at)cherne(dot)net>
 */
(function($) {
    $.fn.hoverIntent = function(handlerIn,handlerOut,selector) {

        // default configuration values
        var cfg = {
            interval: 100,
            sensitivity: 6,
            timeout: 0
        };

        if ( typeof handlerIn === "object" ) {
            cfg = $.extend(cfg, handlerIn );
        } else if ($.isFunction(handlerOut)) {
            cfg = $.extend(cfg, { over: handlerIn, out: handlerOut, selector: selector } );
        } else {
            cfg = $.extend(cfg, { over: handlerIn, out: handlerIn, selector: handlerOut } );
        }

        // instantiate variables
        // cX, cY = current X and Y position of mouse, updated by mousemove event
        // pX, pY = previous X and Y position of mouse, set by mouseover and polling interval
        var cX, cY, pX, pY;

        // A private function for getting mouse position
        var track = function(ev) {
            cX = ev.pageX;
            cY = ev.pageY;
        };

        // A private function for comparing current and previous mouse position
        var compare = function(ev,ob) {
            ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
            // compare mouse positions to see if they've crossed the threshold
            if ( Math.sqrt( (pX-cX)*(pX-cX) + (pY-cY)*(pY-cY) ) < cfg.sensitivity ) {
                $(ob).off("mousemove.hoverIntent",track);
                // set hoverIntent state to true (so mouseOut can be called)
                ob.hoverIntent_s = true;
                return cfg.over.apply(ob,[ev]);
            } else {
                // set previous coordinates for next time
                pX = cX; pY = cY;
                // use self-calling timeout, guarantees intervals are spaced out properly (avoids JavaScript timer bugs)
                ob.hoverIntent_t = setTimeout( function(){compare(ev, ob);} , cfg.interval );
            }
        };

        // A private function for delaying the mouseOut function
        var delay = function(ev,ob) {
            ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
            ob.hoverIntent_s = false;
            return cfg.out.apply(ob,[ev]);
        };

        // A private function for handling mouse 'hovering'
        var handleHover = function(e) {
            // copy objects to be passed into t (required for event object to be passed in IE)
            var ev = $.extend({},e);
            var ob = this;

            // cancel hoverIntent timer if it exists
            if (ob.hoverIntent_t) { ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t); }

            // if e.type === "mouseenter"
            if (e.type === "mouseenter") {
                // set "previous" X and Y position based on initial entry point
                pX = ev.pageX; pY = ev.pageY;
                // update "current" X and Y position based on mousemove
                $(ob).on("mousemove.hoverIntent",track);
                // start polling interval (self-calling timeout) to compare mouse coordinates over time
                if (!ob.hoverIntent_s) { ob.hoverIntent_t = setTimeout( function(){compare(ev,ob);} , cfg.interval );}

                // else e.type == "mouseleave"
            } else {
                // unbind expensive mousemove event
                $(ob).off("mousemove.hoverIntent",track);
                // if hoverIntent state is true, then call the mouseOut function after the specified delay
                if (ob.hoverIntent_s) { ob.hoverIntent_t = setTimeout( function(){delay(ev,ob);} , cfg.timeout );}
            }
        };

        // listen for mouseenter and mouseleave
        return this.on({'mouseenter.hoverIntent':handleHover,'mouseleave.hoverIntent':handleHover}, cfg.selector);
    };
})(jQuery);

/*! Picturefill - Responsive Images that work today. (and mimic the proposed Picture element with span elements). Author: Scott Jehl, Filament Group, 2012 | License: MIT/GPLv2 */

(function( w ){

	// Enable strict mode
	"use strict";

	w.picturefill = function() {
		var ps = w.document.getElementsByTagName( "span" );

		// Loop the pictures
		for( var i = 0, il = ps.length; i < il; i++ ){
			if( ps[ i ].getAttribute( "data-picture" ) !== null ){

				var sources = ps[ i ].getElementsByTagName( "span" ),
					matches = [];

				// See if which sources match
				for( var j = 0, jl = sources.length; j < jl; j++ ){
					var media = sources[ j ].getAttribute( "data-media" );
					// if there's no media specified, OR w.matchMedia is supported 
					if( !media || ( w.matchMedia && w.matchMedia( media ).matches ) ){
						matches.push( sources[ j ] );
					}
				}

			// Find any existing img element in the picture element
			var picImg = ps[ i ].getElementsByTagName( "img" )[ 0 ];

			if( matches.length ){
				var matchedEl = matches.pop();
				if( !picImg || picImg.parentNode.nodeName === "NOSCRIPT" ){
					picImg = w.document.createElement( "img" );
					picImg.alt = ps[ i ].getAttribute( "data-alt" );
				}
				else if( matchedEl === picImg.parentNode ){
					// Skip further actions if the correct image is already in place
					continue;
				}

				picImg.src =  matchedEl.getAttribute( "data-src" );
				matchedEl.appendChild( picImg );
				picImg.removeAttribute("width");
				picImg.removeAttribute("height");
			}
			else if( picImg ){
				picImg.parentNode.removeChild( picImg );
			}
		}
		}
	};

	// Run on resize and domready (w.load as a fallback)
	if( w.addEventListener ){
		w.addEventListener( "resize", w.picturefill, false );
		w.addEventListener( "DOMContentLoaded", function(){
			w.picturefill();
			// Run once only
			w.removeEventListener( "load", w.picturefill, false );
		}, false );
		w.addEventListener( "load", w.picturefill, false );
	}
	else if( w.attachEvent ){
		w.attachEvent( "onload", w.picturefill );
	}

}( this ));

/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */

window.matchMedia || (window.matchMedia = function() {
    "use strict";

    // For browsers that support matchMedium api such as IE 9 and webkit
    var styleMedia = (window.styleMedia || window.media);

    // For those that don't support matchMedium
    if (!styleMedia) {
        var style       = document.createElement('style'),
            script      = document.getElementsByTagName('script')[0],
            info        = null;

        style.type  = 'text/css';
        style.id    = 'matchmediajs-test';

        script.parentNode.insertBefore(style, script);

        // 'style.currentStyle' is used by IE <= 8 and 'window.getComputedStyle' for all other browsers
        info = ('getComputedStyle' in window) && window.getComputedStyle(style, null) || style.currentStyle;

        styleMedia = {
            matchMedium: function(media) {
                var text = '@media ' + media + '{ #matchmediajs-test { width: 1px; } }';

                // 'style.styleSheet' is used by IE <= 8 and 'style.textContent' for all other browsers
                if (style.styleSheet) {
                    style.styleSheet.cssText = text;
                } else {
                    style.textContent = text;
                }

                // Test if media query is true or false
                return info.width === '1px';
            }
        };
    }

    return function(media) {
        return {
            matches: styleMedia.matchMedium(media || 'all'),
            media: media || 'all'
        };
    };
}());

/*!
 * enquire.js v2.1.2 - Awesome Media Queries in JavaScript
 * Copyright (c) 2014 Nick Williams - http://wicky.nillia.ms/enquire.js
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

;(function (name, context, factory) {
	var matchMedia = window.matchMedia;

	if (typeof module !== 'undefined' && module.exports) {
		module.exports = factory(matchMedia);
	}
	else if (typeof define === 'function' && define.amd) {
		define(function() {
			return (context[name] = factory(matchMedia));
		});
	}
	else {
		context[name] = factory(matchMedia);
	}
}('enquire', this, function (matchMedia) {

	'use strict';

    /*jshint unused:false */
    /**
     * Helper function for iterating over a collection
     *
     * @param collection
     * @param fn
     */
    function each(collection, fn) {
        var i      = 0,
            length = collection.length,
            cont;

        for(i; i < length; i++) {
            cont = fn(collection[i], i);
            if(cont === false) {
                break; //allow early exit
            }
        }
    }

    /**
     * Helper function for determining whether target object is an array
     *
     * @param target the object under test
     * @return {Boolean} true if array, false otherwise
     */
    function isArray(target) {
        return Object.prototype.toString.apply(target) === '[object Array]';
    }

    /**
     * Helper function for determining whether target object is a function
     *
     * @param target the object under test
     * @return {Boolean} true if function, false otherwise
     */
    function isFunction(target) {
        return typeof target === 'function';
    }

    /**
     * Delegate to handle a media query being matched and unmatched.
     *
     * @param {object} options
     * @param {function} options.match callback for when the media query is matched
     * @param {function} [options.unmatch] callback for when the media query is unmatched
     * @param {function} [options.setup] one-time callback triggered the first time a query is matched
     * @param {boolean} [options.deferSetup=false] should the setup callback be run immediately, rather than first time query is matched?
     * @constructor
     */
    function QueryHandler(options) {
        this.options = options;
        !options.deferSetup && this.setup();
    }
    QueryHandler.prototype = {

        /**
         * coordinates setup of the handler
         *
         * @function
         */
        setup : function() {
            if(this.options.setup) {
                this.options.setup();
            }
            this.initialised = true;
        },

        /**
         * coordinates setup and triggering of the handler
         *
         * @function
         */
        on : function() {
            !this.initialised && this.setup();
            this.options.match && this.options.match();
        },

        /**
         * coordinates the unmatch event for the handler
         *
         * @function
         */
        off : function() {
            this.options.unmatch && this.options.unmatch();
        },

        /**
         * called when a handler is to be destroyed.
         * delegates to the destroy or unmatch callbacks, depending on availability.
         *
         * @function
         */
        destroy : function() {
            this.options.destroy ? this.options.destroy() : this.off();
        },

        /**
         * determines equality by reference.
         * if object is supplied compare options, if function, compare match callback
         *
         * @function
         * @param {object || function} [target] the target for comparison
         */
        equals : function(target) {
            return this.options === target || this.options.match === target;
        }

    };
    /**
     * Represents a single media query, manages it's state and registered handlers for this query
     *
     * @constructor
     * @param {string} query the media query string
     * @param {boolean} [isUnconditional=false] whether the media query should run regardless of whether the conditions are met. Primarily for helping older browsers deal with mobile-first design
     */
    function MediaQuery(query, isUnconditional) {
        this.query = query;
        this.isUnconditional = isUnconditional;
        this.handlers = [];
        this.mql = matchMedia(query);

        var self = this;
        this.listener = function(mql) {
            self.mql = mql;
            self.assess();
        };
        this.mql.addListener(this.listener);
    }
    MediaQuery.prototype = {

        /**
         * add a handler for this query, triggering if already active
         *
         * @param {object} handler
         * @param {function} handler.match callback for when query is activated
         * @param {function} [handler.unmatch] callback for when query is deactivated
         * @param {function} [handler.setup] callback for immediate execution when a query handler is registered
         * @param {boolean} [handler.deferSetup=false] should the setup callback be deferred until the first time the handler is matched?
         */
        addHandler : function(handler) {
            var qh = new QueryHandler(handler);
            this.handlers.push(qh);

            this.matches() && qh.on();
        },

        /**
         * removes the given handler from the collection, and calls it's destroy methods
         * 
         * @param {object || function} handler the handler to remove
         */
        removeHandler : function(handler) {
            var handlers = this.handlers;
            each(handlers, function(h, i) {
                if(h.equals(handler)) {
                    h.destroy();
                    return !handlers.splice(i,1); //remove from array and exit each early
                }
            });
        },

        /**
         * Determine whether the media query should be considered a match
         * 
         * @return {Boolean} true if media query can be considered a match, false otherwise
         */
        matches : function() {
            return this.mql.matches || this.isUnconditional;
        },

        /**
         * Clears all handlers and unbinds events
         */
        clear : function() {
            each(this.handlers, function(handler) {
                handler.destroy();
            });
            this.mql.removeListener(this.listener);
            this.handlers.length = 0; //clear array
        },

        /*
         * Assesses the query, turning on all handlers if it matches, turning them off if it doesn't match
         */
        assess : function() {
            var action = this.matches() ? 'on' : 'off';

            each(this.handlers, function(handler) {
                handler[action]();
            });
        }
    };
    /**
     * Allows for registration of query handlers.
     * Manages the query handler's state and is responsible for wiring up browser events
     *
     * @constructor
     */
    function MediaQueryDispatch () {
        if(!matchMedia) {
            throw new Error('matchMedia not present, legacy browsers require a polyfill');
        }

        this.queries = {};
        this.browserIsIncapable = !matchMedia('only all').matches;
    }

    MediaQueryDispatch.prototype = {

        /**
         * Registers a handler for the given media query
         *
         * @param {string} q the media query
         * @param {object || Array || Function} options either a single query handler object, a function, or an array of query handlers
         * @param {function} options.match fired when query matched
         * @param {function} [options.unmatch] fired when a query is no longer matched
         * @param {function} [options.setup] fired when handler first triggered
         * @param {boolean} [options.deferSetup=false] whether setup should be run immediately or deferred until query is first matched
         * @param {boolean} [shouldDegrade=false] whether this particular media query should always run on incapable browsers
         */
        register : function(q, options, shouldDegrade) {
            var queries         = this.queries,
                isUnconditional = shouldDegrade && this.browserIsIncapable;

            if(!queries[q]) {
                queries[q] = new MediaQuery(q, isUnconditional);
            }

            //normalise to object in an array
            if(isFunction(options)) {
                options = { match : options };
            }
            if(!isArray(options)) {
                options = [options];
            }
            each(options, function(handler) {
                if (isFunction(handler)) {
                    handler = { match : handler };
                }
                queries[q].addHandler(handler);
            });

            return this;
        },

        /**
         * unregisters a query and all it's handlers, or a specific handler for a query
         *
         * @param {string} q the media query to target
         * @param {object || function} [handler] specific handler to unregister
         */
        unregister : function(q, handler) {
            var query = this.queries[q];

            if(query) {
                if(handler) {
                    query.removeHandler(handler);
                }
                else {
                    query.clear();
                    delete this.queries[q];
                }
            }

            return this;
        }
    };

	return new MediaQueryDispatch();

}));
/*!
 * Masonry PACKAGED v3.3.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */

!function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c("object"==typeof exports?require("jquery"):a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(window),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}.call(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a){function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){}function d(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=g.length;c>b;b++){var d=g[b];a[d]=0}return a}function e(c){function e(){if(!m){m=!0;var d=a.getComputedStyle;if(j=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){var c=a(b);return c||f("Style returned "+c+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),c}}(),k=c("boxSizing")){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[k]="border-box";var g=document.body||document.documentElement;g.appendChild(e);var h=j(e);l=200===b(h.width),g.removeChild(e)}}}function h(a){if(e(),"string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var c=j(a);if("none"===c.display)return d();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var h=f.isBorderBox=!(!k||!c[k]||"border-box"!==c[k]),m=0,n=g.length;n>m;m++){var o=g[m],p=c[o];p=i(a,p);var q=parseFloat(p);f[o]=isNaN(q)?0:q}var r=f.paddingLeft+f.paddingRight,s=f.paddingTop+f.paddingBottom,t=f.marginLeft+f.marginRight,u=f.marginTop+f.marginBottom,v=f.borderLeftWidth+f.borderRightWidth,w=f.borderTopWidth+f.borderBottomWidth,x=h&&l,y=b(c.width);y!==!1&&(f.width=y+(x?0:r+v));var z=b(c.height);return z!==!1&&(f.height=z+(x?0:s+w)),f.innerWidth=f.width-(r+v),f.innerHeight=f.height-(s+w),f.outerWidth=f.width+t,f.outerHeight=f.height+u,f}}function i(b,c){if(a.getComputedStyle||-1===c.indexOf("%"))return c;var d=b.style,e=d.left,f=b.runtimeStyle,g=f&&f.left;return g&&(f.left=b.currentStyle.left),d.left=c,c=d.pixelLeft,d.left=e,g&&(f.left=g),c}var j,k,l,m=!1;return h}var f="undefined"==typeof console?c:function(a){console.error(a)},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],e):"object"==typeof exports?module.exports=e(require("desandro-get-style-property")):a.getSize=e(a.getStyleProperty)}(window),function(a){function b(a){"function"==typeof a&&(b.isReady?a():g.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==f.readyState;b.isReady||c||d()}function d(){b.isReady=!0;for(var a=0,c=g.length;c>a;a++){var d=g[a];d()}}function e(e){return"complete"===f.readyState?d():(e.bind(f,"DOMContentLoaded",c),e.bind(f,"readystatechange",c),e.bind(a,"load",c)),b}var f=a.document,g=[];b.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):a.docReady=e(a.eventie)}(window),function(a){function b(a,b){return a[g](b)}function c(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function d(a,b){c(a);for(var d=a.parentNode.querySelectorAll(b),e=0,f=d.length;f>e;e++)if(d[e]===a)return!0;return!1}function e(a,d){return c(a),b(a,d)}var f,g=function(){if(a.matches)return"matches";if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0,d=b.length;d>c;c++){var e=b[c],f=e+"MatchesSelector";if(a[f])return f}}();if(g){var h=document.createElement("div"),i=b(h,"div");f=i?b:e}else f=d;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return f}):"object"==typeof exports?module.exports=f:window.matchesSelector=f}(Element.prototype),function(a,b){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("doc-ready"),require("desandro-matches-selector")):a.fizzyUIUtils=b(a,a.docReady,a.matchesSelector)}(window,function(a,b,c){var d={};d.extend=function(a,b){for(var c in b)a[c]=b[c];return a},d.modulo=function(a,b){return(a%b+b)%b};var e=Object.prototype.toString;d.isArray=function(a){return"[object Array]"==e.call(a)},d.makeArray=function(a){var b=[];if(d.isArray(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b},d.indexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},d.removeFrom=function(a,b){var c=d.indexOf(a,b);-1!=c&&a.splice(c,1)},d.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1==a.nodeType&&"string"==typeof a.nodeName},d.setText=function(){function a(a,c){b=b||(void 0!==document.documentElement.textContent?"textContent":"innerText"),a[b]=c}var b;return a}(),d.getParent=function(a,b){for(;a!=document.body;)if(a=a.parentNode,c(a,b))return a},d.getQueryElement=function(a){return"string"==typeof a?document.querySelector(a):a},d.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},d.filterFindElements=function(a,b){a=d.makeArray(a);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f];if(d.isElement(h))if(b){c(h,b)&&e.push(h);for(var i=h.querySelectorAll(b),j=0,k=i.length;k>j;j++)e.push(i[j])}else e.push(h)}return e},d.debounceMethod=function(a,b,c){var d=a.prototype[b],e=b+"Timeout";a.prototype[b]=function(){var a=this[e];a&&clearTimeout(a);var b=arguments,f=this;this[e]=setTimeout(function(){d.apply(f,b),delete f[e]},c||100)}},d.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()};var f=a.console;return d.htmlInit=function(c,e){b(function(){for(var b=d.toDashed(e),g=document.querySelectorAll(".js-"+b),h="data-"+b+"-options",i=0,j=g.length;j>i;i++){var k,l=g[i],m=l.getAttribute(h);try{k=m&&JSON.parse(m)}catch(n){f&&f.error("Error parsing "+h+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+n);continue}var o=new c(l,k),p=a.jQuery;p&&p.data(l,e,o)}})},d}),function(a,b){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(c,d,e,f){return b(a,c,d,e,f)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(a.Outlayer={},a.Outlayer.Item=b(a,a.EventEmitter,a.getSize,a.getStyleProperty,a.fizzyUIUtils))}(window,function(a,b,c,d,e){function f(a){for(var b in a)return!1;return b=null,!0}function g(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}function h(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}var i=a.getComputedStyle,j=i?function(a){return i(a,null)}:function(a){return a.currentStyle},k=d("transition"),l=d("transform"),m=k&&l,n=!!d("perspective"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[k],p=["transform","transition","transitionDuration","transitionProperty"],q=function(){for(var a={},b=0,c=p.length;c>b;b++){var e=p[b],f=d(e);f&&f!==e&&(a[e]=f)}return a}();e.extend(g.prototype,b.prototype),g.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.getSize=function(){this.size=c(this.element)},g.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=q[c]||c;b[d]=a[c]}},g.prototype.getPosition=function(){var a=j(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=a[c?"left":"right"],f=a[d?"top":"bottom"],g=this.layout.size,h=-1!=e.indexOf("%")?parseFloat(e)/100*g.width:parseInt(e,10),i=-1!=f.indexOf("%")?parseFloat(f)/100*g.height:parseInt(f,10);h=isNaN(h)?0:h,i=isNaN(i)?0:i,h-=c?g.paddingLeft:g.paddingRight,i-=d?g.paddingTop:g.paddingBottom,this.position.x=h,this.position.y=i},g.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={},d=b.isOriginLeft?"paddingLeft":"paddingRight",e=b.isOriginLeft?"left":"right",f=b.isOriginLeft?"right":"left",g=this.position.x+a[d];c[e]=this.getXValue(g),c[f]="";var h=b.isOriginTop?"paddingTop":"paddingBottom",i=b.isOriginTop?"top":"bottom",j=b.isOriginTop?"bottom":"top",k=this.position.y+a[h];c[i]=this.getYValue(k),c[j]="",this.css(c),this.emitEvent("layout",[this])},g.prototype.getXValue=function(a){var b=this.layout.options;return b.percentPosition&&!b.isHorizontal?a/this.layout.size.width*100+"%":a+"px"},g.prototype.getYValue=function(a){var b=this.layout.options;return b.percentPosition&&b.isHorizontal?a/this.layout.size.height*100+"%":a+"px"},g.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={};j.transform=this.getTranslate(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},g.prototype.getTranslate=function(a,b){var c=this.layout.options;return a=c.isOriginLeft?a:-a,b=c.isOriginTop?b:-b,n?"translate3d("+a+"px, "+b+"px, 0)":"translate("+a+"px, "+b+"px)"},g.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},g.prototype.moveTo=m?g.prototype._transitionTo:g.prototype.goTo,g.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},g.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},g.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var r="opacity,"+h(q.transform||"transform");g.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:r,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(o,this,!1))},g.prototype.transition=g.prototype[k?"_transition":"_nonTransition"],g.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},g.prototype.onotransitionend=function(a){this.ontransitionend(a)};var s={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};g.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,c=s[a.propertyName]||a.propertyName;if(delete b.ingProperties[c],f(b.ingProperties)&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd){var d=b.onEnd[c];d.call(this),delete b.onEnd[c]}this.emitEvent("transitionEnd",[this])}},g.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},g.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var t={transitionProperty:"",transitionDuration:""};return g.prototype.removeTransitionStyles=function(){this.css(t)},g.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},g.prototype.remove=function(){if(!k||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.once("transitionEnd",function(){a.removeElem()}),this.hide()},g.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty("visibleStyle");b[c]=this.onRevealTransitionEnd,this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},g.prototype.getHideRevealTransitionEndProperty=function(a){var b=this.layout.options[a];if(b.opacity)return"opacity";for(var c in b)return c},g.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty("hiddenStyle");b[c]=this.onHideTransitionEnd,this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},g.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},g}),function(a,b){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(c,d,e,f,g){return b(a,c,d,e,f,g)}):"object"==typeof exports?module.exports=b(a,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):a.Outlayer=b(a,a.eventie,a.EventEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)}(window,function(a,b,c,d,e,f){function g(a,b){var c=e.getQueryElement(a);if(!c)return void(h&&h.error("Bad element for "+this.constructor.namespace+": "+(c||a)));this.element=c,i&&(this.$element=i(this.element)),this.options=e.extend({},this.constructor.defaults),this.option(b);var d=++k;this.element.outlayerGUID=d,l[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var h=a.console,i=a.jQuery,j=function(){},k=0,l={};return g.namespace="outlayer",g.Item=f,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e.extend(g.prototype,c.prototype),g.prototype.option=function(a){e.extend(this.options,a)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},g.prototype._filterFindItemElements=function(a){return e.filterFindElements(a,this.options.itemSelector)},g.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=d(this.element)},g.prototype._getMeasurement=function(a,b){var c,f=this.options[a];f?("string"==typeof f?c=this.element.querySelector(f):e.isElement(f)&&(c=f),this[a]=c?d(c)[b]:f):this[a]=0},g.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},g.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},g.prototype._layoutItems=function(a,b){if(this._emitCompleteOnItems("layout",a),a&&a.length){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=this._getItemLayoutPosition(f);g.item=f,g.isInstant=b||f.isLayoutInstant,c.push(g)}this._processLayoutQueue(c)}},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},g.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},g.prototype._getContainerSize=j,g.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},g.prototype._emitCompleteOnItems=function(a,b){function c(){e.dispatchEvent(a+"Complete",null,[b])}function d(){g++,g===f&&c()}var e=this,f=b.length;if(!b||!f)return void c();for(var g=0,h=0,i=b.length;i>h;h++){var j=b[h];j.once(a,d)}},g.prototype.dispatchEvent=function(a,b,c){var d=b?[b].concat(c):c;if(this.emitEvent(a,d),i)if(this.$element=this.$element||i(this.element),b){var e=i.Event(b);e.type=a,this.$element.trigger(e,c)}else this.$element.trigger(a,c)},g.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},g.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},g.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},g.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e.removeFrom(this.stamps,d),this.unignore(d)}},g.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=e.makeArray(a)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},g.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},g.prototype._manageStamp=j,g.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,e=d(a),f={left:b.left-c.left-e.marginLeft,top:b.top-c.top-e.marginTop,right:c.right-b.right-e.marginRight,bottom:c.bottom-b.bottom-e.marginBottom};return f},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.bindResize=function(){this.isResizeBound||(b.bind(a,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&b.unbind(a,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var a=d(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},g.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},g.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},g.prototype.reveal=function(a){this._emitCompleteOnItems("reveal",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.reveal()}},g.prototype.hide=function(a){this._emitCompleteOnItems("hide",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.hide()}},g.prototype.revealItemElements=function(a){var b=this.getItems(a);this.reveal(b)},g.prototype.hideItemElements=function(a){var b=this.getItems(a);this.hide(b)},g.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},g.prototype.getItems=function(a){a=e.makeArray(a);for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c],g=this.getItem(f);g&&b.push(g)}return b},g.prototype.remove=function(a){var b=this.getItems(a);if(this._emitCompleteOnItems("remove",b),b&&b.length)for(var c=0,d=b.length;d>c;c++){var f=b[c];f.remove(),e.removeFrom(this.items,f)}},g.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize();var e=this.element.outlayerGUID;delete l[e],delete this.element.outlayerGUID,i&&i.removeData(this.element,this.constructor.namespace)},g.data=function(a){a=e.getQueryElement(a);var b=a&&a.outlayerGUID;return b&&l[b]},g.create=function(a,b){function c(){g.apply(this,arguments)}return Object.create?c.prototype=Object.create(g.prototype):e.extend(c.prototype,g.prototype),c.prototype.constructor=c,c.defaults=e.extend({},g.defaults),e.extend(c.defaults,b),c.prototype.settings={},c.namespace=a,c.data=g.data,c.Item=function(){f.apply(this,arguments)},c.Item.prototype=new f,e.htmlInit(c,a),i&&i.bridget&&i.bridget(a,c),c},g.Item=f,g}),function(a,b){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],b):"object"==typeof exports?module.exports=b(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):a.Masonry=b(a.Outlayer,a.getSize,a.fizzyUIUtils)}(window,function(a,b,c){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}var d=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,f=e/d,g=d-e%d,h=g&&1>g?"round":"floor";f=Math[h](f),this.cols=Math.max(f,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,d=b&&1>b?"round":"ceil",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c.indexOf(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d});
/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

(function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if("object"==typeof e){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if("object"===n)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)n=s[r][i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}).call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):e.eventie=o}(this),function(e,t){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return t(e,n,i)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){return"[object Array]"===d.call(e)}function o(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t}function s(e,t,n){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=o(e),this.options=i({},this.options),"function"==typeof t?n=t:i(this.options,t),n&&this.on("always",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred);var r=this;setTimeout(function(){r.check()})}function f(e){this.img=e}function c(e){this.src=e,v[e]=this}var a=e.jQuery,u=e.console,h=u!==void 0,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;s>o;o++){var f=r[o];this.addImage(f)}}},s.prototype.addImage=function(e){var t=new f(e);this.images.push(t)},s.prototype.check=function(){function e(e,r){return t.options.debug&&h&&u.log("confirm",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},a&&(a.fn.imagesLoaded=function(e,t){var n=new s(this,e,t);return n.jqDeferred.promise(a(this))}),f.prototype=new t,f.prototype.check=function(){var e=v[this.img.src]||new c(this.img.src);if(e.isConfirmed)return this.confirm(e.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var t=this;e.on("confirm",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()},f.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var v={};return c.prototype=new t,c.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},c.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},c.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},c.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this),n.unbind(e.target,"error",this)},s});
/*
 * Nivo Lightbox v1.2.0
 * http://dev7studios.com/nivo-lightbox
 *
 * Copyright 2013, Dev7studios
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */

;(function($, window, document, undefined){

    var pluginName = 'nivoLightbox',
        defaults = {
            effect: 'fade',
            theme: 'default',
            keyboardNav: true,
            clickOverlayToClose: true,
            onInit: function(){},
            beforeShowLightbox: function(){},
            afterShowLightbox: function(lightbox){},
            beforeHideLightbox: function(){},
            afterHideLightbox: function(){},
            onPrev: function(element){},
            onNext: function(element){},
            errorMessage: 'The requested content cannot be loaded. Please try again later.'
        };

    function NivoLightbox(element, options){
        this.el = element;
        this.$el = $(this.el);

        this.options = $.extend({}, defaults, options);

        this._defaults = defaults;
        this._name = pluginName;

        this.init();
    }

    NivoLightbox.prototype = {

        init: function(){
			var $this = this;

			// Need this so we don't use CSS transitions in mobile
			if(!$('html').hasClass('nivo-lightbox-notouch')) $('html').addClass('nivo-lightbox-notouch');
			if('ontouchstart' in document) $('html').removeClass('nivo-lightbox-notouch');

			// Setup the click
            this.$el.on('click', function(e){
                $this.showLightbox(e);
            });

            // keyboardNav
            if(this.options.keyboardNav){
                $('body').off('keyup').on('keyup', function(e){
                    var code = (e.keyCode ? e.keyCode : e.which);
                    // Escape
                    if(code == 27) $this.destructLightbox();
                    // Left
                    if(code == 37) $('.nivo-lightbox-prev').trigger('click');
                    // Right
                    if(code == 39) $('.nivo-lightbox-next').trigger('click');
				});
			}

			this.options.onInit.call(this);

        },

        showLightbox: function(e){
            var $this = this,
                currentLink = this.$el;

			// Check content
			var check = this.checkContent(currentLink);
			if(!check) return;

			e.preventDefault();
            this.options.beforeShowLightbox.call(this);
            var lightbox = this.constructLightbox();
            if(!lightbox) return;
            var content = lightbox.find('.nivo-lightbox-content');
            if(!content) return;

            $('body').addClass('nivo-lightbox-body-effect-'+ this.options.effect);

			this.processContent( content, currentLink );

            // Nav
            if(this.$el.attr('data-lightbox-gallery')){
                var galleryItems = $('[data-lightbox-gallery="'+ this.$el.attr('data-lightbox-gallery') +'"]');

                $('.nivo-lightbox-nav').show();

				// Prev
                $('.nivo-lightbox-prev').off('click').on('click', function(e){
                    e.preventDefault();
                    var index = galleryItems.index(currentLink);
                    currentLink = galleryItems.eq(index - 1);
                    if(!$(currentLink).length) currentLink = galleryItems.last();
                    $this.processContent(content, currentLink);
                    $this.options.onPrev.call(this, [ currentLink ]);
                });

                // Next
                $('.nivo-lightbox-next').off('click').on('click', function(e){
                    e.preventDefault();
                    var index = galleryItems.index(currentLink);
                    currentLink = galleryItems.eq(index + 1);
                    if(!$(currentLink).length) currentLink = galleryItems.first();
                    $this.processContent(content, currentLink);
                    $this.options.onNext.call(this, [ currentLink ]);
                });
            }

            setTimeout(function(){
                lightbox.addClass('nivo-lightbox-open');
                $this.options.afterShowLightbox.call(this, [ lightbox ]);
            }, 1); // For CSS transitions
        },

		checkContent: function( link ) {
			var $this = this,
                href = link.attr('href'),
                video = href.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/);

            if(href.match(/\.(jpeg|jpg|gif|png)$/i) !== null){
				return true;
			}
			// Video (Youtube/Vimeo)
            else if(video){
				return true;
			}
			// AJAX
			else if(link.attr('data-lightbox-type') == 'ajax'){
				return true;
			}
			// Inline HTML
			else if(href.substring(0, 1) == '#' && link.attr('data-lightbox-type') == 'inline'){
				return true;
			}
			// iFrame (default)
			else if(link.attr('data-lightbox-type') == 'iframe'){
				return true;
			}

			return false;
		},

        processContent: function(content, link){
            var $this = this,
                href = link.attr('href'),
                video = href.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/);

            content.html('').addClass('nivo-lightbox-loading');

            // Is HiDPI?
            if(this.isHidpi() && link.attr('data-lightbox-hidpi')){
                href = link.attr('data-lightbox-hidpi');
            }

            // Image
            if(href.match(/\.(jpeg|jpg|gif|png)$/i) !== null){
                var img = $('<img>', { src: href });
                img.one('load', function() {
					var wrap = $('<div class="nivo-lightbox-image" />');
                    wrap.append(img);
					content.html(wrap).removeClass('nivo-lightbox-loading');

					// Vertically center images
					wrap.css({
						'line-height': $('.nivo-lightbox-content').height() +'px',
						'height': $('.nivo-lightbox-content').height() +'px' // For Firefox
					});
					$(window).resize(function() {
						wrap.css({
							'line-height': $('.nivo-lightbox-content').height() +'px',
							'height': $('.nivo-lightbox-content').height() +'px' // For Firefox
						});
					});
				}).each(function() {
					if(this.complete) $(this).load();
				});

				img.error(function() {
					var wrap = $('<div class="nivo-lightbox-error"><p>'+ $this.options.errorMessage +'</p></div>');
                    content.html(wrap).removeClass('nivo-lightbox-loading');
				});
            }
            // Video (Youtube/Vimeo)
            else if(video){
                var src = '',
                    classTerm = 'nivo-lightbox-video';

                if(video[1] == 'youtube'){
                    src = 'http://www.youtube.com/embed/'+ video[4];
                    classTerm = 'nivo-lightbox-youtube';
                }
                if(video[1] == 'youtu'){
                    src = 'http://www.youtube.com/embed/'+ video[3];
                    classTerm = 'nivo-lightbox-youtube';
                }
                if(video[1] == 'vimeo'){
                    src = 'http://player.vimeo.com/video/'+ video[3];
                    classTerm = 'nivo-lightbox-vimeo';
                }

                if(src){
                    var iframeVideo = $('<iframe>', {
                        src: src,
                        'class': classTerm,
                        frameborder: 0,
                        vspace: 0,
                        hspace: 0,
                        scrolling: 'auto'
                    });
                    content.html(iframeVideo);
                    iframeVideo.load(function(){ content.removeClass('nivo-lightbox-loading'); });
                }
            }
            // AJAX
            else if(link.attr('data-lightbox-type') == 'ajax'){
				$.ajax({
					url: href,
					cache: false,
					success: function(data) {
						var wrap = $('<div class="nivo-lightbox-ajax" />');
						wrap.append(data);
						content.html(wrap).removeClass('nivo-lightbox-loading');

						// Vertically center html
						if(wrap.outerHeight() < content.height()){
							wrap.css({
								'position': 'relative',
								'top': '50%',
								'margin-top': -(wrap.outerHeight()/2) +'px'
							});
						}
						$(window).resize(function() {
							if(wrap.outerHeight() < content.height()){
								wrap.css({
									'position': 'relative',
									'top': '50%',
									'margin-top': -(wrap.outerHeight()/2) +'px'
								});
							}
						});
					},
					error: function(){
						var wrap = $('<div class="nivo-lightbox-error"><p>'+ $this.options.errorMessage +'</p></div>');
                        content.html(wrap).removeClass('nivo-lightbox-loading');
					}
				});
            }
            // Inline HTML
            else if(href.substring(0, 1) == '#' && link.attr('data-lightbox-type') == 'inline'){
                if($(href).length){
                    var wrap = $('<div class="nivo-lightbox-inline" />');
					wrap.append($(href).clone().show());
                    content.html(wrap).removeClass('nivo-lightbox-loading');

                    // Vertically center html
					if(wrap.outerHeight() < content.height()){
						wrap.css({
							'position': 'relative',
							'top': '50%',
							'margin-top': -(wrap.outerHeight()/2) +'px'
						});
					}
					$(window).resize(function() {
						if(wrap.outerHeight() < content.height()){
							wrap.css({
								'position': 'relative',
								'top': '50%',
								'margin-top': -(wrap.outerHeight()/2) +'px'
							});
						}
					});
				} else {
					var wrapError = $('<div class="nivo-lightbox-error"><p>'+ $this.options.errorMessage +'</p></div>');
                    content.html(wrapError).removeClass('nivo-lightbox-loading');
				}
            }
            // iFrame (default)
            else if(link.attr('data-lightbox-type') == 'iframe'){
                var iframe = $('<iframe>', {
                    src: href,
                    'class': 'nivo-lightbox-item',
                    frameborder: 0,
                    vspace: 0,
                    hspace: 0,
                    scrolling: 'auto'
                });
                content.html(iframe);
                iframe.load(function(){ content.removeClass('nivo-lightbox-loading'); });
            } else {
				return false;
			}

            // Set the title
            if(link.attr('title')){
                var titleWrap = $('<span>', { 'class': 'nivo-lightbox-title' });
                titleWrap.text(link.attr('title'));
                $('.nivo-lightbox-title-wrap').html(titleWrap);
            } else {
                $('.nivo-lightbox-title-wrap').html('');
            }
        },

        constructLightbox: function(){
            if($('.nivo-lightbox-overlay').length) return $('.nivo-lightbox-overlay');

            var overlay = $('<div>', { 'class': 'nivo-lightbox-overlay nivo-lightbox-theme-'+ this.options.theme +' nivo-lightbox-effect-'+ this.options.effect });
            var wrap = $('<div>', { 'class': 'nivo-lightbox-wrap' });
            var content = $('<div>', { 'class': 'nivo-lightbox-content' });
            var nav = $('<a href="#" class="nivo-lightbox-nav nivo-lightbox-prev">Previous</a><a href="#" class="nivo-lightbox-nav nivo-lightbox-next">Next</a>');
            var close = $('<a href="#" class="nivo-lightbox-close" title="Close">Close</a>');
            var title = $('<div>', { 'class': 'nivo-lightbox-title-wrap' });

            var isMSIE = /*@cc_on!@*/0;
            if(isMSIE) overlay.addClass('nivo-lightbox-ie');

            wrap.append(content);
            wrap.append(title);
            overlay.append(wrap);
            overlay.append(nav);
            overlay.append(close);
            $('body').append(overlay);

            var $this = this;
            if($this.options.clickOverlayToClose){
                overlay.on('click', function(e){
                    if(e.target === this || $(e.target).hasClass('nivo-lightbox-content') || $(e.target).hasClass('nivo-lightbox-image')){
                        $this.destructLightbox();
                    }
                });
            }

            close.on('click', function(e){
                e.preventDefault();
                $this.destructLightbox();
            });

            return overlay;
        },

        destructLightbox: function(){
            var $this = this;
            this.options.beforeHideLightbox.call(this);

            $('.nivo-lightbox-overlay').removeClass('nivo-lightbox-open');
            $('.nivo-lightbox-nav').hide();
            $('body').removeClass('nivo-lightbox-body-effect-'+ $this.options.effect);

            // For IE
            var isMSIE = /*@cc_on!@*/0;
            if(isMSIE){
                $('.nivo-lightbox-overlay iframe').attr("src", " ");
                $('.nivo-lightbox-overlay iframe').remove();
            }

            // Remove click handlers
            $('.nivo-lightbox-prev').off('click');
            $('.nivo-lightbox-next').off('click');

            // Empty content (for videos)
            $('.nivo-lightbox-content').empty();

            this.options.afterHideLightbox.call(this);
        },

        isHidpi: function(){
			var mediaQuery = "(-webkit-min-device-pixel-ratio: 1.5),\
                              (min--moz-device-pixel-ratio: 1.5),\
                              (-o-min-device-pixel-ratio: 3/2),\
                              (min-resolution: 1.5dppx)";
			if(window.devicePixelRatio > 1) return true;
			if(window.matchMedia && window.matchMedia(mediaQuery).matches) return true;
			return false;
		}

    };

    $.fn[pluginName] = function(options){
        return this.each(function(){
            if(!$.data(this, pluginName)){
                $.data(this, pluginName, new NivoLightbox(this, options));
            }
        });
    };

})(jQuery, window, document);

/*
 * RoyalSlider
 *
 * @version 9.4.6:
 *
 * Copyright 2011-2012, Dmitry Semenov
 *
 */
(function($) {
	if(!$.rsModules) {
		$.rsModules = {uid:0};
	}


	function RoyalSlider(element, options) {
		var i,
			self = this,
			ua = navigator.userAgent.toLowerCase();

		self.uid = $.rsModules.uid++;
		self.ns = '.rs' + self.uid; // unique namespace for events

		// feature detection, some ideas taken from Modernizr
		var tempStyle = document.createElement('div').style,
			vendors = ['webkit','Moz','ms','O'],
			vendor = '',
			lastTime = 0,
			tempV;

		for (i = 0; i < vendors.length; i++ ) {
			tempV = vendors[i];
			if (!vendor && (tempV + 'Transform') in tempStyle ) {
				vendor = tempV;
			}
			tempV = tempV.toLowerCase();
			
			if(!window.requestAnimationFrame) {
				window.requestAnimationFrame = window[tempV+'RequestAnimationFrame'];
       			window.cancelAnimationFrame = window[tempV+'CancelAnimationFrame'] 
                                   || window[tempV+'CancelRequestAnimationFrame'];
			}
		}

 		// requestAnimationFrame polyfill by Erik Möller
		// fixes from Paul Irish and Tino Zijdel
	    if (!window.requestAnimationFrame) {
	        window.requestAnimationFrame = function(callback, element) {
	            var currTime = new Date().getTime(),
	            	timeToCall = Math.max(0, 16 - (currTime - lastTime)),
	            	id = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);
	            lastTime = currTime + timeToCall;
	            return id;
	        };
	    }
	    if (!window.cancelAnimationFrame) 
	    	window.cancelAnimationFrame = function(id) { clearTimeout(id); };

	    self.isIPAD = ua.match(/(ipad)/);


	    // browser UA sniffing, sadly still required
	    var uaMatch = function( ua ) {
		    var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
		        /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
		        /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
		        /(msie) ([\w.]+)/.exec( ua ) ||
		        ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
		        [];

		    return {
		        browser: match[ 1 ] || "",
		        version: match[ 2 ] || "0"
		    };
		};
		var matched = uaMatch( ua );
		var br = {};
		if ( matched.browser ) {
		    br[ matched.browser ] = true;
		    br.version = matched.version;
		}
		if(br.chrome) { br.webkit = true; };
		self._browser = br;



	    self.slider = $(element); // DOM reference
		self.ev = $(self); // event object
		self._doc = $(document);
		self.st = $.extend({}, $.fn.royalSlider.defaults, options); 
		self._currAnimSpeed = self.st.transitionSpeed;
 		self._minPosOffset = 0;
		if(self.st.allowCSS3) {
			if((!br.webkit || self.st.allowCSS3OnWebkit) ) {
		    	var bT = vendor + (vendor ? 'T' : 't' );
		    	self._useCSS3Transitions = ( (bT + 'ransform') in tempStyle ) && ( (bT + 'ransition') in tempStyle );
			    if(self._useCSS3Transitions) {
			    	self._use3dTransform = (vendor + (vendor ? 'P' : 'p'  ) + 'erspective') in tempStyle;
			    }
		    }
		}
	    
	    vendor = vendor.toLowerCase();
	    self._vendorPref = '-'+vendor+'-';
		
		self._slidesHorizontal = (self.st.slidesOrientation === 'vertical') ? false : true;
		self._reorderProp = self._slidesHorizontal ? 'left' : 'top';
		self._sizeProp = self._slidesHorizontal ? 'width' : 'height';
		self._prevNavItemId = -1;
		self._isMove = (self.st.transitionType === 'fade') ? false : true;
		if(!self._isMove) {
			self.st.sliderDrag = false;
			self._fadeZIndex = 10;
		}
		self._opacityCSS = 'z-index:0; display:none; opacity:0;';

		self._newSlideId = 0;
		self._sPosition = 0;
		self._nextSlidePos = 0;

		// init modules
		$.each($.rsModules, function (helper, opts) {
			if(helper !== 'uid')
				opts.call(self);
		});

		// parse all slides
		self.slides = [];
		self._idCount = 0;
		var returnVal;
		var ts = self.st.slides ? $(self.st.slides) : self.slider.children().detach();
		
		ts.each(function() {
			self._parseNode(this, true);
		});

		if(self.st.randomizeSlides) {
	    	self.slides.sort(function() { return 0.5 - Math.random() });
	    }
		self.numSlides = self.slides.length;
		self._refreshNumPreloadImages();

		if(!self.st.startSlideId) {
			self.st.startSlideId = 0;
		} else if(self.st.startSlideId > self.numSlides - 1) {
			self.st.startSlideId = self.numSlides - 1;
		}

		self._newSlideId = self.staticSlideId = self.currSlideId = self._realId =  self.st.startSlideId;
		self.currSlide = self.slides[self.currSlideId];

		self._accelerationPos = 0;
		self.msTouch = false;
		self.slider.addClass( (self._slidesHorizontal ? 'rsHor' : 'rsVer') + (self._isMove ? '' : ' rsFade') );

		var sliderHTML = '<div class="rsOverflow"><div class="rsContainer">';
		self.slidesSpacing = self.st.slidesSpacing;
		self._slideSize = ( self._slidesHorizontal ? self.slider.width() : self.slider.height() ) + self.st.slidesSpacing;

		self._preload = Boolean(self._numPreloadImages > 0);
		
		if(self.numSlides <= 1) {
			self._loop = false;
		}
		var loopHelpers = (self._loop && self._isMove) ? ( self.numSlides === 2 ? 1 : 2) : 0;
		self._loopHelpers = loopHelpers;

		self._maxImages = self.numSlides < 6 ? self.numSlides : 6;
		self._currBlockIndex = 0;


		self._idOffset = 0;
		self.slidesJQ = [];
		
		for(i =0; i < self.numSlides; i++) {
			self.slidesJQ.push( $(createItemHTML(i)) );
		}
		self._sliderOverflow = sliderHTML = $(sliderHTML + '</div></div>');


		var addCursors = function() {
			if(self.st.sliderDrag) {
				self._hasDrag = true;
				if (br.msie || br.opera) {
					self._grabCursor = self._grabbingCursor = "move";
				} else if(br.mozilla) {
					self._grabCursor = "-moz-grab";
					self._grabbingCursor = "-moz-grabbing";
				} else if(br.webkit && (navigator.platform.indexOf("Mac")!=-1)) {
					self._grabCursor = "-webkit-grab";
					self._grabbingCursor = "-webkit-grabbing";
				}
				self._setGrabCursor();
			}
		};
		var rsNS = self.ns;
		var addEventNames = function(pref, down, move, up, cancel) {
			self._downEvent = pref + down + rsNS;
			self._moveEvent = pref + move + rsNS;
			self._upEvent = pref + up + rsNS;
			if(cancel)
				self._cancelEvent = pref + cancel + rsNS;
		};


		// ie10
		self.msEnabled = window.navigator.msPointerEnabled;

		if(self.msEnabled) {
			self.msTouch = Boolean(window.navigator.msMaxTouchPoints > 1);
			self.hasTouch = false;
			self._lastItemFriction = 0.2;
			
			addEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');
		} else {
			addEventNames('mouse', 'down', 'move', 'up', 'up');

			if('ontouchstart' in window || 'createTouch' in document) {
				self.hasTouch = true;
				self._downEvent += ' touchstart' + rsNS;
				self._moveEvent += ' touchmove' + rsNS;
				self._upEvent += ' touchend' + rsNS;
				self._cancelEvent += ' touchcancel' + rsNS;
				self._lastItemFriction = 0.5;
				if(self.st.sliderTouch) {
					self._hasDrag = true;
				}
			} else {
				self.hasTouch = false;
				self._lastItemFriction = 0.2;
			}
		}
		addCursors();
	
		self.slider.html(sliderHTML);

		
		self._controlsContainer = self.st.controlsInside ? self._sliderOverflow : self.slider;
		
		self._slidesContainer = self._sliderOverflow.children('.rsContainer');
		if(self.msEnabled) {
			self._slidesContainer.css('-ms-touch-action', self._slidesHorizontal ? 'pan-y' : 'pan-x');
		}
		self._preloader = $('<div class="rsPreloader"></div>');
		var slides = self._slidesContainer.children('.rsSlide');

		self._currHolder = self.slidesJQ[self.currSlideId]
		self._selectedSlideHolder = 0;

		function createItemHTML(i, className) {
			return '<div style="'+ (self._isMove ? '' : (i !== self.currSlideId  ? self._opacityCSS : 'z-index:0;') ) +'" class="rsSlide '+ (className || '')+'"></div>';
		}
		
		if(self._useCSS3Transitions) {

			// some constants for CSS3
			self._TP = 'transition-property';
			self._TD = 'transition-duration';
			self._TTF = 'transition-timing-function';

			self._yProp = self._xProp = self._vendorPref +'transform';

			if(self._use3dTransform) {
				if(br.webkit) {
					self.slider.addClass('rsWebkit3d');
				}

				self._tPref1 = 'translate3d(';
				self._tPref2 = 'px, ';
				self._tPref3 = 'px, 0px)';
			} else {
				self._tPref1 = 'translate(';
				self._tPref2 = 'px, ';
				self._tPref3 = 'px)';
			}
			if(!self._isMove) {
				var animObj = {};
				animObj[(self._vendorPref + self._TP)] = 'opacity';
				animObj[(self._vendorPref + self._TD)] = self.st.transitionSpeed + 'ms';
				animObj[(self._vendorPref + self._TTF)] = self.st.css3easeInOut;
				slides.css(animObj);
			} else {
				self._slidesContainer[(self._vendorPref + self._TP)] = (self._vendorPref + 'transform');
			}
			

		} else {
			self._xProp = 'left';
			self._yProp = 'top';
		}

		

		// window resize
		var resizeTimer;
		$(window).on('resize'+self.ns, function() {	
			if(resizeTimer) {
				clearTimeout(resizeTimer);			
			}
			resizeTimer = setTimeout(function() { self.updateSliderSize(); }, 50);			
		});	
		self.ev.trigger('rsAfterPropsSetup'); // navigation (bullets, thumbs...) are created here

		self.updateSliderSize();


		// keyboard nav
		if(self.st.keyboardNavEnabled) {
			self._bindKeyboardNav();
		}

		if(self.st.arrowsNavHideOnTouch && (self.hasTouch || self.msTouch) ) {
			self.st.arrowsNav = false;
		}

		//Direction navigation (arrows)
		if(self.st.arrowsNav) {
			var rArr = 'rsArrow',
				container = self._controlsContainer;
			$('<div class="'+rArr+' '+rArr+'Left"><div class="'+rArr+'Icn"></div></div><div class="'+rArr+' '+rArr+'Right"><div class="'+rArr+'Icn"></div></div>').appendTo(container);

			self._arrowLeft = container.children('.'+rArr+'Left').click(function(e) {
				e.preventDefault();
				self.prev();
			});
			self._arrowRight = container.children('.'+rArr+'Right').click(function(e) {
				e.preventDefault();
				self.next();
			});

			if(self.st.arrowsNavAutoHide && !self.hasTouch) {
				self._arrowLeft.addClass('rsHidden');
				self._arrowRight.addClass('rsHidden');

				var hoverEl = container;
				hoverEl.one("mousemove.arrowshover",function() {
					self._arrowLeft.removeClass('rsHidden');
					self._arrowRight.removeClass('rsHidden');			
				});


				hoverEl.hover(
					function() {
						if(!self._arrowsAutoHideLocked) {
							self._arrowLeft.removeClass('rsHidden');
							self._arrowRight.removeClass('rsHidden');
						}
					},
					function() {
						if(!self._arrowsAutoHideLocked) {
							self._arrowLeft.addClass('rsHidden');
							self._arrowRight.addClass('rsHidden');
						}
					}
				);	
			}	
			self.ev.on('rsOnUpdateNav', function() {
				self._updateArrowsNav();
			});
			self._updateArrowsNav();
		}

			
		
		if( self._hasDrag ) {
			self._slidesContainer.on(self._downEvent, function(e) { self._onDragStart(e); });	
		} else {
			self.dragSuccess = false;
		}
		var videoClasses = ['rsPlayBtnIcon', 'rsPlayBtn', 'rsCloseVideoBtn', 'rsCloseVideoIcn'];
		self._slidesContainer.click(function(e) {
			if(!self.dragSuccess) {
				var t = $(e.target);
				var tClass = t.attr('class');
				if( $.inArray(tClass, videoClasses) !== -1) {
			        if( self.toggleVideo() ) {
						return false;
					}
			    }
				if(self.st.navigateByClick && !self._blockActions) {
					if($(e.target).closest('.rsNoDrag', self._currHolder).length) {
						 return true;
					}
					self._mouseNext(e);
				} 
				self.ev.trigger('rsSlideClick');
			} 
		}).on('click.rs', 'a', function(e) {	
			if(self.dragSuccess) {						
				return false;
			} else {
				self._blockActions = true;
				//e.stopPropagation();
				//e.stopImmediatePropagation();
				setTimeout(function() {
					self._blockActions = false;
				}, 3);
			}
		});
		self.ev.trigger('rsAfterInit');
	} /* RoyalSlider Constructor End */

	/**
	 *
	 * RoyalSlider Core Prototype
	 * 
	 */
	RoyalSlider.prototype = {
		constructor: RoyalSlider,
		_mouseNext: function(e) {
			var self = this,
				relativePos = e[self._slidesHorizontal ? 'pageX' : 'pageY'] - self._sliderOffset;

		  	if(relativePos >= self._nextSlidePos) {
		  		self.next();
		  	} else if(relativePos < 0) {
		  		self.prev();
		  	}
		},
		_refreshNumPreloadImages: function() {
			var self = this,
				n;
			n = self.st.numImagesToPreload;
			self._loop = self.st.loop;

			if(self._loop) {
				if(self.numSlides === 2) {
					self._loop = false;
					self.st.loopRewind = true;
				} else if(self.numSlides < 2) {
					self.st.loopRewind = self._loop = false;
				}
				
			}
			if(self._loop && n > 0) {
				if(self.numSlides <= 4) {
					n = 1;
				} else {
					if(self.st.numImagesToPreload > (self.numSlides - 1) / 2 ) {
						n = Math.floor( (self.numSlides - 1) / 2 );
					}
				} 
			}
			self._numPreloadImages = n;
		},
		_parseNode: function(content, pushToSlides) {
			var self = this,
				hasImg,
				isRoot,
				hasCover,
				obj = {},
				tempEl,
				first = true;
			content = $(content);
			self._currContent = content;
			self.ev.trigger('rsBeforeParseNode', [content, obj]);
			if(obj.stopParsing) {
				return;
			}
			content = self._currContent;
			obj.id = self._idCount;
			obj.contentAdded = false;
			self._idCount++;
			obj.images = [];
			obj.isBig = false;

			if(!obj.hasCover) {
				if(content.hasClass('rsImg')) {
					tempEl = content;
					hasImg = true;
				} else {
					tempEl = content.find('.rsImg');
					if(tempEl.length) {
						hasImg = true;
					}
				}

				if(hasImg) {
					obj.bigImage = tempEl.eq(0).attr('data-rsBigImg');
					tempEl.each(function() {
						var item = $(this);
						if(item.is('a')) {
							parseEl(item, 'href');
						} else if(item.is('img')) {
							parseEl(item, 'src');
						} else {
							parseEl(item);
						}
					});
				} else if(content.is('img')) {
					content.addClass('rsImg rsMainSlideImage');
					parseEl(content, 'src');
				}
			}
			tempEl = content.find('.rsCaption');
			if(tempEl.length) {
				obj.caption = tempEl.remove();
			}
			obj.content = content;

			self.ev.trigger('rsAfterParseNode', [content, obj]);
			function parseEl(el, s) {
				if(s) {
					obj.images.push( el.attr(s) );
				} else {
					obj.images.push( el.text() );
				}
				if(first) {
					first = false;
					obj.caption = (s === 'src') ? el.attr('alt') : el.contents();
					obj.image = obj.images[0];
					obj.videoURL = el.attr('data-rsVideo');
					
					
					var wAtt = el.attr('data-rsw'),
						hAtt = el.attr('data-rsh');
					if (typeof wAtt !== 'undefined' && wAtt !== false && typeof hAtt !== 'undefined' && hAtt !== false ) {
						   obj.iW = parseInt(wAtt);
						   obj.iH = parseInt(hAtt);
					} else if(self.st.imgWidth && self.st.imgHeight ) {
						obj.iW = self.st.imgWidth;
						obj.iH = self.st.imgHeight;
					}
				}
			}
			if(pushToSlides) {
				self.slides.push(obj);
			}
			if(obj.images.length === 0) {
				obj.isLoaded = true;
				obj.isRendered = false;
				obj.isLoading = false;
				obj.images = null;
			}
			return obj;
		},
		_bindKeyboardNav: function() {
			var self = this,
				interval,
				keyCode,
				onKeyboardAction = function (keyCode) {
				    if (keyCode === 37) {
						self.prev();
					} else if (keyCode === 39) {
						self.next();
					}
				};

			self._doc.on('keydown' + self.ns, function(e) {
				if(!self._isDragging) {
					keyCode = e.keyCode;
					if(keyCode === 37 || keyCode === 39) {
						if(!interval) {
					        onKeyboardAction(keyCode);
					        interval = setInterval(function() {
					            onKeyboardAction(keyCode);
					        }, 700);
					    }
					}
				}
			}).on('keyup' + self.ns, function(e) {
				if(interval) {
					clearInterval(interval); 
			   	    interval = null;
				}
			});

			
			
		},




		goTo: function(id, notUserAction) {
			var self = this;
			if(id !== self.currSlideId) {
				self._moveTo(id,self.st.transitionSpeed, true, !notUserAction);
			}
		},
		destroy: function(remove) {
			var self = this;
			self.ev.trigger('rsBeforeDestroy');
			self._doc.off('keydown' +self.ns+ ' keyup' + self.ns + ' ' + self._moveEvent +' '+ self._upEvent );
			self._slidesContainer.off(self._downEvent + ' click');	
			self.slider.data('royalSlider', null);
			$.removeData(self.slider, 'royalSlider');
			$(window).off('resize' + self.ns);
			if(remove) {
				self.slider.remove();
			}
			self.slides = null;
			self.slider = null;
			self.ev = null;
		},
		_updateBlocksContent: function(beforeTransition, getId) {
			var self = this,
				item,
				i,
				n,
				pref,
				group,
				groupId,
				slideCode,
				loop = self._loop,
				numSlides = self.numSlides;
			if(!isNaN(getId) ) {
				return getCorrectLoopedId(getId);
			}


			var id = self.currSlideId;
			var groupOffset;
			
			var itemsOnSide = beforeTransition ? (Math.abs(self._prevSlideId - self.currSlideId) >= self.numSlides - 1 ? 0 : 1) : self._numPreloadImages;
			var itemsToCheck = Math.min(2, itemsOnSide); 
			
			var updateAfter = false;
			var updateBefore = false;
			var tempId;


			
			for(i = id; i < id + 1 + itemsToCheck; i++) {
				tempId = getCorrectLoopedId(i);
				item = self.slides[tempId];
				if(item && (!item.isAdded || !item.positionSet) ) {
					updateAfter = true;
					break;
				}
			}
			for(i = id - 1; i > id - 1 - itemsToCheck; i--) {
				tempId = getCorrectLoopedId(i);
				item = self.slides[tempId];
				if(item && (!item.isAdded || !item.positionSet) ) {
					updateBefore = true;
					break;
				}
			}
			if(updateAfter) {
				for(i = id; i < id + itemsOnSide + 1; i++) {
					tempId = getCorrectLoopedId(i);
					groupOffset = Math.floor( (self._realId - (id - i)) / self.numSlides) * self.numSlides;
					item = self.slides[tempId];
					if(item) {
						updateItem(item, tempId);	
					}
				}
			}
			if(updateBefore) {
				for(i = id - 1; i > id - 1 - itemsOnSide; i--) {
					tempId = getCorrectLoopedId(i);
					groupOffset = Math.floor( (self._realId - (id - i) ) / numSlides) * numSlides;
					item = self.slides[tempId];
					if(item) {
						updateItem(item, tempId);
					}
				}
			}
			if(!beforeTransition) {
				var start = id;
				var distance = itemsOnSide;
				var min = getCorrectLoopedId(id - itemsOnSide);
				var max = getCorrectLoopedId(id + itemsOnSide);
				
				var nmin = min > max ? 0 : min;
				
				for (i = 0; i < numSlides; i++) { 
					if(min > max) {
						if(i > min - 1) {
							continue;
						}
					}
					if(i < nmin || i > max) {
						 item = self.slides[i];
						if(item && item.holder) {
							
							//slideCode = self.slidesJQ[i];
							//if(typeof slideCode !== "string") { 
								item.holder.detach();
								item.isAdded = false;
							//}
						}     
					}                               
			    }   
			}

			
			
				
				
			function updateItem(item , i, slideCode) {

				if(!item.isAdded) {
					if(!slideCode)
						slideCode = self.slidesJQ[i];

					if(!item.holder) {
						slideCode = self.slidesJQ[i] = $(slideCode);
						item.holder = slideCode;
					} else {
						slideCode = item.holder;
					}

					item.appendOnLoaded = false;

					
					updatePos(i, item, slideCode);
					addContent(i, item);
					self._addBlockToContainer(item, slideCode, beforeTransition);
					item.isAdded = true;
					appended = true;
				} else {
					addContent(i, item);
					updatePos(i, item);
				}
			}
			function addContent(i, item) {
				if(!item.contentAdded) {
					self.setItemHtml(item, beforeTransition);
					if(!beforeTransition) {
						item.contentAdded = true;
					}
					
				}
			}
			function updatePos(i, item, slideCode) {
				if(self._isMove) {
					if(!slideCode) {
						slideCode = self.slidesJQ[i];
					}

					slideCode.css(self._reorderProp, (i + self._idOffset + groupOffset) * self._slideSize);
				}
			}
			function getCorrectLoopedId(index) {
				var changed = false;
				if(loop) {
					if(index > numSlides - 1) {
						return getCorrectLoopedId(index - numSlides);
					} else  if(index < 0) {
						return getCorrectLoopedId(numSlides + index);
					}
				}
				return index;
			}
			
		},

		/**
		 * Sets or loads HTML for specified slide
		 * @param {Object} currSlideObject  holds data about curr slide (read about rsAfterParseNode for more info)
		 * @param {Boolean} beforeTransition determines if setItemHTML method is called before or after transition
		 */
		setItemHtml: function(currSlideObject, beforeTransition) {

			var self = this;

			if(currSlideObject.isLoaded) {
				appendContent();
				return;
			} else {
				if(beforeTransition) {
					waitForTransition();
				} else {
					parseDataAndLoad();
				}
			}

			function parseDataAndLoad() {
				if(!currSlideObject.images) {
					currSlideObject.isRendered = true;
				    currSlideObject.isLoaded = true;
					currSlideObject.isLoading = false;
					appendContent(true);
					return;
				}
				if(currSlideObject.isLoading) {
					return;
				}
				
				var el,
					isRoot;
				if(currSlideObject.content.hasClass('rsImg') ) {
					el = currSlideObject.content;
					isRoot = true;
				} else {
					el = currSlideObject.content.find('.rsImg:not(img)')
				}
				if(el && !el.is('img')) {
					el.each(function() {
						var item = $(this),
							newEl = '<img class="rsImg" src="'+ ( item.is('a') ? item.attr('href') : item.text() ) +'" />';

						if(!isRoot) {
							item.replaceWith( newEl );
						} else {
							currSlideObject.content = $(newEl);
						}
					});
				}
				
				el = isRoot ? currSlideObject.content : currSlideObject.content.find('img.rsImg');
				setPreloader();
				
				el.eq(0).addClass('rsMainSlideImage');
				if(currSlideObject.iW && currSlideObject.iH) {
					if(!currSlideObject.isLoaded) {
						self._resizeImage( currSlideObject );
					}
					appendContent();
				}

				currSlideObject.isLoading = true;
				var newEl;

				if(currSlideObject.isBig) {
					$('<img />').on('load.rs error.rs', function(e){
						onLoad( [this], true );
					}).attr('src', currSlideObject.image);
				} else {
					currSlideObject.loaded = [];
					currSlideObject.imgLoaders = [];
					for(var i = 0; i < currSlideObject.images.length; i++) {
						var image = $('<img />');

						currSlideObject.imgLoaders.push( this );
						image.on('load.rs error.rs', function(e){
							currSlideObject.loaded.push( this );
							if(currSlideObject.loaded.length === currSlideObject.imgLoaders.length) {
								onLoad( currSlideObject.loaded, false );
							}
						}).attr('src', currSlideObject.images[i]);
					}
				}

				// old images loading
				// el.imagesLoaded( function( $images, $proper, $broken ) {
				// 	if($broken.length) {
				// 		currSlideObject.isLoading = false;
				// 		var img =  $images[0],
				//     		src = img.src;
				// 		if(src && src.indexOf(currSlideObject.image) === -1 ) {
				//     		return;
				//     	}
				// 		if(!currSlideObject.tryAgainCount) { currSlideObject.tryAgainCount = 0; }
				// 		if(currSlideObject.tryAgainCount < 3) {
				// 			currSlideObject.tryAgainCount++;
				// 			self.setItemHtml(currSlideObject, beforeTransition);
				// 			return;
				// 		}
				// 	}
				//     onLoad($images);
				// });
			}
			function onLoad($images, isBig) {
				if($images.length) {
			    	var img = $images[0],
			    		src = img.src;
			    	
		    		if(isBig !== currSlideObject.isBig) {
		    			var c = currSlideObject.holder.children();
			    		if(c && c.length > 1) {
			    			removePreloader();
			    		}
			    		return;
		    		}
			    	
			    	if(currSlideObject.iW && currSlideObject.iH) {
			    		imageLoadingComplete();
			    		return;
			    	}
			    	currSlideObject.iW = img.width;
				    currSlideObject.iH = img.height;
				    if(currSlideObject.iW && currSlideObject.iH) {
			    		imageLoadingComplete();
			    		return;
			    	} else {
			    		// if no size, try again
			    		var loader = new Image();
			    		loader.onload = function() {
			    			if(loader.width) {
			    				currSlideObject.iW = loader.width;
				    			currSlideObject.iH = loader.height;
				    			imageLoadingComplete();
			    			} else {
			    				setTimeout(function() {
			    					if(loader.width) {
			    						currSlideObject.iW = loader.width;
				    					currSlideObject.iH = loader.height;
			    					}

			    					// failed to get size on last tier, just output image
			    					imageLoadingComplete();
			    				}, 1000);
			    			}
						};
					    loader.src = img.src;
			    	}
			    } else {
			    	imageLoadingComplete();
			    }
			}
			function imageLoadingComplete() {
				currSlideObject.isLoaded = true;
				currSlideObject.isLoading = false;

			    appendContent();
			    removePreloader();
			    triggerLoaded();
			}
			function waitForTransition() {
				if(!self._isMove && currSlideObject.images && currSlideObject.iW && currSlideObject.iH) {
					parseDataAndLoad();
					return;
				}
				currSlideObject.holder.isWaiting = true;
				setPreloader();
				currSlideObject.holder.slideId = -99;
			}
			
			function appendContent() {
				if(!currSlideObject.isAppended) {

					var visibleNearby = self.st.visibleNearby,
					bId = currSlideObject.id - self._newSlideId;
					if(!beforeTransition && !currSlideObject.appendOnLoaded && self.st.fadeinLoadedSlide  && ( bId === 0 || ( (visibleNearby || self._isAnimating || self._isDragging) && (bId === -1 || bId === 1) ) ) ) {
						var css = {
							visibility: 'visible', 
							opacity: 0
						};
						css[self._vendorPref + 'transition'] = 'opacity 400ms ease-in-out';
						currSlideObject.content.css(css);
						setTimeout(function() {
							currSlideObject.content.css('opacity', 1);
						}, 16);
					}

					if(currSlideObject.holder.find('.rsPreloader').length) {
						currSlideObject.holder.append( currSlideObject.content );
					} else {
						currSlideObject.holder.html( currSlideObject.content );
					}
					

					currSlideObject.isAppended = true;
					if(currSlideObject.isLoaded) {
						self._resizeImage(currSlideObject);
						triggerLoaded();
					}
					if(!currSlideObject.sizeReady) {
						currSlideObject.sizeReady = true;
						setTimeout(function() {
							// triggers after content is added, usually is true when page is refreshed from cache
							self.ev.trigger('rsMaybeSizeReady', currSlideObject);
						}, 100);
					}
					
				}
			}
			function triggerLoaded() {
				if(!currSlideObject.loadedTriggered) {
					currSlideObject.isLoaded = currSlideObject.loadedTriggered = true;
					currSlideObject.holder.trigger('rsAfterContentSet');
		 			self.ev.trigger('rsAfterContentSet', currSlideObject);
				}
			}
			function setPreloader() {
				if(self.st.usePreloader)
					currSlideObject.holder.html(self._preloader.clone());
			}
			function removePreloader(now) {
				if(self.st.usePreloader) {
					var preloader = currSlideObject.holder.find('.rsPreloader');
					if(preloader.length) {
						preloader.remove();
					}
				}
			}

		},
		_addBlockToContainer: function(slideObject, content, dontFade) {
			var self = this;
			var holder = slideObject.holder;
			var bId = slideObject.id - self._newSlideId;
			
			var visibleNearby = false;
			// if(self._isMove && !dontFade && self.st.fadeinLoadedSlide  && ( bId === 0 || ( (visibleNearby || self._isAnimating || self._isDragging) && (bId === -1 || bId === 1) ) ) ) {
			// 	var content = slideObject.content;
			// 	content.css(self._vendorPref + 'transition', 'opacity 400ms ease-in-out').css({visibility: 'visible', opacity: 0});
			// 	//holder.css('opacity', 0);
			// 	self._slidesContainer.append(holder);
			// 	setTimeout(function() {
			// 		content.css('opacity', 1);
			// 		//self.ev.trigger('rsAfterContentSet', holder);
			// 	}, 6);
			// } else {
				self._slidesContainer.append(holder);
			//}
			slideObject.appendOnLoaded = false;
		},
	
		_onDragStart:function(e, isThumbs) {
			var self = this,
				point,
				wasAnimating,
				isTouch = (e.type === 'touchstart');

			self._isTouchGesture = isTouch;	

			self.ev.trigger('rsDragStart');
			if($(e.target).closest('.rsNoDrag', self._currHolder).length) {
				 self.dragSuccess = false;
				 return true;
			}

			

			if(!isThumbs) {
				if(self._isAnimating) {
					self._wasAnimating = true;

					self._stopAnimation();
				}
			}
			self.dragSuccess = false;
			if(self._isDragging) {
				if(isTouch) {
					self._multipleTouches = true;
				}
				return;
			} else {
				if(isTouch) {
					self._multipleTouches = false;
				}
			}

			self._setGrabbingCursor();
			
			if(isTouch) {
				//parsing touch event
				var touches = e.originalEvent.touches;
				if(touches && touches.length > 0) {
					point = touches[0];
					if(touches.length > 1) {
						self._multipleTouches = true;
					}
				}					
				else {	
					return;						
				}
			} else {
				e.preventDefault();				
				point = e;
				if(self.msEnabled) point = point.originalEvent;		
			}

			self._isDragging = true;
			self._doc.on(self._moveEvent, function(e) { self._onDragMove(e, isThumbs); })
						.on(self._upEvent, function(e) { self._onDragRelease(e, isThumbs); });
			
			self._currMoveAxis = '';
			self._hasMoved = false;
			self._pageX = point.pageX;
			self._pageY = point.pageY;
			self._startPagePos = self._accelerationPos = (!isThumbs ? self._slidesHorizontal : self._thumbsHorizontal) ? point.pageX : point.pageY;
			
			self._horDir = 0;
			self._verDir = 0;


			self._currRenderPosition = !isThumbs ? self._sPosition : self._thumbsPosition;

			self._startTime = new Date().getTime();
			if(isTouch) {
				self._sliderOverflow.on(self._cancelEvent, function(e) { self._onDragRelease(e, isThumbs); });	
			}
		},
		_renderMovement:function(point, isThumbs) {
			var self = this;
			if(self._checkedAxis) {

				var timeStamp = self._renderMoveTime,
					deltaX = point.pageX - self._pageX,
					deltaY = point.pageY - self._pageY,
					newX = self._currRenderPosition + deltaX,
					newY = self._currRenderPosition + deltaY,
					isHorizontal = (!isThumbs ? self._slidesHorizontal : self._thumbsHorizontal),
					newPos = isHorizontal ? newX : newY,
					mAxis = self._currMoveAxis;

				self._hasMoved = true;
				self._pageX = point.pageX;
				self._pageY = point.pageY;

				if(mAxis === 'x' && deltaX !== 0) {
					self._horDir = deltaX > 0 ? 1 : -1;
				} else if(mAxis === 'y' && deltaY !== 0) {
					self._verDir = deltaY > 0 ? 1 : -1;
				}

				var pointPos = isHorizontal ? self._pageX : self._pageY,
					deltaPos = isHorizontal ? deltaX : deltaY;
				if(!isThumbs) {
					if(!self._loop) {
						if(self.currSlideId <= 0) {
							if(pointPos - self._startPagePos > 0) {
								newPos = self._currRenderPosition + deltaPos * self._lastItemFriction;
							}
						}
						if(self.currSlideId >= self.numSlides - 1) {
							if(pointPos - self._startPagePos < 0) {
								newPos = self._currRenderPosition + deltaPos * self._lastItemFriction ;
							}
						}
					}
				} else {
					if(newPos > self._thumbsMinPosition) {
						newPos = self._currRenderPosition + deltaPos * self._lastItemFriction;
					} else if(newPos < self._thumbsMaxPosition) {
						newPos = self._currRenderPosition + deltaPos * self._lastItemFriction ;
					}
				}

				self._currRenderPosition = newPos;
				
				if (timeStamp - self._startTime > 200) {
			 		self._startTime = timeStamp;
					self._accelerationPos = pointPos;						
				}

				if(!isThumbs) {
					if(self._isMove) {
						self._setPosition(self._currRenderPosition);
					}
				} else {
					self._setThumbsPosition(self._currRenderPosition);
				}
			}
			
		},
		_onDragMove:function(e, isThumbs) {
			var self = this,
				point,
				isTouch = (e.type === 'touchmove');

			if(self._isTouchGesture && !isTouch) {
				return;
			}

			if(isTouch) {
				if(self._lockAxis) {
					return;
				}	
				var touches = e.originalEvent.touches;
				if(touches) {
					if(touches.length > 1) {
						return;
					} else {
						point = touches[0];	
					}
				} else {
					return;
				}
			} else {
				point = e;
				if(self.msEnabled) point = point.originalEvent;	
			}
			

			if(!self._hasMoved) {
				if(self._useCSS3Transitions) {
					(!isThumbs ? self._slidesContainer : self._thumbsContainer).css((self._vendorPref + self._TD), '0s');
				}
				(function animloop(){
					if(self._isDragging) {
						self._animFrame = requestAnimationFrame(animloop);
						if(self._renderMoveEvent)
							self._renderMovement(self._renderMoveEvent, isThumbs);
					}
					
			    })();
			}
				
			if(!self._checkedAxis) {
				
				var dir = (!isThumbs ? self._slidesHorizontal : self._thumbsHorizontal),
					diff = (Math.abs(point.pageX - self._pageX) - Math.abs(point.pageY - self._pageY) ) - (dir ? -7 : 7);

				if(diff > 7) {
					// hor movement
					if(dir) {
						e.preventDefault();
						self._currMoveAxis = 'x';
					} else if(isTouch) {
						self._completeGesture();
						return;
					} 
					self._checkedAxis = true;
				} else if(diff < -7) {
					// ver movement
					if(!dir) {
						e.preventDefault();
						self._currMoveAxis = 'y';
					} else if(isTouch) {
						self._completeGesture();
						return;
					} 
					self._checkedAxis = true;
				}
				return;
			}
			
			e.preventDefault();	
			self._renderMoveTime = new Date().getTime();
			self._renderMoveEvent = point;
		},
		_completeGesture: function() {
			var self = this;
			self._lockAxis = true;
			self._hasMoved = self._isDragging = false;
			self._onDragRelease();
		},
		_onDragRelease:function(e, isThumbs) {
			var self = this,
				totalMoveDist,
				accDist,
				duration,
				v0,
				newPos,
				newDist,
				newDuration,
				blockLink,
				isTouch = (e.type === 'touchend' || e.type === 'touchcancel');


			if(self._isTouchGesture && !isTouch) {
				return;
			}
			self._isTouchGesture = false;
			self.ev.trigger('rsDragRelease');

			self._renderMoveEvent = null;
			self._isDragging = false;
			self._lockAxis = false;
			self._checkedAxis = false;
			self._renderMoveTime = 0;
			cancelAnimationFrame(self._animFrame);
			if(self._hasMoved) {
				if(!isThumbs) {
					if(self._isMove) {
						self._setPosition(self._currRenderPosition);
					}
				} else {
					self._setThumbsPosition(self._currRenderPosition);
				}
			}


			self._doc.off(self._moveEvent).off(self._upEvent);

			if(isTouch) {
				self._sliderOverflow.off(self._cancelEvent);	
			}

			
			self._setGrabCursor();
			if (!self._hasMoved && !self._multipleTouches) {
				if(isThumbs && self._thumbsEnabled) {
					var item = $(e.target).closest('.rsNavItem');
					if(item.length) {
						self.goTo(item.index());
					}	
					return;
				}
			}
			var orient = (!isThumbs ? self._slidesHorizontal : self._thumbsHorizontal);
			if(!self._hasMoved || (self._currMoveAxis === 'y' && orient) || (self._currMoveAxis === 'x' && !orient) ) {
				if(!isThumbs && self._wasAnimating) {
					self._wasAnimating = false;
					if(!self.st.navigateByClick) {
						self.dragSuccess = true;
					} else {
						self._mouseNext( (self.msEnabled ? e.originalEvent : e) );
						self.dragSuccess = true;
						return;
					}
				} else {
					self._wasAnimating = false;
					self.dragSuccess = false;
					return;
				}
				
			} else {
				self.dragSuccess = true;
			}

			self._wasAnimating = false;
			
			
			self._currMoveAxis = '';

			
			function getCorrectSpeed(newSpeed) {
				if(newSpeed < 100) {
					return 100;
				} else if(newSpeed > 500) {
					return 500;
				} 
				return newSpeed;
			}
			function returnToCurrent(isSlow, v0) {
				if(self._isMove || isThumbs) {

					newPos = (-self._realId - self._idOffset) * self._slideSize;
					newDist = Math.abs(self._sPosition  - newPos);
					self._currAnimSpeed = newDist / v0;
					if(isSlow) {
						self._currAnimSpeed += 250; 
					}
					self._currAnimSpeed = getCorrectSpeed(self._currAnimSpeed);

					self._animateTo(newPos, false);
				}
			}

			var snapDist = self.st.minSlideOffset,
				point = isTouch ? e.originalEvent.changedTouches[0] : (self.msEnabled ? e.originalEvent : e),
				pPos = orient ? point.pageX : point.pageY,
				sPos = self._startPagePos,
				axPos = self._accelerationPos,
				axCurrItem = self.currSlideId,
				axNumItems = self.numSlides,
				dir = orient ? self._horDir : self._verDir,
				loop = self._loop,
				changeHash = false,
				distOffset = 0;
			
			totalMoveDist = Math.abs(pPos - sPos);
			accDist = pPos - axPos;


			duration = (new Date().getTime()) - self._startTime;
			v0 = Math.abs(accDist) / duration;	

			if(dir === 0 || axNumItems <= 1) {
				returnToCurrent(true, v0);
				return;
			}

			if(!loop && !isThumbs) {
				if(axCurrItem <= 0) {
					if(dir > 0) {
						returnToCurrent(true, v0);
						return;
					}
				} else if(axCurrItem >= axNumItems - 1) {
					if(dir < 0) {
						returnToCurrent(true, v0);
						return;
					}
				}
			}

			if(!isThumbs) {
				if(sPos + snapDist < pPos) {
					if(dir < 0) {		
						returnToCurrent(false, v0);
						return;					
					}
					self._moveTo('prev', getCorrectSpeed(Math.abs(self._sPosition  - (-self._realId - self._idOffset + 1) * self._slideSize) / v0), changeHash, true, true);
				} else if(sPos - snapDist > pPos) {
					if(dir > 0) {		
						returnToCurrent(false, v0);
						return;					
					}
					self._moveTo('next', getCorrectSpeed(Math.abs(self._sPosition  - (-self._realId - self._idOffset - 1) * self._slideSize) / v0), changeHash, true, true);
				} else {
					returnToCurrent(false, v0);
				}
			} else {
				var newPos = self._thumbsPosition;
				var transitionSpeed;
				
				if(newPos > self._thumbsMinPosition) {
					newPos = self._thumbsMinPosition;
				} else if(newPos < self._thumbsMaxPosition) {
					newPos = self._thumbsMaxPosition;
				} else {
					var friction = 0.003,
						S = (v0 * v0) / (friction * 2),
						minXDist = -self._thumbsPosition,
						maxXDist = self._thumbsContainerSize - self._thumbsViewportSize + self._thumbsPosition;

					if (accDist > 0 && S > minXDist) {
						minXDist = minXDist + self._thumbsViewportSize / (15 / (S / v0 * friction));
						v0 = v0 * minXDist / S;
						S = minXDist;
					} else if (accDist < 0 && S > maxXDist) {
						maxXDist = maxXDist + self._thumbsViewportSize / (15 / (S / v0 * friction));
						v0 = v0 * maxXDist / S;
						S = maxXDist;
					}




					transitionSpeed =  Math.max(Math.round(v0 / friction), 50);
					newPos = newPos + S * (accDist < 0 ? -1 : 1);


					if(newPos > self._thumbsMinPosition) {
						self._animateThumbsTo(newPos, transitionSpeed, true, self._thumbsMinPosition, 200);
						return;
					 } else if(newPos < self._thumbsMaxPosition) {
						self._animateThumbsTo( newPos, transitionSpeed, true, self._thumbsMaxPosition, 200);
						return;
					}
				}

				self._animateThumbsTo(newPos, transitionSpeed, true);

			}
		},
		_setPosition: function(pos) {
			var self = this;
			pos = self._sPosition = pos;
			if(self._useCSS3Transitions) {
				self._slidesContainer.css(self._xProp, self._tPref1 + ( self._slidesHorizontal ? (pos + self._tPref2 + 0) : (0 + self._tPref2 + pos) ) + self._tPref3 );		
			} else {
				self._slidesContainer.css(self._slidesHorizontal ? self._xProp : self._yProp, pos);
			}
		},
		
		
		updateSliderSize: function(force) {
			var self = this,
				newWidth,
				newHeight;

			if(self.st.autoScaleSlider) {
				var asw = self.st.autoScaleSliderWidth,
					ash = self.st.autoScaleSliderHeight;

				if(self.st.autoScaleHeight) {
					newWidth = self.slider.width();
					if(newWidth != self.width) {
						self.slider.css("height", newWidth * (ash / asw) );
						newWidth = self.slider.width();
					}	
					newHeight = self.slider.height();
				} else {
					newHeight = self.slider.height();
					if(newHeight != self.height) {
						self.slider.css("width", newHeight * (asw / ash));
						newHeight = self.slider.height();
					}		
					newWidth = self.slider.width();
				}
			
			} else {
				newWidth = self.slider.width();
				newHeight = self.slider.height();
			}
			


			if(force || newWidth != self.width || newHeight != self.height) {
				self.width = newWidth;
				self.height = newHeight;

				self._wrapWidth = newWidth;
				self._wrapHeight = newHeight;

				self.ev.trigger('rsBeforeSizeSet');
				self.ev.trigger('rsAfterSizePropSet');

				self._sliderOverflow.css({
					width: self._wrapWidth,
					height: self._wrapHeight
				});


				self._slideSize = (self._slidesHorizontal ? self._wrapWidth : self._wrapHeight) + self.st.slidesSpacing;
				

				self._imagePadding = self.st.imageScalePadding;
				var item,
					slideItem,
					i,
					img;
				for(i = 0; i < self.slides.length; i++) {
					item = self.slides[i];
					item.positionSet = false;

					if(item && item.images && item.isLoaded) {
						item.isRendered = false;
						self._resizeImage(item);
					} 
				}
				if(self._cloneHolders) {
					for(i = 0; i < self._cloneHolders.length; i++) {
						item = self._cloneHolders[i];
						item.holder.css(self._reorderProp, (item.id + self._idOffset) * self._slideSize);
					}
				}
				
				self._updateBlocksContent();

				if(self._isMove) {
					if(self._useCSS3Transitions) {
						self._slidesContainer.css(self._vendorPref + 'transition-duration', '0s');
					}
					self._setPosition( (-self._realId - self._idOffset) * self._slideSize);
				}
				self.ev.trigger('rsOnUpdateNav');
			}
			self._sliderOffset = self._sliderOverflow.offset();
			self._sliderOffset = self._sliderOffset[self._reorderProp];


		},
		//setSlidesOrientation: function(orient) {
			// TODO
			// var self = this,
			// 	newHor = Boolean(orient === 'horizontal');
			// if(self._slidesHorizontal !== newHor) {
			// 	self._setPosition(0);
			// 	if(self._isMove) {
			// 		for(var i = 0; i < self._slideHolders.length; i++) {
			// 			self._slideHolders[i].block.css(self._reorderProp, '');
			// 		}
			// 	}
			// 	self.slider.removeClass(self._slidesHorizontal ? 'rsHor' : 'rsVer').addClass(newHor ? 'rsHor' : 'rsVer');
			// 	self._slidesHorizontal = newHor;
			// 	self._reorderProp = newHor ? 'left' : 'top';
			// 	self.updateSliderSize(true);
			// }
		//},
		/**
		 * Adds slide
		 * @param  {jQuery object or raw HTML} htmltext 
		 * @param  {int} index    (optional) Index where item should be added (last item is removed of not specified)
		 */
		appendSlide: function(htmltext, index) {
			var self = this,
				parsedSlide = self._parseNode(htmltext);

			if(isNaN(index) || index > self.numSlides) {
				index = self.numSlides;
			}
			self.slides.splice(index, 0, parsedSlide);
			self.slidesJQ.splice(index, 0, '<div style="'+ (self._isMove ? 'position:absolute;' : self._opacityCSS ) +'" class="rsSlide"></div>');

			if(index < self.currSlideId) {
				self.currSlideId++;
			}
			self.ev.trigger('rsOnAppendSlide', [parsedSlide, index]);
			
			self._refreshSlides(index);

			if(index === self.currSlideId) {
				self.ev.trigger('rsAfterSlideChange');
			}
		},

		/**
		 * Removes slide
		 * @param  {int} Index of item that should be removed
		 */
		removeSlide: function(index) {
			var self = this,
				slideToRemove = self.slides[index];

			if(slideToRemove) {
				if(slideToRemove.holder) {
					slideToRemove.holder.remove();
				}
				if(index < self.currSlideId) {
					self.currSlideId--;
				}
				self.slides.splice(index, 1);
				self.slidesJQ.splice(index, 1);

				self.ev.trigger('rsOnRemoveSlide', [index]);
				self._refreshSlides(index);

				if(index === self.currSlideId) {
					self.ev.trigger('rsAfterSlideChange');
				}
			}
		},
		_refreshSlides: function(refreshIndex) {

			// todo: optimize this stuff
			var self = this;

			var oldNumSlides = self.numSlides;
			var numLoops = self._realId <= 0 ? 0 : Math.floor(self._realId / oldNumSlides);

			self.numSlides = self.slides.length;
			if(self.numSlides === 0) {
				self.currSlideId = self._idOffset = self._realId = 0;
				self.currSlide = self._oldHolder = null;
			} else {
				self._realId = numLoops * self.numSlides + self.currSlideId;
			}

			for(var i = 0; i < self.numSlides; i++) {
				self.slides[i].id = i;
			}

			self.currSlide = self.slides[self.currSlideId];
			self._currHolder = self.slidesJQ[self.currSlideId];

			if(self.currSlideId >= self.numSlides) {
				self.goTo(self.numSlides - 1);
			} else if(self.currSlideId < 0) {
				self.goTo(0);
			}

			self._refreshNumPreloadImages();

			if(self._isMove && self._loop) {
				self._slidesContainer.css((self._vendorPref + self._TD), '0ms');
			}
			if(self._refreshSlidesTimeout) {
				clearTimeout(self._refreshSlidesTimeout);
			}


			self._refreshSlidesTimeout = setTimeout(function() {
				if(self._isMove) {
					self._setPosition( (-self._realId - self._idOffset) * self._slideSize);	
				}
				self._updateBlocksContent();
				if(!self._isMove) {
					self._currHolder.css({
						display: 'block',
						opacity: 1
					});
				}
				
			}, 14);
			self.ev.trigger('rsOnUpdateNav');
		},
		_setGrabCursor:function() {	
			var self = this;
			if(self._hasDrag && self._isMove) {
				if(self._grabCursor) {
					self._sliderOverflow.css('cursor', self._grabCursor);
				} else {
					self._sliderOverflow.removeClass('grabbing-cursor');
					self._sliderOverflow.addClass('grab-cursor');	
				}
			}
		},
		_setGrabbingCursor:function() {		
			var self = this;
			if(self._hasDrag && self._isMove) {
				if(self._grabbingCursor) {
					self._sliderOverflow.css('cursor', self._grabbingCursor);
				} else {
					self._sliderOverflow.removeClass('grab-cursor');
					self._sliderOverflow.addClass('grabbing-cursor');	
				}	
			}
		},
		next: function(notUserAction) {
			var self = this;
			self._moveTo('next',  self.st.transitionSpeed, true, !notUserAction);
		},
		prev: function(notUserAction) {
			var self = this;
			self._moveTo('prev', self.st.transitionSpeed, true, !notUserAction);
		},
		_moveTo:function(type,  speed, inOutEasing, userAction, fromSwipe) {
			var self = this,
				newPos,
				difference,
				i;
			
			
			self.ev.trigger('rsBeforeMove', [type, userAction]);
			if(type === 'next') {
				newItemId = self.currSlideId+1;
			} else if(type === 'prev') {
				newItemId = self.currSlideId-1;
			} else {
				newItemId = type = parseInt(type, 10);
			}

			if(!self._loop) {
				if(newItemId < 0) {
					self._doBackAndForthAnim('left', !userAction);
					return;
				} else if(newItemId >= self.numSlides ) {
					self._doBackAndForthAnim('right', !userAction);
					return;
				}
			}
			
			if(self._isAnimating) {
				self._stopAnimation(true);
				inOutEasing = false;
			}

			difference = newItemId - self.currSlideId;



			self._prevSlideId = self.currSlideId;
			var prevId = self.currSlideId;
			var id = self.currSlideId + difference;
			var realId = self._realId;
			var temp;
			var delayed;
			if(self._loop) {
				id = self._updateBlocksContent(false, id);
				realId += difference;
			} else {
				realId = id;
			}
			self._newSlideId = id;

			self._oldHolder = self.slidesJQ[self.currSlideId];

			
			self._realId = realId;
			self.currSlideId = self._newSlideId;

			self.currSlide = self.slides[self.currSlideId];
			self._currHolder = self.slidesJQ[self.currSlideId];

			
			var checkDist = self.st.slidesDiff;
			var next = Boolean(difference > 0);
			var absDiff = Math.abs(difference);
			var g1 = Math.floor( prevId / self._numPreloadImages);
			var g2 = Math.floor( ( prevId + (next ? checkDist : -checkDist  ) ) / self._numPreloadImages);
			var biggest = next ? Math.max(g1,g2) : Math.min(g1,g2);
			var biggestId = biggest * self._numPreloadImages +  ( next ? (self._numPreloadImages - 1) : 0 );
			if(biggestId > self.numSlides - 1) {
				biggestId = self.numSlides - 1;
			} else if(biggestId < 0) {
				biggestId = 0;
			}
			var toLast =  next ? (biggestId - prevId) :  (prevId - biggestId);
			if(toLast > self._numPreloadImages) {
				toLast = self._numPreloadImages;
			}
			if(absDiff > toLast + checkDist) {
				self._idOffset +=  ( absDiff - (toLast + checkDist) ) * ( next ? -1 : 1 );
				speed = speed * 1.4;
				for(i = 0; i < self.numSlides; i++) {
					self.slides[i].positionSet = false;
				}
			}
			self._currAnimSpeed = speed;

			self._updateBlocksContent(true);
			if(!fromSwipe) {
				delayed = true;
			}


			newPos = (-realId - self._idOffset) * self._slideSize;

			

			if(delayed) {
				setTimeout(function() {
					self._isWorking = false;
					self._animateTo(newPos, type, false, inOutEasing);
					self.ev.trigger('rsOnUpdateNav');
				}, 0);
			} else {
				self._animateTo(newPos, type, false, inOutEasing);
				self.ev.trigger('rsOnUpdateNav');
			}
			
			
			function isSetToCurrent(testId) {
				if(testId < 0) {
					testId = self.numSlides + testId;
				} else if(testId > self.numSlides - 1) {
					testId = testId - self.numSlides;
				}
				if(testId !== self.currSlideId) {
					return false;
				}
				return true;
			}
			
		},
		_updateArrowsNav: function() {
			var self = this,
				arrDisClass = 'rsArrowDisabled';
			if(self.st.arrowsNav) {
				if(self.numSlides <= 1) {
					self._arrowLeft.css('display', 'none');
					self._arrowRight.css('display', 'none');
					return;
				} else {
					self._arrowLeft.css('display', 'block');
					self._arrowRight.css('display', 'block');
				}
				if(!self._loop && !self.st.loopRewind) {
					if(self.currSlideId === 0) {
						self._arrowLeft.addClass(arrDisClass);
					} else {
						self._arrowLeft.removeClass(arrDisClass);
					}
					if(self.currSlideId === self.numSlides - 1) {
						self._arrowRight.addClass(arrDisClass);
					} else {
						self._arrowRight.removeClass(arrDisClass);
					}
				}
			}
		},
		_animateTo:function(pos, dir,  loadAll, inOutEasing, customComplete) {
			var self = this,
				moveProp,
				oldBlock,
				animBlock;

			var animObj = {};
			if(isNaN(self._currAnimSpeed)) {
				self._currAnimSpeed = 400;
			} 
			


			self._sPosition = self._currRenderPosition = pos;

			self.ev.trigger('rsBeforeAnimStart');

			if(!self._useCSS3Transitions) {
				if(self._isMove) {
					animObj[self._slidesHorizontal ? self._xProp : self._yProp] = pos + 'px';


					self._slidesContainer.animate(animObj, self._currAnimSpeed, /*'easeOutQuart'*/ inOutEasing ? self.st.easeInOut : self.st.easeOut);
				} else {
					oldBlock = self._oldHolder;
					animBlock = self._currHolder;					

					animBlock.stop(true, true).css({
						opacity: 0,
						display: 'block',
						zIndex: self._fadeZIndex
					});
					self._currAnimSpeed = self.st.transitionSpeed;
					animBlock.animate({opacity: 1}, self._currAnimSpeed, self.st.easeInOut);

					
					clearTimeouts();
					if(oldBlock) {
	 					oldBlock.data('rsTimeout', setTimeout(function() {
							oldBlock.stop(true, true).css({
								opacity: 0,
								display: 'none',
								zIndex: 0
							});
						}, self._currAnimSpeed + 60) );
					}
				}
				
			} else {
				if(self._isMove) {
					
					

						self._currAnimSpeed = parseInt(self._currAnimSpeed);
						var td = self._vendorPref + self._TD;
						var ttf = self._vendorPref + self._TTF;

						animObj[td] = self._currAnimSpeed+'ms';
						animObj[ttf] = inOutEasing ? $.rsCSS3Easing[self.st.easeInOut] : $.rsCSS3Easing[self.st.easeOut];
						
						self._slidesContainer.css(animObj);
					if(inOutEasing || !self.hasTouch) {
						setTimeout(function() {
							self._setPosition(pos);
						}, 5);
					} else {
						self._setPosition(pos);
					} 
					
					

				} else {
					//self._currAnimSpeed = 10
					self._currAnimSpeed = self.st.transitionSpeed;
					oldBlock = self._oldHolder;
					animBlock = self._currHolder;		
					if(animBlock.data('rsTimeout')) {
						animBlock.css('opacity', 0);
					}
					clearTimeouts();
					if(oldBlock) {
						//if(oldBlock)
						oldBlock.data('rsTimeout', setTimeout(function() {
							animObj[self._vendorPref + self._TD] = '0ms';
							animObj.zIndex = 0;
							animObj.display = 'none';
							oldBlock.data('rsTimeout', '');
							oldBlock.css(animObj);
							setTimeout(function() {
								oldBlock.css('opacity', 0);
							}, 16);
						}, self._currAnimSpeed + 60) );
					}

					animObj.display = 'block';
					animObj.zIndex = self._fadeZIndex;
					animObj.opacity = 0;
					animObj[self._vendorPref + self._TD] = '0ms';
					animObj[self._vendorPref + self._TTF] = $.rsCSS3Easing[self.st.easeInOut];
					animBlock.css(animObj);
					animBlock.data('rsTimeout', setTimeout(function() {
						//animBlock.css('opacity', 0);
						animBlock.css(self._vendorPref + self._TD,  self._currAnimSpeed+'ms');

						//oldBlock.css(self._vendorPref + self._TD,  '0ms');
						animBlock.data('rsTimeout', setTimeout(function() {
							animBlock.css('opacity', 1);
							animBlock.data('rsTimeout', '');
						}, 20) );
					}, 20) );
				}
			}
			self._isAnimating = true;
			if(self.loadingTimeout) {
				clearTimeout(self.loadingTimeout);
			}
			if(customComplete) {
				self.loadingTimeout = setTimeout(function() {
					self.loadingTimeout = null;
					customComplete.call();

				}, self._currAnimSpeed + 60);
			} else {
				self.loadingTimeout = setTimeout(function() {
					self.loadingTimeout = null;
					self._animationComplete(dir);
				}, self._currAnimSpeed + 60);
			}

			function clearTimeouts() {
				var t;
				if(oldBlock) {
					t = oldBlock.data('rsTimeout');
					if(t) {
						if(oldBlock !== animBlock) {
							oldBlock.css({
									opacity: 0,
									display: 'none',
									zIndex: 0
								});
						}
						clearTimeout(t);
						oldBlock.data('rsTimeout', '');
					}
				}
				
				t = animBlock.data('rsTimeout');
				if(t) {
					clearTimeout(t);
					animBlock.data('rsTimeout', '');
				}
			}
		},
		_stopAnimation: function(noCSS3) {
			var self = this;
			self._isAnimating = false;
			clearTimeout(self.loadingTimeout);
			if(self._isMove) {

				if(!self._useCSS3Transitions) {
					self._slidesContainer.stop(true);
					self._sPosition = parseInt(self._slidesContainer.css(self._xProp), 10);
				} else if (!noCSS3) {
					var oldPos = self._sPosition;
					var newPos =  self._currRenderPosition = self._getTransformProp();
					self._slidesContainer.css((self._vendorPref + self._TD), '0ms');
					if(oldPos !==newPos) {
						self._setPosition(newPos);
					}
				}
			} else {
				// kung fu
				if(self._fadeZIndex > 20) {
					self._fadeZIndex = 10;
				} else {
					self._fadeZIndex++;
				}
			}
			
			
		},
		// Thanks to @benpbarnett
		_getTransformProp:function(){
			var self = this,
				transform = window.getComputedStyle(self._slidesContainer.get(0), null).getPropertyValue(self._vendorPref + 'transform'),			
				explodedMatrix = transform.replace(/^matrix\(/i, '').split(/, |\)$/g),
				isMatrix3d = (explodedMatrix[0].indexOf('matrix3d') === 0);
			return parseInt(explodedMatrix[(self._slidesHorizontal ? (isMatrix3d ? 12 : 4) : (isMatrix3d ? 13 : 5) )], 10);
		},
		_getCSS3Prop: function(pos, hor) {
			var self = this;
			return self._useCSS3Transitions ? self._tPref1 + ( hor ? (pos + self._tPref2 + 0) : (0 + self._tPref2 + pos) ) + self._tPref3 : pos;
		},
		_animationComplete: function(dir) {
			var self = this;
			if(!self._isMove) {
				self._currHolder.css('z-index', 0);
				self._fadeZIndex = 10;
			}
			self._isAnimating = false;
			
			self.staticSlideId = self.currSlideId;
			self._updateBlocksContent();


			self._slidesMoved = false;
			
			self.ev.trigger('rsAfterSlideChange');
		},
		_doBackAndForthAnim:function(type, userAction) {
			var self = this,
				newPos = (-self._realId - self._idOffset) * self._slideSize;

			if(self.numSlides === 0 || self._isAnimating) {
				return;
			} 
			if(self.st.loopRewind) {
				self.goTo(type === 'left' ? self.numSlides - 1 : 0, userAction);
				return;
			}

			if(self._isMove) {
				self._currAnimSpeed = 200;

				function allAnimComplete() {
					self._isAnimating = false;
				}
				function firstAnimComplete() {
					self._isAnimating = false;
					self._animateTo(newPos, '', false, true, allAnimComplete);
				}
				self._animateTo(newPos + (type === 'left' ? 30 : -30),'', false, true, firstAnimComplete);
			}
			
		},
		_resizeImage:function(slideObject, useClone) {

			var isRoot = true;
			if(slideObject.isRendered) {
				return;
			}
			var img = slideObject.content;
			var classToFind = 'rsMainSlideImage';
			var isVideo;
			var self = this,
				imgAlignCenter = self.st.imageAlignCenter,
				imgScaleMode = self.st.imageScaleMode,
				tempEl;

			if(slideObject.videoURL) {
				classToFind = 'rsVideoContainer';
				if(imgScaleMode !== 'fill') {
					isVideo = true;
				} else {
					tempEl = img;
					if(!tempEl.hasClass(classToFind)) {
						tempEl = tempEl.find('.'+classToFind);
					}
					tempEl.css({width:'100%',height: '100%'});
					classToFind = 'rsMainSlideImage';
				}
			}
			if(!img.hasClass(classToFind)) {
				isRoot = false;
				img = img.find('.'+classToFind);
			}
			if(!img) {
				return;
			}

			var baseImageWidth = slideObject.iW,
				baseImageHeight = slideObject.iH;

			slideObject.isRendered = true;
			if(imgScaleMode === 'none' && !imgAlignCenter) {
				return;
			}
			if(imgScaleMode !== 'fill') {
				bMargin = self._imagePadding;
			} else {
				bMargin = 0;
			}
			//var block = img.parent('.block-inside').css('margin', bMargin);
			var containerWidth = self._wrapWidth - bMargin * 2,
				containerHeight = self._wrapHeight - bMargin * 2,
				hRatio,
				vRatio,
				ratio,
				nWidth,
				nHeight,
				cssObj = {};

			if(imgScaleMode === 'fit-if-smaller') {
				if(baseImageWidth > containerWidth || baseImageHeight > containerHeight) {
					imgScaleMode = 'fit';
				}
			}
			if(imgScaleMode === 'fill' || imgScaleMode === 'fit') {		
				hRatio = containerWidth / baseImageWidth;
				vRatio = containerHeight / baseImageHeight;

				if (imgScaleMode  == "fill") {
					ratio = hRatio > vRatio ? hRatio : vRatio;                    			
				} else if (imgScaleMode  == "fit") {
					ratio = hRatio < vRatio ? hRatio : vRatio;             		   	
				} else {
					ratio = 1;
				}

				nWidth = Math.ceil(baseImageWidth * ratio, 10);
				nHeight = Math.ceil(baseImageHeight * ratio, 10);
			} else {								
				nWidth = baseImageWidth;
				nHeight = baseImageHeight;		
			}
			if(imgScaleMode !== 'none') {
				cssObj.width = nWidth;
				cssObj.height = nHeight;
				if(isVideo) {
					img.find('.rsImg').css({width: '100%', height:'100%'});
				}
			}
			if (imgAlignCenter) {     
				cssObj.marginLeft = Math.floor((containerWidth - nWidth) / 2) +  bMargin;
				cssObj.marginTop = Math.floor((containerHeight - nHeight) / 2) +  bMargin;
			}
			img.css(cssObj);
		}
	}; /* RoyalSlider core prototype end */
	$.rsProto = RoyalSlider.prototype;

	$.fn.royalSlider = function(options) {    	
		var args = arguments;
		return this.each(function(){
			var self = $(this);
			if (typeof options === "object" ||  !options) {
				if( !self.data('royalSlider') ) {
					self.data('royalSlider', new RoyalSlider(self, options));
				}
			} else {
				var royalSlider = self.data('royalSlider');
				if (royalSlider && royalSlider[options]) {
					return royalSlider[options].apply(royalSlider, Array.prototype.slice.call(args, 1));
				}
			}
		});
	};

	$.fn.royalSlider.defaults = {    
		slidesSpacing: 8,
		startSlideId: 0,
		loop: false,
		loopRewind: false,
		numImagesToPreload: 4,
		fadeinLoadedSlide: true,
		slidesOrientation: 'horizontal', 
		transitionType: 'move', 
		transitionSpeed: 600,
		controlNavigation: 'bullets',
		controlsInside: true, 
		arrowsNav: true,
		arrowsNavAutoHide: true,
		navigateByClick: true,
		randomizeSlides: false,
		sliderDrag: true, 
		sliderTouch: true,
		keyboardNavEnabled: false,
		fadeInAfterLoaded: true,

		allowCSS3: true,
		allowCSS3OnWebkit: true,

		
		addActiveClass: false,
		autoHeight: false,

		easeOut: 'easeOutSine',
		easeInOut: 'easeInOutSine',

		minSlideOffset: 10,

		imageScaleMode:"fit-if-smaller",                 
		imageAlignCenter:true,				
		imageScalePadding: 4,
		usePreloader: true,

		autoScaleSlider: false,               
   					
   		autoScaleSliderWidth: 800,       
   		autoScaleSliderHeight: 400,   

   		autoScaleHeight: true,	    

   		arrowsNavHideOnTouch: false,
   		globalCaption: false,

   		slidesDiff: 2
	}; /* default options end */

	$.rsCSS3Easing = {
		easeOutSine: 'cubic-bezier(0.390, 0.575, 0.565, 1.000)',
		easeInOutSine: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'
	};

	$.extend(jQuery.easing, {
		easeInOutSine: function (x, t, b, c, d) {
			return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
		},
		easeOutSine: function (x, t, b, c, d) {
			return c * Math.sin(t/d * (Math.PI/2)) + b;
		},
		easeOutCubic: function (x, t, b, c, d) {
			return c*((t=t/d-1)*t*t + 1) + b;
		}
	});


})(jQuery, window);
jQuery(function ($) {
	'use strict';

	// initialize CoEnvMenu plugin
	// IE9+ only
	$('html').not('.lt-ie9').coenvmenu();

});

(function ($, window, document, undefined) {
	'use strict';

	// Plugin definition
	// =========================================================================
	$.CoEnvMenu = function ( options, element ) {
		this.options = options;
		this.element = $(element);

		this._create( options );
	};

	$.CoEnvMenu.settings = {
		outerSelector: '#outer',
		wrapperSelector: '#wrapper',
		menuSelector: '.main-menu',
		submenuClass: 'children',
		topMenuSelector: '.top-menu',
		menuButtonSelector: '#show-menu button',
		topLevelItemSelector: '.page-depth-0',
		mobileMenuClass: 'mobile-menu',
		normalMenuClass: 'normal-menu',
		normalTopMenuClass: 'normal-top-menu',
		mobileTopMenuClass: 'mobile-top-menu',
		mobileMenuActiveClass: 'mobile-menu-active',
		mobileTopMenuActiveClass: 'mobile-top-menu-active',
		menuItemActiveClass: 'menu-item-active'
	};

	// Create
	// =========================================================================
	$.CoEnvMenu.prototype._create = function ( options ) {

		// set options
		this.options = $.extend(true, {}, $.CoEnvMenu.settings, options);

		// initialize
		this._init();

	};

	// Initialize
	// =========================================================================
	$.CoEnvMenu.prototype._init = function () {

		this.$outer = $(this.options.outerSelector);
		this.$wrapper = $(this.options.wrapperSelector);
		this.$menu = $(this.options.menuSelector);
		this.$topMenu = $(this.options.topMenuSelector);
		this.$menuButton = $(this.options.menuButtonSelector);

		// set up menu DOM structure
		this._buildMenu();

		// handle main menu dropdowns
		this._dropdowns();

		// set up mobile menu
		this._setupMobileMenu();

		// add arrow icons before nav items
		this._addArrowIcons();

		// set up top menu
		this._setupTopMenu();

		// handle menu button interactions
		this._handleMenuButton();

		// handle clicking on this.$wrapper when mobile menu is active
		this._handleWrapperClicking();

		// handle interacting on top level items in mobile menu
		this._handleMenuInteractions();

		// handle window resize with mobile menu still visible
		this._handleWindowResize();

	};

	/**
	 * Build menu DOM structure
	 */
	$.CoEnvMenu.prototype._buildMenu = function () {

		var _this = this;

		// select top level menu items
		var $navItem = this.$menu.find( this.options.topLevelItemSelector );

		// select all submenus in the menu
		var $submenu = $navItem.find('> .' + this.options.submenuClass);

		var $submenuContainer = $('<div class="submenu-container"></div>');

		// for each top level nav item
		$navItem.each( function () {

			var $link = $(this).find('> span > a'),
					linkTitle = $link.attr('title'),
					title,
					url;

			title = linkTitle !== undefined && linkTitle !== false ? linkTitle : $link.text();
			url = $link.attr('href');

			// add submenu if it does not exist
			if ( !$(this).find('> .' + _this.options.submenuClass).length ) {
				$(this).append('<ul class="' + _this.options.submenuClass + '"></ul>');
			}

			$(this).find('> .' + _this.options.submenuClass).prepend('<li class="pagenav"><a href="' + url + '">' + title + '</a></li>');
		} );

		// wrap first sub menu in .submenu-container
		this.$menu.find( this.options.topLevelItemSelector + ' > .' + this.options.submenuClass ).wrap( $submenuContainer );

	};

	// Handle dropdowns
	// =========================================================================
	$.CoEnvMenu.prototype._dropdowns = function () {
		var _this = this;

		// use hover intent to apply active class to top level nav items
		this.$menu.find( this.options.topLevelItemSelector ).has('.' + this.options.submenuClass).hoverIntent( function () {
			$(this).toggleClass( _this.options.menuItemActiveClass );
		} );
	};

	// Set up mobile menu
	// =========================================================================
	$.CoEnvMenu.prototype._setupMobileMenu = function () {
		// make a copy of this.$menu to place behind this.$wrapper within this.$outer
		this.$mobileMenu = this.$menu.clone();
		this.$mobileMenu.removeClass( this.options.normalMenuClass ).addClass( this.options.mobileMenuClass );

		// add a "home" link to the top of the mobile menu
		//this.$mobileMenu.find('ul').prepend('<li><a href="/">Home</a></li>');

		this.$mobileMenu.appendTo( this.$outer ).show();
	};

	// Add arrow icons to menu items
	// =========================================================================
	$.CoEnvMenu.prototype._addArrowIcons = function () {
		this.$mobileMenu.find( this.options.topLevelItemSelector ).has('.' + this.options.submenuClass).each(function () {
			$(this).find('a').first().prepend('<i></i>');
		});
	};

	// Set up top links menu
	// =========================================================================
	$.CoEnvMenu.prototype._setupTopMenu = function () {
		// make a copy of this.$topMenu to place within this.$mobileMenu
		this.$mobileTopMenu = this.$topMenu.clone();
		this.$mobileTopMenu.removeClass( this.options.normalTopMenuClass ).addClass( this.options.mobileTopMenuClass );
		this.$mobileTopMenu.appendTo( this.$mobileMenu ).show();
        this.$mobileMenu.find('div, ul, li, span, a').removeAttr('id');
	};

	// Handle menu button interactions
	// =========================================================================
	$.CoEnvMenu.prototype._handleMenuButton = function () {
		var _this = this;

		// handle clicking on menu button (using fastClick)
		this.$menuButton.fastClick( function (e) {
			e.preventDefault();
			_this._toggleMobileMenu();
		} );
	};

	// Show/hide mobile menu
	// =========================================================================
	$.CoEnvMenu.prototype._toggleMobileMenu = function () {
		$('html').toggleClass( this.options.mobileMenuActiveClass );
	};

	// Handle window resize when mobile menu is still visible
	// =========================================================================
	$.CoEnvMenu.prototype._handleWindowResize = function () {
		var _this = this;
		$(window).on( 'resize', $.debounce( 100, function () {
			if ( ( $(window).width() >= 768 ) && $('html').hasClass( _this.options.mobileMenuActiveClass ) ) {
				_this._toggleMobileMenu();
			}
		} ) );
	};

	// Handle clicking on this.$wrapper when mobile menu is active
	// =========================================================================
	$.CoEnvMenu.prototype._handleWrapperClicking = function () {
		var _this = this;

		this.$wrapper.on( 'click', function (e) {

			if ( $('html').hasClass( _this.options.mobileMenuActiveClass ) ) {
				e.preventDefault();
				_this._toggleMobileMenu();
			}

		} );
        
        $('.close-mobile').on( 'touchend', function (e) {
            e.preventDefault();
			if ( $('html').hasClass( _this.options.mobileMenuActiveClass ) ) {
				e.preventDefault();
				_this._toggleMobileMenu();
			}

		} );
        
        $('.close-mobile').on( 'click', function (e) {
			if ( $('html').hasClass( _this.options.mobileMenuActiveClass ) ) {
				_this._toggleMobileMenu();
			}

		} );
	};

	// Handle menu interactions
	// =========================================================================
	$.CoEnvMenu.prototype._handleMenuInteractions = function () {

		var _this = this,
				$items = this.$mobileMenu.find( this.options.topLevelItemSelector ),
				$itemLinks = $items.find('> span > a');

		// on page load, make sure appropriate item has the expanded class
		$items.filter('.menu-item-active, .current_page_item, .current-page-ancestor').each(function () {
			$(this).addClass('expanded');
			//$(this).find('> span > a > i').css('outline', '1px solid red');
		});

		$itemLinks.fastClick( function (e) {
			e.preventDefault();

			var $item = $(this).parents( _this.options.topLevelItemSelector ),
					$icon = $(this).find('i'),
					$subMenu = $item.find('.' + _this.options.submenuClass);

			if ( $item.hasClass('expanded') ) {
				$subMenu.slideUp( 200 );
				$item.removeClass('expanded');
			} else {
				$subMenu.slideDown( 200 );
				$item.addClass('expanded');
			}
		} );

	};

	// Plugin bridge
	// =========================================================================
	// Leverages data method to either create or return plugin constructor
	//
	// Pattern developed by desandro for Masonry
	//		https://github.com/desandro/masonry/blob/master/jquery.masonry.js
	// Based off of jQuery UI's widget factory
	//		https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.widget.js
	// And a bit from jcarousel
	//		https://github.com/jsor/jcarousel/blob/master/lib/jquery.jcarousel.js

	$.CoEnvMenu.prototype.option = function( key ){
		if ( $.isPlainObject( key ) ){
			this.options = $.extend(true, this.options, key);
		}
	};

	$.fn.coenvmenu = function( options ) {
		if ( typeof options === 'string' ) {
			// call method
			var args = Array.prototype.slice.call( arguments, 1 );

			this.each(function() {
				var instance = $.data( this, 'coenvmenu' );
				if ( !instance ) {
					console.log( 'error', 'cannot call methods on coenvmenu prior to initialization; ' +
						'attempted to call method "' + options + '"' );
					return;
				}
				if ( !$.isFunction( instance[options] ) || options.charAt(0) === '_' ) {
					console.log( 'error', 'no such method "' + options + '" for coenvmenu instance' );
					return;
				}

				// apply method
				instance[ options ].apply( instance, args );
			});
		} else {
			this.each(function() {
				var instance = $.data( this, 'coenvmenu' );
				if ( instance ){
					// apply options & init
					instance.option( options || {} );
					instance._init();
				} else {
					// initialize new instance
					$.data( this, 'coenvmenu', new $.CoEnvMenu( options, this ) );
				}
			});
		}
		return this;
	};

})(jQuery, window, document);

(function ($, window, document, undefined) {
    $(document).ready(function() {
	    $('#secondary-nav li:has(li.current_page_item)').addClass('parent_page_item current_page_parent');
        var children = $('.page-item-270').find('.children');
        children.each(function() {
            var sorted = $(this).children('li').detach().sort(function(a, b) {
                var textA = $(a).children('a').html().toLowerCase();
                var textB = $(b).children('a').html().toLowerCase();
                return textA.localeCompare(textB);
            });
            $(this).append(sorted);
        });
    })
})(jQuery, window, document);


jQuery(function ($) {
	'use strict';

    $.fn.blogHeader = function () {
        'use strict';

        var $header = $(this),
                $selectCategory = $header.find('.select-category select'),
                $selectMonth = $header.find('.select-month select');

        $selectCategory.on( 'change', function () {
            var term_id = $(this).val(),
                    url = $(this).parent('div').attr('data-url');
            window.location.href = url + term_id;
        } );

        $selectMonth.on( 'change', function () {
            var url = $(this).val();
            window.location.href = url;
        } );
    };

	// handle blog header form
	$('#blog-header').blogHeader();
	$('#careers-filter').blogHeader();

});



/**
 * Share modals
 * for blog posts
 */
(function ($, window, document, undefined) {

	'use strict';

	// Plugin definition
	// =========================================================================
	$.coenvshare = function ( options, element ) {
		this.options = options;
		this.element = $(element);

		this._create( options );
	};

	$.coenvshare.settings = {};

	// Create
	// =========================================================================
	$.coenvshare.prototype._create = function ( options ) {

		// set options
		this.options = $.extend(true, {}, $.coenvshare.settings, options);

		// initialize
		this._init();

	};

	// Initialize
	// =========================================================================
	$.coenvshare.prototype._init = function () {

		this.articleID = this.element.attr('data-article-id');
		this.articleTitle = this.element.attr('data-article-title');
		this.articleShortLink = this.element.attr('data-article-shortlink');
		this.articlePermalink = this.element.attr('data-article-permalink');

		// show share button
		// must have data-article-id set
		if (
			typeof( this.articleID ) !== 'undefined' &&
			typeof( this.articleTitle ) !== 'undefined' &&
			typeof( this.articleShortLink ) !== 'undefined' &&
			typeof( this.articlePermalink ) !== 'undefined' ) {
			this.element.addClass('active');
		} else {
			return;
		}

		// build modal
		this._buildModal();

		// handle interactions
		this._interactions();
	};

	/**
	 * Build modal
	 * Building DOM elements here to keep things quick and simple, but this should really be in a template
	 */
	$.coenvshare.prototype._buildModal = function () {

		var services = [
			{
				name: 'Twitter',
				className: 'twitter',
				url: 'http://twitter.com/home?status=' + this.articleTitle + ' ' + this.articleShortLink + ' from @UW_CoEnv" target="_blank'
			},
			{
				name: 'Facebook',
				className: 'facebook',
				url: 'http://www.facebook.com/sharer/sharer.php?s=100&p[url]=' + this.articleShortLink + '" target="_blank'
			},
			{
				name: 'Email',
				className: 'email',
				url: 'mailto:?subject=' + this.articleTitle + '&body=Check%20out%20this%20article%20from%20the%20UW%20College%20of%20the%20Environment:%20' + this.articleShortLink
			}
		];

		this.$modal = $('<div class="share-modal" role="dialog" aria-labelledby="shareModal" aria-hidden="true"></div>');
		this.$modal.append('<div class="share-modal-inner"><ul class="share-modal-content"></ul></div>');

		for ( var i = 0, len = services.length; i < len; i++ ) {
			this.$modal.find('.share-modal-content').append('<a href="' + services[ i ].url + '" ><li class="social-link share-' + services[ i ].className + '"></li></a>');
		}
	};

	/**
	 * Handle interactions
	 */
	$.coenvshare.prototype._interactions = function () {
		var _this = this;

		// clicking on link
		this.element.on( 'click', function ( ev ) {
			ev.preventDefault();
			ev.stopPropagation();
			if ( _this.modalIsActive !== true ) {
				_this._launchModal();
			} else {
				_this._hideModal();
			}
		} );

		// clicking outside of modal
		$('body').on( 'click', function ( ev ) {
			if ( _this.modalIsActive === true ) {

				if ( !$(ev.target).is('.social-link') ) {
					_this._hideModal();
				}
			}
		});

	};

	/**
	 * Launch share modal
	 */
	$.coenvshare.prototype._launchModal = function () {
		var _this = this;

		// append modal
		$('.post-' + this.articleID + ' .article__meta').prepend( this.$modal );

		// show modal
		this.$modal.addClass('active');

		this.modalIsActive = true;

		setTimeout( function () {
			_this.$modal.addClass('active-visible');
		}, 10 );
	};

	/**
	 * Hide modal
	 */
	$.coenvshare.prototype._hideModal = function () {
		var _this = this;

		this.$modal.removeClass('active-visible');

		//setTimeout( function () {
		_this.$modal.removeClass('active');
		_this.$modal.remove();
		_this.modalIsActive = false;
		//}, 10 );

	};

	// Plugin bridge
	// =========================================================================
	// Leverages data method to either create or return plugin constructor
	//
	// Pattern developed by desandro for Masonry
	//		https://github.com/desandro/masonry/blob/master/jquery.masonry.js
	// Based off of jQuery UI's widget factory
	//		https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.widget.js
	// And a bit from jcarousel
	//		https://github.com/jsor/jcarousel/blob/master/lib/jquery.jcarousel.js

	$.coenvshare.prototype.option = function( key ){
		if ( $.isPlainObject( key ) ){
			this.options = $.extend(true, this.options, key);
		}
	};

	$.fn.coenvshare = function( options ) {
		if ( typeof options === 'string' ) {
			// call method
			var args = Array.prototype.slice.call( arguments, 1 );

			this.each(function() {
				var instance = $.data( this, 'coenvshare' );
				if ( !instance ) {
					console.log( 'error', 'cannot call methods on coenvshare prior to initialization; ' +
						'attempted to call method "' + options + '"' );
					return;
				}
				if ( !$.isFunction( instance[options] ) || options.charAt(0) === '_' ) {
					console.log( 'error', 'no such method "' + options + '" for coenvshare instance' );
					return;
				}

				// apply method
				instance[ options ].apply( instance, args );
			});
		} else {
			this.each(function() {
				var instance = $.data( this, 'coenvshare' );
				if ( instance ){
					// apply options & init
					instance.option( options || {} );
					instance._init();
				} else {
					// initialize new instance
					$.data( this, 'coenvshare', new $.coenvshare( options, this ) );
				}
			});
		}
		return this;
	};

})(jQuery, window, document);
(function($) {

/*
*  new_map
*
*  This function will render a Google Map onto the selected jQuery element
*
*  @type	function
*  @date	8/11/2013
*  @since	4.3.0
*
*  @param	$el (jQuery element)
*  @return	n/a
*/

function new_map( $el ) {
	
	// var
	var $markers = $el.find('.marker');
	
	var styledMapType = new google.maps.StyledMapType([
		{
			"featureType": "administrative",
			"elementType": "labels.text.fill",
			"stylers": [
				{
					"color": "#444444"
				}
			]
		},
		{
			"featureType": "administrative.country",
			"elementType": "labels.text",
			"stylers": [
				{
					"saturation": "18"
				},
				{
					"lightness": "-55"
				},
				{
					"visibility": "simplified"
				},
				{
					"color": "#4484a1"
				}
			]
		},
		{
			"featureType": "landscape",
			"elementType": "all",
			"stylers": [
				{
					"color": "#f2f2f2"
				},
				{
					"saturation": "28"
				},
				{
					"lightness": "42"
				},
				{
					"gamma": "2.01"
				},
				{
					"weight": "1"
				}
			]
		},
		{
			"featureType": "poi",
			"elementType": "all",
			"stylers": [
				{
					"visibility": "off"
				}
			]
		},
		{
			"featureType": "road",
			"elementType": "all",
			"stylers": [
				{
					"saturation": -100
				},
				{
					"lightness": 45
				}
			]
		},
		{
			"featureType": "road.highway",
			"elementType": "all",
			"stylers": [
				{
					"visibility": "simplified"
				}
			]
		},
		{
			"featureType": "road.arterial",
			"elementType": "labels.icon",
			"stylers": [
				{
					"visibility": "off"
				}
			]
		},
		{
			"featureType": "transit",
			"elementType": "all",
			"stylers": [
				{
					"visibility": "off"
				}
			]
		},
		{
			"featureType": "water",
			"elementType": "all",
			"stylers": [
				{
					"color": "#aaced9"
				},
				{
					"visibility": "on"
				}
			]
		}
	]);

	// vars
	var args = {
		zoom		: 6,
		center		: new google.maps.LatLng(0, 0),
		mapTypeControlOptions: {
			mapTypeIds: ['styled_map']
		},
		disableDefaultUI: true,
		draggable: false,
		gestureHandling: 'none'		
	};
	
	// create map
	var map = new google.maps.Map( $el[0], args);

	map.mapTypes.set('styled_map', styledMapType);
	map.setMapTypeId('styled_map');
	
	
	// add a markers reference
	map.markers = [];
	
	
	// add markers
	$markers.each(function(){
		
    	add_marker( $(this), map );
		
	});
	
	
	// center map
	center_map( map );
	
	
	// return
	return map;
	
}

/*
*  add_marker
*
*  This function will add a marker to the selected Google Map
*
*  @type	function
*  @date	8/11/2013
*  @since	4.3.0
*
*  @param	$marker (jQuery element)
*  @param	map (Google Map object)
*  @return	n/a
*/

function add_marker( $marker, map ) {

	// var
	var latlng = new google.maps.LatLng( $marker.attr('data-lat'), $marker.attr('data-lng') );

    var iconActive = {
		url: $marker.attr('data-active'),
		size: new google.maps.Size(20, 20),
		origin: new google.maps.Point(0, 0),
		anchor: new google.maps.Point(10, 10)
	};

    var iconInActive = {
		url: $marker.attr('data-inactive'),
		size: new google.maps.Size(20, 20),
		origin: new google.maps.Point(0, 0),
		anchor: new google.maps.Point(10, 10)
	};

	var marker = new google.maps.Marker({
		position	: latlng,
        icon        : iconInActive,
		map			: map
	});

	// add to array
	map.markers.push( marker );

	// if marker contains HTML, add it to an infoWindow
	if( $marker.html() )
	{
		// show info window when marker is clicked
		google.maps.event.addListener(marker, 'click', function() {
			$.each(map.markers, function(i, marker) {
				marker.setIcon(iconInActive);
			});
			$('.map-box, .icon').stop().fadeOut(100, function() {
                $(this).html($marker.html()).stop().fadeIn(600);
            });
			marker.setIcon(iconActive);
		});
		google.maps.event.addListener(marker, 'mouseover', function() {
			$.each(map.markers, function(i, marker) {
				marker.setIcon(iconInActive);
			});
			$('.map-box, .icon').stop().fadeOut(100, function() {
                $(this).html($marker.html()).stop().fadeIn(600);
            });
			marker.setIcon(iconActive);
		});
	}

}

/*
*  center_map
*
*  This function will center the map, showing all markers attached to this map
*
*  @type	function
*  @date	8/11/2013
*  @since	4.3.0
*
*  @param	map (Google Map object)
*  @return	n/a
*/

function center_map( map ) {
	// vars
	var bounds = new google.maps.LatLngBounds();

	// loop through all markers and create bounds
	$.each( map.markers, function( i, marker ){

		var latlng = new google.maps.LatLng( marker.position.lat(), marker.position.lng() );

		bounds.extend( latlng );

	});

	// only 1 marker?
	if( map.markers.length == 1 )
	{
		// set center of map
	    map.setCenter( bounds.getCenter() );
	    map.setZoom( 16 );
	}
	else
	{
		// fit to bounds
		map.fitBounds( bounds );
	}

}

/*
*  document ready
*
*  This function will render each map when the document is ready (page has loaded)
*
*  @type	function
*  @date	8/11/2013
*  @since	5.0.0
*
*  @param	n/a
*  @return	n/a
*/
// global var
var map = null;

$(document).ready(function(){

	$('.acf-map').each(function(){

		// create map
		map = new_map( $(this) );

	});

	var size = window.innerWidth;
	$(window).resized(function() {
		if(size < 800 && window.innerWidth >= 800) {
			center_map(map);
			size = window.innerWidth;
		}
		if(size >= 1020 && window.innerWidth < 1020) {
			center_map(map);
			size = window.innerWidth;
		}
		if(size >= 800 && window.innerWidth < 800) {
			center_map(map);
			size = window.innerWidth;
		}
	});

	$(window).on( "orientationchange", function(e) {
		center_map(map);
	});
});

})(jQuery);

(function($) {
    var uniqueCntr = 0;
    $.fn.resized = function (waitTime, fn) {
        if (typeof waitTime === "function") {
            fn = waitTime;
            waitTime = 250;
        }
        var tag = "resizeTimer" + uniqueCntr++;
        this.resize(function () {
            var self = $(this);
            var timer = self.data(tag);
            if (timer) {
                clearTimeout(timer);
            }
            timer = setTimeout(function () {
                self.removeData(tag);
                fn.call(self[0]);
            }, waitTime);
            self.data(tag, timer);
        });
    }
})(jQuery);

jQuery(function ($) {
    /**
     * Banner image reveals
     */
    $.fn.bannerReveals = function () {
        'use strict';

        return this.each( function () {

            var $container = $(this),
                    $revealBtn = $('.banner-info'),
                    activeClass = 'banner-revealed';



            $revealBtn.on( 'click', function ( e ) {
                e.preventDefault();
                e.stopPropagation();

                $('body').toggleClass( activeClass );
            } );

            $container.on( 'click', function () {
                if ( $('body').hasClass( activeClass ) ) {
                    $('body').removeClass( activeClass );
                }
            } );

        } );
    };

    /**
     * Handle responsive videos
     */
    $.fn.handleFitVids = function () {
        'use strict';

        $(this).fitVids();

        $('.fluid-width-video-wrapper').each( function () {
            var $this = $(this),
                    maxWidth = parseFloat( $this.css('max-width') ),
                    paddingTop = parseFloat( $this[0].style['padding-top'] );

            // increase padding-top relative to max-width set on this element
            var adjustment = maxWidth * ( paddingTop * 0.01 ) + '%';

            $this.css( 'padding-top', adjustment );
        } );
    };

    /**
     * Faculty member tabs
     */

    $.fn.memberTabs = function () {
        'use strict';

        var $nav = $(this),
            $tabs = $('.Faculty-member-tabs'),
            activeClass = 'active-tab';

        $nav.find('a').click( function (e) {
            e.preventDefault();

            var $navItem = $(this),
                    $tab = $tabs.find('.' + $(this).attr('data-tab') );

            $nav.find('.' + activeClass).removeClass( activeClass );
            $(this).parent('li').addClass( activeClass );

            $tabs.find('.' + activeClass).removeClass( activeClass );
            $tab.addClass( activeClass );
        } );
    };
    
    if (!$('body').hasClass('lt-ie8')) {
        autoplay = true;
        var ppbutton = $('.play-pause-hero');
        var hero = $('#hero-video');
        ppbutton.html('<i class="fi-pause">▐▐</i>');
        hero.removeClass("fullfade");
        if (window.matchMedia('(prefers-reduced-motion)').matches) {
            hero.removeAttribute("autoplay");
            hero.get(0).pause()
            hero.addClass("fade");
            ppbutton.html('<i class="fi-play"> ►</i>');
            autoplay = false;
        }
        ppbutton.click(function () {
            hero.toggleClass("fade");
            hero.get(0).pause()
            if (autoplay == null || autoplay === false) {
                $(this).html('<i class="fi-pause">▐▐</i>');
                hero.get(0).play()
                
                autoplay = true;
                ppbutton.html('<i class="fi-pause">▐▐</i>');
                setTimeout(function(){
                    hero.get(0).pause()
                    hero.addClass("fade");
                    ppbutton.html('<i class="fi-play"> ►</i>');
                    autoplay = false;
                }, 90000);
            } else {
                $(this).html('<i class="fi-play"> ►</i>');
                hero.get(0).pause()
                autoplay = false;
            }
        });
        setTimeout(function(){
                hero.get(0).pause()
                hero.addClass("fade");
                ppbutton.html('<i class="fi-play"> ►</i>');
                autoplay = false;
        }, 90000);
};
});

/**
 * Close UW Alert
 */

jQuery(document).ready(function($) {
    function closeUWAlert () {
      if($('#uwalert-alert-message').is(':hidden')){ //if the container is visible on the page
        if ($('#uwalert-alert-message')){
            $('#uwalert-alert-header').append('<div class="button right" id="closer">X</div>');
            var alertHeading = $('#uwalert-alert-header')[0];
            $('#closer').live('click', function(e){
                $('#uwalert-alert-message').removeClass('please-unhide');
                $('#uwalert-alert-message').hide();
                localStorage.clicked = alertHeading.innerHTML;
            });
            if(localStorage.clicked === alertHeading.innerHTML){
                console.log('UW Alert is hidden ' + localStorage.clicked);
                $('#uwalert-alert-message').hide();
            } else {
                $('#uwalert-alert-message').addClass('please-unhide');
            }
        }
      } else {
        setTimeout(closeUWAlert, 50); //wait 50 ms, then try again
      }
    }

    closeUWAlert();

   var $el, $ps, $up, totalHeight;

    $(".article__content .read-more .button").on('click', function() {

      totalHeight = 0

      $el = $(this);
      $p  = $el.parent();
      $up = $p.parent();
      $ps = $up.find("p:not('.read-more')");
      $e  = $up.find(".external");

      // measure how tall inside should be by adding together heights of all inside paragraphs (except read-more paragraph)
      $ps.each(function() {
        totalHeight += $(this).outerHeight(true);
      });
      totalHeight += $e.outerHeight(true) + 10;

      $up
        .animate({
          "max-height": 9999
        });

      // fade out read-more
      $p.fadeOut();

      // prevent jump-down
      return false;

    });

});

jQuery(function ($) {
	'use strict';

	if ( !$('body').hasClass('lt-ie8') ) {

		// placeholders for older browsers
		$('input, textarea').placeholder();

		// fitvids for responsive videos
		$('article').fitVids();

		// single faculty member tabs
		$('.Faculty-member-tab-nav').memberTabs();

		// banner image reveals
		$('.banner-wrapper').bannerReveals();
		
		// share buttons
		$('.share').coenvshare();
		
		// lightbox
		$('a:not([href*=youtube]):not([href*=youtu]):not([href*=vimeo])').nivoLightbox();
        
        $('figure a img').each(function () {
            var $this = $(this);
            $this.parent().attr('title', $this.attr('alt'));
		});
        
        $('div.gallery img').each(function () {
            var $this = $(this);
            $this.parent().attr('title', $this.attr('alt'));
		});

        // split galleries using parent id 
		$('div.gallery a').each(function () {
            var $this = $(this);
            $this.attr('data-lightbox-gallery', $this.closest('div').attr('id'));
		});
        
        if ( $('body').hasClass('post-type-archive-faculty') ) {
        
            // custom scrollbar
            $('.js .faculty-toolbox-roller-items').mCustomScrollbar({
                autoHideScrollbar: false,
                setHeight:175,
                theme: 'minimal-dark',
                scrollInteria: 1,
            });

            // scroll to selection
            $('.js .faculty-toolbox-roller-items').mCustomScrollbar(
                'scrollTo', '.Faculty-toolbox-roller-item--active'
            );
        }
        
        if ( $('body').hasClass('home') ) {
            var $boxes = $('.story-thung');
            $boxes.hide();

            $('.stories-container').imagesLoaded( function() {
                $boxes.fadeIn();

                $('.stories-container').masonry({
                    // options
                    itemSelector: '.story',
                    columnWidth: '.story-sizer',
                    percentPosition: true
                });
            });
            
        }
        $('.Faculty-member-contact-list').click(function(event){
            event.stopPropagation();
        });

	}
    
});

jQuery("document").ready(function($){
	
	var nav = $('#careers-filter');
	
	$(window).scroll(function () {
		if ($(this).scrollTop() > 355) {
			nav.addClass("f-nav");
		} else {
			nav.removeClass("f-nav");
		}

        // distance from top of footer to top of document
        footertotop = ($('#footer').position().top);
        // distance user has scrolled from top, adjusted to take in height of sidebar (850 pixels inc. padding)
        scrolltop = $(document).scrollTop()+850;
        // difference between the two
        difference = scrolltop-footertotop;

        // if user has scrolled further than footer,
        // pull sidebar up using a negative margin

        if (scrolltop > footertotop) {
            nav.css('margin-top',  0-difference);
        } else  {
            nav.css('margin-top', 0);
        }
	});
 
    
});





//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5taW4uanMiLCJqUXVlcnkuZmFzdENsaWNrLmpzIiwianF1ZXJ5LmJhLXRocm90dGxlLWRlYm91bmNlLmpzIiwibW9kZXJuaXpyLmN1c3RvbS45MjQwOC5qcyIsImpxdWVyeS5maXR2aWRzLmpzIiwianF1ZXJ5LnBsYWNlaG9sZGVyLmpzIiwianF1ZXJ5LmhvdmVySW50ZW50LmpzIiwicGljdHVyZWZpbGwuanMiLCJtYXRjaE1lZGlhLmpzIiwiZW5xdWlyZS5qcyIsIm1hc29ucnkucGtnZC5taW4uanMiLCJpbWFnZXNsb2FkZWQucGtnZC5taW4uanMiLCJuaXZvLWxpZ2h0Ym94LmpzIiwianF1ZXJ5LnJveWFsc2xpZGVyLmpzIiwibWVudS5qcyIsImZlYXR1cmVzLmpzIiwiYmxvZy5qcyIsInNoYXJlLmpzIiwiYWNmLWdtYXBzLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNVBBO0FBQ0E7QUFDQTtBQUNBO0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdlNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6WUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM1VBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIGpRdWVyeSB2Mi4yLjQgfCAoYykgalF1ZXJ5IEZvdW5kYXRpb24gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPWMuc2xpY2UsZj1jLmNvbmNhdCxnPWMucHVzaCxoPWMuaW5kZXhPZixpPXt9LGo9aS50b1N0cmluZyxrPWkuaGFzT3duUHJvcGVydHksbD17fSxtPVwiMi4yLjRcIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBnJiYoaj1nLGc9YXJndW1lbnRzW2hdfHx7fSxoKyspLFwib2JqZWN0XCI9PXR5cGVvZiBnfHxuLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2k+aDtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYobi5pc1BsYWluT2JqZWN0KGQpfHwoZT1uLmlzQXJyYXkoZCkpKT8oZT8oZT0hMSxmPWMmJm4uaXNBcnJheShjKT9jOltdKTpmPWMmJm4uaXNQbGFpbk9iamVjdChjKT9jOnt9LGdbYl09bi5leHRlbmQoaixmLGQpKTp2b2lkIDAhPT1kJiYoZ1tiXT1kKSk7cmV0dXJuIGd9LG4uZXh0ZW5kKHtleHBhbmRvOlwialF1ZXJ5XCIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09bi50eXBlKGEpfSxpc0FycmF5OkFycmF5LmlzQXJyYXksaXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEudG9TdHJpbmcoKTtyZXR1cm4hbi5pc0FycmF5KGEpJiZiLXBhcnNlRmxvYXQoYikrMT49MH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZihcIm9iamVjdFwiIT09bi50eXBlKGEpfHxhLm5vZGVUeXBlfHxuLmlzV2luZG93KGEpKXJldHVybiExO2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSxcImNvbnN0cnVjdG9yXCIpJiYhay5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlfHx7fSxcImlzUHJvdG90eXBlT2ZcIikpcmV0dXJuITE7Zm9yKGIgaW4gYSk7cmV0dXJuIHZvaWQgMD09PWJ8fGsuY2FsbChhLGIpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2ZvcihiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2lbai5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1uLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoXCJ1c2Ugc3RyaWN0XCIpPyhiPWQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxiLnRleHQ9YSxkLmhlYWQuYXBwZW5kQ2hpbGQoYikucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk6YyhhKSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHAsXCJtcy1cIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOihhK1wiXCIpLnJlcGxhY2UobyxcIlwiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLFwic3RyaW5nXCI9PXR5cGVvZiBhP1thXTphKTpnLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6aC5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2M+ZDtkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztnPmY7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZz0wLGg9W107aWYocyhhKSlmb3IoZD1hLmxlbmd0aDtkPmc7ZysrKWU9YihhW2ddLGcsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO2Vsc2UgZm9yKGcgaW4gYSllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtyZXR1cm4gZi5hcHBseShbXSxoKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxmO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYz1hW2JdLGI9YSxhPWMpLG4uaXNGdW5jdGlvbihhKT8oZD1lLmNhbGwoYXJndW1lbnRzLDIpLGY9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGQuY29uY2F0KGUuY2FsbChhcmd1bWVudHMpKSl9LGYuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxuLmd1aWQrKyxmKTp2b2lkIDB9LG5vdzpEYXRlLm5vdyxzdXBwb3J0Omx9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihuLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxuLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2lbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9ISFhJiZcImxlbmd0aFwiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuXCJmdW5jdGlvblwiPT09Y3x8bi5pc1dpbmRvdyhhKT8hMTpcImFycmF5XCI9PT1jfHwwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT1cInNpenpsZVwiKzEqbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1nYSgpLHo9Z2EoKSxBPWdhKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9MTw8MzEsRD17fS5oYXNPd25Qcm9wZXJ0eSxFPVtdLEY9RS5wb3AsRz1FLnB1c2gsSD1FLnB1c2gsST1FLnNsaWNlLEo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LEs9XCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLEw9XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLE09XCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixOPVwiXFxcXFtcIitMK1wiKihcIitNK1wiKSg/OlwiK0wrXCIqKFsqXiR8IX5dPz0pXCIrTCtcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK00rXCIpKXwpXCIrTCtcIipcXFxcXVwiLE89XCI6KFwiK00rXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK04rXCIpKil8LiopXFxcXCl8KVwiLFA9bmV3IFJlZ0V4cChMK1wiK1wiLFwiZ1wiKSxRPW5ldyBSZWdFeHAoXCJeXCIrTCtcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTCtcIiskXCIsXCJnXCIpLFI9bmV3IFJlZ0V4cChcIl5cIitMK1wiKixcIitMK1wiKlwiKSxTPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiooWz4rfl18XCIrTCtcIilcIitMK1wiKlwiKSxUPW5ldyBSZWdFeHAoXCI9XCIrTCtcIiooW15cXFxcXSdcXFwiXSo/KVwiK0wrXCIqXFxcXF1cIixcImdcIiksVT1uZXcgUmVnRXhwKE8pLFY9bmV3IFJlZ0V4cChcIl5cIitNK1wiJFwiKSxXPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTStcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitNK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTStcInxbKl0pXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitOKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitPKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitMK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTCtcIiooPzooWystXXwpXCIrTCtcIiooXFxcXGQrKXwpKVwiK0wrXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrSytcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK0wrXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK0wrXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK0wrXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFg9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxZPS9eaFxcZCQvaSxaPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sJD0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxfPS9bK35dLyxhYT0vJ3xcXFxcL2csYmE9bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK0wrXCI/fChcIitMK1wiKXwuKVwiLFwiaWdcIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwiMHhcIitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sZGE9ZnVuY3Rpb24oKXttKCl9O3RyeXtILmFwcGx5KEU9SS5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxFW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGVhKXtIPXthcHBseTpFLmxlbmd0aD9mdW5jdGlvbihhLGIpe0cuYXBwbHkoYSxJLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBmYShhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHc9YiYmYi5vd25lckRvY3VtZW50LHg9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSxcInN0cmluZ1wiIT10eXBlb2YgYXx8IWF8fDEhPT14JiY5IT09eCYmMTEhPT14KXJldHVybiBkO2lmKCFlJiYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4scCkpe2lmKDExIT09eCYmKG89JC5leGVjKGEpKSlpZihmPW9bMV0pe2lmKDk9PT14KXtpZighKGo9Yi5nZXRFbGVtZW50QnlJZChmKSkpcmV0dXJuIGQ7aWYoai5pZD09PWYpcmV0dXJuIGQucHVzaChqKSxkfWVsc2UgaWYodyYmKGo9dy5nZXRFbGVtZW50QnlJZChmKSkmJnQoYixqKSYmai5pZD09PWYpcmV0dXJuIGQucHVzaChqKSxkfWVsc2V7aWYob1syXSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGY9b1szXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGYpKSxkfWlmKGMucXNhJiYhQVthK1wiIFwiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKFwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKFwiaWRcIikpP2s9ay5yZXBsYWNlKGFhLFwiXFxcXCQmXCIpOmIuc2V0QXR0cmlidXRlKFwiaWRcIixrPXUpLHI9ZyhhKSxoPXIubGVuZ3RoLGw9Vi50ZXN0KGspP1wiI1wiK2s6XCJbaWQ9J1wiK2srXCInXVwiO3doaWxlKGgtLSlyW2hdPWwrXCIgXCIrcWEocltoXSk7cz1yLmpvaW4oXCIsXCIpLHc9Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxifWlmKHMpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHMpKSxkfWNhdGNoKHkpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFEsXCIkMVwiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjK1wiIFwiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYytcIiBcIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBoYShhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGlhKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudChcImRpdlwiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoXCJ8XCIpLGU9Yy5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxDKS0ofmEuc291cmNlSW5kZXh8fEMpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBsYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PWN8fFwiYnV0dG9uXCI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGhhKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGhhKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gb2EoYSl7cmV0dXJuIGEmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZhfWM9ZmEuc3VwcG9ydD17fSxmPWZhLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj9cIkhUTUxcIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixkYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZGEpKSxjLmF0dHJpYnV0ZXM9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPVwiaVwiLCFhLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQobi5jcmVhdGVDb21tZW50KFwiXCIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRCeUlkJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImlkXCIpPT09Yn19KTooZGVsZXRlIGQuZmluZC5JRCxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTpjLnFzYT9iLnF1ZXJ5U2VsZWN0b3JBbGwoYSk6dm9pZCAwfTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT0wLGY9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZihcIipcIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPVoudGVzdChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGlhKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPVwiPGEgaWQ9J1wiK3UrXCInPjwvYT48c2VsZWN0IGlkPSdcIit1K1wiLVxcclxcXFwnIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCIsYS5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoJiZxLnB1c2goXCJbKl4kXT1cIitMK1wiKig/OicnfFxcXCJcXFwiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8cS5wdXNoKFwiXFxcXFtcIitMK1wiKig/OnZhbHVlfFwiK0srXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltpZH49XCIrdStcIi1dXCIpLmxlbmd0aHx8cS5wdXNoKFwifj1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxxLnB1c2goXCI6Y2hlY2tlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJhI1wiK3UrXCIrKlwiKS5sZW5ndGh8fHEucHVzaChcIi4jLitbK35dXCIpfSksaWEoZnVuY3Rpb24oYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmcS5wdXNoKFwibmFtZVwiK0wrXCIqWypeJHwhfl0/PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGh8fHEucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxxLnB1c2goXCIsLio6XCIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj1aLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmlhKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsXCJkaXZcIikscy5jYWxsKGEsXCJbcyE9JyddOnhcIiksci5wdXNoKFwiIT1cIixPKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKFwifFwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oXCJ8XCIpKSxiPVoudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fFoudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PW58fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09bnx8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9KKGssYSktSihrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGU9YS5wYXJlbnROb2RlLGY9Yi5wYXJlbnROb2RlLGc9W2FdLGg9W2JdO2lmKCFlfHwhZilyZXR1cm4gYT09PW4/LTE6Yj09PW4/MTplPy0xOmY/MTprP0ooayxhKS1KKGssYik6MDtpZihlPT09ZilyZXR1cm4ga2EoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpZy51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7d2hpbGUoZ1tkXT09PWhbZF0pZCsrO3JldHVybiBkP2thKGdbZF0saFtkXSk6Z1tkXT09PXY/LTE6aFtkXT09PXY/MTowfSxuKTpufSxmYS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZhKGEsbnVsbCxudWxsLGIpfSxmYS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVCxcIj0nJDEnXVwiKSxjLm1hdGNoZXNTZWxlY3RvciYmcCYmIUFbYitcIiBcIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiK2EpfSxmYS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9ZmEuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPVwiXCIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7XCI+XCI6e2RpcjpcInBhcmVudE5vZGVcIixmaXJzdDohMH0sXCIgXCI6e2RpcjpcInBhcmVudE5vZGVcIn0sXCIrXCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wiLGZpcnN0OiEwfSxcIn5cIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKGJhLGNhKSxhWzNdPShhWzNdfHxhWzRdfHxhWzVdfHxcIlwiKS5yZXBsYWNlKGJhLGNhKSxcIn49XCI9PT1hWzJdJiYoYVszXT1cIiBcIithWzNdK1wiIFwiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSxcIm50aFwiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxmYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKihcImV2ZW5cIj09PWFbM118fFwib2RkXCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8XCJvZGRcIj09PWFbM10pKTphWzNdJiZmYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVy5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHxcIlwiOmMmJlUudGVzdChjKSYmKGI9ZyhjLCEwKSkmJihiPWMuaW5kZXhPZihcIilcIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm5cIipcIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErXCIgXCJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKFwiKF58XCIrTCtcIilcIithK1wiKFwiK0wrXCJ8JClcIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdChcInN0cmluZ1wiPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1mYS5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/XCIhPVwiPT09YjpiPyhlKz1cIlwiLFwiPVwiPT09Yj9lPT09YzpcIiE9XCI9PT1iP2UhPT1jOlwiXj1cIj09PWI/YyYmMD09PWUuaW5kZXhPZihjKTpcIio9XCI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMTpcIiQ9XCI9PT1iP2MmJmUuc2xpY2UoLWMubGVuZ3RoKT09PWM6XCJ+PVwiPT09Yj8oXCIgXCIrZS5yZXBsYWNlKFAsXCIgXCIpK1wiIFwiKS5pbmRleE9mKGMpPi0xOlwifD1cIj09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrXCItXCI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1cIm50aFwiIT09YS5zbGljZSgwLDMpLGc9XCJsYXN0XCIhPT1hLnNsaWNlKC00KSxoPVwib2YtdHlwZVwiPT09YjtyZXR1cm4gMT09PWQmJjA9PT1lP2Z1bmN0aW9uKGEpe3JldHVybiEhYS5wYXJlbnROb2RlfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG0sbixvLHA9ZiE9PWc/XCJuZXh0U2libGluZ1wiOlwicHJldmlvdXNTaWJsaW5nXCIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWgsdD0hMTtpZihxKXtpZihmKXt3aGlsZShwKXttPWI7d2hpbGUobT1tW3BdKWlmKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9XCJvbmx5XCI9PT1hJiYhbyYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsXCJcIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9oYShmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9SihhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDpoYShmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUSxcIiQxXCIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8XCJcIil8fGZhLmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrYSksYT1hLnJlcGxhY2UoYmEsY2EpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHxiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErXCItXCIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmISFhLmNoZWNrZWR8fFwib3B0aW9uXCI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWS50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gWC50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJlwiYnV0dG9uXCI9PT1hLnR5cGV8fFwiYnV0dG9uXCI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVyblwiaW5wdXRcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHxcInRleHRcIj09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0Om5hKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpuYShmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6bmEoZnVuY3Rpb24oYSxiLGMpe3JldHVyblswPmM/YytiOmNdfSksZXZlbjpuYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpuYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0Om5hKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPWxhKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPW1hKGIpO2Z1bmN0aW9uIHBhKCl7fXBhLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgcGEsZz1mYS50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGgsaSxqLGs9elthK1wiIFwiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsXCIgXCIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVdbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9mYS5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHFhKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD1cIlwiO2M+YjtiKyspZCs9YVtiXS52YWx1ZTtyZXR1cm4gZH1mdW5jdGlvbiByYShhLGIsYyl7dmFyIGQ9Yi5kaXIsZT1jJiZcInBhcmVudE5vZGVcIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHxcIipcIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnVhKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj11YShyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/SihmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dWEocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkguYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHdhKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbXCIgXCJdLGk9Zz8xOjAsaz1yYShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9cmEoZnVuY3Rpb24oYSl7cmV0dXJuIEooYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2Y+aTtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bcmEoc2EobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7Zj5lO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHZhKGk+MSYmc2EobSksaT4xJiZxYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOlwiIFwiPT09YVtpLTJdLnR5cGU/XCIqXCI6XCJcIn0pKS5yZXBsYWNlKFEsXCIkMVwiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9XCIwXCIsdD1mJiZbXSx1PVtdLHY9aix4PWZ8fGUmJmQuZmluZC5UQUcoXCIqXCIsaykseT13Kz1udWxsPT12PzE6TWF0aC5yYW5kb20oKXx8LjEsej14Lmxlbmd0aDtmb3IoayYmKGo9Zz09PW58fGd8fGspO3MhPT16JiZudWxsIT0obD14W3NdKTtzKyspe2lmKGUmJmwpe289MCxnfHxsLm93bmVyRG9jdW1lbnQ9PT1ufHwobShsKSxoPSFwKTt3aGlsZShxPWFbbysrXSlpZihxKGwsZ3x8bixoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXkpfWMmJigobD0hcSYmbCkmJnItLSxmJiZ0LnB1c2gobCkpfWlmKHIrPXMsYyYmcyE9PXIpe289MDt3aGlsZShxPWJbbysrXSlxKHQsdSxnLGgpO2lmKGYpe2lmKHI+MCl3aGlsZShzLS0pdFtzXXx8dVtzXXx8KHVbc109Ri5jYWxsKGkpKTt1PXVhKHUpfUguYXBwbHkoaSx1KSxrJiYhZiYmdS5sZW5ndGg+MCYmcitiLmxlbmd0aD4xJiZmYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz15LGo9diksdH07cmV0dXJuIGM/aGEoZik6Zn1yZXR1cm4gaD1mYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthK1wiIFwiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSxvPSFmJiZnKGE9bi5zZWxlY3Rvcnx8YSk7aWYoZT1lfHxbXSwxPT09by5sZW5ndGgpe2lmKGo9b1swXT1vWzBdLnNsaWNlKDApLGoubGVuZ3RoPjImJlwiSURcIj09PShrPWpbMF0pLnR5cGUmJmMuZ2V0QnlJZCYmOT09PWIubm9kZVR5cGUmJnAmJmQucmVsYXRpdmVbalsxXS50eXBlXSl7aWYoYj0oZC5maW5kLklEKGsubWF0Y2hlc1swXS5yZXBsYWNlKGJhLGNhKSxiKXx8W10pWzBdLCFiKXJldHVybiBlO24mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGouc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9Vy5uZWVkc0NvbnRleHQudGVzdChhKT8wOmoubGVuZ3RoO3doaWxlKGktLSl7aWYoaz1qW2ldLGQucmVsYXRpdmVbbD1rLnR5cGVdKWJyZWFrO2lmKChtPWQuZmluZFtsXSkmJihmPW0oay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLF8udGVzdChqWzBdLnR5cGUpJiZvYShiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcWEoaiksIWEpcmV0dXJuIEguYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsIWJ8fF8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxpYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxqYShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmaWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGphKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxpYShmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwcltcIjpcIl09bi5leHByLnBzZXVkb3Msbi51bmlxdWVTb3J0PW4udW5pcXVlPXQudW5pcXVlU29ydCxuLnRleHQ9dC5nZXRUZXh0LG4uaXNYTUxEb2M9dC5pc1hNTCxuLmNvbnRhaW5zPXQuY29udGFpbnM7dmFyIHU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dm9pZCAwIT09Yzt3aGlsZSgoYT1hW2JdKSYmOSE9PWEubm9kZVR5cGUpaWYoMT09PWEubm9kZVR5cGUpe2lmKGUmJm4oYSkuaXMoYykpYnJlYWs7ZC5wdXNoKGEpfXJldHVybiBkfSx2PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfSx3PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQseD0vXjwoW1xcdy1dKylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8seT0vXi5bXjojXFxbXFwuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpe2lmKHkudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGguY2FsbChiLGEpPi0xIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT1cIjpub3QoXCIrYStcIilcIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMubGVuZ3RoLGQ9W10sZT10aGlzO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yK1wiIFwiK2E6YSxkfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHoodGhpcyxhfHxbXSwhMSkpfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHoodGhpcyxhfHxbXSwhMCkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIXoodGhpcyxcInN0cmluZ1wiPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSopKSQvLEM9bi5mbi5pbml0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZSxmO2lmKCFhKXJldHVybiB0aGlzO2lmKGM9Y3x8QSxcInN0cmluZ1wiPT10eXBlb2YgYSl7aWYoZT1cIjxcIj09PWFbMF0mJlwiPlwiPT09YVthLmxlbmd0aC0xXSYmYS5sZW5ndGg+PTM/W251bGwsYSxudWxsXTpCLmV4ZWMoYSksIWV8fCFlWzFdJiZiKXJldHVybiFifHxiLmpxdWVyeT8oYnx8YykuZmluZChhKTp0aGlzLmNvbnN0cnVjdG9yKGIpLmZpbmQoYSk7aWYoZVsxXSl7aWYoYj1iIGluc3RhbmNlb2Ygbj9iWzBdOmIsbi5tZXJnZSh0aGlzLG4ucGFyc2VIVE1MKGVbMV0sYiYmYi5ub2RlVHlwZT9iLm93bmVyRG9jdW1lbnR8fGI6ZCwhMCkpLHgudGVzdChlWzFdKSYmbi5pc1BsYWluT2JqZWN0KGIpKWZvcihlIGluIGIpbi5pc0Z1bmN0aW9uKHRoaXNbZV0pP3RoaXNbZV0oYltlXSk6dGhpcy5hdHRyKGUsYltlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09ZiksdGhpcy5jb250ZXh0PWQsdGhpcy5zZWxlY3Rvcj1hLHRoaXN9cmV0dXJuIGEubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWEsdGhpcy5sZW5ndGg9MSx0aGlzKTpuLmlzRnVuY3Rpb24oYSk/dm9pZCAwIT09Yy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1uKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDtjPmE7YSsrKWlmKG4uY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz13LnRlc3QoYSl8fFwic3RyaW5nXCIhPXR5cGVvZiBhP24oYSxifHx0aGlzLmNvbnRleHQpOjA7ZT5kO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJm4uZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9uLnVuaXF1ZVNvcnQoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhP1wic3RyaW5nXCI9PXR5cGVvZiBhP2guY2FsbChuKGEpLHRoaXNbMF0pOmguY2FsbCh0aGlzLGEuanF1ZXJ5P2FbMF06YSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLFwicGFyZW50Tm9kZVwiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLFwicGFyZW50Tm9kZVwiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBGKGEsXCJuZXh0U2libGluZ1wiKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsXCJuZXh0U2libGluZ1wiLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHYoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiB2KGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8bi5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9bi5tYXAodGhpcyxiLGMpO3JldHVyblwiVW50aWxcIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiZcInN0cmluZ1wiPT10eXBlb2YgZCYmKGU9bi5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKEVbYV18fG4udW5pcXVlU29ydChlKSxELnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFxTKy9nO2Z1bmN0aW9uIEgoYSl7dmFyIGI9e307cmV0dXJuIG4uZWFjaChhLm1hdGNoKEcpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifW4uQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9XCJzdHJpbmdcIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOlwiXCIpfSxqPXthZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGMmJiFiJiYoaD1mLmxlbmd0aC0xLGcucHVzaChjKSksZnVuY3Rpb24gZChiKXtuLmVhY2goYixmdW5jdGlvbihiLGMpe24uaXNGdW5jdGlvbihjKT9hLnVuaXF1ZSYmai5oYXMoYyl8fGYucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PW4udHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBuLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9bi5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxoPj1jJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bi5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz1cIlwiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGN8fChmPWM9XCJcIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFlfSxmaXJlV2l0aDpmdW5jdGlvbihhLGMpe3JldHVybiBlfHwoYz1jfHxbXSxjPVthLGMuc2xpY2U/Yy5zbGljZSgpOmNdLGcucHVzaChjKSxifHxpKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gai5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWR9fTtyZXR1cm4gan0sbi5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGEpe3ZhciBiPVtbXCJyZXNvbHZlXCIsXCJkb25lXCIsbi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZWplY3RlZFwiXSxbXCJub3RpZnlcIixcInByb2dyZXNzXCIsbi5DYWxsYmFja3MoXCJtZW1vcnlcIildXSxjPVwicGVuZGluZ1wiLGQ9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBlLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztyZXR1cm4gbi5EZWZlcnJlZChmdW5jdGlvbihjKXtuLmVhY2goYixmdW5jdGlvbihiLGYpe3ZhciBnPW4uaXNGdW5jdGlvbihhW2JdKSYmYVtiXTtlW2ZbMV1dKGZ1bmN0aW9uKCl7dmFyIGE9ZyYmZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/YS5wcm9taXNlKCkucHJvZ3Jlc3MoYy5ub3RpZnkpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KTpjW2ZbMF0rXCJXaXRoXCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rXCJXaXRoXCJdPWcuZmlyZVdpdGh9KSxkLnByb21pc2UoZSksYSYmYS5jYWxsKGUsZSksZX0sd2hlbjpmdW5jdGlvbihhKXt2YXIgYj0wLGM9ZS5jYWxsKGFyZ3VtZW50cyksZD1jLmxlbmd0aCxmPTEhPT1kfHxhJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9kOjAsZz0xPT09Zj9hOm4uRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7YlthXT10aGlzLGNbYV09YXJndW1lbnRzLmxlbmd0aD4xP2UuY2FsbChhcmd1bWVudHMpOmQsYz09PWk/Zy5ub3RpZnlXaXRoKGIsYyk6LS1mfHxnLnJlc29sdmVXaXRoKGIsYyl9fSxpLGosaztpZihkPjEpZm9yKGk9bmV3IEFycmF5KGQpLGo9bmV3IEFycmF5KGQpLGs9bmV3IEFycmF5KGQpO2Q+YjtiKyspY1tiXSYmbi5pc0Z1bmN0aW9uKGNbYl0ucHJvbWlzZSk/Y1tiXS5wcm9taXNlKCkucHJvZ3Jlc3MoaChiLGosaSkpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpOi0tZjtyZXR1cm4gZnx8Zy5yZXNvbHZlV2l0aChrLGMpLGcucHJvbWlzZSgpfX0pO3ZhciBJO24uZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucmVhZHkucHJvbWlzZSgpLmRvbmUoYSksdGhpc30sbi5leHRlbmQoe2lzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGEpe2E/bi5yZWFkeVdhaXQrKzpuLnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oYSl7KGE9PT0hMD8tLW4ucmVhZHlXYWl0Om4uaXNSZWFkeSl8fChuLmlzUmVhZHk9ITAsYSE9PSEwJiYtLW4ucmVhZHlXYWl0PjB8fChJLnJlc29sdmVXaXRoKGQsW25dKSxuLmZuLnRyaWdnZXJIYW5kbGVyJiYobihkKS50cmlnZ2VySGFuZGxlcihcInJlYWR5XCIpLG4oZCkub2ZmKFwicmVhZHlcIikpKSl9fSk7ZnVuY3Rpb24gSigpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixKKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSiksbi5yZWFkeSgpfW4ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtyZXR1cm4gSXx8KEk9bi5EZWZlcnJlZCgpLFwiY29tcGxldGVcIj09PWQucmVhZHlTdGF0ZXx8XCJsb2FkaW5nXCIhPT1kLnJlYWR5U3RhdGUmJiFkLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9hLnNldFRpbWVvdXQobi5yZWFkeSk6KGQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixKKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSikpKSxJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBLPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoXCJvYmplY3RcIj09PW4udHlwZShjKSl7ZT0hMDtmb3IoaCBpbiBjKUsoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn0sTD1mdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV8fDk9PT1hLm5vZGVUeXBlfHwhK2Eubm9kZVR5cGV9O2Z1bmN0aW9uIE0oKXt0aGlzLmV4cGFuZG89bi5leHBhbmRvK00udWlkKyt9TS51aWQ9MSxNLnByb3RvdHlwZT17cmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx7fTtyZXR1cm4gYS5ub2RlVHlwZT9hW3RoaXMuZXhwYW5kb109YzpPYmplY3QuZGVmaW5lUHJvcGVydHkoYSx0aGlzLmV4cGFuZG8se3ZhbHVlOmMsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksYVt0aGlzLmV4cGFuZG9dfSxjYWNoZTpmdW5jdGlvbihhKXtpZighTChhKSlyZXR1cm57fTt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIGJ8fChiPXt9LEwoYSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1iOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yixjb25maWd1cmFibGU6ITB9KSkpLGJ9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmNhY2hlKGEpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWVbYl09YztlbHNlIGZvcihkIGluIGIpZVtkXT1iW2RdO3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09Yj90aGlzLmNhY2hlKGEpOmFbdGhpcy5leHBhbmRvXSYmYVt0aGlzLmV4cGFuZG9dW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG4uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWFbdGhpcy5leHBhbmRvXTtpZih2b2lkIDAhPT1mKXtpZih2b2lkIDA9PT1iKXRoaXMucmVnaXN0ZXIoYSk7ZWxzZXtuLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChuLmNhbWVsQ2FzZSkpOihlPW4uY2FtZWxDYXNlKGIpLGIgaW4gZj9kPVtiLGVdOihkPWUsZD1kIGluIGY/W2RdOmQubWF0Y2goRyl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGZbZFtjXV19KHZvaWQgMD09PWJ8fG4uaXNFbXB0eU9iamVjdChmKSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT12b2lkIDA6ZGVsZXRlIGFbdGhpcy5leHBhbmRvXSl9fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPWFbdGhpcy5leHBhbmRvXTtyZXR1cm4gdm9pZCAwIT09YiYmIW4uaXNFbXB0eU9iamVjdChiKX19O3ZhciBOPW5ldyBNLE89bmV3IE0sUD0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sUT0vW0EtWl0vZztmdW5jdGlvbiBSKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPVwiZGF0YS1cIitiLnJlcGxhY2UoUSxcIi0kJlwiKS50b0xvd2VyQ2FzZSgpLGM9YS5nZXRBdHRyaWJ1dGUoZCksXCJzdHJpbmdcIj09dHlwZW9mIGMpe3RyeXtjPVwidHJ1ZVwiPT09Yz8hMDpcImZhbHNlXCI9PT1jPyExOlwibnVsbFwiPT09Yz9udWxsOitjK1wiXCI9PT1jPytjOlAudGVzdChjKT9uLnBhcnNlSlNPTihjKTpjO1xufWNhdGNoKGUpe31PLnNldChhLGIsYyl9ZWxzZSBjPXZvaWQgMDtyZXR1cm4gY31uLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gTy5oYXNEYXRhKGEpfHxOLmhhc0RhdGEoYSl9LGRhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBPLmFjY2VzcyhhLGIsYyl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtPLnJlbW92ZShhLGIpfSxfZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE4uYWNjZXNzKGEsYixjKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtOLnJlbW92ZShhLGIpfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9Ty5nZXQoZiksMT09PWYubm9kZVR5cGUmJiFOLmdldChmLFwiaGFzRGF0YUF0dHJzXCIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoXCJkYXRhLVwiKSYmKGQ9bi5jYW1lbENhc2UoZC5zbGljZSg1KSksUihmLGQsZVtkXSkpKTtOLnNldChmLFwiaGFzRGF0YUF0dHJzXCIsITApfXJldHVybiBlfXJldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe08uc2V0KHRoaXMsYSl9KTpLKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZDtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU8uZ2V0KGYsYSl8fE8uZ2V0KGYsYS5yZXBsYWNlKFEsXCItJCZcIikudG9Mb3dlckNhc2UoKSksdm9pZCAwIT09YylyZXR1cm4gYztpZihkPW4uY2FtZWxDYXNlKGEpLGM9Ty5nZXQoZixkKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9UihmLGQsdm9pZCAwKSx2b2lkIDAhPT1jKXJldHVybiBjfWVsc2UgZD1uLmNhbWVsQ2FzZShhKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1PLmdldCh0aGlzLGQpO08uc2V0KHRoaXMsZCxiKSxhLmluZGV4T2YoXCItXCIpPi0xJiZ2b2lkIDAhPT1jJiZPLnNldCh0aGlzLGEsYil9KX0sbnVsbCxiLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Ty5yZW1vdmUodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fFwiZnhcIikrXCJxdWV1ZVwiLGQ9Ti5nZXQoYSxiKSxjJiYoIWR8fG4uaXNBcnJheShjKT9kPU4uYWNjZXNzKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHxcImZ4XCI7dmFyIGM9bi5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1uLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe24uZGVxdWV1ZShhLGIpfTtcImlucHJvZ3Jlc3NcIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJihcImZ4XCI9PT1iJiZjLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrXCJxdWV1ZUhvb2tzXCI7cmV0dXJuIE4uZ2V0KGEsYyl8fE4uYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKS5hZGQoZnVuY3Rpb24oKXtOLnJlbW92ZShhLFtiK1wicXVldWVcIixjXSl9KX0pfX0pLG4uZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT1cImZ4XCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksXCJmeFwiPT09YSYmXCJpbnByb2dyZXNzXCIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9O1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fFwiZnhcIjt3aGlsZShnLS0pYz1OLmdldChmW2ddLGErXCJxdWV1ZUhvb2tzXCIpLGMmJmMuZW1wdHkmJihkKyssYy5lbXB0eS5hZGQoaCkpO3JldHVybiBoKCksZS5wcm9taXNlKGIpfX0pO3ZhciBTPS9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvLnNvdXJjZSxUPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK1MrXCIpKFthLXolXSopJFwiLFwiaVwiKSxVPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxWPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSxcIm5vbmVcIj09PW4uY3NzKGEsXCJkaXNwbGF5XCIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9O2Z1bmN0aW9uIFcoYSxiLGMsZCl7dmFyIGUsZj0xLGc9MjAsaD1kP2Z1bmN0aW9uKCl7cmV0dXJuIGQuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIG4uY3NzKGEsYixcIlwiKX0saT1oKCksaj1jJiZjWzNdfHwobi5jc3NOdW1iZXJbYl0/XCJcIjpcInB4XCIpLGs9KG4uY3NzTnVtYmVyW2JdfHxcInB4XCIhPT1qJiYraSkmJlQuZXhlYyhuLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fFwiLjVcIixrLz1mLG4uc3R5bGUoYSxiLGsraik7d2hpbGUoZiE9PShmPWgoKS9pKSYmMSE9PWYmJi0tZyl9cmV0dXJuIGMmJihrPStrfHwraXx8MCxlPWNbMV0/aysoY1sxXSsxKSpjWzJdOitjWzJdLGQmJihkLnVuaXQ9aixkLnN0YXJ0PWssZC5lbmQ9ZSkpLGV9dmFyIFg9L14oPzpjaGVja2JveHxyYWRpbykkL2ksWT0vPChbXFx3Oi1dKykvLFo9L14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSwkPXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07JC5vcHRncm91cD0kLm9wdGlvbiwkLnRib2R5PSQudGZvb3Q9JC5jb2xncm91cD0kLmNhcHRpb249JC50aGVhZCwkLnRoPSQudGQ7ZnVuY3Rpb24gXyhhLGIpe3ZhciBjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYnx8XCIqXCIpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fFwiKlwiKTpbXTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbi5ub2RlTmFtZShhLGIpP24ubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gYWEoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspTi5zZXQoYVtjXSxcImdsb2JhbEV2YWxcIiwhYnx8Ti5nZXQoYltjXSxcImdsb2JhbEV2YWxcIikpfXZhciBiYT0vPHwmIz9cXHcrOy87ZnVuY3Rpb24gY2EoYSxiLGMsZCxlKXtmb3IodmFyIGYsZyxoLGksaixrLGw9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbT1bXSxvPTAscD1hLmxlbmd0aDtwPm87bysrKWlmKGY9YVtvXSxmfHwwPT09ZilpZihcIm9iamVjdFwiPT09bi50eXBlKGYpKW4ubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKGJhLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGg9KFkuZXhlYyhmKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCksaT0kW2hdfHwkLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rbi5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO24ubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9XCJcIn1lbHNlIG0ucHVzaChiLmNyZWF0ZVRleHROb2RlKGYpKTtsLnRleHRDb250ZW50PVwiXCIsbz0wO3doaWxlKGY9bVtvKytdKWlmKGQmJm4uaW5BcnJheShmLGQpPi0xKWUmJmUucHVzaChmKTtlbHNlIGlmKGo9bi5jb250YWlucyhmLm93bmVyRG9jdW1lbnQsZiksZz1fKGwuYXBwZW5kQ2hpbGQoZiksXCJzY3JpcHRcIiksaiYmYWEoZyksYyl7az0wO3doaWxlKGY9Z1trKytdKVoudGVzdChmLnR5cGV8fFwiXCIpJiZjLnB1c2goZil9cmV0dXJuIGx9IWZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcImRpdlwiKSksYz1kLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtjLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpLGMuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKSxjLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInRcIiksYi5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsYi5pbm5lckhUTUw9XCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCIsbC5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBkYT0vXmtleS8sZWE9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLGZhPS9eKFteLl0qKSg/OlxcLiguKyl8KS87ZnVuY3Rpb24gZ2EoKXtyZXR1cm4hMH1mdW5jdGlvbiBoYSgpe3JldHVybiExfWZ1bmN0aW9uIGlhKCl7dHJ5e3JldHVybiBkLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1mdW5jdGlvbiBqYShhLGIsYyxkLGUsZil7dmFyIGcsaDtpZihcIm9iamVjdFwiPT10eXBlb2YgYil7XCJzdHJpbmdcIiE9dHlwZW9mIGMmJihkPWR8fGMsYz12b2lkIDApO2ZvcihoIGluIGIpamEoYSxoLGMsZCxiW2hdLGYpO3JldHVybiBhfWlmKG51bGw9PWQmJm51bGw9PWU/KGU9YyxkPWM9dm9pZCAwKTpudWxsPT1lJiYoXCJzdHJpbmdcIj09dHlwZW9mIGM/KGU9ZCxkPXZvaWQgMCk6KGU9ZCxkPWMsYz12b2lkIDApKSxlPT09ITEpZT1oYTtlbHNlIGlmKCFlKXJldHVybiBhO3JldHVybiAxPT09ZiYmKGc9ZSxlPWZ1bmN0aW9uKGEpe3JldHVybiBuKCkub2ZmKGEpLGcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLmd1aWQ9Zy5ndWlkfHwoZy5ndWlkPW4uZ3VpZCsrKSksYS5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5hZGQodGhpcyxiLGUsZCxjKX0pfW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9Ti5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBuJiZuLmV2ZW50LnRyaWdnZXJlZCE9PWIudHlwZT9uLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGEsYXJndW1lbnRzKTp2b2lkIDB9KSxiPShifHxcIlwiKS5tYXRjaChHKXx8W1wiXCJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWg9ZmEuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvJiYobD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LGs9bi5leHRlbmQoe3R5cGU6byxvcmlnVHlwZTpxLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmbi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpwLmpvaW4oXCIuXCIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1OLmhhc0RhdGEoYSkmJk4uZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8XCJcIikubWF0Y2goRyl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPWZhLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyl7bD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbT1pW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitwLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcSE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoXCIqKlwiIT09ZHx8IWsuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxrLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGspKTtnJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGlbb10pfWVsc2UgZm9yKG8gaW4gaSluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChpKSYmTi5yZW1vdmUoYSxcImhhbmRsZSBldmVudHNcIil9fSxkaXNwYXRjaDpmdW5jdGlvbihhKXthPW4uZXZlbnQuZml4KGEpO3ZhciBiLGMsZCxmLGcsaD1bXSxpPWUuY2FsbChhcmd1bWVudHMpLGo9KE4uZ2V0KHRoaXMsXCJldmVudHNcIil8fHt9KVthLnR5cGVdfHxbXSxrPW4uZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtpZihpWzBdPWEsYS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxhKSE9PSExKXtoPW4uZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEsaiksYj0wO3doaWxlKChmPWhbYisrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1mLmVsZW0sYz0wO3doaWxlKChnPWYuaGFuZGxlcnNbYysrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpYS5ybmFtZXNwYWNlJiYhYS5ybmFtZXNwYWNlLnRlc3QoZy5uYW1lc3BhY2UpfHwoYS5oYW5kbGVPYmo9ZyxhLmRhdGE9Zy5kYXRhLGQ9KChuLmV2ZW50LnNwZWNpYWxbZy5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGcuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWQmJihhLnJlc3VsdD1kKT09PSExJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxhKSxhLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz1bXSxoPWIuZGVsZWdhdGVDb3VudCxpPWEudGFyZ2V0O2lmKGgmJmkubm9kZVR5cGUmJihcImNsaWNrXCIhPT1hLnR5cGV8fGlzTmFOKGEuYnV0dG9uKXx8YS5idXR0b248MSkpZm9yKDtpIT09dGhpcztpPWkucGFyZW50Tm9kZXx8dGhpcylpZigxPT09aS5ub2RlVHlwZSYmKGkuZGlzYWJsZWQhPT0hMHx8XCJjbGlja1wiIT09YS50eXBlKSl7Zm9yKGQ9W10sYz0wO2g+YztjKyspZj1iW2NdLGU9Zi5zZWxlY3RvcitcIiBcIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+LTE6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LHByb3BzOlwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZGV0YWlsIGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGc9Yi5idXR0b247cmV0dXJuIG51bGw9PWEucGFnZVgmJm51bGwhPWIuY2xpZW50WCYmKGM9YS50YXJnZXQub3duZXJEb2N1bWVudHx8ZCxlPWMuZG9jdW1lbnRFbGVtZW50LGY9Yy5ib2R5LGEucGFnZVg9Yi5jbGllbnRYKyhlJiZlLnNjcm9sbExlZnR8fGYmJmYuc2Nyb2xsTGVmdHx8MCktKGUmJmUuY2xpZW50TGVmdHx8ZiYmZi5jbGllbnRMZWZ0fHwwKSxhLnBhZ2VZPWIuY2xpZW50WSsoZSYmZS5zY3JvbGxUb3B8fGYmJmYuc2Nyb2xsVG9wfHwwKS0oZSYmZS5jbGllbnRUb3B8fGYmJmYuY2xpZW50VG9wfHwwKSksYS53aGljaHx8dm9pZCAwPT09Z3x8KGEud2hpY2g9MSZnPzE6MiZnPzM6NCZnPzI6MCksYX19LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxlLGY9YS50eXBlLGc9YSxoPXRoaXMuZml4SG9va3NbZl07aHx8KHRoaXMuZml4SG9va3NbZl09aD1lYS50ZXN0KGYpP3RoaXMubW91c2VIb29rczpkYS50ZXN0KGYpP3RoaXMua2V5SG9va3M6e30pLGU9aC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChoLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZyksYj1lLmxlbmd0aDt3aGlsZShiLS0pYz1lW2JdLGFbY109Z1tjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1kKSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxoLmZpbHRlcj9oLmZpbHRlcihhLGcpOmF9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09aWEoKSYmdGhpcy5mb2N1cz8odGhpcy5mb2N1cygpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09aWEoKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmbi5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIik/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCxcImFcIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fX0sbi5yZW1vdmVFdmVudD1mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/Z2E6aGEpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bi5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6aGEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6aGEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6aGEsaXNTaW11bGF0ZWQ6ITEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9Z2EsYSYmIXRoaXMuaXNTaW11bGF0ZWQmJmEucHJldmVudERlZmF1bHQoKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9Z2EsYSYmIXRoaXMuaXNTaW11bGF0ZWQmJmEuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWdhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxuLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyZW50ZXI6XCJwb2ludGVyb3ZlclwiLHBvaW50ZXJsZWF2ZTpcInBvaW50ZXJvdXRcIn0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fG4uY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gamEodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBqYSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybiBiIT09ITEmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9aGEpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9fSk7dmFyIGthPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6LV0rKVtePl0qKVxcLz4vZ2ksbGE9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksbWE9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxuYT0vXnRydWVcXC8oLiopLyxvYT0vXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2c7ZnVuY3Rpb24gcGEoYSxiKXtyZXR1cm4gbi5ub2RlTmFtZShhLFwidGFibGVcIikmJm4ubm9kZU5hbWUoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLFwidHJcIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikpOmF9ZnVuY3Rpb24gcWEoYSl7cmV0dXJuIGEudHlwZT0obnVsbCE9PWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkrXCIvXCIrYS50eXBlLGF9ZnVuY3Rpb24gcmEoYSl7dmFyIGI9bmEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKSxhfWZ1bmN0aW9uIHNhKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksajtpZigxPT09Yi5ub2RlVHlwZSl7aWYoTi5oYXNEYXRhKGEpJiYoZj1OLmFjY2VzcyhhKSxnPU4uc2V0KGIsZiksaj1mLmV2ZW50cykpe2RlbGV0ZSBnLmhhbmRsZSxnLmV2ZW50cz17fTtmb3IoZSBpbiBqKWZvcihjPTAsZD1qW2VdLmxlbmd0aDtkPmM7YysrKW4uZXZlbnQuYWRkKGIsZSxqW2VdW2NdKX1PLmhhc0RhdGEoYSkmJihoPU8uYWNjZXNzKGEpLGk9bi5leHRlbmQoe30saCksTy5zZXQoYixpKSl9fWZ1bmN0aW9uIHRhKGEsYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1wiaW5wdXRcIj09PWMmJlgudGVzdChhLnR5cGUpP2IuY2hlY2tlZD1hLmNoZWNrZWQ6XCJpbnB1dFwiIT09YyYmXCJ0ZXh0YXJlYVwiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1mdW5jdGlvbiB1YShhLGIsYyxkKXtiPWYuYXBwbHkoW10sYik7dmFyIGUsZyxoLGksaixrLG09MCxvPWEubGVuZ3RoLHA9by0xLHE9YlswXSxyPW4uaXNGdW5jdGlvbihxKTtpZihyfHxvPjEmJlwic3RyaW5nXCI9PXR5cGVvZiBxJiYhbC5jaGVja0Nsb25lJiZtYS50ZXN0KHEpKXJldHVybiBhLmVhY2goZnVuY3Rpb24oZSl7dmFyIGY9YS5lcShlKTtyJiYoYlswXT1xLmNhbGwodGhpcyxlLGYuaHRtbCgpKSksdWEoZixiLGMsZCl9KTtpZihvJiYoZT1jYShiLGFbMF0ub3duZXJEb2N1bWVudCwhMSxhLGQpLGc9ZS5maXJzdENoaWxkLDE9PT1lLmNoaWxkTm9kZXMubGVuZ3RoJiYoZT1nKSxnfHxkKSl7Zm9yKGg9bi5tYXAoXyhlLFwic2NyaXB0XCIpLHFhKSxpPWgubGVuZ3RoO28+bTttKyspaj1lLG0hPT1wJiYoaj1uLmNsb25lKGosITAsITApLGkmJm4ubWVyZ2UoaCxfKGosXCJzY3JpcHRcIikpKSxjLmNhbGwoYVttXSxqLG0pO2lmKGkpZm9yKGs9aFtoLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGgscmEpLG09MDtpPm07bSsrKWo9aFttXSxaLnRlc3Qoai50eXBlfHxcIlwiKSYmIU4uYWNjZXNzKGosXCJnbG9iYWxFdmFsXCIpJiZuLmNvbnRhaW5zKGssaikmJihqLnNyYz9uLl9ldmFsVXJsJiZuLl9ldmFsVXJsKGouc3JjKTpuLmdsb2JhbEV2YWwoai50ZXh0Q29udGVudC5yZXBsYWNlKG9hLFwiXCIpKSl9cmV0dXJuIGF9ZnVuY3Rpb24gdmEoYSxiLGMpe2Zvcih2YXIgZCxlPWI/bi5maWx0ZXIoYixhKTphLGY9MDtudWxsIT0oZD1lW2ZdKTtmKyspY3x8MSE9PWQubm9kZVR5cGV8fG4uY2xlYW5EYXRhKF8oZCkpLGQucGFyZW50Tm9kZSYmKGMmJm4uY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZhYShfKGQsXCJzY3JpcHRcIikpLGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSk7cmV0dXJuIGF9bi5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShrYSxcIjwkMT48LyQyPlwiKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZz1fKGgpLGY9XyhhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXRhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fF8oYSksZz1nfHxfKGgpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspc2EoZltkXSxnW2RdKTtlbHNlIHNhKGEsaCk7cmV0dXJuIGc9XyhoLFwic2NyaXB0XCIpLGcubGVuZ3RoPjAmJmFhKGcsIWkmJl8oYSxcInNjcmlwdFwiKSksaH0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZT1uLmV2ZW50LnNwZWNpYWwsZj0wO3ZvaWQgMCE9PShjPWFbZl0pO2YrKylpZihMKGMpKXtpZihiPWNbTi5leHBhbmRvXSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZVtkXT9uLmV2ZW50LnJlbW92ZShjLGQpOm4ucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtjW04uZXhwYW5kb109dm9pZCAwfWNbTy5leHBhbmRvXSYmKGNbTy5leHBhbmRvXT12b2lkIDApfX19KSxuLmZuLmV4dGVuZCh7ZG9tTWFuaXA6dWEsZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB2YSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHZhKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEsodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPXBhKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB1YSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9cGEodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB1YSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB1YSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoXyhhLCExKSksYS50ZXh0Q29udGVudD1cIlwiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBLKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYhbGEudGVzdChhKSYmISRbKFkuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCldKXthPW4uaHRtbFByZWZpbHRlcihhKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShfKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtuLmluQXJyYXkodGhpcyxhKTwwJiYobi5jbGVhbkRhdGEoXyh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86XCJhcHBlbmRcIixwcmVwZW5kVG86XCJwcmVwZW5kXCIsaW5zZXJ0QmVmb3JlOlwiYmVmb3JlXCIsaW5zZXJ0QWZ0ZXI6XCJhZnRlclwiLHJlcGxhY2VBbGw6XCJyZXBsYWNlV2l0aFwifSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1uKGEpLGY9ZS5sZW5ndGgtMSxoPTA7Zj49aDtoKyspYz1oPT09Zj90aGlzOnRoaXMuY2xvbmUoITApLG4oZVtoXSlbYl0oYyksZy5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgd2EseGE9e0hUTUw6XCJibG9ja1wiLEJPRFk6XCJibG9ja1wifTtmdW5jdGlvbiB5YShhLGIpe3ZhciBjPW4oYi5jcmVhdGVFbGVtZW50KGEpKS5hcHBlbmRUbyhiLmJvZHkpLGQ9bi5jc3MoY1swXSxcImRpc3BsYXlcIik7cmV0dXJuIGMuZGV0YWNoKCksZH1mdW5jdGlvbiB6YShhKXt2YXIgYj1kLGM9eGFbYV07cmV0dXJuIGN8fChjPXlhKGEsYiksXCJub25lXCIhPT1jJiZjfHwod2E9KHdhfHxuKFwiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPlwiKSkuYXBwZW5kVG8oYi5kb2N1bWVudEVsZW1lbnQpLGI9d2FbMF0uY29udGVudERvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz15YShhLGIpLHdhLmRldGFjaCgpKSx4YVthXT1jKSxjfXZhciBBYT0vXm1hcmdpbi8sQmE9bmV3IFJlZ0V4cChcIl4oXCIrUytcIikoPyFweClbYS16JV0rJFwiLFwiaVwiKSxDYT1mdW5jdGlvbihiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIGMmJmMub3BlbmVyfHwoYz1hKSxjLmdldENvbXB1dGVkU3R5bGUoYil9LERhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfSxFYT1kLmRvY3VtZW50RWxlbWVudDshZnVuY3Rpb24oKXt2YXIgYixjLGUsZixnPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxoPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihoLnN0eWxlKXtoLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiY29udGVudC1ib3hcIixoLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJcIixsLmNsZWFyQ2xvbmVTdHlsZT1cImNvbnRlbnQtYm94XCI9PT1oLnN0eWxlLmJhY2tncm91bmRDbGlwLGcuc3R5bGUuY3NzVGV4dD1cImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlXCIsZy5hcHBlbmRDaGlsZChoKTtmdW5jdGlvbiBpKCl7aC5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt0b3A6MSU7d2lkdGg6NTAlXCIsaC5pbm5lckhUTUw9XCJcIixFYS5hcHBlbmRDaGlsZChnKTt2YXIgZD1hLmdldENvbXB1dGVkU3R5bGUoaCk7Yj1cIjElXCIhPT1kLnRvcCxmPVwiMnB4XCI9PT1kLm1hcmdpbkxlZnQsYz1cIjRweFwiPT09ZC53aWR0aCxoLnN0eWxlLm1hcmdpblJpZ2h0PVwiNTAlXCIsZT1cIjRweFwiPT09ZC5tYXJnaW5SaWdodCxFYS5yZW1vdmVDaGlsZChnKX1uLmV4dGVuZChsLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGkoKSxifSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZpKCksY30scGl4ZWxNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZpKCksZX0scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmkoKSxmfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7dmFyIGIsYz1oLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1oLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiLGMuc3R5bGUubWFyZ2luUmlnaHQ9Yy5zdHlsZS53aWR0aD1cIjBcIixoLnN0eWxlLndpZHRoPVwiMXB4XCIsRWEuYXBwZW5kQ2hpbGQoZyksYj0hcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoYykubWFyZ2luUmlnaHQpLEVhLnJlbW92ZUNoaWxkKGcpLGgucmVtb3ZlQ2hpbGQoYyksYn19KX19KCk7ZnVuY3Rpb24gRmEoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxDYShhKSxnPWM/Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdOnZvaWQgMCxcIlwiIT09ZyYmdm9pZCAwIT09Z3x8bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW4uc3R5bGUoYSxiKSksYyYmIWwucGl4ZWxNYXJnaW5SaWdodCgpJiZCYS50ZXN0KGcpJiZBYS50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpLHZvaWQgMCE9PWc/ZytcIlwiOmd9ZnVuY3Rpb24gR2EoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIEhhPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxJYT17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sSmE9e2xldHRlclNwYWNpbmc6XCIwXCIsZm9udFdlaWdodDpcIjQwMFwifSxLYT1bXCJXZWJraXRcIixcIk9cIixcIk1velwiLFwibXNcIl0sTGE9ZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLnN0eWxlO2Z1bmN0aW9uIE1hKGEpe2lmKGEgaW4gTGEpcmV0dXJuIGE7dmFyIGI9YVswXS50b1VwcGVyQ2FzZSgpK2Euc2xpY2UoMSksYz1LYS5sZW5ndGg7d2hpbGUoYy0tKWlmKGE9S2FbY10rYixhIGluIExhKXJldHVybiBhfWZ1bmN0aW9uIE5hKGEsYixjKXt2YXIgZD1ULmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzJdLShjfHwwKSkrKGRbM118fFwicHhcIik6Yn1mdW5jdGlvbiBPYShhLGIsYyxkLGUpe2Zvcih2YXIgZj1jPT09KGQ/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT1iPzE6MCxnPTA7ND5mO2YrPTIpXCJtYXJnaW5cIj09PWMmJihnKz1uLmNzcyhhLGMrVVtmXSwhMCxlKSksZD8oXCJjb250ZW50XCI9PT1jJiYoZy09bi5jc3MoYSxcInBhZGRpbmdcIitVW2ZdLCEwLGUpKSxcIm1hcmdpblwiIT09YyYmKGctPW4uY3NzKGEsXCJib3JkZXJcIitVW2ZdK1wiV2lkdGhcIiwhMCxlKSkpOihnKz1uLmNzcyhhLFwicGFkZGluZ1wiK1VbZl0sITAsZSksXCJwYWRkaW5nXCIhPT1jJiYoZys9bi5jc3MoYSxcImJvcmRlclwiK1VbZl0rXCJXaWR0aFwiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gUGEoYSxiLGMpe3ZhciBkPSEwLGU9XCJ3aWR0aFwiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9Q2EoYSksZz1cImJvcmRlci1ib3hcIj09PW4uY3NzKGEsXCJib3hTaXppbmdcIiwhMSxmKTtpZigwPj1lfHxudWxsPT1lKXtpZihlPUZhKGEsYixmKSwoMD5lfHxudWxsPT1lKSYmKGU9YS5zdHlsZVtiXSksQmEudGVzdChlKSlyZXR1cm4gZTtkPWcmJihsLmJveFNpemluZ1JlbGlhYmxlKCl8fGU9PT1hLnN0eWxlW2JdKSxlPXBhcnNlRmxvYXQoZSl8fDB9cmV0dXJuIGUrT2EoYSxiLGN8fChnP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpLGQsZikrXCJweFwifWZ1bmN0aW9uIFFhKGEsYil7Zm9yKHZhciBjLGQsZSxmPVtdLGc9MCxoPWEubGVuZ3RoO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihmW2ddPU4uZ2V0KGQsXCJvbGRkaXNwbGF5XCIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fFwibm9uZVwiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT1cIlwiKSxcIlwiPT09ZC5zdHlsZS5kaXNwbGF5JiZWKGQpJiYoZltnXT1OLmFjY2VzcyhkLFwib2xkZGlzcGxheVwiLHphKGQubm9kZU5hbWUpKSkpOihlPVYoZCksXCJub25lXCI9PT1jJiZlfHxOLnNldChkLFwib2xkZGlzcGxheVwiLGU/YzpuLmNzcyhkLFwiZGlzcGxheVwiKSkpKTtmb3IoZz0wO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihiJiZcIm5vbmVcIiE9PWQuc3R5bGUuZGlzcGxheSYmXCJcIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fFwiXCI6XCJub25lXCIpKTtyZXR1cm4gYX1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPUZhKGEsXCJvcGFjaXR5XCIpO3JldHVyblwiXCI9PT1jP1wiMVwiOmN9fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjpcImNzc0Zsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYiksaT1hLnN0eWxlO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPU1hKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sdm9pZCAwPT09Yz9nJiZcImdldFwiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdOihmPXR5cGVvZiBjLFwic3RyaW5nXCI9PT1mJiYoZT1ULmV4ZWMoYykpJiZlWzFdJiYoYz1XKGEsYixlKSxmPVwibnVtYmVyXCIpLG51bGwhPWMmJmM9PT1jJiYoXCJudW1iZXJcIj09PWYmJihjKz1lJiZlWzNdfHwobi5jc3NOdW1iZXJbaF0/XCJcIjpcInB4XCIpKSxsLmNsZWFyQ2xvbmVTdHlsZXx8XCJcIiE9PWN8fDAhPT1iLmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpfHwoaVtiXT1cImluaGVyaXRcIiksZyYmXCJzZXRcImluIGcmJnZvaWQgMD09PShjPWcuc2V0KGEsYyxkKSl8fChpW2JdPWMpKSx2b2lkIDApfX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPU1hKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmXCJnZXRcImluIGcmJihlPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWUmJihlPUZhKGEsYixkKSksXCJub3JtYWxcIj09PWUmJmIgaW4gSmEmJihlPUphW2JdKSxcIlwiPT09Y3x8Yz8oZj1wYXJzZUZsb2F0KGUpLGM9PT0hMHx8aXNGaW5pdGUoZik/Znx8MDplKTplfX0pLG4uZWFjaChbXCJoZWlnaHRcIixcIndpZHRoXCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz9IYS50ZXN0KG4uY3NzKGEsXCJkaXNwbGF5XCIpKSYmMD09PWEub2Zmc2V0V2lkdGg/RGEoYSxJYSxmdW5jdGlvbigpe3JldHVybiBQYShhLGIsZCl9KTpQYShhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlLGY9ZCYmQ2EoYSksZz1kJiZPYShhLGIsZCxcImJvcmRlci1ib3hcIj09PW4uY3NzKGEsXCJib3hTaXppbmdcIiwhMSxmKSxmKTtyZXR1cm4gZyYmKGU9VC5leGVjKGMpKSYmXCJweFwiIT09KGVbM118fFwicHhcIikmJihhLnN0eWxlW2JdPWMsYz1uLmNzcyhhLGIpKSxOYShhLGMsZyl9fX0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1HYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KEZhKGEsXCJtYXJnaW5MZWZ0XCIpKXx8YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LURhKGEse21hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSkpK1wicHhcIjp2b2lkIDB9KSxuLmNzc0hvb2tzLm1hcmdpblJpZ2h0PUdhKGwucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihhLGIpe3JldHVybiBiP0RhKGEse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0sRmEsW2EsXCJtYXJnaW5SaWdodFwiXSk6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdOzQ+ZDtkKyspZVthK1VbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sQWEudGVzdChhKXx8KG4uY3NzSG9va3NbYStiXS5zZXQ9TmEpfSksbi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBLKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobi5pc0FycmF5KGIpKXtmb3IoZD1DYShhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1uLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bi5zdHlsZShhLGIsYyk6bi5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gUWEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gUWEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtWKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gUmEoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IFJhLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1SYSxSYS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlJhLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fG4uZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/XCJcIjpcInB4XCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1SYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6UmEucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9UmEucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPW4uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpSYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxSYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9UmEucHJvdG90eXBlLFJhLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gMSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbCE9YS5lbGVtW2EucHJvcF0mJm51bGw9PWEuZWxlbS5zdHlsZVthLnByb3BdP2EuZWxlbVthLnByb3BdOihiPW4uY3NzKGEuZWxlbSxhLnByb3AsXCJcIiksYiYmXCJhdXRvXCIhPT1iP2I6MCl9LHNldDpmdW5jdGlvbihhKXtuLmZ4LnN0ZXBbYS5wcm9wXT9uLmZ4LnN0ZXBbYS5wcm9wXShhKToxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsPT1hLmVsZW0uc3R5bGVbbi5jc3NQcm9wc1thLnByb3BdXSYmIW4uY3NzSG9va3NbYS5wcm9wXT9hLmVsZW1bYS5wcm9wXT1hLm5vdzpuLnN0eWxlKGEuZWxlbSxhLnByb3AsYS5ub3crYS51bml0KX19fSxSYS5wcm9wSG9va3Muc2Nyb2xsVG9wPVJhLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oYSl7YS5lbGVtLm5vZGVUeXBlJiZhLmVsZW0ucGFyZW50Tm9kZSYmKGEuZWxlbVthLnByb3BdPWEubm93KX19LG4uZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHN3aW5nOmZ1bmN0aW9uKGEpe3JldHVybi41LU1hdGguY29zKGEqTWF0aC5QSSkvMn0sX2RlZmF1bHQ6XCJzd2luZ1wifSxuLmZ4PVJhLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgU2EsVGEsVWE9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFZhPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gV2EoKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7U2E9dm9pZCAwfSksU2E9bi5ub3coKX1mdW5jdGlvbiBYYShhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVVbZF0sZVtcIm1hcmdpblwiK2NdPWVbXCJwYWRkaW5nXCIrY109YTtyZXR1cm4gYiYmKGUub3BhY2l0eT1lLndpZHRoPWEpLGV9ZnVuY3Rpb24gWWEoYSxiLGMpe2Zvcih2YXIgZCxlPShfYS50d2VlbmVyc1tiXXx8W10pLmNvbmNhdChfYS50d2VlbmVyc1tcIipcIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFphKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlYoYSkscT1OLmdldChhLFwiZnhzaG93XCIpO2MucXVldWV8fChoPW4uX3F1ZXVlSG9va3MoYSxcImZ4XCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLGwuYWx3YXlzKGZ1bmN0aW9uKCl7bC5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLFwiZnhcIikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoXCJoZWlnaHRcImluIGJ8fFwid2lkdGhcImluIGIpJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1uLmNzcyhhLFwiZGlzcGxheVwiKSxrPVwibm9uZVwiPT09aj9OLmdldChhLFwib2xkZGlzcGxheVwiKXx8emEoYS5ub2RlTmFtZSk6aixcImlubGluZVwiPT09ayYmXCJub25lXCI9PT1uLmNzcyhhLFwiZmxvYXRcIikmJihvLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PVwiaGlkZGVuXCIsbC5hbHdheXMoZnVuY3Rpb24oKXtvLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0sby5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxvLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLFVhLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8XCJ0b2dnbGVcIj09PWUsZT09PShwP1wiaGlkZVwiOlwic2hvd1wiKSl7aWYoXCJzaG93XCIhPT1lfHwhcXx8dm9pZCAwPT09cVtkXSljb250aW51ZTtwPSEwfW1bZF09cSYmcVtkXXx8bi5zdHlsZShhLGQpfWVsc2Ugaj12b2lkIDA7aWYobi5pc0VtcHR5T2JqZWN0KG0pKVwiaW5saW5lXCI9PT0oXCJub25lXCI9PT1qP3phKGEubm9kZU5hbWUpOmopJiYoby5kaXNwbGF5PWopO2Vsc2V7cT9cImhpZGRlblwiaW4gcSYmKHA9cS5oaWRkZW4pOnE9Ti5hY2Nlc3MoYSxcImZ4c2hvd1wiLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtOLnJlbW92ZShhLFwiZnhzaG93XCIpO2ZvcihiIGluIG0pbi5zdHlsZShhLGIsbVtiXSl9KTtmb3IoZCBpbiBtKWc9WWEocD9xW2RdOjAsZCxsKSxkIGluIHF8fChxW2RdPWcuc3RhcnQscCYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gJGEoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIF9hKGEsYixjKXt2YXIgZCxlLGY9MCxnPV9hLnByZWZpbHRlcnMubGVuZ3RoLGg9bi5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBpLmVsZW19KSxpPWZ1bmN0aW9uKCl7aWYoZSlyZXR1cm4hMTtmb3IodmFyIGI9U2F8fFdhKCksYz1NYXRoLm1heCgwLGouc3RhcnRUaW1lK2ouZHVyYXRpb24tYiksZD1jL2ouZHVyYXRpb258fDAsZj0xLWQsZz0wLGk9ai50d2VlbnMubGVuZ3RoO2k+ZztnKyspai50d2VlbnNbZ10ucnVuKGYpO3JldHVybiBoLm5vdGlmeVdpdGgoYSxbaixmLGNdKSwxPmYmJmk/YzooaC5yZXNvbHZlV2l0aChhLFtqXSksITEpfSxqPWgucHJvbWlzZSh7ZWxlbTphLHByb3BzOm4uZXh0ZW5kKHt9LGIpLG9wdHM6bi5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOm4uZWFzaW5nLl9kZWZhdWx0fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6U2F8fFdhKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1uLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiPyhoLm5vdGlmeVdpdGgoYSxbaiwxLDBdKSxoLnJlc29sdmVXaXRoKGEsW2osYl0pKTpoLnJlamVjdFdpdGgoYSxbaixiXSksdGhpc319KSxrPWoucHJvcHM7Zm9yKCRhKGssai5vcHRzLnNwZWNpYWxFYXNpbmcpO2c+ZjtmKyspaWYoZD1fYS5wcmVmaWx0ZXJzW2ZdLmNhbGwoaixhLGssai5vcHRzKSlyZXR1cm4gbi5pc0Z1bmN0aW9uKGQuc3RvcCkmJihuLl9xdWV1ZUhvb2tzKGouZWxlbSxqLm9wdHMucXVldWUpLnN0b3A9bi5wcm94eShkLnN0b3AsZCkpLGQ7cmV0dXJuIG4ubWFwKGssWWEsaiksbi5pc0Z1bmN0aW9uKGoub3B0cy5zdGFydCkmJmoub3B0cy5zdGFydC5jYWxsKGEsaiksbi5meC50aW1lcihuLmV4dGVuZChpLHtlbGVtOmEsYW5pbTpqLHF1ZXVlOmoub3B0cy5xdWV1ZX0pKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKX1uLkFuaW1hdGlvbj1uLmV4dGVuZChfYSx7dHdlZW5lcnM6e1wiKlwiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKTtyZXR1cm4gVyhjLmVsZW0sYSxULmV4ZWMoYiksYyksY31dfSx0d2VlbmVyOmZ1bmN0aW9uKGEsYil7bi5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bXCIqXCJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLF9hLnR3ZWVuZXJzW2NdPV9hLnR3ZWVuZXJzW2NdfHxbXSxfYS50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltaYV0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9fYS5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6X2EucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJlwib2JqZWN0XCI9PXR5cGVvZiBhP24uZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8bi5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFuLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiBkLmR1cmF0aW9uPW4uZngub2ZmPzA6XCJudW1iZXJcIj09dHlwZW9mIGQuZHVyYXRpb24/ZC5kdXJhdGlvbjpkLmR1cmF0aW9uIGluIG4uZnguc3BlZWRzP24uZnguc3BlZWRzW2QuZHVyYXRpb25dOm4uZnguc3BlZWRzLl9kZWZhdWx0LG51bGwhPWQucXVldWUmJmQucXVldWUhPT0hMHx8KGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihWKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uaXNFbXB0eU9iamVjdChhKSxmPW4uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1fYSh0aGlzLG4uZXh0ZW5kKHt9LGEpLGYpOyhlfHxOLmdldCh0aGlzLFwiZmluaXNoXCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhK1wicXVldWVIb29rc1wiLGY9bi50aW1lcnMsZz1OLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZWYS50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8XCJmeFwiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPU4uZ2V0KHRoaXMpLGQ9Y1thK1wicXVldWVcIl0sZT1jW2ErXCJxdWV1ZUhvb2tzXCJdLGY9bi50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLG4ucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2c+YjtiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksbi5lYWNoKFtcInRvZ2dsZVwiLFwic2hvd1wiLFwiaGlkZVwiXSxmdW5jdGlvbihhLGIpe3ZhciBjPW4uZm5bYl07bi5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fFwiYm9vbGVhblwiPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoWGEoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOlhhKFwic2hvd1wiKSxzbGlkZVVwOlhhKFwiaGlkZVwiKSxzbGlkZVRvZ2dsZTpYYShcInRvZ2dsZVwiKSxmYWRlSW46e29wYWNpdHk6XCJzaG93XCJ9LGZhZGVPdXQ6e29wYWNpdHk6XCJoaWRlXCJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6XCJ0b2dnbGVcIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPTAsYz1uLnRpbWVycztmb3IoU2E9bi5ub3coKTtiPGMubGVuZ3RoO2IrKylhPWNbYl0sYSgpfHxjW2JdIT09YXx8Yy5zcGxpY2UoYi0tLDEpO2MubGVuZ3RofHxuLmZ4LnN0b3AoKSxTYT12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtUYXx8KFRhPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKFRhKSxUYT1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8XCJmeFwiLHRoaXMucXVldWUoYyxmdW5jdGlvbihjLGQpe3ZhciBlPWEuc2V0VGltZW91dChjLGIpO2Quc3RvcD1mdW5jdGlvbigpe2EuY2xlYXJUaW1lb3V0KGUpfX0pfSxmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGI9ZC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGM9Yi5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2EudHlwZT1cImNoZWNrYm94XCIsbC5jaGVja09uPVwiXCIhPT1hLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGwub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1kLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnZhbHVlPVwidFwiLGEudHlwZT1cInJhZGlvXCIsbC5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZX0oKTt2YXIgYWIsYmI9bi5leHByLmF0dHJIYW5kbGU7bi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSyh0aGlzLG4uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgYS5nZXRBdHRyaWJ1dGU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxlPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT9hYjp2b2lkIDApKSx2b2lkIDAhPT1jP251bGw9PT1jP3ZvaWQgbi5yZW1vdmVBdHRyKGEsYik6ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjK1wiXCIpLGMpOmUmJlwiZ2V0XCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDooZD1uLmZpbmQuYXR0cihhLGIpLG51bGw9PWQ/dm9pZCAwOmQpKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighbC5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT1iJiZuLm5vZGVOYW1lKGEsXCJpbnB1dFwiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsYiksYyYmKGEudmFsdWU9YyksYn19fX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT0wLGY9YiYmYi5tYXRjaChHKTtpZihmJiYxPT09YS5ub2RlVHlwZSl3aGlsZShjPWZbZSsrXSlkPW4ucHJvcEZpeFtjXXx8YyxuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGMpJiYoYVtkXT0hMSksYS5yZW1vdmVBdHRyaWJ1dGUoYyl9fSksYWI9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9PT0hMT9uLnJlbW92ZUF0dHIoYSxjKTphLnNldEF0dHJpYnV0ZShjLGMpLGN9fSxuLmVhY2gobi5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9YmJbYl18fG4uZmluZC5hdHRyO2JiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj1iYltiXSxiYltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsYmJbYl09ZiksZX19KTt2YXIgY2I9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxkYj0vXig/OmF8YXJlYSkkL2k7bi5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSyh0aGlzLG4ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbbi5wcm9wRml4W2FdfHxhXX0pfX0pLG4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiAxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9bi5wcm9wRml4W2JdfHxiLGU9bi5wcm9wSG9va3NbYl0pLFxudm9pZCAwIT09Yz9lJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsXCJ0YWJpbmRleFwiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTpjYi50ZXN0KGEubm9kZU5hbWUpfHxkYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OntcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwifX0pLGwub3B0U2VsZWN0ZWR8fChuLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2ImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksbi5lYWNoKFtcInRhYkluZGV4XCIsXCJyZWFkT25seVwiLFwibWF4TGVuZ3RoXCIsXCJjZWxsU3BhY2luZ1wiLFwiY2VsbFBhZGRpbmdcIixcInJvd1NwYW5cIixcImNvbFNwYW5cIixcInVzZU1hcFwiLFwiZnJhbWVCb3JkZXJcIixcImNvbnRlbnRFZGl0YWJsZVwiXSxmdW5jdGlvbigpe24ucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTt2YXIgZWI9L1tcXHRcXHJcXG5cXGZdL2c7ZnVuY3Rpb24gZmIoYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwifW4uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLGZiKHRoaXMpKSl9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPWZiKGMpLGQ9MT09PWMubm9kZVR5cGUmJihcIiBcIitlK1wiIFwiKS5yZXBsYWNlKGViLFwiIFwiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZihcIiBcIitmK1wiIFwiKTwwJiYoZCs9ZitcIiBcIik7aD1uLnRyaW0oZCksZSE9PWgmJmMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixoKX19cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsZmIodGhpcykpKX0pO2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmF0dHIoXCJjbGFzc1wiLFwiXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhKXtiPWEubWF0Y2goRyl8fFtdO3doaWxlKGM9dGhpc1tpKytdKWlmKGU9ZmIoYyksZD0xPT09Yy5ub2RlVHlwZSYmKFwiIFwiK2UrXCIgXCIpLnJlcGxhY2UoZWIsXCIgXCIpKXtnPTA7d2hpbGUoZj1iW2crK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2YrXCIgXCIpPi0xKWQ9ZC5yZXBsYWNlKFwiIFwiK2YrXCIgXCIsXCIgXCIpO2g9bi50cmltKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsaCl9fXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYiYmXCJzdHJpbmdcIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsZmIodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZihcInN0cmluZ1wiPT09Yyl7ZD0wLGU9bih0aGlzKSxmPWEubWF0Y2goRyl8fFtdO3doaWxlKGI9ZltkKytdKWUuaGFzQ2xhc3MoYik/ZS5yZW1vdmVDbGFzcyhiKTplLmFkZENsYXNzKGIpfWVsc2Ugdm9pZCAwIT09YSYmXCJib29sZWFuXCIhPT1jfHwoYj1mYih0aGlzKSxiJiZOLnNldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiLGIpLHRoaXMuc2V0QXR0cmlidXRlJiZ0aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsYnx8YT09PSExP1wiXCI6Ti5nZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpKX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQ9MDtiPVwiIFwiK2ErXCIgXCI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJihcIiBcIitmYihjKStcIiBcIikucmVwbGFjZShlYixcIiBcIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgZ2I9L1xcci9nLGhiPS9bXFx4MjBcXHRcXHJcXG5cXGZdKy9nO24uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1uLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOm4uaXNBcnJheShlKSYmKGU9bi5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPW4udmFsSG9va3NbdGhpcy50eXBlXXx8bi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGdiLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksbi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1uLmZpbmQuYXR0cihhLFwidmFsdWVcIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKGhiLFwiIFwiKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9XCJzZWxlY3Qtb25lXCI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sKGMuc2VsZWN0ZWR8fGk9PT1lKSYmKGwub3B0RGlzYWJsZWQ/IWMuZGlzYWJsZWQ6bnVsbD09PWMuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KG4udmFsSG9va3Mub3B0aW9uLmdldChkKSxmKT4tMSkmJihjPSEwKTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZn19fX0pLG4uZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik/XCJvblwiOmEudmFsdWV9KX0pO3ZhciBpYj0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87bi5leHRlbmQobi5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihiLGMsZSxmKXt2YXIgZyxoLGksaixsLG0sbyxwPVtlfHxkXSxxPWsuY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixyPWsuY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihoPWk9ZT1lfHxkLDMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmIWliLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoXCIuXCIpPi0xJiYocj1xLnNwbGl0KFwiLlwiKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksbD1xLmluZGV4T2YoXCI6XCIpPDAmJlwib25cIitxLGI9YltuLmV4cGFuZG9dP2I6bmV3IG4uRXZlbnQocSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKFwiLlwiKSxiLnJuYW1lc3BhY2U9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Iuam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZSksYz1udWxsPT1jP1tiXTpuLm1ha2VBcnJheShjLFtiXSksbz1uLmV2ZW50LnNwZWNpYWxbcV18fHt9LGZ8fCFvLnRyaWdnZXJ8fG8udHJpZ2dlci5hcHBseShlLGMpIT09ITEpKXtpZighZiYmIW8ubm9CdWJibGUmJiFuLmlzV2luZG93KGUpKXtmb3Ioaj1vLmRlbGVnYXRlVHlwZXx8cSxpYi50ZXN0KGorcSl8fChoPWgucGFyZW50Tm9kZSk7aDtoPWgucGFyZW50Tm9kZSlwLnB1c2goaCksaT1oO2k9PT0oZS5vd25lckRvY3VtZW50fHxkKSYmcC5wdXNoKGkuZGVmYXVsdFZpZXd8fGkucGFyZW50V2luZG93fHxhKX1nPTA7d2hpbGUoKGg9cFtnKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9Zz4xP2o6by5iaW5kVHlwZXx8cSxtPShOLmdldChoLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmTi5nZXQoaCxcImhhbmRsZVwiKSxtJiZtLmFwcGx5KGgsYyksbT1sJiZoW2xdLG0mJm0uYXBwbHkmJkwoaCkmJihiLnJlc3VsdD1tLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZnx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFMKGUpfHxsJiZuLmlzRnVuY3Rpb24oZVtxXSkmJiFuLmlzV2luZG93KGUpJiYoaT1lW2xdLGkmJihlW2xdPW51bGwpLG4uZXZlbnQudHJpZ2dlcmVkPXEsZVtxXSgpLG4uZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxpJiYoZVtsXT1pKSksYi5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bi5leHRlbmQobmV3IG4uRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwfSk7bi5ldmVudC50cmlnZ2VyKGQsbnVsbCxiKX19KSxuLmZuLmV4dGVuZCh7dHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtyZXR1cm4gYz9uLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApOnZvaWQgMH19KSxuLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfX0pLGwuZm9jdXNpbj1cIm9uZm9jdXNpblwiaW4gYSxsLmZvY3VzaW58fG4uZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPU4uYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTi5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1OLmFjY2VzcyhkLGIpLTE7ZT9OLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLE4ucmVtb3ZlKGQsYikpfX19KTt2YXIgamI9YS5sb2NhdGlvbixrYj1uLm5vdygpLGxiPS9cXD8vO24ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErXCJcIil9LG4ucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGM7aWYoIWJ8fFwic3RyaW5nXCIhPXR5cGVvZiBiKXJldHVybiBudWxsO3RyeXtjPShuZXcgYS5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhiLFwidGV4dC94bWxcIil9Y2F0Y2goZCl7Yz12b2lkIDB9cmV0dXJuIGMmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RofHxuLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2IpLGN9O3ZhciBtYj0vIy4qJC8sbmI9LyhbPyZdKV89W14mXSovLG9iPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvZ20scGI9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8scWI9L14oPzpHRVR8SEVBRCkkLyxyYj0vXlxcL1xcLy8sc2I9e30sdGI9e30sdWI9XCIqL1wiLmNvbmNhdChcIipcIiksdmI9ZC5jcmVhdGVFbGVtZW50KFwiYVwiKTt2Yi5ocmVmPWpiLmhyZWY7ZnVuY3Rpb24gd2IoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWIsYj1cIipcIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pXCIrXCI9PT1kWzBdPyhkPWQuc2xpY2UoMSl8fFwiKlwiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24geGIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09dGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbXCIqXCJdJiZnKFwiKlwiKX1mdW5jdGlvbiB5YihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gemIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKFwiKlwiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7aWYoZClmb3IoZSBpbiBoKWlmKGhbZV0mJmhbZV0udGVzdChkKSl7aS51bnNoaWZ0KGUpO2JyZWFrfWlmKGlbMF1pbiBjKWY9aVswXTtlbHNle2ZvcihlIGluIGMpe2lmKCFpWzBdfHxhLmNvbnZlcnRlcnNbZStcIiBcIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gQWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZihcIipcIj09PWYpZj1pO2Vsc2UgaWYoXCIqXCIhPT1pJiZpIT09Zil7aWYoZz1qW2krXCIgXCIrZl18fGpbXCIqIFwiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KFwiIFwiKSxoWzFdPT09ZiYmKGc9altpK1wiIFwiK2hbMF1dfHxqW1wiKiBcIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbXCJ0aHJvd3NcIl0pYj1nKGIpO2Vsc2UgdHJ5e2I9ZyhiKX1jYXRjaChsKXtyZXR1cm57c3RhdGU6XCJwYXJzZXJlcnJvclwiLGVycm9yOmc/bDpcIk5vIGNvbnZlcnNpb24gZnJvbSBcIitpK1wiIHRvIFwiK2Z9fX1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6amIuaHJlZix0eXBlOlwiR0VUXCIsaXNMb2NhbDpwYi50ZXN0KGpiLnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixhY2NlcHRzOntcIipcIjp1Yix0ZXh0OlwidGV4dC9wbGFpblwiLGh0bWw6XCJ0ZXh0L2h0bWxcIix4bWw6XCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwifSxjb250ZW50czp7eG1sOi9cXGJ4bWxcXGIvLGh0bWw6L1xcYmh0bWwvLGpzb246L1xcYmpzb25cXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOlwicmVzcG9uc2VYTUxcIix0ZXh0OlwicmVzcG9uc2VUZXh0XCIsanNvbjpcInJlc3BvbnNlSlNPTlwifSxjb252ZXJ0ZXJzOntcIiogdGV4dFwiOlN0cmluZyxcInRleHQgaHRtbFwiOiEwLFwidGV4dCBqc29uXCI6bi5wYXJzZUpTT04sXCJ0ZXh0IHhtbFwiOm4ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP3liKHliKGEsbi5hamF4U2V0dGluZ3MpLGIpOnliKG4uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOndiKHNiKSxhamF4VHJhbnNwb3J0OndiKHRiKSxhamF4OmZ1bmN0aW9uKGIsYyl7XCJvYmplY3RcIj09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGM9Y3x8e307dmFyIGUsZixnLGgsaSxqLGssbCxtPW4uYWpheFNldHVwKHt9LGMpLG89bS5jb250ZXh0fHxtLHA9bS5jb250ZXh0JiYoby5ub2RlVHlwZXx8by5qcXVlcnkpP24obyk6bi5ldmVudCxxPW4uRGVmZXJyZWQoKSxyPW4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikscz1tLnN0YXR1c0NvZGV8fHt9LHQ9e30sdT17fSx2PTAsdz1cImNhbmNlbGVkXCIseD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT12KXtpZighaCl7aD17fTt3aGlsZShiPW9iLmV4ZWMoZykpaFtiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1oW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXY/ZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB2fHwoYT11W2NdPXVbY118fGEsdFthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB2fHwobS5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj52KWZvcihiIGluIGEpc1tiXT1bc1tiXSxhW2JdXTtlbHNlIHguYWx3YXlzKGFbeC5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dztyZXR1cm4gZSYmZS5hYm9ydChiKSx6KDAsYiksdGhpc319O2lmKHEucHJvbWlzZSh4KS5jb21wbGV0ZT1yLmFkZCx4LnN1Y2Nlc3M9eC5kb25lLHguZXJyb3I9eC5mYWlsLG0udXJsPSgoYnx8bS51cmx8fGpiLmhyZWYpK1wiXCIpLnJlcGxhY2UobWIsXCJcIikucmVwbGFjZShyYixqYi5wcm90b2NvbCtcIi8vXCIpLG0udHlwZT1jLm1ldGhvZHx8Yy50eXBlfHxtLm1ldGhvZHx8bS50eXBlLG0uZGF0YVR5cGVzPW4udHJpbShtLmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8W1wiXCJdLG51bGw9PW0uY3Jvc3NEb21haW4pe2o9ZC5jcmVhdGVFbGVtZW50KFwiYVwiKTt0cnl7ai5ocmVmPW0udXJsLGouaHJlZj1qLmhyZWYsbS5jcm9zc0RvbWFpbj12Yi5wcm90b2NvbCtcIi8vXCIrdmIuaG9zdCE9ai5wcm90b2NvbCtcIi8vXCIrai5ob3N0fWNhdGNoKHkpe20uY3Jvc3NEb21haW49ITB9fWlmKG0uZGF0YSYmbS5wcm9jZXNzRGF0YSYmXCJzdHJpbmdcIiE9dHlwZW9mIG0uZGF0YSYmKG0uZGF0YT1uLnBhcmFtKG0uZGF0YSxtLnRyYWRpdGlvbmFsKSkseGIoc2IsbSxjLHgpLDI9PT12KXJldHVybiB4O2s9bi5ldmVudCYmbS5nbG9iYWwsayYmMD09PW4uYWN0aXZlKysmJm4uZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxtLnR5cGU9bS50eXBlLnRvVXBwZXJDYXNlKCksbS5oYXNDb250ZW50PSFxYi50ZXN0KG0udHlwZSksZj1tLnVybCxtLmhhc0NvbnRlbnR8fChtLmRhdGEmJihmPW0udXJsKz0obGIudGVzdChmKT9cIiZcIjpcIj9cIikrbS5kYXRhLGRlbGV0ZSBtLmRhdGEpLG0uY2FjaGU9PT0hMSYmKG0udXJsPW5iLnRlc3QoZik/Zi5yZXBsYWNlKG5iLFwiJDFfPVwiK2tiKyspOmYrKGxiLnRlc3QoZik/XCImXCI6XCI/XCIpK1wiXz1cIitrYisrKSksbS5pZk1vZGlmaWVkJiYobi5sYXN0TW9kaWZpZWRbZl0mJnguc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmeC5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLG4uZXRhZ1tmXSkpLChtLmRhdGEmJm0uaGFzQ29udGVudCYmbS5jb250ZW50VHlwZSE9PSExfHxjLmNvbnRlbnRUeXBlKSYmeC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsbS5jb250ZW50VHlwZSkseC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsbS5kYXRhVHlwZXNbMF0mJm0uYWNjZXB0c1ttLmRhdGFUeXBlc1swXV0/bS5hY2NlcHRzW20uZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1tLmRhdGFUeXBlc1swXT9cIiwgXCIrdWIrXCI7IHE9MC4wMVwiOlwiXCIpOm0uYWNjZXB0c1tcIipcIl0pO2ZvcihsIGluIG0uaGVhZGVycyl4LnNldFJlcXVlc3RIZWFkZXIobCxtLmhlYWRlcnNbbF0pO2lmKG0uYmVmb3JlU2VuZCYmKG0uYmVmb3JlU2VuZC5jYWxsKG8seCxtKT09PSExfHwyPT09dikpcmV0dXJuIHguYWJvcnQoKTt3PVwiYWJvcnRcIjtmb3IobCBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl4W2xdKG1bbF0pO2lmKGU9eGIodGIsbSxjLHgpKXtpZih4LnJlYWR5U3RhdGU9MSxrJiZwLnRyaWdnZXIoXCJhamF4U2VuZFwiLFt4LG1dKSwyPT09dilyZXR1cm4geDttLmFzeW5jJiZtLnRpbWVvdXQ+MCYmKGk9YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eC5hYm9ydChcInRpbWVvdXRcIil9LG0udGltZW91dCkpO3RyeXt2PTEsZS5zZW5kKHQseil9Y2F0Y2goeSl7aWYoISgyPnYpKXRocm93IHk7eigtMSx5KX19ZWxzZSB6KC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIHooYixjLGQsaCl7dmFyIGosbCx0LHUsdyx5PWM7MiE9PXYmJih2PTIsaSYmYS5jbGVhclRpbWVvdXQoaSksZT12b2lkIDAsZz1ofHxcIlwiLHgucmVhZHlTdGF0ZT1iPjA/NDowLGo9Yj49MjAwJiYzMDA+Ynx8MzA0PT09YixkJiYodT16YihtLHgsZCkpLHU9QWIobSx1LHgsaiksaj8obS5pZk1vZGlmaWVkJiYodz14LmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSx3JiYobi5sYXN0TW9kaWZpZWRbZl09dyksdz14LmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSx3JiYobi5ldGFnW2ZdPXcpKSwyMDQ9PT1ifHxcIkhFQURcIj09PW0udHlwZT95PVwibm9jb250ZW50XCI6MzA0PT09Yj95PVwibm90bW9kaWZpZWRcIjooeT11LnN0YXRlLGw9dS5kYXRhLHQ9dS5lcnJvcixqPSF0KSk6KHQ9eSwhYiYmeXx8KHk9XCJlcnJvclwiLDA+YiYmKGI9MCkpKSx4LnN0YXR1cz1iLHguc3RhdHVzVGV4dD0oY3x8eSkrXCJcIixqP3EucmVzb2x2ZVdpdGgobyxbbCx5LHhdKTpxLnJlamVjdFdpdGgobyxbeCx5LHRdKSx4LnN0YXR1c0NvZGUocykscz12b2lkIDAsayYmcC50cmlnZ2VyKGo/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW3gsbSxqP2w6dF0pLHIuZmlyZVdpdGgobyxbeCx5XSksayYmKHAudHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt4LG1dKSwtLW4uYWN0aXZlfHxuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiB4fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYixcInNjcmlwdFwiKX19KSxuLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KG4uZXh0ZW5kKHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSxuLmlzUGxhaW5PYmplY3QoYSkmJmEpKX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcyxcImJvZHlcIil8fG4odGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLG4uZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMudmlzaWJsZShhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aD4wfHxhLm9mZnNldEhlaWdodD4wfHxhLmdldENsaWVudFJlY3RzKCkubGVuZ3RoPjB9O3ZhciBCYj0vJTIwL2csQ2I9L1xcW1xcXSQvLERiPS9cXHI/XFxuL2csRWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLEZiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBHYihhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxDYi50ZXN0KGEpP2QoYSxlKTpHYihhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9ZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW4udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUdiKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9bi5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bi5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlHYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKEJiLFwiK1wiKX0sbi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBuLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bi5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZGYi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhRWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVgudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1uKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bi5pc0FycmF5KGMpP24ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZShEYixcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKERiLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG4uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX07dmFyIEhiPXswOjIwMCwxMjIzOjIwNH0sSWI9bi5hamF4U2V0dGluZ3MueGhyKCk7bC5jb3JzPSEhSWImJlwid2l0aENyZWRlbnRpYWxzXCJpbiBJYixsLmFqYXg9SWI9ISFJYixuLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYil7dmFyIGMsZDtyZXR1cm4gbC5jb3JzfHxJYiYmIWIuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oZSxmKXt2YXIgZyxoPWIueGhyKCk7aWYoaC5vcGVuKGIudHlwZSxiLnVybCxiLmFzeW5jLGIudXNlcm5hbWUsYi5wYXNzd29yZCksYi54aHJGaWVsZHMpZm9yKGcgaW4gYi54aHJGaWVsZHMpaFtnXT1iLnhockZpZWxkc1tnXTtiLm1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUmJmgub3ZlcnJpZGVNaW1lVHlwZShiLm1pbWVUeXBlKSxiLmNyb3NzRG9tYWlufHxlW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGVbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGcgaW4gZSloLnNldFJlcXVlc3RIZWFkZXIoZyxlW2ddKTtjPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2MmJihjPWQ9aC5vbmxvYWQ9aC5vbmVycm9yPWgub25hYm9ydD1oLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLFwiYWJvcnRcIj09PWE/aC5hYm9ydCgpOlwiZXJyb3JcIj09PWE/XCJudW1iZXJcIiE9dHlwZW9mIGguc3RhdHVzP2YoMCxcImVycm9yXCIpOmYoaC5zdGF0dXMsaC5zdGF0dXNUZXh0KTpmKEhiW2guc3RhdHVzXXx8aC5zdGF0dXMsaC5zdGF0dXNUZXh0LFwidGV4dFwiIT09KGgucmVzcG9uc2VUeXBlfHxcInRleHRcIil8fFwic3RyaW5nXCIhPXR5cGVvZiBoLnJlc3BvbnNlVGV4dD97YmluYXJ5OmgucmVzcG9uc2V9Ont0ZXh0OmgucmVzcG9uc2VUZXh0fSxoLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxoLm9ubG9hZD1jKCksZD1oLm9uZXJyb3I9YyhcImVycm9yXCIpLHZvaWQgMCE9PWgub25hYm9ydD9oLm9uYWJvcnQ9ZDpoLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1oLnJlYWR5U3RhdGUmJmEuc2V0VGltZW91dChmdW5jdGlvbigpe2MmJmQoKX0pfSxjPWMoXCJhYm9ydFwiKTt0cnl7aC5zZW5kKGIuaGFzQ29udGVudCYmYi5kYXRhfHxudWxsKX1jYXRjaChpKXtpZihjKXRocm93IGl9fSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi9cXGIoPzpqYXZhfGVjbWEpc2NyaXB0XFxiL30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9XCJHRVRcIil9KSxuLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7Yj1uKFwiPHNjcmlwdD5cIikucHJvcCh7Y2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oXCJsb2FkIGVycm9yXCIsYz1mdW5jdGlvbihhKXtiLnJlbW92ZSgpLGM9bnVsbCxhJiZmKFwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxkLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEpiPVtdLEtiPS8oPSlcXD8oPz0mfCQpfFxcP1xcPy87bi5hamF4U2V0dXAoe2pzb25wOlwiY2FsbGJhY2tcIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9SmIucG9wKCl8fG4uZXhwYW5kbytcIl9cIitrYisrO3JldHVybiB0aGlzW2FdPSEwLGF9fSksbi5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihLYi50ZXN0KGIudXJsKT9cInVybFwiOlwic3RyaW5nXCI9PXR5cGVvZiBiLmRhdGEmJjA9PT0oYi5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmS2IudGVzdChiLmRhdGEpJiZcImRhdGFcIik7cmV0dXJuIGh8fFwianNvbnBcIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShLYixcIiQxXCIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShsYi50ZXN0KGIudXJsKT9cIiZcIjpcIj9cIikrYi5qc29ucCtcIj1cIitlKSxiLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBnfHxuLmVycm9yKGUrXCIgd2FzIG5vdCBjYWxsZWRcIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09XCJqc29uXCIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssSmIucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSxcInNjcmlwdFwiKTp2b2lkIDB9KSxuLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO1wiYm9vbGVhblwiPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWNhKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBMYj1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmTGIpcmV0dXJuIExiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD4tMSYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihlPVwiUE9TVFwiKSxnLmxlbmd0aD4wJiZuLmFqYXgoe3VybDphLHR5cGU6ZXx8XCJHRVRcIixkYXRhVHlwZTpcImh0bWxcIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oXCI8ZGl2PlwiKS5hcHBlbmQobi5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5hbHdheXMoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goZnVuY3Rpb24oKXtjLmFwcGx5KHRoaXMsZnx8W2EucmVzcG9uc2VUZXh0LGIsYV0pfSl9KSx0aGlzfSxuLmVhY2goW1wiYWpheFN0YXJ0XCIsXCJhamF4U3RvcFwiLFwiYWpheENvbXBsZXRlXCIsXCJhamF4RXJyb3JcIixcImFqYXhTdWNjZXNzXCIsXCJhamF4U2VuZFwiXSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub24oYixhKX19KSxuLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbi5ncmVwKG4udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTtmdW5jdGlvbiBNYihhKXtyZXR1cm4gbi5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlJiZhLmRlZmF1bHRWaWV3fW4ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bi5jc3MoYSxcInBvc2l0aW9uXCIpLGw9bihhKSxtPXt9O1wic3RhdGljXCI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLGg9bC5vZmZzZXQoKSxmPW4uY3NzKGEsXCJ0b3BcIiksaT1uLmNzcyhhLFwibGVmdFwiKSxqPShcImFic29sdXRlXCI9PT1rfHxcImZpeGVkXCI9PT1rKSYmKGYraSkuaW5kZXhPZihcImF1dG9cIik+LTEsaj8oZD1sLnBvc2l0aW9uKCksZz1kLnRvcCxlPWQubGVmdCk6KGc9cGFyc2VGbG9hdChmKXx8MCxlPXBhcnNlRmxvYXQoaSl8fDApLG4uaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxuLmV4dGVuZCh7fSxoKSkpLG51bGwhPWIudG9wJiYobS50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobS5sZWZ0PWIubGVmdC1oLmxlZnQrZSksXCJ1c2luZ1wiaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixkKT8oZT1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9TWIoZikse3RvcDplLnRvcCtjLnBhZ2VZT2Zmc2V0LWIuY2xpZW50VG9wLGxlZnQ6ZS5sZWZ0K2MucGFnZVhPZmZzZXQtYi5jbGllbnRMZWZ0fSk6ZX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgYSxiLGM9dGhpc1swXSxkPXt0b3A6MCxsZWZ0OjB9O3JldHVyblwiZml4ZWRcIj09PW4uY3NzKGMsXCJwb3NpdGlvblwiKT9iPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLFwiaHRtbFwiKXx8KGQ9YS5vZmZzZXQoKSksZC50b3ArPW4uY3NzKGFbMF0sXCJib3JkZXJUb3BXaWR0aFwiLCEwKSxkLmxlZnQrPW4uY3NzKGFbMF0sXCJib3JkZXJMZWZ0V2lkdGhcIiwhMCkpLHt0b3A6Yi50b3AtZC50b3Atbi5jc3MoYyxcIm1hcmdpblRvcFwiLCEwKSxsZWZ0OmIubGVmdC1kLmxlZnQtbi5jc3MoYyxcIm1hcmdpbkxlZnRcIiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUoYSYmXCJzdGF0aWNcIj09PW4uY3NzKGEsXCJwb3NpdGlvblwiKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxFYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oYSxiKXt2YXIgYz1cInBhZ2VZT2Zmc2V0XCI9PT1iO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIEsodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9TWIoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9mW2JdOmFbZF06dm9pZChmP2Yuc2Nyb2xsVG8oYz9mLnBhZ2VYT2Zmc2V0OmUsYz9lOmYucGFnZVlPZmZzZXQpOmFbZF09ZSl9LGEsZCxhcmd1bWVudHMubGVuZ3RoKX19KSxuLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1HYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1GYShhLGIpLEJhLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG4uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXtuLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbi5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9uLmNzcyhiLGMsZyk6bi5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxuLmZuLmV4dGVuZCh7YmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSxcIioqXCIpOnRoaXMub2ZmKGIsYXx8XCIqKlwiLGMpfSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofX0pLG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBufSk7dmFyIE5iPWEualF1ZXJ5LE9iPWEuJDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1uJiYoYS4kPU9iKSxiJiZhLmpRdWVyeT09PW4mJihhLmpRdWVyeT1OYiksbn0sYnx8KGEualF1ZXJ5PWEuJD1uKSxufSk7XG4iLCIvKipcbiAqIGpRdWVyeS5mYXN0Q2xpY2suanNcbiAqXG4gKiBXb3JrIGFyb3VuZCB0aGUgMzAwbXMgZGVsYXkgZm9yIHRoZSBjbGljayBldmVudCBpbiBzb21lIG1vYmlsZSBicm93c2Vycy5cbiAqXG4gKiBDb2RlIGJhc2VkIG9uIDxodHRwOi8vY29kZS5nb29nbGUuY29tL21vYmlsZS9hcnRpY2xlcy9mYXN0X2J1dHRvbnMuaHRtbD5cbiAqXG4gKiBAdXNhZ2VcbiAqICQoJ2J1dHRvbicpLmZhc3RDbGljayhmdW5jdGlvbigpIHthbGVydCgnY2xpY2tlZCEnKTt9KTtcbiAqXG4gKiBAbGljZW5zZSBVbmRlciBDcmVhdGl2ZSBDb21tb25zIEF0dHJpYnV0aW9uIDMuMCBMaWNlbnNlXG4gKiBAYXV0aG9yIERhdmUgSHVsYmVydCAoZGF2ZTEwMTApXG4gKiBAdmVyc2lvbiAwLjIgMjAxMS0wOS0yMFxuICovXG5cbi8qZ2xvYmFsIGRvY3VtZW50LCB3aW5kb3csIGpRdWVyeSwgTWF0aCAqL1xuXG4oZnVuY3Rpb24oJCkge1xuXG4kLmZuLmZhc3RDbGljayA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcblx0cmV0dXJuICQodGhpcykuZWFjaChmdW5jdGlvbigpe1xuXHRcdCQuRmFzdEJ1dHRvbigkKHRoaXMpWzBdLCBoYW5kbGVyKTtcblx0fSk7XG59O1xuXG4kLkZhc3RCdXR0b24gPSBmdW5jdGlvbihlbGVtZW50LCBoYW5kbGVyKSB7XG5cdHZhciBzdGFydFgsIHN0YXJ0WTtcblxuXHR2YXIgcmVzZXQgPSBmdW5jdGlvbigpIHtcblx0XHQkKGVsZW1lbnQpLnVuYmluZCgndG91Y2hlbmQnKTtcblx0XHQkKFwiYm9keVwiKS51bmJpbmQoJ3RvdWNobW92ZS5mYXN0Q2xpY2snKTtcblx0fTtcblxuXHR2YXIgb25DbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0cmVzZXQoKTtcblx0XHRoYW5kbGVyLmNhbGwodGhpcywgZXZlbnQpO1xuXG5cdFx0aWYgKGV2ZW50LnR5cGUgPT09ICd0b3VjaGVuZCcpIHtcblx0XHRcdCQuY2xpY2tidXN0ZXIucHJldmVudEdob3N0Q2xpY2soc3RhcnRYLCBzdGFydFkpO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgb25Ub3VjaE1vdmUgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGlmIChNYXRoLmFicyhldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCAtIHN0YXJ0WCkgPiAxMCB8fFxuXHRcdFx0TWF0aC5hYnMoZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFkgLSBzdGFydFkpID4gMTApIHtcblx0XHRcdHJlc2V0KCk7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBvblRvdWNoU3RhcnQgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0JChlbGVtZW50KS5iaW5kKCd0b3VjaGVuZCcsIG9uQ2xpY2spO1xuXHRcdCQoXCJib2R5XCIpLmJpbmQoJ3RvdWNobW92ZS5mYXN0Q2xpY2snLCBvblRvdWNoTW92ZSk7XG5cblx0XHRzdGFydFggPSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDtcblx0XHRzdGFydFkgPSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcblx0fTtcblxuXHQkKGVsZW1lbnQpLmJpbmQoe1xuXHRcdHRvdWNoc3RhcnQ6IG9uVG91Y2hTdGFydCxcblx0XHRjbGljazogb25DbGlja1xuXHR9KTtcbn07XG5cbiQuY2xpY2tidXN0ZXIgPSB7XG5cdGNvb3JkaW5hdGVzOiBbXSxcblxuXHRwcmV2ZW50R2hvc3RDbGljazogZnVuY3Rpb24oeCwgeSkge1xuXHRcdCQuY2xpY2tidXN0ZXIuY29vcmRpbmF0ZXMucHVzaCh4LCB5KTtcblx0XHR3aW5kb3cuc2V0VGltZW91dCgkLmNsaWNrYnVzdGVyLnBvcCwgMjUwMCk7XG5cdH0sXG5cblx0cG9wOiBmdW5jdGlvbigpIHtcblx0XHQkLmNsaWNrYnVzdGVyLmNvb3JkaW5hdGVzLnNwbGljZSgwLCAyKTtcblx0fSxcblxuXHRvbkNsaWNrOiBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciB4LCB5LCBpO1xuXHRcdGZvciAoaSA9IDA7IGkgPCAkLmNsaWNrYnVzdGVyLmNvb3JkaW5hdGVzLmxlbmd0aDsgaSArPSAyKSB7XG5cdFx0XHR4ID0gJC5jbGlja2J1c3Rlci5jb29yZGluYXRlc1tpXTtcblx0XHRcdHkgPSAkLmNsaWNrYnVzdGVyLmNvb3JkaW5hdGVzW2kgKyAxXTtcblx0XHRcdGlmIChNYXRoLmFicyhldmVudC5jbGllbnRYIC0geCkgPCAyNSAmJiBNYXRoLmFicyhldmVudC5jbGllbnRZIC0geSkgPCAyNSkge1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbiQoZnVuY3Rpb24oKXtcblx0aWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpe1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgJC5jbGlja2J1c3Rlci5vbkNsaWNrLCB0cnVlKTtcblx0fSBlbHNlIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCl7XG5cdFx0Ly8gZm9yIElFIDcvOFxuXHRcdGRvY3VtZW50LmF0dGFjaEV2ZW50KCdvbmNsaWNrJywgJC5jbGlja2J1c3Rlci5vbkNsaWNrKTtcblx0fVxufSk7XG5cbn0oalF1ZXJ5KSk7XG4iLCIvKiFcbiAqIGpRdWVyeSB0aHJvdHRsZSAvIGRlYm91bmNlIC0gdjEuMSAtIDMvNy8yMDEwXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS1wbHVnaW4vXG4gKiBcbiAqIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hblxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXG4gKi9cblxuLy8gU2NyaXB0OiBqUXVlcnkgdGhyb3R0bGUgLyBkZWJvdW5jZTogU29tZXRpbWVzLCBsZXNzIGlzIG1vcmUhXG4vL1xuLy8gKlZlcnNpb246IDEuMSwgTGFzdCB1cGRhdGVkOiAzLzcvMjAxMCpcbi8vIFxuLy8gUHJvamVjdCBIb21lIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UtcGx1Z2luL1xuLy8gR2l0SHViICAgICAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9cbi8vIFNvdXJjZSAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UvcmF3L21hc3Rlci9qcXVlcnkuYmEtdGhyb3R0bGUtZGVib3VuY2UuanNcbi8vIChNaW5pZmllZCkgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UvcmF3L21hc3Rlci9qcXVlcnkuYmEtdGhyb3R0bGUtZGVib3VuY2UubWluLmpzICgwLjdrYilcbi8vIFxuLy8gQWJvdXQ6IExpY2Vuc2Vcbi8vIFxuLy8gQ29weXJpZ2h0IChjKSAyMDEwIFwiQ293Ym95XCIgQmVuIEFsbWFuLFxuLy8gRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXG4vLyBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXG4vLyBcbi8vIEFib3V0OiBFeGFtcGxlc1xuLy8gXG4vLyBUaGVzZSB3b3JraW5nIGV4YW1wbGVzLCBjb21wbGV0ZSB3aXRoIGZ1bGx5IGNvbW1lbnRlZCBjb2RlLCBpbGx1c3RyYXRlIGEgZmV3XG4vLyB3YXlzIGluIHdoaWNoIHRoaXMgcGx1Z2luIGNhbiBiZSB1c2VkLlxuLy8gXG4vLyBUaHJvdHRsZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UvZXhhbXBsZXMvdGhyb3R0bGUvXG4vLyBEZWJvdW5jZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UvZXhhbXBsZXMvZGVib3VuY2UvXG4vLyBcbi8vIEFib3V0OiBTdXBwb3J0IGFuZCBUZXN0aW5nXG4vLyBcbi8vIEluZm9ybWF0aW9uIGFib3V0IHdoYXQgdmVyc2lvbiBvciB2ZXJzaW9ucyBvZiBqUXVlcnkgdGhpcyBwbHVnaW4gaGFzIGJlZW5cbi8vIHRlc3RlZCB3aXRoLCB3aGF0IGJyb3dzZXJzIGl0IGhhcyBiZWVuIHRlc3RlZCBpbiwgYW5kIHdoZXJlIHRoZSB1bml0IHRlc3RzXG4vLyByZXNpZGUgKHNvIHlvdSBjYW4gdGVzdCBpdCB5b3Vyc2VsZikuXG4vLyBcbi8vIGpRdWVyeSBWZXJzaW9ucyAtIG5vbmUsIDEuMy4yLCAxLjQuMlxuLy8gQnJvd3NlcnMgVGVzdGVkIC0gSW50ZXJuZXQgRXhwbG9yZXIgNi04LCBGaXJlZm94IDItMy42LCBTYWZhcmkgMy00LCBDaHJvbWUgNC01LCBPcGVyYSA5LjYtMTAuMS5cbi8vIFVuaXQgVGVzdHMgICAgICAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UvdW5pdC9cbi8vIFxuLy8gQWJvdXQ6IFJlbGVhc2UgSGlzdG9yeVxuLy8gXG4vLyAxLjEgLSAoMy83LzIwMTApIEZpeGVkIGEgYnVnIGluIDxqUXVlcnkudGhyb3R0bGU+IHdoZXJlIHRyYWlsaW5nIGNhbGxiYWNrc1xuLy8gICAgICAgZXhlY3V0ZWQgbGF0ZXIgdGhhbiB0aGV5IHNob3VsZC4gUmV3b3JrZWQgYSBmYWlyIGFtb3VudCBvZiBpbnRlcm5hbFxuLy8gICAgICAgbG9naWMgYXMgd2VsbC5cbi8vIDEuMCAtICgzLzYvMjAxMCkgSW5pdGlhbCByZWxlYXNlIGFzIGEgc3RhbmQtYWxvbmUgcHJvamVjdC4gTWlncmF0ZWQgb3ZlclxuLy8gICAgICAgZnJvbSBqcXVlcnktbWlzYyByZXBvIHYwLjQgdG8ganF1ZXJ5LXRocm90dGxlIHJlcG8gdjEuMCwgYWRkZWQgdGhlXG4vLyAgICAgICBub190cmFpbGluZyB0aHJvdHRsZSBwYXJhbWV0ZXIgYW5kIGRlYm91bmNlIGZ1bmN0aW9uYWxpdHkuXG4vLyBcbi8vIFRvcGljOiBOb3RlIGZvciBub24talF1ZXJ5IHVzZXJzXG4vLyBcbi8vIGpRdWVyeSBpc24ndCBhY3R1YWxseSByZXF1aXJlZCBmb3IgdGhpcyBwbHVnaW4sIGJlY2F1c2Ugbm90aGluZyBpbnRlcm5hbFxuLy8gdXNlcyBhbnkgalF1ZXJ5IG1ldGhvZHMgb3IgcHJvcGVydGllcy4galF1ZXJ5IGlzIGp1c3QgdXNlZCBhcyBhIG5hbWVzcGFjZVxuLy8gdW5kZXIgd2hpY2ggdGhlc2UgbWV0aG9kcyBjYW4gZXhpc3QuXG4vLyBcbi8vIFNpbmNlIGpRdWVyeSBpc24ndCBhY3R1YWxseSByZXF1aXJlZCBmb3IgdGhpcyBwbHVnaW4sIGlmIGpRdWVyeSBkb2Vzbid0IGV4aXN0XG4vLyB3aGVuIHRoaXMgcGx1Z2luIGlzIGxvYWRlZCwgdGhlIG1ldGhvZCBkZXNjcmliZWQgYmVsb3cgd2lsbCBiZSBjcmVhdGVkIGluXG4vLyB0aGUgYENvd2JveWAgbmFtZXNwYWNlLiBVc2FnZSB3aWxsIGJlIGV4YWN0bHkgdGhlIHNhbWUsIGJ1dCBpbnN0ZWFkIG9mXG4vLyAkLm1ldGhvZCgpIG9yIGpRdWVyeS5tZXRob2QoKSwgeW91J2xsIG5lZWQgdG8gdXNlIENvd2JveS5tZXRob2QoKS5cblxuKGZ1bmN0aW9uKHdpbmRvdyx1bmRlZmluZWQpe1xuICAnJDpub211bmdlJzsgLy8gVXNlZCBieSBZVUkgY29tcHJlc3Nvci5cbiAgXG4gIC8vIFNpbmNlIGpRdWVyeSByZWFsbHkgaXNuJ3QgcmVxdWlyZWQgZm9yIHRoaXMgcGx1Z2luLCB1c2UgYGpRdWVyeWAgYXMgdGhlXG4gIC8vIG5hbWVzcGFjZSBvbmx5IGlmIGl0IGFscmVhZHkgZXhpc3RzLCBvdGhlcndpc2UgdXNlIHRoZSBgQ293Ym95YCBuYW1lc3BhY2UsXG4gIC8vIGNyZWF0aW5nIGl0IGlmIG5lY2Vzc2FyeS5cbiAgdmFyICQgPSB3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5Db3dib3kgfHwgKCB3aW5kb3cuQ293Ym95ID0ge30gKSxcbiAgICBcbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgcmVmZXJlbmNlLlxuICAgIGpxX3Rocm90dGxlO1xuICBcbiAgLy8gTWV0aG9kOiBqUXVlcnkudGhyb3R0bGVcbiAgLy8gXG4gIC8vIFRocm90dGxlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBFc3BlY2lhbGx5IHVzZWZ1bCBmb3IgcmF0ZSBsaW1pdGluZ1xuICAvLyBleGVjdXRpb24gb2YgaGFuZGxlcnMgb24gZXZlbnRzIGxpa2UgcmVzaXplIGFuZCBzY3JvbGwuIElmIHlvdSB3YW50IHRvXG4gIC8vIHJhdGUtbGltaXQgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24gdG8gYSBzaW5nbGUgdGltZSwgc2VlIHRoZVxuICAvLyA8alF1ZXJ5LmRlYm91bmNlPiBtZXRob2QuXG4gIC8vIFxuICAvLyBJbiB0aGlzIHZpc3VhbGl6YXRpb24sIHwgaXMgYSB0aHJvdHRsZWQtZnVuY3Rpb24gY2FsbCBhbmQgWCBpcyB0aGUgYWN0dWFsXG4gIC8vIGNhbGxiYWNrIGV4ZWN1dGlvbjpcbiAgLy8gXG4gIC8vID4gVGhyb3R0bGVkIHdpdGggYG5vX3RyYWlsaW5nYCBzcGVjaWZpZWQgYXMgZmFsc2Ugb3IgdW5zcGVjaWZpZWQ6XG4gIC8vID4gfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fCAocGF1c2UpIHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxcbiAgLy8gPiBYICAgIFggICAgWCAgICBYICAgIFggICAgWCAgICAgICAgWCAgICBYICAgIFggICAgWCAgICBYICAgIFhcbiAgLy8gPiBcbiAgLy8gPiBUaHJvdHRsZWQgd2l0aCBgbm9fdHJhaWxpbmdgIHNwZWNpZmllZCBhcyB0cnVlOlxuICAvLyA+IHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHwgKHBhdXNlKSB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8XG4gIC8vID4gWCAgICBYICAgIFggICAgWCAgICBYICAgICAgICAgICAgIFggICAgWCAgICBYICAgIFggICAgWFxuICAvLyBcbiAgLy8gVXNhZ2U6XG4gIC8vIFxuICAvLyA+IHZhciB0aHJvdHRsZWQgPSBqUXVlcnkudGhyb3R0bGUoIGRlbGF5LCBbIG5vX3RyYWlsaW5nLCBdIGNhbGxiYWNrICk7XG4gIC8vID4gXG4gIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdzb21lZXZlbnQnLCB0aHJvdHRsZWQgKTtcbiAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykudW5iaW5kKCAnc29tZWV2ZW50JywgdGhyb3R0bGVkICk7XG4gIC8vIFxuICAvLyBUaGlzIGFsc28gd29ya3MgaW4galF1ZXJ5IDEuNCs6XG4gIC8vIFxuICAvLyA+IGpRdWVyeSgnc2VsZWN0b3InKS5iaW5kKCAnc29tZWV2ZW50JywgalF1ZXJ5LnRocm90dGxlKCBkZWxheSwgWyBub190cmFpbGluZywgXSBjYWxsYmFjayApICk7XG4gIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLnVuYmluZCggJ3NvbWVldmVudCcsIGNhbGxiYWNrICk7XG4gIC8vIFxuICAvLyBBcmd1bWVudHM6XG4gIC8vIFxuICAvLyAgZGVsYXkgLSAoTnVtYmVyKSBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudFxuICAvLyAgICBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbiAgLy8gIG5vX3RyYWlsaW5nIC0gKEJvb2xlYW4pIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgbm9fdHJhaWxpbmcgaXNcbiAgLy8gICAgdHJ1ZSwgY2FsbGJhY2sgd2lsbCBvbmx5IGV4ZWN1dGUgZXZlcnkgYGRlbGF5YCBtaWxsaXNlY29uZHMgd2hpbGUgdGhlXG4gIC8vICAgIHRocm90dGxlZC1mdW5jdGlvbiBpcyBiZWluZyBjYWxsZWQuIElmIG5vX3RyYWlsaW5nIGlzIGZhbHNlIG9yXG4gIC8vICAgIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIG9uZSBmaW5hbCB0aW1lIGFmdGVyIHRoZSBsYXN0XG4gIC8vICAgIHRocm90dGxlZC1mdW5jdGlvbiBjYWxsLiAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW5cbiAgLy8gICAgY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcywgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpXG4gIC8vICBjYWxsYmFjayAtIChGdW5jdGlvbikgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuXG4gIC8vICAgIFRoZSBgdGhpc2AgY29udGV4dCBhbmQgYWxsIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRocm91Z2gsIGFzLWlzLCB0b1xuICAvLyAgICBgY2FsbGJhY2tgIHdoZW4gdGhlIHRocm90dGxlZC1mdW5jdGlvbiBpcyBleGVjdXRlZC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKEZ1bmN0aW9uKSBBIG5ldywgdGhyb3R0bGVkLCBmdW5jdGlvbi5cbiAgXG4gICQudGhyb3R0bGUgPSBqcV90aHJvdHRsZSA9IGZ1bmN0aW9uKCBkZWxheSwgbm9fdHJhaWxpbmcsIGNhbGxiYWNrLCBkZWJvdW5jZV9tb2RlICkge1xuICAgIC8vIEFmdGVyIHdyYXBwZXIgaGFzIHN0b3BwZWQgYmVpbmcgY2FsbGVkLCB0aGlzIHRpbWVvdXQgZW5zdXJlcyB0aGF0XG4gICAgLy8gYGNhbGxiYWNrYCBpcyBleGVjdXRlZCBhdCB0aGUgcHJvcGVyIHRpbWVzIGluIGB0aHJvdHRsZWAgYW5kIGBlbmRgXG4gICAgLy8gZGVib3VuY2UgbW9kZXMuXG4gICAgdmFyIHRpbWVvdXRfaWQsXG4gICAgICBcbiAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGxhc3QgdGltZSBgY2FsbGJhY2tgIHdhcyBleGVjdXRlZC5cbiAgICAgIGxhc3RfZXhlYyA9IDA7XG4gICAgXG4gICAgLy8gYG5vX3RyYWlsaW5nYCBkZWZhdWx0cyB0byBmYWxzeS5cbiAgICBpZiAoIHR5cGVvZiBub190cmFpbGluZyAhPT0gJ2Jvb2xlYW4nICkge1xuICAgICAgZGVib3VuY2VfbW9kZSA9IGNhbGxiYWNrO1xuICAgICAgY2FsbGJhY2sgPSBub190cmFpbGluZztcbiAgICAgIG5vX3RyYWlsaW5nID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBcbiAgICAvLyBUaGUgYHdyYXBwZXJgIGZ1bmN0aW9uIGVuY2Fwc3VsYXRlcyBhbGwgb2YgdGhlIHRocm90dGxpbmcgLyBkZWJvdW5jaW5nXG4gICAgLy8gZnVuY3Rpb25hbGl0eSBhbmQgd2hlbiBleGVjdXRlZCB3aWxsIGxpbWl0IHRoZSByYXRlIGF0IHdoaWNoIGBjYWxsYmFja2BcbiAgICAvLyBpcyBleGVjdXRlZC5cbiAgICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICBlbGFwc2VkID0gK25ldyBEYXRlKCkgLSBsYXN0X2V4ZWMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBcbiAgICAgIC8vIEV4ZWN1dGUgYGNhbGxiYWNrYCBhbmQgdXBkYXRlIHRoZSBgbGFzdF9leGVjYCB0aW1lc3RhbXAuXG4gICAgICBmdW5jdGlvbiBleGVjKCkge1xuICAgICAgICBsYXN0X2V4ZWMgPSArbmV3IERhdGUoKTtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkoIHRoYXQsIGFyZ3MgKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIElmIGBkZWJvdW5jZV9tb2RlYCBpcyB0cnVlIChhdF9iZWdpbikgdGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBmbGFnXG4gICAgICAvLyB0byBhbGxvdyBmdXR1cmUgYGNhbGxiYWNrYCBleGVjdXRpb25zLlxuICAgICAgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIHRpbWVvdXRfaWQgPSB1bmRlZmluZWQ7XG4gICAgICB9O1xuICAgICAgXG4gICAgICBpZiAoIGRlYm91bmNlX21vZGUgJiYgIXRpbWVvdXRfaWQgKSB7XG4gICAgICAgIC8vIFNpbmNlIGB3cmFwcGVyYCBpcyBiZWluZyBjYWxsZWQgZm9yIHRoZSBmaXJzdCB0aW1lIGFuZFxuICAgICAgICAvLyBgZGVib3VuY2VfbW9kZWAgaXMgdHJ1ZSAoYXRfYmVnaW4pLCBleGVjdXRlIGBjYWxsYmFja2AuXG4gICAgICAgIGV4ZWMoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVvdXQuXG4gICAgICB0aW1lb3V0X2lkICYmIGNsZWFyVGltZW91dCggdGltZW91dF9pZCApO1xuICAgICAgXG4gICAgICBpZiAoIGRlYm91bmNlX21vZGUgPT09IHVuZGVmaW5lZCAmJiBlbGFwc2VkID4gZGVsYXkgKSB7XG4gICAgICAgIC8vIEluIHRocm90dGxlIG1vZGUsIGlmIGBkZWxheWAgdGltZSBoYXMgYmVlbiBleGNlZWRlZCwgZXhlY3V0ZVxuICAgICAgICAvLyBgY2FsbGJhY2tgLlxuICAgICAgICBleGVjKCk7XG4gICAgICAgIFxuICAgICAgfSBlbHNlIGlmICggbm9fdHJhaWxpbmcgIT09IHRydWUgKSB7XG4gICAgICAgIC8vIEluIHRyYWlsaW5nIHRocm90dGxlIG1vZGUsIHNpbmNlIGBkZWxheWAgdGltZSBoYXMgbm90IGJlZW5cbiAgICAgICAgLy8gZXhjZWVkZWQsIHNjaGVkdWxlIGBjYWxsYmFja2AgdG8gZXhlY3V0ZSBgZGVsYXlgIG1zIGFmdGVyIG1vc3RcbiAgICAgICAgLy8gcmVjZW50IGV4ZWN1dGlvbi5cbiAgICAgICAgLy8gXG4gICAgICAgIC8vIElmIGBkZWJvdW5jZV9tb2RlYCBpcyB0cnVlIChhdF9iZWdpbiksIHNjaGVkdWxlIGBjbGVhcmAgdG8gZXhlY3V0ZVxuICAgICAgICAvLyBhZnRlciBgZGVsYXlgIG1zLlxuICAgICAgICAvLyBcbiAgICAgICAgLy8gSWYgYGRlYm91bmNlX21vZGVgIGlzIGZhbHNlIChhdCBlbmQpLCBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvXG4gICAgICAgIC8vIGV4ZWN1dGUgYWZ0ZXIgYGRlbGF5YCBtcy5cbiAgICAgICAgdGltZW91dF9pZCA9IHNldFRpbWVvdXQoIGRlYm91bmNlX21vZGUgPyBjbGVhciA6IGV4ZWMsIGRlYm91bmNlX21vZGUgPT09IHVuZGVmaW5lZCA/IGRlbGF5IC0gZWxhcHNlZCA6IGRlbGF5ICk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvLyBTZXQgdGhlIGd1aWQgb2YgYHdyYXBwZXJgIGZ1bmN0aW9uIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGNhbGxiYWNrLCBzb1xuICAgIC8vIGl0IGNhbiBiZSByZW1vdmVkIGluIGpRdWVyeSAxLjQrIC51bmJpbmQgb3IgLmRpZSBieSB1c2luZyB0aGUgb3JpZ2luYWxcbiAgICAvLyBjYWxsYmFjayBhcyBhIHJlZmVyZW5jZS5cbiAgICBpZiAoICQuZ3VpZCApIHtcbiAgICAgIHdyYXBwZXIuZ3VpZCA9IGNhbGxiYWNrLmd1aWQgPSBjYWxsYmFjay5ndWlkIHx8ICQuZ3VpZCsrO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gdGhlIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH07XG4gIFxuICAvLyBNZXRob2Q6IGpRdWVyeS5kZWJvdW5jZVxuICAvLyBcbiAgLy8gRGVib3VuY2UgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24uIERlYm91bmNpbmcsIHVubGlrZSB0aHJvdHRsaW5nLFxuICAvLyBndWFyYW50ZWVzIHRoYXQgYSBmdW5jdGlvbiBpcyBvbmx5IGV4ZWN1dGVkIGEgc2luZ2xlIHRpbWUsIGVpdGhlciBhdCB0aGVcbiAgLy8gdmVyeSBiZWdpbm5pbmcgb2YgYSBzZXJpZXMgb2YgY2FsbHMsIG9yIGF0IHRoZSB2ZXJ5IGVuZC4gSWYgeW91IHdhbnQgdG9cbiAgLy8gc2ltcGx5IHJhdGUtbGltaXQgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24sIHNlZSB0aGUgPGpRdWVyeS50aHJvdHRsZT5cbiAgLy8gbWV0aG9kLlxuICAvLyBcbiAgLy8gSW4gdGhpcyB2aXN1YWxpemF0aW9uLCB8IGlzIGEgZGVib3VuY2VkLWZ1bmN0aW9uIGNhbGwgYW5kIFggaXMgdGhlIGFjdHVhbFxuICAvLyBjYWxsYmFjayBleGVjdXRpb246XG4gIC8vIFxuICAvLyA+IERlYm91bmNlZCB3aXRoIGBhdF9iZWdpbmAgc3BlY2lmaWVkIGFzIGZhbHNlIG9yIHVuc3BlY2lmaWVkOlxuICAvLyA+IHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHwgKHBhdXNlKSB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8XG4gIC8vID4gICAgICAgICAgICAgICAgICAgICAgICAgIFggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYXG4gIC8vID4gXG4gIC8vID4gRGVib3VuY2VkIHdpdGggYGF0X2JlZ2luYCBzcGVjaWZpZWQgYXMgdHJ1ZTpcbiAgLy8gPiB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8IChwYXVzZSkgfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fFxuICAvLyA+IFggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYXG4gIC8vIFxuICAvLyBVc2FnZTpcbiAgLy8gXG4gIC8vID4gdmFyIGRlYm91bmNlZCA9IGpRdWVyeS5kZWJvdW5jZSggZGVsYXksIFsgYXRfYmVnaW4sIF0gY2FsbGJhY2sgKTtcbiAgLy8gPiBcbiAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykuYmluZCggJ3NvbWVldmVudCcsIGRlYm91bmNlZCApO1xuICAvLyA+IGpRdWVyeSgnc2VsZWN0b3InKS51bmJpbmQoICdzb21lZXZlbnQnLCBkZWJvdW5jZWQgKTtcbiAgLy8gXG4gIC8vIFRoaXMgYWxzbyB3b3JrcyBpbiBqUXVlcnkgMS40KzpcbiAgLy8gXG4gIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLmJpbmQoICdzb21lZXZlbnQnLCBqUXVlcnkuZGVib3VuY2UoIGRlbGF5LCBbIGF0X2JlZ2luLCBdIGNhbGxiYWNrICkgKTtcbiAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykudW5iaW5kKCAnc29tZWV2ZW50JywgY2FsbGJhY2sgKTtcbiAgLy8gXG4gIC8vIEFyZ3VtZW50czpcbiAgLy8gXG4gIC8vICBkZWxheSAtIChOdW1iZXIpIEEgemVyby1vci1ncmVhdGVyIGRlbGF5IGluIG1pbGxpc2Vjb25kcy4gRm9yIGV2ZW50XG4gIC8vICAgIGNhbGxiYWNrcywgdmFsdWVzIGFyb3VuZCAxMDAgb3IgMjUwIChvciBldmVuIGhpZ2hlcikgYXJlIG1vc3QgdXNlZnVsLlxuICAvLyAgYXRfYmVnaW4gLSAoQm9vbGVhbikgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBhdF9iZWdpbiBpcyBmYWxzZSBvclxuICAvLyAgICB1bnNwZWNpZmllZCwgY2FsbGJhY2sgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIGBkZWxheWAgbWlsbGlzZWNvbmRzIGFmdGVyXG4gIC8vICAgIHRoZSBsYXN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiBJZiBhdF9iZWdpbiBpcyB0cnVlLCBjYWxsYmFjayB3aWxsIGJlXG4gIC8vICAgIGV4ZWN1dGVkIG9ubHkgYXQgdGhlIGZpcnN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiAoQWZ0ZXIgdGhlXG4gIC8vICAgIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcywgdGhlXG4gIC8vICAgIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpXG4gIC8vICBjYWxsYmFjayAtIChGdW5jdGlvbikgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuXG4gIC8vICAgIFRoZSBgdGhpc2AgY29udGV4dCBhbmQgYWxsIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRocm91Z2gsIGFzLWlzLCB0b1xuICAvLyAgICBgY2FsbGJhY2tgIHdoZW4gdGhlIGRlYm91bmNlZC1mdW5jdGlvbiBpcyBleGVjdXRlZC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKEZ1bmN0aW9uKSBBIG5ldywgZGVib3VuY2VkLCBmdW5jdGlvbi5cbiAgXG4gICQuZGVib3VuY2UgPSBmdW5jdGlvbiggZGVsYXksIGF0X2JlZ2luLCBjYWxsYmFjayApIHtcbiAgICByZXR1cm4gY2FsbGJhY2sgPT09IHVuZGVmaW5lZFxuICAgICAgPyBqcV90aHJvdHRsZSggZGVsYXksIGF0X2JlZ2luLCBmYWxzZSApXG4gICAgICA6IGpxX3Rocm90dGxlKCBkZWxheSwgY2FsbGJhY2ssIGF0X2JlZ2luICE9PSBmYWxzZSApO1xuICB9O1xuICBcbn0pKHRoaXMpO1xuIiwiLyogTW9kZXJuaXpyIDIuNi4yIChDdXN0b20gQnVpbGQpIHwgTUlUICYgQlNEXG4gKiBCdWlsZDogaHR0cDovL21vZGVybml6ci5jb20vZG93bmxvYWQvIy1zdmctdG91Y2gtc2hpdi1jc3NjbGFzc2VzLXRlc3RzdHlsZXMtcHJlZml4ZXNcbiAqL1xuO3dpbmRvdy5Nb2Rlcm5penI9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIHgoYSl7ai5jc3NUZXh0PWF9ZnVuY3Rpb24geShhLGIpe3JldHVybiB4KG0uam9pbihhK1wiO1wiKSsoYnx8XCJcIikpfWZ1bmN0aW9uIHooYSxiKXtyZXR1cm4gdHlwZW9mIGE9PT1ifWZ1bmN0aW9uIEEoYSxiKXtyZXR1cm4hIX4oXCJcIithKS5pbmRleE9mKGIpfWZ1bmN0aW9uIEIoYSxiLGQpe2Zvcih2YXIgZSBpbiBhKXt2YXIgZj1iW2FbZV1dO2lmKGYhPT1jKXJldHVybiBkPT09ITE/YVtlXTp6KGYsXCJmdW5jdGlvblwiKT9mLmJpbmQoZHx8Yik6Zn1yZXR1cm4hMX12YXIgZD1cIjIuNi4yXCIsZT17fSxmPSEwLGc9Yi5kb2N1bWVudEVsZW1lbnQsaD1cIm1vZGVybml6clwiLGk9Yi5jcmVhdGVFbGVtZW50KGgpLGo9aS5zdHlsZSxrLGw9e30udG9TdHJpbmcsbT1cIiAtd2Via2l0LSAtbW96LSAtby0gLW1zLSBcIi5zcGxpdChcIiBcIiksbj17c3ZnOlwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIn0sbz17fSxwPXt9LHE9e30scj1bXSxzPXIuc2xpY2UsdCx1PWZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmLGksaixrLGw9Yi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG09Yi5ib2R5LG49bXx8Yi5jcmVhdGVFbGVtZW50KFwiYm9keVwiKTtpZihwYXJzZUludChkLDEwKSl3aGlsZShkLS0paj1iLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksai5pZD1lP2VbZF06aCsoZCsxKSxsLmFwcGVuZENoaWxkKGopO3JldHVybiBmPVtcIiYjMTczO1wiLCc8c3R5bGUgaWQ9XCJzJyxoLCdcIj4nLGEsXCI8L3N0eWxlPlwiXS5qb2luKFwiXCIpLGwuaWQ9aCwobT9sOm4pLmlubmVySFRNTCs9ZixuLmFwcGVuZENoaWxkKGwpLG18fChuLnN0eWxlLmJhY2tncm91bmQ9XCJcIixuLnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCIsaz1nLnN0eWxlLm92ZXJmbG93LGcuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIixnLmFwcGVuZENoaWxkKG4pKSxpPWMobCxhKSxtP2wucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsKToobi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLGcuc3R5bGUub3ZlcmZsb3c9ayksISFpfSx2PXt9Lmhhc093blByb3BlcnR5LHc7IXoodixcInVuZGVmaW5lZFwiKSYmIXoodi5jYWxsLFwidW5kZWZpbmVkXCIpP3c9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdi5jYWxsKGEsYil9Onc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiBpbiBhJiZ6KGEuY29uc3RydWN0b3IucHJvdG90eXBlW2JdLFwidW5kZWZpbmVkXCIpfSxGdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7aWYodHlwZW9mIGMhPVwiZnVuY3Rpb25cIil0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciBkPXMuY2FsbChhcmd1bWVudHMsMSksZT1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXt2YXIgYT1mdW5jdGlvbigpe307YS5wcm90b3R5cGU9Yy5wcm90b3R5cGU7dmFyIGY9bmV3IGEsZz1jLmFwcGx5KGYsZC5jb25jYXQocy5jYWxsKGFyZ3VtZW50cykpKTtyZXR1cm4gT2JqZWN0KGcpPT09Zz9nOmZ9cmV0dXJuIGMuYXBwbHkoYixkLmNvbmNhdChzLmNhbGwoYXJndW1lbnRzKSkpfTtyZXR1cm4gZX0pLG8udG91Y2g9ZnVuY3Rpb24oKXt2YXIgYztyZXR1cm5cIm9udG91Y2hzdGFydFwiaW4gYXx8YS5Eb2N1bWVudFRvdWNoJiZiIGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaD9jPSEwOnUoW1wiQG1lZGlhIChcIixtLmpvaW4oXCJ0b3VjaC1lbmFibGVkKSwoXCIpLGgsXCIpXCIsXCJ7I21vZGVybml6cnt0b3A6OXB4O3Bvc2l0aW9uOmFic29sdXRlfX1cIl0uam9pbihcIlwiKSxmdW5jdGlvbihhKXtjPWEub2Zmc2V0VG9wPT09OX0pLGN9LG8uc3ZnPWZ1bmN0aW9uKCl7cmV0dXJuISFiLmNyZWF0ZUVsZW1lbnROUyYmISFiLmNyZWF0ZUVsZW1lbnROUyhuLnN2ZyxcInN2Z1wiKS5jcmVhdGVTVkdSZWN0fTtmb3IodmFyIEMgaW4gbyl3KG8sQykmJih0PUMudG9Mb3dlckNhc2UoKSxlW3RdPW9bQ10oKSxyLnB1c2goKGVbdF0/XCJcIjpcIm5vLVwiKSt0KSk7cmV0dXJuIGUuYWRkVGVzdD1mdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBhPT1cIm9iamVjdFwiKWZvcih2YXIgZCBpbiBhKXcoYSxkKSYmZS5hZGRUZXN0KGQsYVtkXSk7ZWxzZXthPWEudG9Mb3dlckNhc2UoKTtpZihlW2FdIT09YylyZXR1cm4gZTtiPXR5cGVvZiBiPT1cImZ1bmN0aW9uXCI/YigpOmIsdHlwZW9mIGYhPVwidW5kZWZpbmVkXCImJmYmJihnLmNsYXNzTmFtZSs9XCIgXCIrKGI/XCJcIjpcIm5vLVwiKSthKSxlW2FdPWJ9cmV0dXJuIGV9LHgoXCJcIiksaT1rPW51bGwsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBrKGEsYil7dmFyIGM9YS5jcmVhdGVFbGVtZW50KFwicFwiKSxkPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdfHxhLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYy5pbm5lckhUTUw9XCJ4PHN0eWxlPlwiK2IrXCI8L3N0eWxlPlwiLGQuaW5zZXJ0QmVmb3JlKGMubGFzdENoaWxkLGQuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gbCgpe3ZhciBhPXIuZWxlbWVudHM7cmV0dXJuIHR5cGVvZiBhPT1cInN0cmluZ1wiP2Euc3BsaXQoXCIgXCIpOmF9ZnVuY3Rpb24gbShhKXt2YXIgYj1pW2FbZ11dO3JldHVybiBifHwoYj17fSxoKyssYVtnXT1oLGlbaF09YiksYn1mdW5jdGlvbiBuKGEsYyxmKXtjfHwoYz1iKTtpZihqKXJldHVybiBjLmNyZWF0ZUVsZW1lbnQoYSk7Znx8KGY9bShjKSk7dmFyIGc7cmV0dXJuIGYuY2FjaGVbYV0/Zz1mLmNhY2hlW2FdLmNsb25lTm9kZSgpOmUudGVzdChhKT9nPShmLmNhY2hlW2FdPWYuY3JlYXRlRWxlbShhKSkuY2xvbmVOb2RlKCk6Zz1mLmNyZWF0ZUVsZW0oYSksZy5jYW5IYXZlQ2hpbGRyZW4mJiFkLnRlc3QoYSk/Zi5mcmFnLmFwcGVuZENoaWxkKGcpOmd9ZnVuY3Rpb24gbyhhLGMpe2F8fChhPWIpO2lmKGopcmV0dXJuIGEuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2M9Y3x8bShhKTt2YXIgZD1jLmZyYWcuY2xvbmVOb2RlKCksZT0wLGY9bCgpLGc9Zi5sZW5ndGg7Zm9yKDtlPGc7ZSsrKWQuY3JlYXRlRWxlbWVudChmW2VdKTtyZXR1cm4gZH1mdW5jdGlvbiBwKGEsYil7Yi5jYWNoZXx8KGIuY2FjaGU9e30sYi5jcmVhdGVFbGVtPWEuY3JlYXRlRWxlbWVudCxiLmNyZWF0ZUZyYWc9YS5jcmVhdGVEb2N1bWVudEZyYWdtZW50LGIuZnJhZz1iLmNyZWF0ZUZyYWcoKSksYS5jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKGMpe3JldHVybiByLnNoaXZNZXRob2RzP24oYyxhLGIpOmIuY3JlYXRlRWxlbShjKX0sYS5jcmVhdGVEb2N1bWVudEZyYWdtZW50PUZ1bmN0aW9uKFwiaCxmXCIsXCJyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj1mLmNsb25lTm9kZSgpLGM9bi5jcmVhdGVFbGVtZW50O2guc2hpdk1ldGhvZHMmJihcIitsKCkuam9pbigpLnJlcGxhY2UoL1xcdysvZyxmdW5jdGlvbihhKXtyZXR1cm4gYi5jcmVhdGVFbGVtKGEpLGIuZnJhZy5jcmVhdGVFbGVtZW50KGEpLCdjKFwiJythKydcIiknfSkrXCIpO3JldHVybiBufVwiKShyLGIuZnJhZyl9ZnVuY3Rpb24gcShhKXthfHwoYT1iKTt2YXIgYz1tKGEpO3JldHVybiByLnNoaXZDU1MmJiFmJiYhYy5oYXNDU1MmJihjLmhhc0NTUz0hIWsoYSxcImFydGljbGUsYXNpZGUsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGhlYWRlcixoZ3JvdXAsbmF2LHNlY3Rpb257ZGlzcGxheTpibG9ja31tYXJre2JhY2tncm91bmQ6I0ZGMDtjb2xvcjojMDAwfVwiKSksanx8cChhLGMpLGF9dmFyIGM9YS5odG1sNXx8e30sZD0vXjx8Xig/OmJ1dHRvbnxtYXB8c2VsZWN0fHRleHRhcmVhfG9iamVjdHxpZnJhbWV8b3B0aW9ufG9wdGdyb3VwKSQvaSxlPS9eKD86YXxifGNvZGV8ZGl2fGZpZWxkc2V0fGgxfGgyfGgzfGg0fGg1fGg2fGl8bGFiZWx8bGl8b2x8cHxxfHNwYW58c3Ryb25nfHN0eWxlfHRhYmxlfHRib2R5fHRkfHRofHRyfHVsKSQvaSxmLGc9XCJfaHRtbDVzaGl2XCIsaD0wLGk9e30sajsoZnVuY3Rpb24oKXt0cnl7dmFyIGE9Yi5jcmVhdGVFbGVtZW50KFwiYVwiKTthLmlubmVySFRNTD1cIjx4eXo+PC94eXo+XCIsZj1cImhpZGRlblwiaW4gYSxqPWEuY2hpbGROb2Rlcy5sZW5ndGg9PTF8fGZ1bmN0aW9uKCl7Yi5jcmVhdGVFbGVtZW50KFwiYVwiKTt2YXIgYT1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtyZXR1cm4gdHlwZW9mIGEuY2xvbmVOb2RlPT1cInVuZGVmaW5lZFwifHx0eXBlb2YgYS5jcmVhdGVEb2N1bWVudEZyYWdtZW50PT1cInVuZGVmaW5lZFwifHx0eXBlb2YgYS5jcmVhdGVFbGVtZW50PT1cInVuZGVmaW5lZFwifSgpfWNhdGNoKGMpe2Y9ITAsaj0hMH19KSgpO3ZhciByPXtlbGVtZW50czpjLmVsZW1lbnRzfHxcImFiYnIgYXJ0aWNsZSBhc2lkZSBhdWRpbyBiZGkgY2FudmFzIGRhdGEgZGF0YWxpc3QgZGV0YWlscyBmaWdjYXB0aW9uIGZpZ3VyZSBmb290ZXIgaGVhZGVyIGhncm91cCBtYXJrIG1ldGVyIG5hdiBvdXRwdXQgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRpbWUgdmlkZW9cIixzaGl2Q1NTOmMuc2hpdkNTUyE9PSExLHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzOmosc2hpdk1ldGhvZHM6Yy5zaGl2TWV0aG9kcyE9PSExLHR5cGU6XCJkZWZhdWx0XCIsc2hpdkRvY3VtZW50OnEsY3JlYXRlRWxlbWVudDpuLGNyZWF0ZURvY3VtZW50RnJhZ21lbnQ6b307YS5odG1sNT1yLHEoYil9KHRoaXMsYiksZS5fdmVyc2lvbj1kLGUuX3ByZWZpeGVzPW0sZS50ZXN0U3R5bGVzPXUsZy5jbGFzc05hbWU9Zy5jbGFzc05hbWUucmVwbGFjZSgvKF58XFxzKW5vLWpzKFxcc3wkKS8sXCIkMSQyXCIpKyhmP1wiIGpzIFwiK3Iuam9pbihcIiBcIik6XCJcIiksZX0odGhpcyx0aGlzLmRvY3VtZW50KTsiLCIvKmdsb2JhbCBqUXVlcnkgKi9cbi8qanNoaW50IGJyb3dzZXI6dHJ1ZSAqL1xuLyohXG4qIEZpdFZpZHMgMS4xXG4qXG4qIENvcHlyaWdodCAyMDEzLCBDaHJpcyBDb3lpZXIgLSBodHRwOi8vY3NzLXRyaWNrcy5jb20gKyBEYXZlIFJ1cGVydCAtIGh0dHA6Ly9kYXZlcnVwZXJ0LmNvbVxuKiBDcmVkaXQgdG8gVGhpZXJyeSBLb2JsZW50eiAtIGh0dHA6Ly93d3cuYWxpc3RhcGFydC5jb20vYXJ0aWNsZXMvY3JlYXRpbmctaW50cmluc2ljLXJhdGlvcy1mb3ItdmlkZW8vXG4qIFJlbGVhc2VkIHVuZGVyIHRoZSBXVEZQTCBsaWNlbnNlIC0gaHR0cDovL3NhbS56b3kub3JnL3d0ZnBsL1xuKlxuKi9cblxuKGZ1bmN0aW9uKCAkICl7XG5cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgJC5mbi5maXRWaWRzID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgdmFyIHNldHRpbmdzID0ge1xuICAgICAgY3VzdG9tU2VsZWN0b3I6IG51bGxcbiAgICB9O1xuXG4gICAgaWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaXQtdmlkcy1zdHlsZScpKSB7XG4gICAgICAvLyBhcHBlbmRTdHlsZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS90b2RkbW90dG8vZmx1aWR2aWRzL2Jsb2IvbWFzdGVyL2Rpc3QvZmx1aWR2aWRzLmpzXG4gICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgIHZhciBjc3MgPSAnLmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXJ7d2lkdGg6MTAwJTtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjA7fS5mbHVpZC13aWR0aC12aWRlby13cmFwcGVyIGlmcmFtZSwuZmx1aWQtd2lkdGgtdmlkZW8td3JhcHBlciBvYmplY3QsLmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXIgZW1iZWQge3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO30nO1xuICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgZGl2LmlubmVySFRNTCA9ICc8cD54PC9wPjxzdHlsZSBpZD1cImZpdC12aWRzLXN0eWxlXCI+JyArIGNzcyArICc8L3N0eWxlPic7XG4gICAgICBoZWFkLmFwcGVuZENoaWxkKGRpdi5jaGlsZE5vZGVzWzFdKTtcbiAgICB9XG5cbiAgICBpZiAoIG9wdGlvbnMgKSB7XG4gICAgICAkLmV4dGVuZCggc2V0dGluZ3MsIG9wdGlvbnMgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgc2VsZWN0b3JzID0gW1xuICAgICAgICBcImlmcmFtZVtzcmMqPSdwbGF5ZXIudmltZW8uY29tJ11cIixcbiAgICAgICAgXCJpZnJhbWVbc3JjKj0neW91dHViZS5jb20nXVwiLFxuICAgICAgICBcImlmcmFtZVtzcmMqPSd5b3V0dWJlLW5vY29va2llLmNvbSddXCIsXG4gICAgICAgIFwiaWZyYW1lW3NyYyo9J2tpY2tzdGFydGVyLmNvbSddW3NyYyo9J3ZpZGVvLmh0bWwnXVwiLFxuICAgICAgICBcIm9iamVjdFwiLFxuICAgICAgICBcImVtYmVkXCJcbiAgICAgIF07XG5cbiAgICAgIGlmIChzZXR0aW5ncy5jdXN0b21TZWxlY3Rvcikge1xuICAgICAgICBzZWxlY3RvcnMucHVzaChzZXR0aW5ncy5jdXN0b21TZWxlY3Rvcik7XG4gICAgICB9XG5cbiAgICAgIHZhciAkYWxsVmlkZW9zID0gJCh0aGlzKS5maW5kKHNlbGVjdG9ycy5qb2luKCcsJykpO1xuICAgICAgJGFsbFZpZGVvcyA9ICRhbGxWaWRlb3Mubm90KFwib2JqZWN0IG9iamVjdFwiKTsgLy8gU3dmT2JqIGNvbmZsaWN0IHBhdGNoXG5cbiAgICAgICRhbGxWaWRlb3MuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdlbWJlZCcgJiYgJHRoaXMucGFyZW50KCdvYmplY3QnKS5sZW5ndGggfHwgJHRoaXMucGFyZW50KCcuZmx1aWQtd2lkdGgtdmlkZW8td3JhcHBlcicpLmxlbmd0aCkgeyByZXR1cm47IH1cbiAgICAgICAgdmFyIGhlaWdodCA9ICggdGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdvYmplY3QnIHx8ICgkdGhpcy5hdHRyKCdoZWlnaHQnKSAmJiAhaXNOYU4ocGFyc2VJbnQoJHRoaXMuYXR0cignaGVpZ2h0JyksIDEwKSkpICkgPyBwYXJzZUludCgkdGhpcy5hdHRyKCdoZWlnaHQnKSwgMTApIDogJHRoaXMuaGVpZ2h0KCksXG4gICAgICAgICAgICB3aWR0aCA9ICFpc05hTihwYXJzZUludCgkdGhpcy5hdHRyKCd3aWR0aCcpLCAxMCkpID8gcGFyc2VJbnQoJHRoaXMuYXR0cignd2lkdGgnKSwgMTApIDogJHRoaXMud2lkdGgoKSxcbiAgICAgICAgICAgIGFzcGVjdFJhdGlvID0gaGVpZ2h0IC8gd2lkdGg7XG4gICAgICAgIGlmKCEkdGhpcy5hdHRyKCdpZCcpKXtcbiAgICAgICAgICB2YXIgdmlkZW9JRCA9ICdmaXR2aWQnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjk5OTk5OSk7XG4gICAgICAgICAgJHRoaXMuYXR0cignaWQnLCB2aWRlb0lEKTtcbiAgICAgICAgfVxuICAgICAgICAkdGhpcy53cmFwKCc8ZGl2IGNsYXNzPVwiZmx1aWQtd2lkdGgtdmlkZW8td3JhcHBlclwiPjwvZGl2PicpLnBhcmVudCgnLmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXInKS5jc3MoJ3BhZGRpbmctdG9wJywgKGFzcGVjdFJhdGlvICogMTAwKStcIiVcIik7XG4gICAgICAgICR0aGlzLnJlbW92ZUF0dHIoJ2hlaWdodCcpLnJlbW92ZUF0dHIoJ3dpZHRoJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbi8vIFdvcmtzIHdpdGggZWl0aGVyIGpRdWVyeSBvciBaZXB0b1xufSkoIHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvICk7XG4iLCIvKiEgaHR0cDovL210aHMuYmUvcGxhY2Vob2xkZXIgdjIuMC45IGJ5IEBtYXRoaWFzICovXG4oZnVuY3Rpb24oZmFjdG9yeSkge1xuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gQU1EXG5cdFx0ZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIEJyb3dzZXIgZ2xvYmFsc1xuXHRcdGZhY3RvcnkoalF1ZXJ5KTtcblx0fVxufShmdW5jdGlvbigkKSB7XG5cblx0Ly8gT3BlcmEgTWluaSB2NyBkb2VzbuKAmXQgc3VwcG9ydCBwbGFjZWhvbGRlciBhbHRob3VnaCBpdHMgRE9NIHNlZW1zIHRvIGluZGljYXRlIHNvXG5cdHZhciBpc09wZXJhTWluaSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cub3BlcmFtaW5pKSA9PSAnW29iamVjdCBPcGVyYU1pbmldJztcblx0dmFyIGlzSW5wdXRTdXBwb3J0ZWQgPSAncGxhY2Vob2xkZXInIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykgJiYgIWlzT3BlcmFNaW5pO1xuXHR2YXIgaXNUZXh0YXJlYVN1cHBvcnRlZCA9ICdwbGFjZWhvbGRlcicgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKSAmJiAhaXNPcGVyYU1pbmk7XG5cdHZhciB2YWxIb29rcyA9ICQudmFsSG9va3M7XG5cdHZhciBwcm9wSG9va3MgPSAkLnByb3BIb29rcztcblx0dmFyIGhvb2tzO1xuXHR2YXIgcGxhY2Vob2xkZXI7XG5cblx0aWYgKGlzSW5wdXRTdXBwb3J0ZWQgJiYgaXNUZXh0YXJlYVN1cHBvcnRlZCkge1xuXG5cdFx0cGxhY2Vob2xkZXIgPSAkLmZuLnBsYWNlaG9sZGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9O1xuXG5cdFx0cGxhY2Vob2xkZXIuaW5wdXQgPSBwbGFjZWhvbGRlci50ZXh0YXJlYSA9IHRydWU7XG5cblx0fSBlbHNlIHtcblxuXHRcdHBsYWNlaG9sZGVyID0gJC5mbi5wbGFjZWhvbGRlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyICR0aGlzID0gdGhpcztcblx0XHRcdCR0aGlzXG5cdFx0XHRcdC5maWx0ZXIoKGlzSW5wdXRTdXBwb3J0ZWQgPyAndGV4dGFyZWEnIDogJzppbnB1dCcpICsgJ1twbGFjZWhvbGRlcl0nKVxuXHRcdFx0XHQubm90KCcucGxhY2Vob2xkZXInKVxuXHRcdFx0XHQuYmluZCh7XG5cdFx0XHRcdFx0J2ZvY3VzLnBsYWNlaG9sZGVyJzogY2xlYXJQbGFjZWhvbGRlcixcblx0XHRcdFx0XHQnYmx1ci5wbGFjZWhvbGRlcic6IHNldFBsYWNlaG9sZGVyXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5kYXRhKCdwbGFjZWhvbGRlci1lbmFibGVkJywgdHJ1ZSlcblx0XHRcdFx0LnRyaWdnZXIoJ2JsdXIucGxhY2Vob2xkZXInKTtcblx0XHRcdHJldHVybiAkdGhpcztcblx0XHR9O1xuXG5cdFx0cGxhY2Vob2xkZXIuaW5wdXQgPSBpc0lucHV0U3VwcG9ydGVkO1xuXHRcdHBsYWNlaG9sZGVyLnRleHRhcmVhID0gaXNUZXh0YXJlYVN1cHBvcnRlZDtcblxuXHRcdGhvb2tzID0ge1xuXHRcdFx0J2dldCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcblx0XHRcdFx0dmFyICRlbGVtZW50ID0gJChlbGVtZW50KTtcblxuXHRcdFx0XHR2YXIgJHBhc3N3b3JkSW5wdXQgPSAkZWxlbWVudC5kYXRhKCdwbGFjZWhvbGRlci1wYXNzd29yZCcpO1xuXHRcdFx0XHRpZiAoJHBhc3N3b3JkSW5wdXQpIHtcblx0XHRcdFx0XHRyZXR1cm4gJHBhc3N3b3JkSW5wdXRbMF0udmFsdWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gJGVsZW1lbnQuZGF0YSgncGxhY2Vob2xkZXItZW5hYmxlZCcpICYmICRlbGVtZW50Lmhhc0NsYXNzKCdwbGFjZWhvbGRlcicpID8gJycgOiBlbGVtZW50LnZhbHVlO1xuXHRcdFx0fSxcblx0XHRcdCdzZXQnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZSkge1xuXHRcdFx0XHR2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuXG5cdFx0XHRcdHZhciAkcGFzc3dvcmRJbnB1dCA9ICRlbGVtZW50LmRhdGEoJ3BsYWNlaG9sZGVyLXBhc3N3b3JkJyk7XG5cdFx0XHRcdGlmICgkcGFzc3dvcmRJbnB1dCkge1xuXHRcdFx0XHRcdHJldHVybiAkcGFzc3dvcmRJbnB1dFswXS52YWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCEkZWxlbWVudC5kYXRhKCdwbGFjZWhvbGRlci1lbmFibGVkJykpIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gJycpIHtcblx0XHRcdFx0XHRlbGVtZW50LnZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0Ly8gSXNzdWUgIzU2OiBTZXR0aW5nIHRoZSBwbGFjZWhvbGRlciBjYXVzZXMgcHJvYmxlbXMgaWYgdGhlIGVsZW1lbnQgY29udGludWVzIHRvIGhhdmUgZm9jdXMuXG5cdFx0XHRcdFx0aWYgKGVsZW1lbnQgIT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSkge1xuXHRcdFx0XHRcdFx0Ly8gV2UgY2FuJ3QgdXNlIGB0cmlnZ2VySGFuZGxlcmAgaGVyZSBiZWNhdXNlIG9mIGR1bW15IHRleHQvcGFzc3dvcmQgaW5wdXRzIDooXG5cdFx0XHRcdFx0XHRzZXRQbGFjZWhvbGRlci5jYWxsKGVsZW1lbnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICgkZWxlbWVudC5oYXNDbGFzcygncGxhY2Vob2xkZXInKSkge1xuXHRcdFx0XHRcdGNsZWFyUGxhY2Vob2xkZXIuY2FsbChlbGVtZW50LCB0cnVlLCB2YWx1ZSkgfHwgKGVsZW1lbnQudmFsdWUgPSB2YWx1ZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGBzZXRgIGNhbiBub3QgcmV0dXJuIGB1bmRlZmluZWRgOyBzZWUgaHR0cDovL2pzYXBpLmluZm8vanF1ZXJ5LzEuNy4xL3ZhbCNMMjM2M1xuXHRcdFx0XHRyZXR1cm4gJGVsZW1lbnQ7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGlmICghaXNJbnB1dFN1cHBvcnRlZCkge1xuXHRcdFx0dmFsSG9va3MuaW5wdXQgPSBob29rcztcblx0XHRcdHByb3BIb29rcy52YWx1ZSA9IGhvb2tzO1xuXHRcdH1cblx0XHRpZiAoIWlzVGV4dGFyZWFTdXBwb3J0ZWQpIHtcblx0XHRcdHZhbEhvb2tzLnRleHRhcmVhID0gaG9va3M7XG5cdFx0XHRwcm9wSG9va3MudmFsdWUgPSBob29rcztcblx0XHR9XG5cblx0XHQkKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gTG9vayBmb3IgZm9ybXNcblx0XHRcdCQoZG9jdW1lbnQpLmRlbGVnYXRlKCdmb3JtJywgJ3N1Ym1pdC5wbGFjZWhvbGRlcicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyBDbGVhciB0aGUgcGxhY2Vob2xkZXIgdmFsdWVzIHNvIHRoZXkgZG9uJ3QgZ2V0IHN1Ym1pdHRlZFxuXHRcdFx0XHR2YXIgJGlucHV0cyA9ICQoJy5wbGFjZWhvbGRlcicsIHRoaXMpLmVhY2goY2xlYXJQbGFjZWhvbGRlcik7XG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JGlucHV0cy5lYWNoKHNldFBsYWNlaG9sZGVyKTtcblx0XHRcdFx0fSwgMTApO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBDbGVhciBwbGFjZWhvbGRlciB2YWx1ZXMgdXBvbiBwYWdlIHJlbG9hZFxuXHRcdCQod2luZG93KS5iaW5kKCdiZWZvcmV1bmxvYWQucGxhY2Vob2xkZXInLCBmdW5jdGlvbigpIHtcblx0XHRcdCQoJy5wbGFjZWhvbGRlcicpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSAnJztcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBhcmdzKGVsZW0pIHtcblx0XHQvLyBSZXR1cm4gYW4gb2JqZWN0IG9mIGVsZW1lbnQgYXR0cmlidXRlc1xuXHRcdHZhciBuZXdBdHRycyA9IHt9O1xuXHRcdHZhciByaW5saW5lalF1ZXJ5ID0gL15qUXVlcnlcXGQrJC87XG5cdFx0JC5lYWNoKGVsZW0uYXR0cmlidXRlcywgZnVuY3Rpb24oaSwgYXR0cikge1xuXHRcdFx0aWYgKGF0dHIuc3BlY2lmaWVkICYmICFyaW5saW5lalF1ZXJ5LnRlc3QoYXR0ci5uYW1lKSkge1xuXHRcdFx0XHRuZXdBdHRyc1thdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gbmV3QXR0cnM7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhclBsYWNlaG9sZGVyKGV2ZW50LCB2YWx1ZSkge1xuXHRcdHZhciBpbnB1dCA9IHRoaXM7XG5cdFx0dmFyICRpbnB1dCA9ICQoaW5wdXQpO1xuXHRcdGlmIChpbnB1dC52YWx1ZSA9PSAkaW5wdXQuYXR0cigncGxhY2Vob2xkZXInKSAmJiAkaW5wdXQuaGFzQ2xhc3MoJ3BsYWNlaG9sZGVyJykpIHtcblx0XHRcdGlmICgkaW5wdXQuZGF0YSgncGxhY2Vob2xkZXItcGFzc3dvcmQnKSkge1xuXHRcdFx0XHQkaW5wdXQgPSAkaW5wdXQuaGlkZSgpLm5leHRBbGwoJ2lucHV0W3R5cGU9XCJwYXNzd29yZFwiXTpmaXJzdCcpLnNob3coKS5hdHRyKCdpZCcsICRpbnB1dC5yZW1vdmVBdHRyKCdpZCcpLmRhdGEoJ3BsYWNlaG9sZGVyLWlkJykpO1xuXHRcdFx0XHQvLyBJZiBgY2xlYXJQbGFjZWhvbGRlcmAgd2FzIGNhbGxlZCBmcm9tIGAkLnZhbEhvb2tzLmlucHV0LnNldGBcblx0XHRcdFx0aWYgKGV2ZW50ID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0cmV0dXJuICRpbnB1dFswXS52YWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRpbnB1dC5mb2N1cygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aW5wdXQudmFsdWUgPSAnJztcblx0XHRcdFx0JGlucHV0LnJlbW92ZUNsYXNzKCdwbGFjZWhvbGRlcicpO1xuXHRcdFx0XHRpbnB1dCA9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIGlucHV0LnNlbGVjdCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHNldFBsYWNlaG9sZGVyKCkge1xuXHRcdHZhciAkcmVwbGFjZW1lbnQ7XG5cdFx0dmFyIGlucHV0ID0gdGhpcztcblx0XHR2YXIgJGlucHV0ID0gJChpbnB1dCk7XG5cdFx0dmFyIGlkID0gdGhpcy5pZDtcblx0XHRpZiAoaW5wdXQudmFsdWUgPT09ICcnKSB7XG5cdFx0XHRpZiAoaW5wdXQudHlwZSA9PT0gJ3Bhc3N3b3JkJykge1xuXHRcdFx0XHRpZiAoISRpbnB1dC5kYXRhKCdwbGFjZWhvbGRlci10ZXh0aW5wdXQnKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHQkcmVwbGFjZW1lbnQgPSAkaW5wdXQuY2xvbmUoKS5hdHRyKHsgJ3R5cGUnOiAndGV4dCcgfSk7XG5cdFx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0XHQkcmVwbGFjZW1lbnQgPSAkKCc8aW5wdXQ+JykuYXR0cigkLmV4dGVuZChhcmdzKHRoaXMpLCB7ICd0eXBlJzogJ3RleHQnIH0pKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHJlcGxhY2VtZW50XG5cdFx0XHRcdFx0XHQucmVtb3ZlQXR0cignbmFtZScpXG5cdFx0XHRcdFx0XHQuZGF0YSh7XG5cdFx0XHRcdFx0XHRcdCdwbGFjZWhvbGRlci1wYXNzd29yZCc6ICRpbnB1dCxcblx0XHRcdFx0XHRcdFx0J3BsYWNlaG9sZGVyLWlkJzogaWRcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuYmluZCgnZm9jdXMucGxhY2Vob2xkZXInLCBjbGVhclBsYWNlaG9sZGVyKTtcblx0XHRcdFx0XHQkaW5wdXRcblx0XHRcdFx0XHRcdC5kYXRhKHtcblx0XHRcdFx0XHRcdFx0J3BsYWNlaG9sZGVyLXRleHRpbnB1dCc6ICRyZXBsYWNlbWVudCxcblx0XHRcdFx0XHRcdFx0J3BsYWNlaG9sZGVyLWlkJzogaWRcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuYmVmb3JlKCRyZXBsYWNlbWVudCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JGlucHV0ID0gJGlucHV0LnJlbW92ZUF0dHIoJ2lkJykuaGlkZSgpLnByZXZBbGwoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdOmZpcnN0JykuYXR0cignaWQnLCBpZCkuc2hvdygpO1xuXHRcdFx0XHQvLyBOb3RlOiBgJGlucHV0WzBdICE9IGlucHV0YCBub3chXG5cdFx0XHR9XG5cdFx0XHQkaW5wdXQuYWRkQ2xhc3MoJ3BsYWNlaG9sZGVyJyk7XG5cdFx0XHQkaW5wdXRbMF0udmFsdWUgPSAkaW5wdXQuYXR0cigncGxhY2Vob2xkZXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGlucHV0LnJlbW92ZUNsYXNzKCdwbGFjZWhvbGRlcicpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHRcdC8vIEF2b2lkIElFOSBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgb2YgZGVhdGhcblx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vbWF0aGlhc2J5bmVucy9qcXVlcnktcGxhY2Vob2xkZXIvcHVsbC85OVxuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0XHR9IGNhdGNoIChleGNlcHRpb24pIHt9XG5cdH1cblxufSkpO1xuIiwiLyohXG4gKiBob3ZlckludGVudCB2MS44LjEgLy8gMjAxNC4wOC4xMSAvLyBqUXVlcnkgdjEuOS4xK1xuICogaHR0cDovL2NoZXJuZS5uZXQvYnJpYW4vcmVzb3VyY2VzL2pxdWVyeS5ob3ZlckludGVudC5odG1sXG4gKlxuICogWW91IG1heSB1c2UgaG92ZXJJbnRlbnQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVQgbGljZW5zZS4gQmFzaWNhbGx5IHRoYXRcbiAqIG1lYW5zIHlvdSBhcmUgZnJlZSB0byB1c2UgaG92ZXJJbnRlbnQgYXMgbG9uZyBhcyB0aGlzIGhlYWRlciBpcyBsZWZ0IGludGFjdC5cbiAqIENvcHlyaWdodCAyMDA3LCAyMDE0IEJyaWFuIENoZXJuZVxuICovXG4gXG4vKiBob3ZlckludGVudCBpcyBzaW1pbGFyIHRvIGpRdWVyeSdzIGJ1aWx0LWluIFwiaG92ZXJcIiBtZXRob2QgZXhjZXB0IHRoYXRcbiAqIGluc3RlYWQgb2YgZmlyaW5nIHRoZSBoYW5kbGVySW4gZnVuY3Rpb24gaW1tZWRpYXRlbHksIGhvdmVySW50ZW50IGNoZWNrc1xuICogdG8gc2VlIGlmIHRoZSB1c2VyJ3MgbW91c2UgaGFzIHNsb3dlZCBkb3duIChiZW5lYXRoIHRoZSBzZW5zaXRpdml0eVxuICogdGhyZXNob2xkKSBiZWZvcmUgZmlyaW5nIHRoZSBldmVudC4gVGhlIGhhbmRsZXJPdXQgZnVuY3Rpb24gaXMgb25seVxuICogY2FsbGVkIGFmdGVyIGEgbWF0Y2hpbmcgaGFuZGxlckluLlxuICpcbiAqIC8vIGJhc2ljIHVzYWdlIC4uLiBqdXN0IGxpa2UgLmhvdmVyKClcbiAqIC5ob3ZlckludGVudCggaGFuZGxlckluLCBoYW5kbGVyT3V0IClcbiAqIC5ob3ZlckludGVudCggaGFuZGxlckluT3V0IClcbiAqXG4gKiAvLyBiYXNpYyB1c2FnZSAuLi4gd2l0aCBldmVudCBkZWxlZ2F0aW9uIVxuICogLmhvdmVySW50ZW50KCBoYW5kbGVySW4sIGhhbmRsZXJPdXQsIHNlbGVjdG9yIClcbiAqIC5ob3ZlckludGVudCggaGFuZGxlckluT3V0LCBzZWxlY3RvciApXG4gKlxuICogLy8gdXNpbmcgYSBiYXNpYyBjb25maWd1cmF0aW9uIG9iamVjdFxuICogLmhvdmVySW50ZW50KCBjb25maWcgKVxuICpcbiAqIEBwYXJhbSAgaGFuZGxlckluICAgZnVuY3Rpb24gT1IgY29uZmlndXJhdGlvbiBvYmplY3RcbiAqIEBwYXJhbSAgaGFuZGxlck91dCAgZnVuY3Rpb24gT1Igc2VsZWN0b3IgZm9yIGRlbGVnYXRpb24gT1IgdW5kZWZpbmVkXG4gKiBAcGFyYW0gIHNlbGVjdG9yICAgIHNlbGVjdG9yIE9SIHVuZGVmaW5lZFxuICogQGF1dGhvciBCcmlhbiBDaGVybmUgPGJyaWFuKGF0KWNoZXJuZShkb3QpbmV0PlxuICovXG4oZnVuY3Rpb24oJCkge1xuICAgICQuZm4uaG92ZXJJbnRlbnQgPSBmdW5jdGlvbihoYW5kbGVySW4saGFuZGxlck91dCxzZWxlY3Rvcikge1xuXG4gICAgICAgIC8vIGRlZmF1bHQgY29uZmlndXJhdGlvbiB2YWx1ZXNcbiAgICAgICAgdmFyIGNmZyA9IHtcbiAgICAgICAgICAgIGludGVydmFsOiAxMDAsXG4gICAgICAgICAgICBzZW5zaXRpdml0eTogNixcbiAgICAgICAgICAgIHRpbWVvdXQ6IDBcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIHR5cGVvZiBoYW5kbGVySW4gPT09IFwib2JqZWN0XCIgKSB7XG4gICAgICAgICAgICBjZmcgPSAkLmV4dGVuZChjZmcsIGhhbmRsZXJJbiApO1xuICAgICAgICB9IGVsc2UgaWYgKCQuaXNGdW5jdGlvbihoYW5kbGVyT3V0KSkge1xuICAgICAgICAgICAgY2ZnID0gJC5leHRlbmQoY2ZnLCB7IG92ZXI6IGhhbmRsZXJJbiwgb3V0OiBoYW5kbGVyT3V0LCBzZWxlY3Rvcjogc2VsZWN0b3IgfSApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2ZnID0gJC5leHRlbmQoY2ZnLCB7IG92ZXI6IGhhbmRsZXJJbiwgb3V0OiBoYW5kbGVySW4sIHNlbGVjdG9yOiBoYW5kbGVyT3V0IH0gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluc3RhbnRpYXRlIHZhcmlhYmxlc1xuICAgICAgICAvLyBjWCwgY1kgPSBjdXJyZW50IFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UsIHVwZGF0ZWQgYnkgbW91c2Vtb3ZlIGV2ZW50XG4gICAgICAgIC8vIHBYLCBwWSA9IHByZXZpb3VzIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UsIHNldCBieSBtb3VzZW92ZXIgYW5kIHBvbGxpbmcgaW50ZXJ2YWxcbiAgICAgICAgdmFyIGNYLCBjWSwgcFgsIHBZO1xuXG4gICAgICAgIC8vIEEgcHJpdmF0ZSBmdW5jdGlvbiBmb3IgZ2V0dGluZyBtb3VzZSBwb3NpdGlvblxuICAgICAgICB2YXIgdHJhY2sgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgY1ggPSBldi5wYWdlWDtcbiAgICAgICAgICAgIGNZID0gZXYucGFnZVk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQSBwcml2YXRlIGZ1bmN0aW9uIGZvciBjb21wYXJpbmcgY3VycmVudCBhbmQgcHJldmlvdXMgbW91c2UgcG9zaXRpb25cbiAgICAgICAgdmFyIGNvbXBhcmUgPSBmdW5jdGlvbihldixvYikge1xuICAgICAgICAgICAgb2IuaG92ZXJJbnRlbnRfdCA9IGNsZWFyVGltZW91dChvYi5ob3ZlckludGVudF90KTtcbiAgICAgICAgICAgIC8vIGNvbXBhcmUgbW91c2UgcG9zaXRpb25zIHRvIHNlZSBpZiB0aGV5J3ZlIGNyb3NzZWQgdGhlIHRocmVzaG9sZFxuICAgICAgICAgICAgaWYgKCBNYXRoLnNxcnQoIChwWC1jWCkqKHBYLWNYKSArIChwWS1jWSkqKHBZLWNZKSApIDwgY2ZnLnNlbnNpdGl2aXR5ICkge1xuICAgICAgICAgICAgICAgICQob2IpLm9mZihcIm1vdXNlbW92ZS5ob3ZlckludGVudFwiLHRyYWNrKTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgaG92ZXJJbnRlbnQgc3RhdGUgdG8gdHJ1ZSAoc28gbW91c2VPdXQgY2FuIGJlIGNhbGxlZClcbiAgICAgICAgICAgICAgICBvYi5ob3ZlckludGVudF9zID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2ZnLm92ZXIuYXBwbHkob2IsW2V2XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHNldCBwcmV2aW91cyBjb29yZGluYXRlcyBmb3IgbmV4dCB0aW1lXG4gICAgICAgICAgICAgICAgcFggPSBjWDsgcFkgPSBjWTtcbiAgICAgICAgICAgICAgICAvLyB1c2Ugc2VsZi1jYWxsaW5nIHRpbWVvdXQsIGd1YXJhbnRlZXMgaW50ZXJ2YWxzIGFyZSBzcGFjZWQgb3V0IHByb3Blcmx5IChhdm9pZHMgSmF2YVNjcmlwdCB0aW1lciBidWdzKVxuICAgICAgICAgICAgICAgIG9iLmhvdmVySW50ZW50X3QgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe2NvbXBhcmUoZXYsIG9iKTt9ICwgY2ZnLmludGVydmFsICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQSBwcml2YXRlIGZ1bmN0aW9uIGZvciBkZWxheWluZyB0aGUgbW91c2VPdXQgZnVuY3Rpb25cbiAgICAgICAgdmFyIGRlbGF5ID0gZnVuY3Rpb24oZXYsb2IpIHtcbiAgICAgICAgICAgIG9iLmhvdmVySW50ZW50X3QgPSBjbGVhclRpbWVvdXQob2IuaG92ZXJJbnRlbnRfdCk7XG4gICAgICAgICAgICBvYi5ob3ZlckludGVudF9zID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gY2ZnLm91dC5hcHBseShvYixbZXZdKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBIHByaXZhdGUgZnVuY3Rpb24gZm9yIGhhbmRsaW5nIG1vdXNlICdob3ZlcmluZydcbiAgICAgICAgdmFyIGhhbmRsZUhvdmVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgLy8gY29weSBvYmplY3RzIHRvIGJlIHBhc3NlZCBpbnRvIHQgKHJlcXVpcmVkIGZvciBldmVudCBvYmplY3QgdG8gYmUgcGFzc2VkIGluIElFKVxuICAgICAgICAgICAgdmFyIGV2ID0gJC5leHRlbmQoe30sZSk7XG4gICAgICAgICAgICB2YXIgb2IgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBjYW5jZWwgaG92ZXJJbnRlbnQgdGltZXIgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICBpZiAob2IuaG92ZXJJbnRlbnRfdCkgeyBvYi5ob3ZlckludGVudF90ID0gY2xlYXJUaW1lb3V0KG9iLmhvdmVySW50ZW50X3QpOyB9XG5cbiAgICAgICAgICAgIC8vIGlmIGUudHlwZSA9PT0gXCJtb3VzZWVudGVyXCJcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09IFwibW91c2VlbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgLy8gc2V0IFwicHJldmlvdXNcIiBYIGFuZCBZIHBvc2l0aW9uIGJhc2VkIG9uIGluaXRpYWwgZW50cnkgcG9pbnRcbiAgICAgICAgICAgICAgICBwWCA9IGV2LnBhZ2VYOyBwWSA9IGV2LnBhZ2VZO1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBcImN1cnJlbnRcIiBYIGFuZCBZIHBvc2l0aW9uIGJhc2VkIG9uIG1vdXNlbW92ZVxuICAgICAgICAgICAgICAgICQob2IpLm9uKFwibW91c2Vtb3ZlLmhvdmVySW50ZW50XCIsdHJhY2spO1xuICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHBvbGxpbmcgaW50ZXJ2YWwgKHNlbGYtY2FsbGluZyB0aW1lb3V0KSB0byBjb21wYXJlIG1vdXNlIGNvb3JkaW5hdGVzIG92ZXIgdGltZVxuICAgICAgICAgICAgICAgIGlmICghb2IuaG92ZXJJbnRlbnRfcykgeyBvYi5ob3ZlckludGVudF90ID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtjb21wYXJlKGV2LG9iKTt9ICwgY2ZnLmludGVydmFsICk7fVxuXG4gICAgICAgICAgICAgICAgLy8gZWxzZSBlLnR5cGUgPT0gXCJtb3VzZWxlYXZlXCJcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdW5iaW5kIGV4cGVuc2l2ZSBtb3VzZW1vdmUgZXZlbnRcbiAgICAgICAgICAgICAgICAkKG9iKS5vZmYoXCJtb3VzZW1vdmUuaG92ZXJJbnRlbnRcIix0cmFjayk7XG4gICAgICAgICAgICAgICAgLy8gaWYgaG92ZXJJbnRlbnQgc3RhdGUgaXMgdHJ1ZSwgdGhlbiBjYWxsIHRoZSBtb3VzZU91dCBmdW5jdGlvbiBhZnRlciB0aGUgc3BlY2lmaWVkIGRlbGF5XG4gICAgICAgICAgICAgICAgaWYgKG9iLmhvdmVySW50ZW50X3MpIHsgb2IuaG92ZXJJbnRlbnRfdCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7ZGVsYXkoZXYsb2IpO30gLCBjZmcudGltZW91dCApO31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBsaXN0ZW4gZm9yIG1vdXNlZW50ZXIgYW5kIG1vdXNlbGVhdmVcbiAgICAgICAgcmV0dXJuIHRoaXMub24oeydtb3VzZWVudGVyLmhvdmVySW50ZW50JzpoYW5kbGVIb3ZlciwnbW91c2VsZWF2ZS5ob3ZlckludGVudCc6aGFuZGxlSG92ZXJ9LCBjZmcuc2VsZWN0b3IpO1xuICAgIH07XG59KShqUXVlcnkpO1xuIiwiLyohIFBpY3R1cmVmaWxsIC0gUmVzcG9uc2l2ZSBJbWFnZXMgdGhhdCB3b3JrIHRvZGF5LiAoYW5kIG1pbWljIHRoZSBwcm9wb3NlZCBQaWN0dXJlIGVsZW1lbnQgd2l0aCBzcGFuIGVsZW1lbnRzKS4gQXV0aG9yOiBTY290dCBKZWhsLCBGaWxhbWVudCBHcm91cCwgMjAxMiB8IExpY2Vuc2U6IE1JVC9HUEx2MiAqL1xuXG4oZnVuY3Rpb24oIHcgKXtcblxuXHQvLyBFbmFibGUgc3RyaWN0IG1vZGVcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dy5waWN0dXJlZmlsbCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBwcyA9IHcuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwic3BhblwiICk7XG5cblx0XHQvLyBMb29wIHRoZSBwaWN0dXJlc1xuXHRcdGZvciggdmFyIGkgPSAwLCBpbCA9IHBzLmxlbmd0aDsgaSA8IGlsOyBpKysgKXtcblx0XHRcdGlmKCBwc1sgaSBdLmdldEF0dHJpYnV0ZSggXCJkYXRhLXBpY3R1cmVcIiApICE9PSBudWxsICl7XG5cblx0XHRcdFx0dmFyIHNvdXJjZXMgPSBwc1sgaSBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInNwYW5cIiApLFxuXHRcdFx0XHRcdG1hdGNoZXMgPSBbXTtcblxuXHRcdFx0XHQvLyBTZWUgaWYgd2hpY2ggc291cmNlcyBtYXRjaFxuXHRcdFx0XHRmb3IoIHZhciBqID0gMCwgamwgPSBzb3VyY2VzLmxlbmd0aDsgaiA8IGpsOyBqKysgKXtcblx0XHRcdFx0XHR2YXIgbWVkaWEgPSBzb3VyY2VzWyBqIF0uZ2V0QXR0cmlidXRlKCBcImRhdGEtbWVkaWFcIiApO1xuXHRcdFx0XHRcdC8vIGlmIHRoZXJlJ3Mgbm8gbWVkaWEgc3BlY2lmaWVkLCBPUiB3Lm1hdGNoTWVkaWEgaXMgc3VwcG9ydGVkIFxuXHRcdFx0XHRcdGlmKCAhbWVkaWEgfHwgKCB3Lm1hdGNoTWVkaWEgJiYgdy5tYXRjaE1lZGlhKCBtZWRpYSApLm1hdGNoZXMgKSApe1xuXHRcdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBzb3VyY2VzWyBqIF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gRmluZCBhbnkgZXhpc3RpbmcgaW1nIGVsZW1lbnQgaW4gdGhlIHBpY3R1cmUgZWxlbWVudFxuXHRcdFx0dmFyIHBpY0ltZyA9IHBzWyBpIF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiaW1nXCIgKVsgMCBdO1xuXG5cdFx0XHRpZiggbWF0Y2hlcy5sZW5ndGggKXtcblx0XHRcdFx0dmFyIG1hdGNoZWRFbCA9IG1hdGNoZXMucG9wKCk7XG5cdFx0XHRcdGlmKCAhcGljSW1nIHx8IHBpY0ltZy5wYXJlbnROb2RlLm5vZGVOYW1lID09PSBcIk5PU0NSSVBUXCIgKXtcblx0XHRcdFx0XHRwaWNJbWcgPSB3LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW1nXCIgKTtcblx0XHRcdFx0XHRwaWNJbWcuYWx0ID0gcHNbIGkgXS5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1hbHRcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYoIG1hdGNoZWRFbCA9PT0gcGljSW1nLnBhcmVudE5vZGUgKXtcblx0XHRcdFx0XHQvLyBTa2lwIGZ1cnRoZXIgYWN0aW9ucyBpZiB0aGUgY29ycmVjdCBpbWFnZSBpcyBhbHJlYWR5IGluIHBsYWNlXG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRwaWNJbWcuc3JjID0gIG1hdGNoZWRFbC5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1zcmNcIiApO1xuXHRcdFx0XHRtYXRjaGVkRWwuYXBwZW5kQ2hpbGQoIHBpY0ltZyApO1xuXHRcdFx0XHRwaWNJbWcucmVtb3ZlQXR0cmlidXRlKFwid2lkdGhcIik7XG5cdFx0XHRcdHBpY0ltZy5yZW1vdmVBdHRyaWJ1dGUoXCJoZWlnaHRcIik7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKCBwaWNJbWcgKXtcblx0XHRcdFx0cGljSW1nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHBpY0ltZyApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly8gUnVuIG9uIHJlc2l6ZSBhbmQgZG9tcmVhZHkgKHcubG9hZCBhcyBhIGZhbGxiYWNrKVxuXHRpZiggdy5hZGRFdmVudExpc3RlbmVyICl7XG5cdFx0dy5hZGRFdmVudExpc3RlbmVyKCBcInJlc2l6ZVwiLCB3LnBpY3R1cmVmaWxsLCBmYWxzZSApO1xuXHRcdHcuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCl7XG5cdFx0XHR3LnBpY3R1cmVmaWxsKCk7XG5cdFx0XHQvLyBSdW4gb25jZSBvbmx5XG5cdFx0XHR3LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCB3LnBpY3R1cmVmaWxsLCBmYWxzZSApO1xuXHRcdH0sIGZhbHNlICk7XG5cdFx0dy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgdy5waWN0dXJlZmlsbCwgZmFsc2UgKTtcblx0fVxuXHRlbHNlIGlmKCB3LmF0dGFjaEV2ZW50ICl7XG5cdFx0dy5hdHRhY2hFdmVudCggXCJvbmxvYWRcIiwgdy5waWN0dXJlZmlsbCApO1xuXHR9XG5cbn0oIHRoaXMgKSk7XG4iLCIvKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcywgRGF2aWQgS25pZ2h0LiBEdWFsIE1JVC9CU0QgbGljZW5zZSAqL1xuXG53aW5kb3cubWF0Y2hNZWRpYSB8fCAod2luZG93Lm1hdGNoTWVkaWEgPSBmdW5jdGlvbigpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8vIEZvciBicm93c2VycyB0aGF0IHN1cHBvcnQgbWF0Y2hNZWRpdW0gYXBpIHN1Y2ggYXMgSUUgOSBhbmQgd2Via2l0XG4gICAgdmFyIHN0eWxlTWVkaWEgPSAod2luZG93LnN0eWxlTWVkaWEgfHwgd2luZG93Lm1lZGlhKTtcblxuICAgIC8vIEZvciB0aG9zZSB0aGF0IGRvbid0IHN1cHBvcnQgbWF0Y2hNZWRpdW1cbiAgICBpZiAoIXN0eWxlTWVkaWEpIHtcbiAgICAgICAgdmFyIHN0eWxlICAgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKSxcbiAgICAgICAgICAgIHNjcmlwdCAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdLFxuICAgICAgICAgICAgaW5mbyAgICAgICAgPSBudWxsO1xuXG4gICAgICAgIHN0eWxlLnR5cGUgID0gJ3RleHQvY3NzJztcbiAgICAgICAgc3R5bGUuaWQgICAgPSAnbWF0Y2htZWRpYWpzLXRlc3QnO1xuXG4gICAgICAgIHNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZSwgc2NyaXB0KTtcblxuICAgICAgICAvLyAnc3R5bGUuY3VycmVudFN0eWxlJyBpcyB1c2VkIGJ5IElFIDw9IDggYW5kICd3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZScgZm9yIGFsbCBvdGhlciBicm93c2Vyc1xuICAgICAgICBpbmZvID0gKCdnZXRDb21wdXRlZFN0eWxlJyBpbiB3aW5kb3cpICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHN0eWxlLCBudWxsKSB8fCBzdHlsZS5jdXJyZW50U3R5bGU7XG5cbiAgICAgICAgc3R5bGVNZWRpYSA9IHtcbiAgICAgICAgICAgIG1hdGNoTWVkaXVtOiBmdW5jdGlvbihtZWRpYSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gJ0BtZWRpYSAnICsgbWVkaWEgKyAneyAjbWF0Y2htZWRpYWpzLXRlc3QgeyB3aWR0aDogMXB4OyB9IH0nO1xuXG4gICAgICAgICAgICAgICAgLy8gJ3N0eWxlLnN0eWxlU2hlZXQnIGlzIHVzZWQgYnkgSUUgPD0gOCBhbmQgJ3N0eWxlLnRleHRDb250ZW50JyBmb3IgYWxsIG90aGVyIGJyb3dzZXJzXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gdGV4dDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVGVzdCBpZiBtZWRpYSBxdWVyeSBpcyB0cnVlIG9yIGZhbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZm8ud2lkdGggPT09ICcxcHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbihtZWRpYSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWF0Y2hlczogc3R5bGVNZWRpYS5tYXRjaE1lZGl1bShtZWRpYSB8fCAnYWxsJyksXG4gICAgICAgICAgICBtZWRpYTogbWVkaWEgfHwgJ2FsbCdcbiAgICAgICAgfTtcbiAgICB9O1xufSgpKTtcbiIsIi8qIVxuICogZW5xdWlyZS5qcyB2Mi4xLjIgLSBBd2Vzb21lIE1lZGlhIFF1ZXJpZXMgaW4gSmF2YVNjcmlwdFxuICogQ29weXJpZ2h0IChjKSAyMDE0IE5pY2sgV2lsbGlhbXMgLSBodHRwOi8vd2lja3kubmlsbGlhLm1zL2VucXVpcmUuanNcbiAqIExpY2Vuc2U6IE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXG4gKi9cblxuOyhmdW5jdGlvbiAobmFtZSwgY29udGV4dCwgZmFjdG9yeSkge1xuXHR2YXIgbWF0Y2hNZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhO1xuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShtYXRjaE1lZGlhKTtcblx0fVxuXHRlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gKGNvbnRleHRbbmFtZV0gPSBmYWN0b3J5KG1hdGNoTWVkaWEpKTtcblx0XHR9KTtcblx0fVxuXHRlbHNlIHtcblx0XHRjb250ZXh0W25hbWVdID0gZmFjdG9yeShtYXRjaE1lZGlhKTtcblx0fVxufSgnZW5xdWlyZScsIHRoaXMsIGZ1bmN0aW9uIChtYXRjaE1lZGlhKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG4gICAgLypqc2hpbnQgdW51c2VkOmZhbHNlICovXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBpdGVyYXRpbmcgb3ZlciBhIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIGZuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFjaChjb2xsZWN0aW9uLCBmbikge1xuICAgICAgICB2YXIgaSAgICAgID0gMCxcbiAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgICAgY29udDtcblxuICAgICAgICBmb3IoaTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb250ID0gZm4oY29sbGVjdGlvbltpXSwgaSk7XG4gICAgICAgICAgICBpZihjb250ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrOyAvL2FsbG93IGVhcmx5IGV4aXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0YXJnZXQgb2JqZWN0IGlzIGFuIGFycmF5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IHRoZSBvYmplY3QgdW5kZXIgdGVzdFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgYXJyYXksIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXJyYXkodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHRhcmdldCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHRhcmdldCBvYmplY3QgaXMgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCB0aGUgb2JqZWN0IHVuZGVyIHRlc3RcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGZ1bmN0aW9uLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxlZ2F0ZSB0byBoYW5kbGUgYSBtZWRpYSBxdWVyeSBiZWluZyBtYXRjaGVkIGFuZCB1bm1hdGNoZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMubWF0Y2ggY2FsbGJhY2sgZm9yIHdoZW4gdGhlIG1lZGlhIHF1ZXJ5IGlzIG1hdGNoZWRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy51bm1hdGNoXSBjYWxsYmFjayBmb3Igd2hlbiB0aGUgbWVkaWEgcXVlcnkgaXMgdW5tYXRjaGVkXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW29wdGlvbnMuc2V0dXBdIG9uZS10aW1lIGNhbGxiYWNrIHRyaWdnZXJlZCB0aGUgZmlyc3QgdGltZSBhIHF1ZXJ5IGlzIG1hdGNoZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmVyU2V0dXA9ZmFsc2VdIHNob3VsZCB0aGUgc2V0dXAgY2FsbGJhY2sgYmUgcnVuIGltbWVkaWF0ZWx5LCByYXRoZXIgdGhhbiBmaXJzdCB0aW1lIHF1ZXJ5IGlzIG1hdGNoZWQ/XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gUXVlcnlIYW5kbGVyKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgIW9wdGlvbnMuZGVmZXJTZXR1cCAmJiB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIFF1ZXJ5SGFuZGxlci5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHNldHVwIG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKHRoaXMub3B0aW9ucy5zZXR1cCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zZXR1cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvb3JkaW5hdGVzIHNldHVwIGFuZCB0cmlnZ2VyaW5nIG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb24gOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICF0aGlzLmluaXRpYWxpc2VkICYmIHRoaXMuc2V0dXAoKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tYXRjaCAmJiB0aGlzLm9wdGlvbnMubWF0Y2goKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY29vcmRpbmF0ZXMgdGhlIHVubWF0Y2ggZXZlbnQgZm9yIHRoZSBoYW5kbGVyXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgb2ZmIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudW5tYXRjaCAmJiB0aGlzLm9wdGlvbnMudW5tYXRjaCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjYWxsZWQgd2hlbiBhIGhhbmRsZXIgaXMgdG8gYmUgZGVzdHJveWVkLlxuICAgICAgICAgKiBkZWxlZ2F0ZXMgdG8gdGhlIGRlc3Ryb3kgb3IgdW5tYXRjaCBjYWxsYmFja3MsIGRlcGVuZGluZyBvbiBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRlc3Ryb3kgPyB0aGlzLm9wdGlvbnMuZGVzdHJveSgpIDogdGhpcy5vZmYoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZXJtaW5lcyBlcXVhbGl0eSBieSByZWZlcmVuY2UuXG4gICAgICAgICAqIGlmIG9iamVjdCBpcyBzdXBwbGllZCBjb21wYXJlIG9wdGlvbnMsIGlmIGZ1bmN0aW9uLCBjb21wYXJlIG1hdGNoIGNhbGxiYWNrXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBmdW5jdGlvbn0gW3RhcmdldF0gdGhlIHRhcmdldCBmb3IgY29tcGFyaXNvblxuICAgICAgICAgKi9cbiAgICAgICAgZXF1YWxzIDogZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zID09PSB0YXJnZXQgfHwgdGhpcy5vcHRpb25zLm1hdGNoID09PSB0YXJnZXQ7XG4gICAgICAgIH1cblxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyBhIHNpbmdsZSBtZWRpYSBxdWVyeSwgbWFuYWdlcyBpdCdzIHN0YXRlIGFuZCByZWdpc3RlcmVkIGhhbmRsZXJzIGZvciB0aGlzIHF1ZXJ5XG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgdGhlIG1lZGlhIHF1ZXJ5IHN0cmluZ1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzVW5jb25kaXRpb25hbD1mYWxzZV0gd2hldGhlciB0aGUgbWVkaWEgcXVlcnkgc2hvdWxkIHJ1biByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGNvbmRpdGlvbnMgYXJlIG1ldC4gUHJpbWFyaWx5IGZvciBoZWxwaW5nIG9sZGVyIGJyb3dzZXJzIGRlYWwgd2l0aCBtb2JpbGUtZmlyc3QgZGVzaWduXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWVkaWFRdWVyeShxdWVyeSwgaXNVbmNvbmRpdGlvbmFsKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgdGhpcy5pc1VuY29uZGl0aW9uYWwgPSBpc1VuY29uZGl0aW9uYWw7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tcWwgPSBtYXRjaE1lZGlhKHF1ZXJ5KTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbihtcWwpIHtcbiAgICAgICAgICAgIHNlbGYubXFsID0gbXFsO1xuICAgICAgICAgICAgc2VsZi5hc3Nlc3MoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tcWwuYWRkTGlzdGVuZXIodGhpcy5saXN0ZW5lcik7XG4gICAgfVxuICAgIE1lZGlhUXVlcnkucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhZGQgYSBoYW5kbGVyIGZvciB0aGlzIHF1ZXJ5LCB0cmlnZ2VyaW5nIGlmIGFscmVhZHkgYWN0aXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGVyXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIubWF0Y2ggY2FsbGJhY2sgZm9yIHdoZW4gcXVlcnkgaXMgYWN0aXZhdGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtoYW5kbGVyLnVubWF0Y2hdIGNhbGxiYWNrIGZvciB3aGVuIHF1ZXJ5IGlzIGRlYWN0aXZhdGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtoYW5kbGVyLnNldHVwXSBjYWxsYmFjayBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbiB3aGVuIGEgcXVlcnkgaGFuZGxlciBpcyByZWdpc3RlcmVkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2hhbmRsZXIuZGVmZXJTZXR1cD1mYWxzZV0gc2hvdWxkIHRoZSBzZXR1cCBjYWxsYmFjayBiZSBkZWZlcnJlZCB1bnRpbCB0aGUgZmlyc3QgdGltZSB0aGUgaGFuZGxlciBpcyBtYXRjaGVkP1xuICAgICAgICAgKi9cbiAgICAgICAgYWRkSGFuZGxlciA6IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBxaCA9IG5ldyBRdWVyeUhhbmRsZXIoaGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2gocWgpO1xuXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXMoKSAmJiBxaC5vbigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZW1vdmVzIHRoZSBnaXZlbiBoYW5kbGVyIGZyb20gdGhlIGNvbGxlY3Rpb24sIGFuZCBjYWxscyBpdCdzIGRlc3Ryb3kgbWV0aG9kc1xuICAgICAgICAgKiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3QgfHwgZnVuY3Rpb259IGhhbmRsZXIgdGhlIGhhbmRsZXIgdG8gcmVtb3ZlXG4gICAgICAgICAqL1xuICAgICAgICByZW1vdmVIYW5kbGVyIDogZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcbiAgICAgICAgICAgIGVhY2goaGFuZGxlcnMsIGZ1bmN0aW9uKGgsIGkpIHtcbiAgICAgICAgICAgICAgICBpZihoLmVxdWFscyhoYW5kbGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBoLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFoYW5kbGVycy5zcGxpY2UoaSwxKTsgLy9yZW1vdmUgZnJvbSBhcnJheSBhbmQgZXhpdCBlYWNoIGVhcmx5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZSB3aGV0aGVyIHRoZSBtZWRpYSBxdWVyeSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIG1hdGNoXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIG1lZGlhIHF1ZXJ5IGNhbiBiZSBjb25zaWRlcmVkIGEgbWF0Y2gsIGZhbHNlIG90aGVyd2lzZVxuICAgICAgICAgKi9cbiAgICAgICAgbWF0Y2hlcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubXFsLm1hdGNoZXMgfHwgdGhpcy5pc1VuY29uZGl0aW9uYWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFycyBhbGwgaGFuZGxlcnMgYW5kIHVuYmluZHMgZXZlbnRzXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhciA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubXFsLnJlbW92ZUxpc3RlbmVyKHRoaXMubGlzdGVuZXIpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5sZW5ndGggPSAwOyAvL2NsZWFyIGFycmF5XG4gICAgICAgIH0sXG5cbiAgICAgICAgLypcbiAgICAgICAgICogQXNzZXNzZXMgdGhlIHF1ZXJ5LCB0dXJuaW5nIG9uIGFsbCBoYW5kbGVycyBpZiBpdCBtYXRjaGVzLCB0dXJuaW5nIHRoZW0gb2ZmIGlmIGl0IGRvZXNuJ3QgbWF0Y2hcbiAgICAgICAgICovXG4gICAgICAgIGFzc2VzcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXMubWF0Y2hlcygpID8gJ29uJyA6ICdvZmYnO1xuXG4gICAgICAgICAgICBlYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyW2FjdGlvbl0oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgZm9yIHJlZ2lzdHJhdGlvbiBvZiBxdWVyeSBoYW5kbGVycy5cbiAgICAgKiBNYW5hZ2VzIHRoZSBxdWVyeSBoYW5kbGVyJ3Mgc3RhdGUgYW5kIGlzIHJlc3BvbnNpYmxlIGZvciB3aXJpbmcgdXAgYnJvd3NlciBldmVudHNcbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lZGlhUXVlcnlEaXNwYXRjaCAoKSB7XG4gICAgICAgIGlmKCFtYXRjaE1lZGlhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21hdGNoTWVkaWEgbm90IHByZXNlbnQsIGxlZ2FjeSBicm93c2VycyByZXF1aXJlIGEgcG9seWZpbGwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucXVlcmllcyA9IHt9O1xuICAgICAgICB0aGlzLmJyb3dzZXJJc0luY2FwYWJsZSA9ICFtYXRjaE1lZGlhKCdvbmx5IGFsbCcpLm1hdGNoZXM7XG4gICAgfVxuXG4gICAgTWVkaWFRdWVyeURpc3BhdGNoLnByb3RvdHlwZSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXJzIGEgaGFuZGxlciBmb3IgdGhlIGdpdmVuIG1lZGlhIHF1ZXJ5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxIHRoZSBtZWRpYSBxdWVyeVxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdCB8fCBBcnJheSB8fCBGdW5jdGlvbn0gb3B0aW9ucyBlaXRoZXIgYSBzaW5nbGUgcXVlcnkgaGFuZGxlciBvYmplY3QsIGEgZnVuY3Rpb24sIG9yIGFuIGFycmF5IG9mIHF1ZXJ5IGhhbmRsZXJzXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMubWF0Y2ggZmlyZWQgd2hlbiBxdWVyeSBtYXRjaGVkXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtvcHRpb25zLnVubWF0Y2hdIGZpcmVkIHdoZW4gYSBxdWVyeSBpcyBubyBsb25nZXIgbWF0Y2hlZFxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbb3B0aW9ucy5zZXR1cF0gZmlyZWQgd2hlbiBoYW5kbGVyIGZpcnN0IHRyaWdnZXJlZFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmVyU2V0dXA9ZmFsc2VdIHdoZXRoZXIgc2V0dXAgc2hvdWxkIGJlIHJ1biBpbW1lZGlhdGVseSBvciBkZWZlcnJlZCB1bnRpbCBxdWVyeSBpcyBmaXJzdCBtYXRjaGVkXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3VsZERlZ3JhZGU9ZmFsc2VdIHdoZXRoZXIgdGhpcyBwYXJ0aWN1bGFyIG1lZGlhIHF1ZXJ5IHNob3VsZCBhbHdheXMgcnVuIG9uIGluY2FwYWJsZSBicm93c2Vyc1xuICAgICAgICAgKi9cbiAgICAgICAgcmVnaXN0ZXIgOiBmdW5jdGlvbihxLCBvcHRpb25zLCBzaG91bGREZWdyYWRlKSB7XG4gICAgICAgICAgICB2YXIgcXVlcmllcyAgICAgICAgID0gdGhpcy5xdWVyaWVzLFxuICAgICAgICAgICAgICAgIGlzVW5jb25kaXRpb25hbCA9IHNob3VsZERlZ3JhZGUgJiYgdGhpcy5icm93c2VySXNJbmNhcGFibGU7XG5cbiAgICAgICAgICAgIGlmKCFxdWVyaWVzW3FdKSB7XG4gICAgICAgICAgICAgICAgcXVlcmllc1txXSA9IG5ldyBNZWRpYVF1ZXJ5KHEsIGlzVW5jb25kaXRpb25hbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vbm9ybWFsaXNlIHRvIG9iamVjdCBpbiBhbiBhcnJheVxuICAgICAgICAgICAgaWYoaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7IG1hdGNoIDogb3B0aW9ucyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIWlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gW29wdGlvbnNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWFjaChvcHRpb25zLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlciA9IHsgbWF0Y2ggOiBoYW5kbGVyIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXJpZXNbcV0uYWRkSGFuZGxlcihoYW5kbGVyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogdW5yZWdpc3RlcnMgYSBxdWVyeSBhbmQgYWxsIGl0J3MgaGFuZGxlcnMsIG9yIGEgc3BlY2lmaWMgaGFuZGxlciBmb3IgYSBxdWVyeVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcSB0aGUgbWVkaWEgcXVlcnkgdG8gdGFyZ2V0XG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0IHx8IGZ1bmN0aW9ufSBbaGFuZGxlcl0gc3BlY2lmaWMgaGFuZGxlciB0byB1bnJlZ2lzdGVyXG4gICAgICAgICAqL1xuICAgICAgICB1bnJlZ2lzdGVyIDogZnVuY3Rpb24ocSwgaGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyaWVzW3FdO1xuXG4gICAgICAgICAgICBpZihxdWVyeSkge1xuICAgICAgICAgICAgICAgIGlmKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkucmVtb3ZlSGFuZGxlcihoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXJpZXNbcV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH07XG5cblx0cmV0dXJuIG5ldyBNZWRpYVF1ZXJ5RGlzcGF0Y2goKTtcblxufSkpOyIsIi8qIVxuICogTWFzb25yeSBQQUNLQUdFRCB2My4zLjJcbiAqIENhc2NhZGluZyBncmlkIGxheW91dCBsaWJyYXJ5XG4gKiBodHRwOi8vbWFzb25yeS5kZXNhbmRyby5jb21cbiAqIE1JVCBMaWNlbnNlXG4gKiBieSBEYXZpZCBEZVNhbmRyb1xuICovXG5cbiFmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7fWZ1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gYyhiKXtiLnByb3RvdHlwZS5vcHRpb258fChiLnByb3RvdHlwZS5vcHRpb249ZnVuY3Rpb24oYil7YS5pc1BsYWluT2JqZWN0KGIpJiYodGhpcy5vcHRpb25zPWEuZXh0ZW5kKCEwLHRoaXMub3B0aW9ucyxiKSl9KX1mdW5jdGlvbiBlKGIsYyl7YS5mbltiXT1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7Zm9yKHZhciBnPWQuY2FsbChhcmd1bWVudHMsMSksaD0wLGk9dGhpcy5sZW5ndGg7aT5oO2grKyl7dmFyIGo9dGhpc1toXSxrPWEuZGF0YShqLGIpO2lmKGspaWYoYS5pc0Z1bmN0aW9uKGtbZV0pJiZcIl9cIiE9PWUuY2hhckF0KDApKXt2YXIgbD1rW2VdLmFwcGx5KGssZyk7aWYodm9pZCAwIT09bClyZXR1cm4gbH1lbHNlIGYoXCJubyBzdWNoIG1ldGhvZCAnXCIrZStcIicgZm9yIFwiK2IrXCIgaW5zdGFuY2VcIik7ZWxzZSBmKFwiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiBcIitiK1wiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyBhdHRlbXB0ZWQgdG8gY2FsbCAnXCIrZStcIidcIil9cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEuZGF0YSh0aGlzLGIpO2Q/KGQub3B0aW9uKGUpLGQuX2luaXQoKSk6KGQ9bmV3IGModGhpcyxlKSxhLmRhdGEodGhpcyxiLGQpKX0pfX1pZihhKXt2YXIgZj1cInVuZGVmaW5lZFwiPT10eXBlb2YgY29uc29sZT9iOmZ1bmN0aW9uKGEpe2NvbnNvbGUuZXJyb3IoYSl9O3JldHVybiBhLmJyaWRnZXQ9ZnVuY3Rpb24oYSxiKXtjKGIpLGUoYSxiKX0sYS5icmlkZ2V0fX12YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2U7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImpxdWVyeS1icmlkZ2V0L2pxdWVyeS5icmlkZ2V0XCIsW1wianF1ZXJ5XCJdLGMpOmMoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/cmVxdWlyZShcImpxdWVyeVwiKTphLmpRdWVyeSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt2YXIgYz1hLmV2ZW50O3JldHVybiBjLnRhcmdldD1jLnRhcmdldHx8Yy5zcmNFbGVtZW50fHxiLGN9dmFyIGM9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGQ9ZnVuY3Rpb24oKXt9O2MuYWRkRXZlbnRMaXN0ZW5lcj9kPWZ1bmN0aW9uKGEsYixjKXthLmFkZEV2ZW50TGlzdGVuZXIoYixjLCExKX06Yy5hdHRhY2hFdmVudCYmKGQ9ZnVuY3Rpb24oYSxjLGQpe2FbYytkXT1kLmhhbmRsZUV2ZW50P2Z1bmN0aW9uKCl7dmFyIGM9YihhKTtkLmhhbmRsZUV2ZW50LmNhbGwoZCxjKX06ZnVuY3Rpb24oKXt2YXIgYz1iKGEpO2QuY2FsbChhLGMpfSxhLmF0dGFjaEV2ZW50KFwib25cIitjLGFbYytkXSl9KTt2YXIgZT1mdW5jdGlvbigpe307Yy5yZW1vdmVFdmVudExpc3RlbmVyP2U9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfTpjLmRldGFjaEV2ZW50JiYoZT1mdW5jdGlvbihhLGIsYyl7YS5kZXRhY2hFdmVudChcIm9uXCIrYixhW2IrY10pO3RyeXtkZWxldGUgYVtiK2NdfWNhdGNoKGQpe2FbYitjXT12b2lkIDB9fSk7dmFyIGY9e2JpbmQ6ZCx1bmJpbmQ6ZX07XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImV2ZW50aWUvZXZlbnRpZVwiLGYpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWY6YS5ldmVudGllPWZ9KHdpbmRvdyksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7fWZ1bmN0aW9uIGIoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGg7Yy0tOylpZihhW2NdLmxpc3RlbmVyPT09YilyZXR1cm4gYztyZXR1cm4tMX1mdW5jdGlvbiBjKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2FdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19dmFyIGQ9YS5wcm90b3R5cGUsZT10aGlzLGY9ZS5FdmVudEVtaXR0ZXI7ZC5nZXRMaXN0ZW5lcnM9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMuX2dldEV2ZW50cygpO2lmKGEgaW5zdGFuY2VvZiBSZWdFeHApe2I9e307Zm9yKGMgaW4gZClkLmhhc093blByb3BlcnR5KGMpJiZhLnRlc3QoYykmJihiW2NdPWRbY10pfWVsc2UgYj1kW2FdfHwoZFthXT1bXSk7cmV0dXJuIGJ9LGQuZmxhdHRlbkxpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjPVtdO2ZvcihiPTA7YjxhLmxlbmd0aDtiKz0xKWMucHVzaChhW2JdLmxpc3RlbmVyKTtyZXR1cm4gY30sZC5nZXRMaXN0ZW5lcnNBc09iamVjdD1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuZ2V0TGlzdGVuZXJzKGEpO3JldHVybiBjIGluc3RhbmNlb2YgQXJyYXkmJihiPXt9LGJbYV09YyksYnx8Y30sZC5hZGRMaXN0ZW5lcj1mdW5jdGlvbihhLGMpe3ZhciBkLGU9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChhKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBjO2ZvcihkIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShkKSYmLTE9PT1iKGVbZF0sYykmJmVbZF0ucHVzaChmP2M6e2xpc3RlbmVyOmMsb25jZTohMX0pO3JldHVybiB0aGlzfSxkLm9uPWMoXCJhZGRMaXN0ZW5lclwiKSxkLmFkZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmFkZExpc3RlbmVyKGEse2xpc3RlbmVyOmIsb25jZTohMH0pfSxkLm9uY2U9YyhcImFkZE9uY2VMaXN0ZW5lclwiKSxkLmRlZmluZUV2ZW50PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldExpc3RlbmVycyhhKSx0aGlzfSxkLmRlZmluZUV2ZW50cz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrPTEpdGhpcy5kZWZpbmVFdmVudChhW2JdKTtyZXR1cm4gdGhpc30sZC5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihhLGMpe3ZhciBkLGUsZj10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpO2ZvcihlIGluIGYpZi5oYXNPd25Qcm9wZXJ0eShlKSYmKGQ9YihmW2VdLGMpLC0xIT09ZCYmZltlXS5zcGxpY2UoZCwxKSk7cmV0dXJuIHRoaXN9LGQub2ZmPWMoXCJyZW1vdmVMaXN0ZW5lclwiKSxkLmFkZExpc3RlbmVycz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITEsYSxiKX0sZC5yZW1vdmVMaXN0ZW5lcnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLGEsYil9LGQubWFuaXB1bGF0ZUxpc3RlbmVycz1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWE/dGhpcy5yZW1vdmVMaXN0ZW5lcjp0aGlzLmFkZExpc3RlbmVyLGc9YT90aGlzLnJlbW92ZUxpc3RlbmVyczp0aGlzLmFkZExpc3RlbmVycztpZihcIm9iamVjdFwiIT10eXBlb2YgYnx8YiBpbnN0YW5jZW9mIFJlZ0V4cClmb3IoZD1jLmxlbmd0aDtkLS07KWYuY2FsbCh0aGlzLGIsY1tkXSk7ZWxzZSBmb3IoZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJihlPWJbZF0pJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT9mLmNhbGwodGhpcyxkLGUpOmcuY2FsbCh0aGlzLGQsZSkpO3JldHVybiB0aGlzfSxkLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGM9dHlwZW9mIGEsZD10aGlzLl9nZXRFdmVudHMoKTtpZihcInN0cmluZ1wiPT09YylkZWxldGUgZFthXTtlbHNlIGlmKGEgaW5zdGFuY2VvZiBSZWdFeHApZm9yKGIgaW4gZClkLmhhc093blByb3BlcnR5KGIpJiZhLnRlc3QoYikmJmRlbGV0ZSBkW2JdO2Vsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30sZC5yZW1vdmVBbGxMaXN0ZW5lcnM9YyhcInJlbW92ZUV2ZW50XCIpLGQuZW1pdEV2ZW50PWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpO2ZvcihlIGluIGcpaWYoZy5oYXNPd25Qcm9wZXJ0eShlKSlmb3IoZD1nW2VdLmxlbmd0aDtkLS07KWM9Z1tlXVtkXSxjLm9uY2U9PT0hMCYmdGhpcy5yZW1vdmVMaXN0ZW5lcihhLGMubGlzdGVuZXIpLGY9Yy5saXN0ZW5lci5hcHBseSh0aGlzLGJ8fFtdKSxmPT09dGhpcy5fZ2V0T25jZVJldHVyblZhbHVlKCkmJnRoaXMucmVtb3ZlTGlzdGVuZXIoYSxjLmxpc3RlbmVyKTtyZXR1cm4gdGhpc30sZC50cmlnZ2VyPWMoXCJlbWl0RXZlbnRcIiksZC5lbWl0PWZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gdGhpcy5lbWl0RXZlbnQoYSxiKX0sZC5zZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX29uY2VSZXR1cm5WYWx1ZT1hLHRoaXN9LGQuX2dldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc093blByb3BlcnR5KFwiX29uY2VSZXR1cm5WYWx1ZVwiKT90aGlzLl9vbmNlUmV0dXJuVmFsdWU6ITB9LGQuX2dldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pfSxhLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5FdmVudEVtaXR0ZXI9ZixhfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlclwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGF9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hOmUuRXZlbnRFbWl0dGVyPWF9LmNhbGwodGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZihhKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZFthXSlyZXR1cm4gYTthPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKTtmb3IodmFyIGIsZT0wLGY9Yy5sZW5ndGg7Zj5lO2UrKylpZihiPWNbZV0rYSxcInN0cmluZ1wiPT10eXBlb2YgZFtiXSlyZXR1cm4gYn19dmFyIGM9XCJXZWJraXQgTW96IG1zIE1zIE9cIi5zcGxpdChcIiBcIiksZD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImdldC1zdHlsZS1wcm9wZXJ0eS9nZXQtc3R5bGUtcHJvcGVydHlcIixbXSxmdW5jdGlvbigpe3JldHVybiBifSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YjphLmdldFN0eWxlUHJvcGVydHk9Yn0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZhciBiPXBhcnNlRmxvYXQoYSksYz0tMT09PWEuaW5kZXhPZihcIiVcIikmJiFpc05hTihiKTtyZXR1cm4gYyYmYn1mdW5jdGlvbiBjKCl7fWZ1bmN0aW9uIGQoKXtmb3IodmFyIGE9e3dpZHRoOjAsaGVpZ2h0OjAsaW5uZXJXaWR0aDowLGlubmVySGVpZ2h0OjAsb3V0ZXJXaWR0aDowLG91dGVySGVpZ2h0OjB9LGI9MCxjPWcubGVuZ3RoO2M+YjtiKyspe3ZhciBkPWdbYl07YVtkXT0wfXJldHVybiBhfWZ1bmN0aW9uIGUoYyl7ZnVuY3Rpb24gZSgpe2lmKCFtKXttPSEwO3ZhciBkPWEuZ2V0Q29tcHV0ZWRTdHlsZTtpZihqPWZ1bmN0aW9uKCl7dmFyIGE9ZD9mdW5jdGlvbihhKXtyZXR1cm4gZChhLG51bGwpfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9O3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1hKGIpO3JldHVybiBjfHxmKFwiU3R5bGUgcmV0dXJuZWQgXCIrYytcIi4gQXJlIHlvdSBydW5uaW5nIHRoaXMgY29kZSBpbiBhIGhpZGRlbiBpZnJhbWUgb24gRmlyZWZveD8gU2VlIGh0dHA6Ly9iaXQubHkvZ2V0c2l6ZWJ1ZzFcIiksY319KCksaz1jKFwiYm94U2l6aW5nXCIpKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Uuc3R5bGUud2lkdGg9XCIyMDBweFwiLGUuc3R5bGUucGFkZGluZz1cIjFweCAycHggM3B4IDRweFwiLGUuc3R5bGUuYm9yZGVyU3R5bGU9XCJzb2xpZFwiLGUuc3R5bGUuYm9yZGVyV2lkdGg9XCIxcHggMnB4IDNweCA0cHhcIixlLnN0eWxlW2tdPVwiYm9yZGVyLWJveFwiO3ZhciBnPWRvY3VtZW50LmJvZHl8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtnLmFwcGVuZENoaWxkKGUpO3ZhciBoPWooZSk7bD0yMDA9PT1iKGgud2lkdGgpLGcucmVtb3ZlQ2hpbGQoZSl9fX1mdW5jdGlvbiBoKGEpe2lmKGUoKSxcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhKSksYSYmXCJvYmplY3RcIj09dHlwZW9mIGEmJmEubm9kZVR5cGUpe3ZhciBjPWooYSk7aWYoXCJub25lXCI9PT1jLmRpc3BsYXkpcmV0dXJuIGQoKTt2YXIgZj17fTtmLndpZHRoPWEub2Zmc2V0V2lkdGgsZi5oZWlnaHQ9YS5vZmZzZXRIZWlnaHQ7Zm9yKHZhciBoPWYuaXNCb3JkZXJCb3g9ISgha3x8IWNba118fFwiYm9yZGVyLWJveFwiIT09Y1trXSksbT0wLG49Zy5sZW5ndGg7bj5tO20rKyl7dmFyIG89Z1ttXSxwPWNbb107cD1pKGEscCk7dmFyIHE9cGFyc2VGbG9hdChwKTtmW29dPWlzTmFOKHEpPzA6cX12YXIgcj1mLnBhZGRpbmdMZWZ0K2YucGFkZGluZ1JpZ2h0LHM9Zi5wYWRkaW5nVG9wK2YucGFkZGluZ0JvdHRvbSx0PWYubWFyZ2luTGVmdCtmLm1hcmdpblJpZ2h0LHU9Zi5tYXJnaW5Ub3ArZi5tYXJnaW5Cb3R0b20sdj1mLmJvcmRlckxlZnRXaWR0aCtmLmJvcmRlclJpZ2h0V2lkdGgsdz1mLmJvcmRlclRvcFdpZHRoK2YuYm9yZGVyQm90dG9tV2lkdGgseD1oJiZsLHk9YihjLndpZHRoKTt5IT09ITEmJihmLndpZHRoPXkrKHg/MDpyK3YpKTt2YXIgej1iKGMuaGVpZ2h0KTtyZXR1cm4geiE9PSExJiYoZi5oZWlnaHQ9eisoeD8wOnMrdykpLGYuaW5uZXJXaWR0aD1mLndpZHRoLShyK3YpLGYuaW5uZXJIZWlnaHQ9Zi5oZWlnaHQtKHMrdyksZi5vdXRlcldpZHRoPWYud2lkdGgrdCxmLm91dGVySGVpZ2h0PWYuaGVpZ2h0K3UsZn19ZnVuY3Rpb24gaShiLGMpe2lmKGEuZ2V0Q29tcHV0ZWRTdHlsZXx8LTE9PT1jLmluZGV4T2YoXCIlXCIpKXJldHVybiBjO3ZhciBkPWIuc3R5bGUsZT1kLmxlZnQsZj1iLnJ1bnRpbWVTdHlsZSxnPWYmJmYubGVmdDtyZXR1cm4gZyYmKGYubGVmdD1iLmN1cnJlbnRTdHlsZS5sZWZ0KSxkLmxlZnQ9YyxjPWQucGl4ZWxMZWZ0LGQubGVmdD1lLGcmJihmLmxlZnQ9ZyksY312YXIgaixrLGwsbT0hMTtyZXR1cm4gaH12YXIgZj1cInVuZGVmaW5lZFwiPT10eXBlb2YgY29uc29sZT9jOmZ1bmN0aW9uKGEpe2NvbnNvbGUuZXJyb3IoYSl9LGc9W1wicGFkZGluZ0xlZnRcIixcInBhZGRpbmdSaWdodFwiLFwicGFkZGluZ1RvcFwiLFwicGFkZGluZ0JvdHRvbVwiLFwibWFyZ2luTGVmdFwiLFwibWFyZ2luUmlnaHRcIixcIm1hcmdpblRvcFwiLFwibWFyZ2luQm90dG9tXCIsXCJib3JkZXJMZWZ0V2lkdGhcIixcImJvcmRlclJpZ2h0V2lkdGhcIixcImJvcmRlclRvcFdpZHRoXCIsXCJib3JkZXJCb3R0b21XaWR0aFwiXTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZ2V0LXNpemUvZ2V0LXNpemVcIixbXCJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5XCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcImRlc2FuZHJvLWdldC1zdHlsZS1wcm9wZXJ0eVwiKSk6YS5nZXRTaXplPWUoYS5nZXRTdHlsZVByb3BlcnR5KX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGEmJihiLmlzUmVhZHk/YSgpOmcucHVzaChhKSl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1cInJlYWR5c3RhdGVjaGFuZ2VcIj09PWEudHlwZSYmXCJjb21wbGV0ZVwiIT09Zi5yZWFkeVN0YXRlO2IuaXNSZWFkeXx8Y3x8ZCgpfWZ1bmN0aW9uIGQoKXtiLmlzUmVhZHk9ITA7Zm9yKHZhciBhPTAsYz1nLmxlbmd0aDtjPmE7YSsrKXt2YXIgZD1nW2FdO2QoKX19ZnVuY3Rpb24gZShlKXtyZXR1cm5cImNvbXBsZXRlXCI9PT1mLnJlYWR5U3RhdGU/ZCgpOihlLmJpbmQoZixcIkRPTUNvbnRlbnRMb2FkZWRcIixjKSxlLmJpbmQoZixcInJlYWR5c3RhdGVjaGFuZ2VcIixjKSxlLmJpbmQoYSxcImxvYWRcIixjKSksYn12YXIgZj1hLmRvY3VtZW50LGc9W107Yi5pc1JlYWR5PSExLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJkb2MtcmVhZHkvZG9jLXJlYWR5XCIsW1wiZXZlbnRpZS9ldmVudGllXCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZShcImV2ZW50aWVcIikpOmEuZG9jUmVhZHk9ZShhLmV2ZW50aWUpfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYVtnXShiKX1mdW5jdGlvbiBjKGEpe2lmKCFhLnBhcmVudE5vZGUpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiLmFwcGVuZENoaWxkKGEpfX1mdW5jdGlvbiBkKGEsYil7YyhhKTtmb3IodmFyIGQ9YS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoYiksZT0wLGY9ZC5sZW5ndGg7Zj5lO2UrKylpZihkW2VdPT09YSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBlKGEsZCl7cmV0dXJuIGMoYSksYihhLGQpfXZhciBmLGc9ZnVuY3Rpb24oKXtpZihhLm1hdGNoZXMpcmV0dXJuXCJtYXRjaGVzXCI7aWYoYS5tYXRjaGVzU2VsZWN0b3IpcmV0dXJuXCJtYXRjaGVzU2VsZWN0b3JcIjtmb3IodmFyIGI9W1wid2Via2l0XCIsXCJtb3pcIixcIm1zXCIsXCJvXCJdLGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWJbY10sZj1lK1wiTWF0Y2hlc1NlbGVjdG9yXCI7aWYoYVtmXSlyZXR1cm4gZn19KCk7aWYoZyl7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxpPWIoaCxcImRpdlwiKTtmPWk/YjplfWVsc2UgZj1kO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJtYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3JcIixbXSxmdW5jdGlvbigpe3JldHVybiBmfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9Zjp3aW5kb3cubWF0Y2hlc1NlbGVjdG9yPWZ9KEVsZW1lbnQucHJvdG90eXBlKSxmdW5jdGlvbihhLGIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJmaXp6eS11aS11dGlscy91dGlsc1wiLFtcImRvYy1yZWFkeS9kb2MtcmVhZHlcIixcIm1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiXSxmdW5jdGlvbihjLGQpe3JldHVybiBiKGEsYyxkKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIoYSxyZXF1aXJlKFwiZG9jLXJlYWR5XCIpLHJlcXVpcmUoXCJkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yXCIpKTphLmZpenp5VUlVdGlscz1iKGEsYS5kb2NSZWFkeSxhLm1hdGNoZXNTZWxlY3Rvcil9KHdpbmRvdyxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9e307ZC5leHRlbmQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYilhW2NdPWJbY107cmV0dXJuIGF9LGQubW9kdWxvPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGElYitiKSVifTt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2QuaXNBcnJheT1mdW5jdGlvbihhKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PWUuY2FsbChhKX0sZC5tYWtlQXJyYXk9ZnVuY3Rpb24oYSl7dmFyIGI9W107aWYoZC5pc0FycmF5KGEpKWI9YTtlbHNlIGlmKGEmJlwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aClmb3IodmFyIGM9MCxlPWEubGVuZ3RoO2U+YztjKyspYi5wdXNoKGFbY10pO2Vsc2UgYi5wdXNoKGEpO3JldHVybiBifSxkLmluZGV4T2Y9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5pbmRleE9mKGIpfTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sZC5yZW1vdmVGcm9tPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZC5pbmRleE9mKGEsYik7LTEhPWMmJmEuc3BsaWNlKGMsMSl9LGQuaXNFbGVtZW50PVwiZnVuY3Rpb25cIj09dHlwZW9mIEhUTUxFbGVtZW50fHxcIm9iamVjdFwiPT10eXBlb2YgSFRNTEVsZW1lbnQ/ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MRWxlbWVudH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJlwib2JqZWN0XCI9PXR5cGVvZiBhJiYxPT1hLm5vZGVUeXBlJiZcInN0cmluZ1wiPT10eXBlb2YgYS5ub2RlTmFtZX0sZC5zZXRUZXh0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMpe2I9Ynx8KHZvaWQgMCE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudD9cInRleHRDb250ZW50XCI6XCJpbm5lclRleHRcIiksYVtiXT1jfXZhciBiO3JldHVybiBhfSgpLGQuZ2V0UGFyZW50PWZ1bmN0aW9uKGEsYil7Zm9yKDthIT1kb2N1bWVudC5ib2R5OylpZihhPWEucGFyZW50Tm9kZSxjKGEsYikpcmV0dXJuIGF9LGQuZ2V0UXVlcnlFbGVtZW50PWZ1bmN0aW9uKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhP2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSk6YX0sZC5oYW5kbGVFdmVudD1mdW5jdGlvbihhKXt2YXIgYj1cIm9uXCIrYS50eXBlO3RoaXNbYl0mJnRoaXNbYl0oYSl9LGQuZmlsdGVyRmluZEVsZW1lbnRzPWZ1bmN0aW9uKGEsYil7YT1kLm1ha2VBcnJheShhKTtmb3IodmFyIGU9W10sZj0wLGc9YS5sZW5ndGg7Zz5mO2YrKyl7dmFyIGg9YVtmXTtpZihkLmlzRWxlbWVudChoKSlpZihiKXtjKGgsYikmJmUucHVzaChoKTtmb3IodmFyIGk9aC5xdWVyeVNlbGVjdG9yQWxsKGIpLGo9MCxrPWkubGVuZ3RoO2s+ajtqKyspZS5wdXNoKGlbal0pfWVsc2UgZS5wdXNoKGgpfXJldHVybiBlfSxkLmRlYm91bmNlTWV0aG9kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnByb3RvdHlwZVtiXSxlPWIrXCJUaW1lb3V0XCI7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXt2YXIgYT10aGlzW2VdO2EmJmNsZWFyVGltZW91dChhKTt2YXIgYj1hcmd1bWVudHMsZj10aGlzO3RoaXNbZV09c2V0VGltZW91dChmdW5jdGlvbigpe2QuYXBwbHkoZixiKSxkZWxldGUgZltlXX0sY3x8MTAwKX19LGQudG9EYXNoZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvKC4pKFtBLVpdKS9nLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYitcIi1cIitjfSkudG9Mb3dlckNhc2UoKX07dmFyIGY9YS5jb25zb2xlO3JldHVybiBkLmh0bWxJbml0PWZ1bmN0aW9uKGMsZSl7YihmdW5jdGlvbigpe2Zvcih2YXIgYj1kLnRvRGFzaGVkKGUpLGc9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5qcy1cIitiKSxoPVwiZGF0YS1cIitiK1wiLW9wdGlvbnNcIixpPTAsaj1nLmxlbmd0aDtqPmk7aSsrKXt2YXIgayxsPWdbaV0sbT1sLmdldEF0dHJpYnV0ZShoKTt0cnl7az1tJiZKU09OLnBhcnNlKG0pfWNhdGNoKG4pe2YmJmYuZXJyb3IoXCJFcnJvciBwYXJzaW5nIFwiK2grXCIgb24gXCIrbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKyhsLmlkP1wiI1wiK2wuaWQ6XCJcIikrXCI6IFwiK24pO2NvbnRpbnVlfXZhciBvPW5ldyBjKGwsaykscD1hLmpRdWVyeTtwJiZwLmRhdGEobCxlLG8pfX0pfSxkfSksZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwib3V0bGF5ZXIvaXRlbVwiLFtcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixcImdldC1zaXplL2dldC1zaXplXCIsXCJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5XCIsXCJmaXp6eS11aS11dGlscy91dGlsc1wiXSxmdW5jdGlvbihjLGQsZSxmKXtyZXR1cm4gYihhLGMsZCxlLGYpfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihhLHJlcXVpcmUoXCJ3b2xmeTg3LWV2ZW50ZW1pdHRlclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikscmVxdWlyZShcImRlc2FuZHJvLWdldC1zdHlsZS1wcm9wZXJ0eVwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikpOihhLk91dGxheWVyPXt9LGEuT3V0bGF5ZXIuSXRlbT1iKGEsYS5FdmVudEVtaXR0ZXIsYS5nZXRTaXplLGEuZ2V0U3R5bGVQcm9wZXJ0eSxhLmZpenp5VUlVdGlscykpfSh3aW5kb3csZnVuY3Rpb24oYSxiLGMsZCxlKXtmdW5jdGlvbiBmKGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiExO3JldHVybiBiPW51bGwsITB9ZnVuY3Rpb24gZyhhLGIpe2EmJih0aGlzLmVsZW1lbnQ9YSx0aGlzLmxheW91dD1iLHRoaXMucG9zaXRpb249e3g6MCx5OjB9LHRoaXMuX2NyZWF0ZSgpKX1mdW5jdGlvbiBoKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm5cIi1cIithLnRvTG93ZXJDYXNlKCl9KX12YXIgaT1hLmdldENvbXB1dGVkU3R5bGUsaj1pP2Z1bmN0aW9uKGEpe3JldHVybiBpKGEsbnVsbCl9OmZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX0saz1kKFwidHJhbnNpdGlvblwiKSxsPWQoXCJ0cmFuc2Zvcm1cIiksbT1rJiZsLG49ISFkKFwicGVyc3BlY3RpdmVcIiksbz17V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLE9UcmFuc2l0aW9uOlwib3RyYW5zaXRpb25lbmRcIix0cmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwifVtrXSxwPVtcInRyYW5zZm9ybVwiLFwidHJhbnNpdGlvblwiLFwidHJhbnNpdGlvbkR1cmF0aW9uXCIsXCJ0cmFuc2l0aW9uUHJvcGVydHlcIl0scT1mdW5jdGlvbigpe2Zvcih2YXIgYT17fSxiPTAsYz1wLmxlbmd0aDtjPmI7YisrKXt2YXIgZT1wW2JdLGY9ZChlKTtmJiZmIT09ZSYmKGFbZV09Zil9cmV0dXJuIGF9KCk7ZS5leHRlbmQoZy5wcm90b3R5cGUsYi5wcm90b3R5cGUpLGcucHJvdG90eXBlLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLl90cmFuc249e2luZ1Byb3BlcnRpZXM6e30sY2xlYW46e30sb25FbmQ6e319LHRoaXMuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCJ9KX0sZy5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9XCJvblwiK2EudHlwZTt0aGlzW2JdJiZ0aGlzW2JdKGEpfSxnLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWModGhpcy5lbGVtZW50KX0sZy5wcm90b3R5cGUuY3NzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudC5zdHlsZTtmb3IodmFyIGMgaW4gYSl7dmFyIGQ9cVtjXXx8YztiW2RdPWFbY119fSxnLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPWoodGhpcy5lbGVtZW50KSxiPXRoaXMubGF5b3V0Lm9wdGlvbnMsYz1iLmlzT3JpZ2luTGVmdCxkPWIuaXNPcmlnaW5Ub3AsZT1hW2M/XCJsZWZ0XCI6XCJyaWdodFwiXSxmPWFbZD9cInRvcFwiOlwiYm90dG9tXCJdLGc9dGhpcy5sYXlvdXQuc2l6ZSxoPS0xIT1lLmluZGV4T2YoXCIlXCIpP3BhcnNlRmxvYXQoZSkvMTAwKmcud2lkdGg6cGFyc2VJbnQoZSwxMCksaT0tMSE9Zi5pbmRleE9mKFwiJVwiKT9wYXJzZUZsb2F0KGYpLzEwMCpnLmhlaWdodDpwYXJzZUludChmLDEwKTtoPWlzTmFOKGgpPzA6aCxpPWlzTmFOKGkpPzA6aSxoLT1jP2cucGFkZGluZ0xlZnQ6Zy5wYWRkaW5nUmlnaHQsaS09ZD9nLnBhZGRpbmdUb3A6Zy5wYWRkaW5nQm90dG9tLHRoaXMucG9zaXRpb24ueD1oLHRoaXMucG9zaXRpb24ueT1pfSxnLnByb3RvdHlwZS5sYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5b3V0LnNpemUsYj10aGlzLmxheW91dC5vcHRpb25zLGM9e30sZD1iLmlzT3JpZ2luTGVmdD9cInBhZGRpbmdMZWZ0XCI6XCJwYWRkaW5nUmlnaHRcIixlPWIuaXNPcmlnaW5MZWZ0P1wibGVmdFwiOlwicmlnaHRcIixmPWIuaXNPcmlnaW5MZWZ0P1wicmlnaHRcIjpcImxlZnRcIixnPXRoaXMucG9zaXRpb24ueCthW2RdO2NbZV09dGhpcy5nZXRYVmFsdWUoZyksY1tmXT1cIlwiO3ZhciBoPWIuaXNPcmlnaW5Ub3A/XCJwYWRkaW5nVG9wXCI6XCJwYWRkaW5nQm90dG9tXCIsaT1iLmlzT3JpZ2luVG9wP1widG9wXCI6XCJib3R0b21cIixqPWIuaXNPcmlnaW5Ub3A/XCJib3R0b21cIjpcInRvcFwiLGs9dGhpcy5wb3NpdGlvbi55K2FbaF07Y1tpXT10aGlzLmdldFlWYWx1ZShrKSxjW2pdPVwiXCIsdGhpcy5jc3MoYyksdGhpcy5lbWl0RXZlbnQoXCJsYXlvdXRcIixbdGhpc10pfSxnLnByb3RvdHlwZS5nZXRYVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXlvdXQub3B0aW9ucztyZXR1cm4gYi5wZXJjZW50UG9zaXRpb24mJiFiLmlzSG9yaXpvbnRhbD9hL3RoaXMubGF5b3V0LnNpemUud2lkdGgqMTAwK1wiJVwiOmErXCJweFwifSxnLnByb3RvdHlwZS5nZXRZVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXlvdXQub3B0aW9ucztyZXR1cm4gYi5wZXJjZW50UG9zaXRpb24mJmIuaXNIb3Jpem9udGFsP2EvdGhpcy5sYXlvdXQuc2l6ZS5oZWlnaHQqMTAwK1wiJVwiOmErXCJweFwifSxnLnByb3RvdHlwZS5fdHJhbnNpdGlvblRvPWZ1bmN0aW9uKGEsYil7dGhpcy5nZXRQb3NpdGlvbigpO3ZhciBjPXRoaXMucG9zaXRpb24ueCxkPXRoaXMucG9zaXRpb24ueSxlPXBhcnNlSW50KGEsMTApLGY9cGFyc2VJbnQoYiwxMCksZz1lPT09dGhpcy5wb3NpdGlvbi54JiZmPT09dGhpcy5wb3NpdGlvbi55O2lmKHRoaXMuc2V0UG9zaXRpb24oYSxiKSxnJiYhdGhpcy5pc1RyYW5zaXRpb25pbmcpcmV0dXJuIHZvaWQgdGhpcy5sYXlvdXRQb3NpdGlvbigpO3ZhciBoPWEtYyxpPWItZCxqPXt9O2oudHJhbnNmb3JtPXRoaXMuZ2V0VHJhbnNsYXRlKGgsaSksdGhpcy50cmFuc2l0aW9uKHt0bzpqLG9uVHJhbnNpdGlvbkVuZDp7dHJhbnNmb3JtOnRoaXMubGF5b3V0UG9zaXRpb259LGlzQ2xlYW5pbmc6ITB9KX0sZy5wcm90b3R5cGUuZ2V0VHJhbnNsYXRlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5sYXlvdXQub3B0aW9ucztyZXR1cm4gYT1jLmlzT3JpZ2luTGVmdD9hOi1hLGI9Yy5pc09yaWdpblRvcD9iOi1iLG4/XCJ0cmFuc2xhdGUzZChcIithK1wicHgsIFwiK2IrXCJweCwgMClcIjpcInRyYW5zbGF0ZShcIithK1wicHgsIFwiK2IrXCJweClcIn0sZy5wcm90b3R5cGUuZ29Ubz1mdW5jdGlvbihhLGIpe3RoaXMuc2V0UG9zaXRpb24oYSxiKSx0aGlzLmxheW91dFBvc2l0aW9uKCl9LGcucHJvdG90eXBlLm1vdmVUbz1tP2cucHJvdG90eXBlLl90cmFuc2l0aW9uVG86Zy5wcm90b3R5cGUuZ29UbyxnLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbihhLGIpe3RoaXMucG9zaXRpb24ueD1wYXJzZUludChhLDEwKSx0aGlzLnBvc2l0aW9uLnk9cGFyc2VJbnQoYiwxMCl9LGcucHJvdG90eXBlLl9ub25UcmFuc2l0aW9uPWZ1bmN0aW9uKGEpe3RoaXMuY3NzKGEudG8pLGEuaXNDbGVhbmluZyYmdGhpcy5fcmVtb3ZlU3R5bGVzKGEudG8pO2Zvcih2YXIgYiBpbiBhLm9uVHJhbnNpdGlvbkVuZClhLm9uVHJhbnNpdGlvbkVuZFtiXS5jYWxsKHRoaXMpfSxnLnByb3RvdHlwZS5fdHJhbnNpdGlvbj1mdW5jdGlvbihhKXtpZighcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbikpcmV0dXJuIHZvaWQgdGhpcy5fbm9uVHJhbnNpdGlvbihhKTt2YXIgYj10aGlzLl90cmFuc247Zm9yKHZhciBjIGluIGEub25UcmFuc2l0aW9uRW5kKWIub25FbmRbY109YS5vblRyYW5zaXRpb25FbmRbY107Zm9yKGMgaW4gYS50byliLmluZ1Byb3BlcnRpZXNbY109ITAsYS5pc0NsZWFuaW5nJiYoYi5jbGVhbltjXT0hMCk7aWYoYS5mcm9tKXt0aGlzLmNzcyhhLmZyb20pO3ZhciBkPXRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7ZD1udWxsfXRoaXMuZW5hYmxlVHJhbnNpdGlvbihhLnRvKSx0aGlzLmNzcyhhLnRvKSx0aGlzLmlzVHJhbnNpdGlvbmluZz0hMH07dmFyIHI9XCJvcGFjaXR5LFwiK2gocS50cmFuc2Zvcm18fFwidHJhbnNmb3JtXCIpO2cucHJvdG90eXBlLmVuYWJsZVRyYW5zaXRpb249ZnVuY3Rpb24oKXt0aGlzLmlzVHJhbnNpdGlvbmluZ3x8KHRoaXMuY3NzKHt0cmFuc2l0aW9uUHJvcGVydHk6cix0cmFuc2l0aW9uRHVyYXRpb246dGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb259KSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihvLHRoaXMsITEpKX0sZy5wcm90b3R5cGUudHJhbnNpdGlvbj1nLnByb3RvdHlwZVtrP1wiX3RyYW5zaXRpb25cIjpcIl9ub25UcmFuc2l0aW9uXCJdLGcucHJvdG90eXBlLm9ud2Via2l0VHJhbnNpdGlvbkVuZD1mdW5jdGlvbihhKXt0aGlzLm9udHJhbnNpdGlvbmVuZChhKX0sZy5wcm90b3R5cGUub25vdHJhbnNpdGlvbmVuZD1mdW5jdGlvbihhKXt0aGlzLm9udHJhbnNpdGlvbmVuZChhKX07dmFyIHM9e1wiLXdlYmtpdC10cmFuc2Zvcm1cIjpcInRyYW5zZm9ybVwiLFwiLW1vei10cmFuc2Zvcm1cIjpcInRyYW5zZm9ybVwiLFwiLW8tdHJhbnNmb3JtXCI6XCJ0cmFuc2Zvcm1cIn07Zy5wcm90b3R5cGUub250cmFuc2l0aW9uZW5kPWZ1bmN0aW9uKGEpe2lmKGEudGFyZ2V0PT09dGhpcy5lbGVtZW50KXt2YXIgYj10aGlzLl90cmFuc24sYz1zW2EucHJvcGVydHlOYW1lXXx8YS5wcm9wZXJ0eU5hbWU7aWYoZGVsZXRlIGIuaW5nUHJvcGVydGllc1tjXSxmKGIuaW5nUHJvcGVydGllcykmJnRoaXMuZGlzYWJsZVRyYW5zaXRpb24oKSxjIGluIGIuY2xlYW4mJih0aGlzLmVsZW1lbnQuc3R5bGVbYS5wcm9wZXJ0eU5hbWVdPVwiXCIsZGVsZXRlIGIuY2xlYW5bY10pLGMgaW4gYi5vbkVuZCl7dmFyIGQ9Yi5vbkVuZFtjXTtkLmNhbGwodGhpcyksZGVsZXRlIGIub25FbmRbY119dGhpcy5lbWl0RXZlbnQoXCJ0cmFuc2l0aW9uRW5kXCIsW3RoaXNdKX19LGcucHJvdG90eXBlLmRpc2FibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzKCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIobyx0aGlzLCExKSx0aGlzLmlzVHJhbnNpdGlvbmluZz0hMX0sZy5wcm90b3R5cGUuX3JlbW92ZVN0eWxlcz1mdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSliW2NdPVwiXCI7dGhpcy5jc3MoYil9O3ZhciB0PXt0cmFuc2l0aW9uUHJvcGVydHk6XCJcIix0cmFuc2l0aW9uRHVyYXRpb246XCJcIn07cmV0dXJuIGcucHJvdG90eXBlLnJlbW92ZVRyYW5zaXRpb25TdHlsZXM9ZnVuY3Rpb24oKXt0aGlzLmNzcyh0KX0sZy5wcm90b3R5cGUucmVtb3ZlRWxlbT1mdW5jdGlvbigpe3RoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pLHRoaXMuZW1pdEV2ZW50KFwicmVtb3ZlXCIsW3RoaXNdKX0sZy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7aWYoIWt8fCFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSlyZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUVsZW0oKTt2YXIgYT10aGlzO3RoaXMub25jZShcInRyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe2EucmVtb3ZlRWxlbSgpfSksdGhpcy5oaWRlKCl9LGcucHJvdG90eXBlLnJldmVhbD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmlzSGlkZGVuLHRoaXMuY3NzKHtkaXNwbGF5OlwiXCJ9KTt2YXIgYT10aGlzLmxheW91dC5vcHRpb25zLGI9e30sYz10aGlzLmdldEhpZGVSZXZlYWxUcmFuc2l0aW9uRW5kUHJvcGVydHkoXCJ2aXNpYmxlU3R5bGVcIik7YltjXT10aGlzLm9uUmV2ZWFsVHJhbnNpdGlvbkVuZCx0aGlzLnRyYW5zaXRpb24oe2Zyb206YS5oaWRkZW5TdHlsZSx0bzphLnZpc2libGVTdHlsZSxpc0NsZWFuaW5nOiEwLG9uVHJhbnNpdGlvbkVuZDpifSl9LGcucHJvdG90eXBlLm9uUmV2ZWFsVHJhbnNpdGlvbkVuZD1mdW5jdGlvbigpe3RoaXMuaXNIaWRkZW58fHRoaXMuZW1pdEV2ZW50KFwicmV2ZWFsXCIpfSxnLnByb3RvdHlwZS5nZXRIaWRlUmV2ZWFsVHJhbnNpdGlvbkVuZFByb3BlcnR5PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGF5b3V0Lm9wdGlvbnNbYV07aWYoYi5vcGFjaXR5KXJldHVyblwib3BhY2l0eVwiO2Zvcih2YXIgYyBpbiBiKXJldHVybiBjfSxnLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbj0hMCx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSk7dmFyIGE9dGhpcy5sYXlvdXQub3B0aW9ucyxiPXt9LGM9dGhpcy5nZXRIaWRlUmV2ZWFsVHJhbnNpdGlvbkVuZFByb3BlcnR5KFwiaGlkZGVuU3R5bGVcIik7YltjXT10aGlzLm9uSGlkZVRyYW5zaXRpb25FbmQsdGhpcy50cmFuc2l0aW9uKHtmcm9tOmEudmlzaWJsZVN0eWxlLHRvOmEuaGlkZGVuU3R5bGUsaXNDbGVhbmluZzohMCxvblRyYW5zaXRpb25FbmQ6Yn0pfSxnLnByb3RvdHlwZS5vbkhpZGVUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbiYmKHRoaXMuY3NzKHtkaXNwbGF5Olwibm9uZVwifSksdGhpcy5lbWl0RXZlbnQoXCJoaWRlXCIpKX0sZy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY3NzKHtwb3NpdGlvbjpcIlwiLGxlZnQ6XCJcIixyaWdodDpcIlwiLHRvcDpcIlwiLGJvdHRvbTpcIlwiLHRyYW5zaXRpb246XCJcIix0cmFuc2Zvcm06XCJcIn0pfSxnfSksZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwib3V0bGF5ZXIvb3V0bGF5ZXJcIixbXCJldmVudGllL2V2ZW50aWVcIixcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixcImdldC1zaXplL2dldC1zaXplXCIsXCJmaXp6eS11aS11dGlscy91dGlsc1wiLFwiLi9pdGVtXCJdLGZ1bmN0aW9uKGMsZCxlLGYsZyl7cmV0dXJuIGIoYSxjLGQsZSxmLGcpfSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihhLHJlcXVpcmUoXCJldmVudGllXCIpLHJlcXVpcmUoXCJ3b2xmeTg3LWV2ZW50ZW1pdHRlclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikscmVxdWlyZShcImZpenp5LXVpLXV0aWxzXCIpLHJlcXVpcmUoXCIuL2l0ZW1cIikpOmEuT3V0bGF5ZXI9YihhLGEuZXZlbnRpZSxhLkV2ZW50RW1pdHRlcixhLmdldFNpemUsYS5maXp6eVVJVXRpbHMsYS5PdXRsYXllci5JdGVtKX0od2luZG93LGZ1bmN0aW9uKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYil7dmFyIGM9ZS5nZXRRdWVyeUVsZW1lbnQoYSk7aWYoIWMpcmV0dXJuIHZvaWQoaCYmaC5lcnJvcihcIkJhZCBlbGVtZW50IGZvciBcIit0aGlzLmNvbnN0cnVjdG9yLm5hbWVzcGFjZStcIjogXCIrKGN8fGEpKSk7dGhpcy5lbGVtZW50PWMsaSYmKHRoaXMuJGVsZW1lbnQ9aSh0aGlzLmVsZW1lbnQpKSx0aGlzLm9wdGlvbnM9ZS5leHRlbmQoe30sdGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0cyksdGhpcy5vcHRpb24oYik7dmFyIGQ9KytrO3RoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ9ZCxsW2RdPXRoaXMsdGhpcy5fY3JlYXRlKCksdGhpcy5vcHRpb25zLmlzSW5pdExheW91dCYmdGhpcy5sYXlvdXQoKX12YXIgaD1hLmNvbnNvbGUsaT1hLmpRdWVyeSxqPWZ1bmN0aW9uKCl7fSxrPTAsbD17fTtyZXR1cm4gZy5uYW1lc3BhY2U9XCJvdXRsYXllclwiLGcuSXRlbT1mLGcuZGVmYXVsdHM9e2NvbnRhaW5lclN0eWxlOntwb3NpdGlvbjpcInJlbGF0aXZlXCJ9LGlzSW5pdExheW91dDohMCxpc09yaWdpbkxlZnQ6ITAsaXNPcmlnaW5Ub3A6ITAsaXNSZXNpemVCb3VuZDohMCxpc1Jlc2l6aW5nQ29udGFpbmVyOiEwLHRyYW5zaXRpb25EdXJhdGlvbjpcIjAuNHNcIixoaWRkZW5TdHlsZTp7b3BhY2l0eTowLHRyYW5zZm9ybTpcInNjYWxlKDAuMDAxKVwifSx2aXNpYmxlU3R5bGU6e29wYWNpdHk6MSx0cmFuc2Zvcm06XCJzY2FsZSgxKVwifX0sZS5leHRlbmQoZy5wcm90b3R5cGUsYy5wcm90b3R5cGUpLGcucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbihhKXtlLmV4dGVuZCh0aGlzLm9wdGlvbnMsYSl9LGcucHJvdG90eXBlLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLnJlbG9hZEl0ZW1zKCksdGhpcy5zdGFtcHM9W10sdGhpcy5zdGFtcCh0aGlzLm9wdGlvbnMuc3RhbXApLGUuZXh0ZW5kKHRoaXMuZWxlbWVudC5zdHlsZSx0aGlzLm9wdGlvbnMuY29udGFpbmVyU3R5bGUpLHRoaXMub3B0aW9ucy5pc1Jlc2l6ZUJvdW5kJiZ0aGlzLmJpbmRSZXNpemUoKX0sZy5wcm90b3R5cGUucmVsb2FkSXRlbXM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPXRoaXMuX2l0ZW1pemUodGhpcy5lbGVtZW50LmNoaWxkcmVuKX0sZy5wcm90b3R5cGUuX2l0ZW1pemU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuX2ZpbHRlckZpbmRJdGVtRWxlbWVudHMoYSksYz10aGlzLmNvbnN0cnVjdG9yLkl0ZW0sZD1bXSxlPTAsZj1iLmxlbmd0aDtmPmU7ZSsrKXt2YXIgZz1iW2VdLGg9bmV3IGMoZyx0aGlzKTtkLnB1c2goaCl9cmV0dXJuIGR9LGcucHJvdG90eXBlLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKGEpe3JldHVybiBlLmZpbHRlckZpbmRFbGVtZW50cyhhLHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpfSxnLnByb3RvdHlwZS5nZXRJdGVtRWxlbWVudHM9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5pdGVtcy5sZW5ndGg7Yz5iO2IrKylhLnB1c2godGhpcy5pdGVtc1tiXS5lbGVtZW50KTtyZXR1cm4gYX0sZy5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKTt2YXIgYT12b2lkIDAhPT10aGlzLm9wdGlvbnMuaXNMYXlvdXRJbnN0YW50P3RoaXMub3B0aW9ucy5pc0xheW91dEluc3RhbnQ6IXRoaXMuX2lzTGF5b3V0SW5pdGVkO3RoaXMubGF5b3V0SXRlbXModGhpcy5pdGVtcyxhKSx0aGlzLl9pc0xheW91dEluaXRlZD0hMH0sZy5wcm90b3R5cGUuX2luaXQ9Zy5wcm90b3R5cGUubGF5b3V0LGcucHJvdG90eXBlLl9yZXNldExheW91dD1mdW5jdGlvbigpe3RoaXMuZ2V0U2l6ZSgpfSxnLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWQodGhpcy5lbGVtZW50KX0sZy5wcm90b3R5cGUuX2dldE1lYXN1cmVtZW50PWZ1bmN0aW9uKGEsYil7dmFyIGMsZj10aGlzLm9wdGlvbnNbYV07Zj8oXCJzdHJpbmdcIj09dHlwZW9mIGY/Yz10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihmKTplLmlzRWxlbWVudChmKSYmKGM9ZiksdGhpc1thXT1jP2QoYylbYl06Zik6dGhpc1thXT0wfSxnLnByb3RvdHlwZS5sYXlvdXRJdGVtcz1mdW5jdGlvbihhLGIpe2E9dGhpcy5fZ2V0SXRlbXNGb3JMYXlvdXQoYSksdGhpcy5fbGF5b3V0SXRlbXMoYSxiKSx0aGlzLl9wb3N0TGF5b3V0KCl9LGcucHJvdG90eXBlLl9nZXRJdGVtc0ZvckxheW91dD1mdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyl7dmFyIGU9YVtjXTtlLmlzSWdub3JlZHx8Yi5wdXNoKGUpfXJldHVybiBifSxnLnByb3RvdHlwZS5fbGF5b3V0SXRlbXM9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9lbWl0Q29tcGxldGVPbkl0ZW1zKFwibGF5b3V0XCIsYSksYSYmYS5sZW5ndGgpe2Zvcih2YXIgYz1bXSxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKXt2YXIgZj1hW2RdLGc9dGhpcy5fZ2V0SXRlbUxheW91dFBvc2l0aW9uKGYpO2cuaXRlbT1mLGcuaXNJbnN0YW50PWJ8fGYuaXNMYXlvdXRJbnN0YW50LGMucHVzaChnKX10aGlzLl9wcm9jZXNzTGF5b3V0UXVldWUoYyl9fSxnLnByb3RvdHlwZS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJue3g6MCx5OjB9fSxnLnByb3RvdHlwZS5fcHJvY2Vzc0xheW91dFF1ZXVlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9YVtiXTt0aGlzLl9wb3NpdGlvbkl0ZW0oZC5pdGVtLGQueCxkLnksZC5pc0luc3RhbnQpfX0sZy5wcm90b3R5cGUuX3Bvc2l0aW9uSXRlbT1mdW5jdGlvbihhLGIsYyxkKXtkP2EuZ29UbyhiLGMpOmEubW92ZVRvKGIsYyl9LGcucHJvdG90eXBlLl9wb3N0TGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5yZXNpemVDb250YWluZXIoKX0sZy5wcm90b3R5cGUucmVzaXplQ29udGFpbmVyPWZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmlzUmVzaXppbmdDb250YWluZXIpe3ZhciBhPXRoaXMuX2dldENvbnRhaW5lclNpemUoKTthJiYodGhpcy5fc2V0Q29udGFpbmVyTWVhc3VyZShhLndpZHRoLCEwKSx0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKGEuaGVpZ2h0LCExKSl9fSxnLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyU2l6ZT1qLGcucHJvdG90eXBlLl9zZXRDb250YWluZXJNZWFzdXJlPWZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YSl7dmFyIGM9dGhpcy5zaXplO2MuaXNCb3JkZXJCb3gmJihhKz1iP2MucGFkZGluZ0xlZnQrYy5wYWRkaW5nUmlnaHQrYy5ib3JkZXJMZWZ0V2lkdGgrYy5ib3JkZXJSaWdodFdpZHRoOmMucGFkZGluZ0JvdHRvbStjLnBhZGRpbmdUb3ArYy5ib3JkZXJUb3BXaWR0aCtjLmJvcmRlckJvdHRvbVdpZHRoKSxhPU1hdGgubWF4KGEsMCksdGhpcy5lbGVtZW50LnN0eWxlW2I/XCJ3aWR0aFwiOlwiaGVpZ2h0XCJdPWErXCJweFwifX0sZy5wcm90b3R5cGUuX2VtaXRDb21wbGV0ZU9uSXRlbXM9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7ZS5kaXNwYXRjaEV2ZW50KGErXCJDb21wbGV0ZVwiLG51bGwsW2JdKX1mdW5jdGlvbiBkKCl7ZysrLGc9PT1mJiZjKCl9dmFyIGU9dGhpcyxmPWIubGVuZ3RoO2lmKCFifHwhZilyZXR1cm4gdm9pZCBjKCk7Zm9yKHZhciBnPTAsaD0wLGk9Yi5sZW5ndGg7aT5oO2grKyl7dmFyIGo9YltoXTtqLm9uY2UoYSxkKX19LGcucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWI/W2JdLmNvbmNhdChjKTpjO2lmKHRoaXMuZW1pdEV2ZW50KGEsZCksaSlpZih0aGlzLiRlbGVtZW50PXRoaXMuJGVsZW1lbnR8fGkodGhpcy5lbGVtZW50KSxiKXt2YXIgZT1pLkV2ZW50KGIpO2UudHlwZT1hLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlLGMpfWVsc2UgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGEsYyl9LGcucHJvdG90eXBlLmlnbm9yZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEl0ZW0oYSk7YiYmKGIuaXNJZ25vcmVkPSEwKX0sZy5wcm90b3R5cGUudW5pZ25vcmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRJdGVtKGEpO2ImJmRlbGV0ZSBiLmlzSWdub3JlZH0sZy5wcm90b3R5cGUuc3RhbXA9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLl9maW5kKGEpKXt0aGlzLnN0YW1wcz10aGlzLnN0YW1wcy5jb25jYXQoYSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXt2YXIgZD1hW2JdO3RoaXMuaWdub3JlKGQpfX19LGcucHJvdG90eXBlLnVuc3RhbXA9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLl9maW5kKGEpKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9YVtiXTtlLnJlbW92ZUZyb20odGhpcy5zdGFtcHMsZCksdGhpcy51bmlnbm9yZShkKX19LGcucHJvdG90eXBlLl9maW5kPWZ1bmN0aW9uKGEpe3JldHVybiBhPyhcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYSkpLGE9ZS5tYWtlQXJyYXkoYSkpOnZvaWQgMH0sZy5wcm90b3R5cGUuX21hbmFnZVN0YW1wcz1mdW5jdGlvbigpe2lmKHRoaXMuc3RhbXBzJiZ0aGlzLnN0YW1wcy5sZW5ndGgpe3RoaXMuX2dldEJvdW5kaW5nUmVjdCgpO2Zvcih2YXIgYT0wLGI9dGhpcy5zdGFtcHMubGVuZ3RoO2I+YTthKyspe3ZhciBjPXRoaXMuc3RhbXBzW2FdO3RoaXMuX21hbmFnZVN0YW1wKGMpfX19LGcucHJvdG90eXBlLl9nZXRCb3VuZGluZ1JlY3Q9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYj10aGlzLnNpemU7dGhpcy5fYm91bmRpbmdSZWN0PXtsZWZ0OmEubGVmdCtiLnBhZGRpbmdMZWZ0K2IuYm9yZGVyTGVmdFdpZHRoLHRvcDphLnRvcCtiLnBhZGRpbmdUb3ArYi5ib3JkZXJUb3BXaWR0aCxyaWdodDphLnJpZ2h0LShiLnBhZGRpbmdSaWdodCtiLmJvcmRlclJpZ2h0V2lkdGgpLGJvdHRvbTphLmJvdHRvbS0oYi5wYWRkaW5nQm90dG9tK2IuYm9yZGVyQm90dG9tV2lkdGgpfX0sZy5wcm90b3R5cGUuX21hbmFnZVN0YW1wPWosZy5wcm90b3R5cGUuX2dldEVsZW1lbnRPZmZzZXQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPXRoaXMuX2JvdW5kaW5nUmVjdCxlPWQoYSksZj17bGVmdDpiLmxlZnQtYy5sZWZ0LWUubWFyZ2luTGVmdCx0b3A6Yi50b3AtYy50b3AtZS5tYXJnaW5Ub3AscmlnaHQ6Yy5yaWdodC1iLnJpZ2h0LWUubWFyZ2luUmlnaHQsYm90dG9tOmMuYm90dG9tLWIuYm90dG9tLWUubWFyZ2luQm90dG9tfTtyZXR1cm4gZn0sZy5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9XCJvblwiK2EudHlwZTt0aGlzW2JdJiZ0aGlzW2JdKGEpfSxnLnByb3RvdHlwZS5iaW5kUmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5pc1Jlc2l6ZUJvdW5kfHwoYi5iaW5kKGEsXCJyZXNpemVcIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITApfSxnLnByb3RvdHlwZS51bmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJmIudW5iaW5kKGEsXCJyZXNpemVcIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITF9LGcucHJvdG90eXBlLm9ucmVzaXplPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe2IucmVzaXplKCksZGVsZXRlIGIucmVzaXplVGltZW91dH10aGlzLnJlc2l6ZVRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVvdXQpO3ZhciBiPXRoaXM7dGhpcy5yZXNpemVUaW1lb3V0PXNldFRpbWVvdXQoYSwxMDApfSxnLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJnRoaXMubmVlZHNSZXNpemVMYXlvdXQoKSYmdGhpcy5sYXlvdXQoKX0sZy5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXt2YXIgYT1kKHRoaXMuZWxlbWVudCksYj10aGlzLnNpemUmJmE7cmV0dXJuIGImJmEuaW5uZXJXaWR0aCE9PXRoaXMuc2l6ZS5pbm5lcldpZHRofSxnLnByb3RvdHlwZS5hZGRJdGVtcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9pdGVtaXplKGEpO3JldHVybiBiLmxlbmd0aCYmKHRoaXMuaXRlbXM9dGhpcy5pdGVtcy5jb25jYXQoYikpLGJ9LGcucHJvdG90eXBlLmFwcGVuZGVkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYWRkSXRlbXMoYSk7Yi5sZW5ndGgmJih0aGlzLmxheW91dEl0ZW1zKGIsITApLHRoaXMucmV2ZWFsKGIpKX0sZy5wcm90b3R5cGUucHJlcGVuZGVkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2l0ZW1pemUoYSk7aWYoYi5sZW5ndGgpe3ZhciBjPXRoaXMuaXRlbXMuc2xpY2UoMCk7dGhpcy5pdGVtcz1iLmNvbmNhdChjKSx0aGlzLl9yZXNldExheW91dCgpLHRoaXMuX21hbmFnZVN0YW1wcygpLHRoaXMubGF5b3V0SXRlbXMoYiwhMCksdGhpcy5yZXZlYWwoYiksdGhpcy5sYXlvdXRJdGVtcyhjKX19LGcucHJvdG90eXBlLnJldmVhbD1mdW5jdGlvbihhKXt0aGlzLl9lbWl0Q29tcGxldGVPbkl0ZW1zKFwicmV2ZWFsXCIsYSk7Zm9yKHZhciBiPWEmJmEubGVuZ3RoLGM9MDtiJiZiPmM7YysrKXt2YXIgZD1hW2NdO2QucmV2ZWFsKCl9fSxnLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGEpe3RoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoXCJoaWRlXCIsYSk7Zm9yKHZhciBiPWEmJmEubGVuZ3RoLGM9MDtiJiZiPmM7YysrKXt2YXIgZD1hW2NdO2QuaGlkZSgpfX0sZy5wcm90b3R5cGUucmV2ZWFsSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0SXRlbXMoYSk7dGhpcy5yZXZlYWwoYil9LGcucHJvdG90eXBlLmhpZGVJdGVtRWxlbWVudHM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRJdGVtcyhhKTt0aGlzLmhpZGUoYil9LGcucHJvdG90eXBlLmdldEl0ZW09ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLml0ZW1zLmxlbmd0aDtjPmI7YisrKXt2YXIgZD10aGlzLml0ZW1zW2JdO2lmKGQuZWxlbWVudD09PWEpcmV0dXJuIGR9fSxnLnByb3RvdHlwZS5nZXRJdGVtcz1mdW5jdGlvbihhKXthPWUubWFrZUFycmF5KGEpO2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZj1hW2NdLGc9dGhpcy5nZXRJdGVtKGYpO2cmJmIucHVzaChnKX1yZXR1cm4gYn0sZy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0SXRlbXMoYSk7aWYodGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcyhcInJlbW92ZVwiLGIpLGImJmIubGVuZ3RoKWZvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl7dmFyIGY9YltjXTtmLnJlbW92ZSgpLGUucmVtb3ZlRnJvbSh0aGlzLml0ZW1zLGYpfX0sZy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudC5zdHlsZTthLmhlaWdodD1cIlwiLGEucG9zaXRpb249XCJcIixhLndpZHRoPVwiXCI7Zm9yKHZhciBiPTAsYz10aGlzLml0ZW1zLmxlbmd0aDtjPmI7YisrKXt2YXIgZD10aGlzLml0ZW1zW2JdO2QuZGVzdHJveSgpfXRoaXMudW5iaW5kUmVzaXplKCk7dmFyIGU9dGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRDtkZWxldGUgbFtlXSxkZWxldGUgdGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRCxpJiZpLnJlbW92ZURhdGEodGhpcy5lbGVtZW50LHRoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlKX0sZy5kYXRhPWZ1bmN0aW9uKGEpe2E9ZS5nZXRRdWVyeUVsZW1lbnQoYSk7dmFyIGI9YSYmYS5vdXRsYXllckdVSUQ7cmV0dXJuIGImJmxbYl19LGcuY3JlYXRlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2cuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBPYmplY3QuY3JlYXRlP2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZy5wcm90b3R5cGUpOmUuZXh0ZW5kKGMucHJvdG90eXBlLGcucHJvdG90eXBlKSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLGMuZGVmYXVsdHM9ZS5leHRlbmQoe30sZy5kZWZhdWx0cyksZS5leHRlbmQoYy5kZWZhdWx0cyxiKSxjLnByb3RvdHlwZS5zZXR0aW5ncz17fSxjLm5hbWVzcGFjZT1hLGMuZGF0YT1nLmRhdGEsYy5JdGVtPWZ1bmN0aW9uKCl7Zi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGMuSXRlbS5wcm90b3R5cGU9bmV3IGYsZS5odG1sSW5pdChjLGEpLGkmJmkuYnJpZGdldCYmaS5icmlkZ2V0KGEsYyksY30sZy5JdGVtPWYsZ30pLGZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJvdXRsYXllci9vdXRsYXllclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIixcImZpenp5LXVpLXV0aWxzL3V0aWxzXCJdLGIpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIocmVxdWlyZShcIm91dGxheWVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikpOmEuTWFzb25yeT1iKGEuT3V0bGF5ZXIsYS5nZXRTaXplLGEuZml6enlVSVV0aWxzKX0od2luZG93LGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmNyZWF0ZShcIm1hc29ucnlcIik7cmV0dXJuIGQucHJvdG90eXBlLl9yZXNldExheW91dD1mdW5jdGlvbigpe3RoaXMuZ2V0U2l6ZSgpLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiY29sdW1uV2lkdGhcIixcIm91dGVyV2lkdGhcIiksdGhpcy5fZ2V0TWVhc3VyZW1lbnQoXCJndXR0ZXJcIixcIm91dGVyV2lkdGhcIiksdGhpcy5tZWFzdXJlQ29sdW1ucygpO3ZhciBhPXRoaXMuY29scztmb3IodGhpcy5jb2xZcz1bXTthLS07KXRoaXMuY29sWXMucHVzaCgwKTt0aGlzLm1heFk9MH0sZC5wcm90b3R5cGUubWVhc3VyZUNvbHVtbnM9ZnVuY3Rpb24oKXtpZih0aGlzLmdldENvbnRhaW5lcldpZHRoKCksIXRoaXMuY29sdW1uV2lkdGgpe3ZhciBhPXRoaXMuaXRlbXNbMF0sYz1hJiZhLmVsZW1lbnQ7dGhpcy5jb2x1bW5XaWR0aD1jJiZiKGMpLm91dGVyV2lkdGh8fHRoaXMuY29udGFpbmVyV2lkdGh9dmFyIGQ9dGhpcy5jb2x1bW5XaWR0aCs9dGhpcy5ndXR0ZXIsZT10aGlzLmNvbnRhaW5lcldpZHRoK3RoaXMuZ3V0dGVyLGY9ZS9kLGc9ZC1lJWQsaD1nJiYxPmc/XCJyb3VuZFwiOlwiZmxvb3JcIjtmPU1hdGhbaF0oZiksdGhpcy5jb2xzPU1hdGgubWF4KGYsMSl9LGQucHJvdG90eXBlLmdldENvbnRhaW5lcldpZHRoPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLmlzRml0V2lkdGg/dGhpcy5lbGVtZW50LnBhcmVudE5vZGU6dGhpcy5lbGVtZW50LGM9YihhKTt0aGlzLmNvbnRhaW5lcldpZHRoPWMmJmMuaW5uZXJXaWR0aH0sZC5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbihhKXthLmdldFNpemUoKTt2YXIgYj1hLnNpemUub3V0ZXJXaWR0aCV0aGlzLmNvbHVtbldpZHRoLGQ9YiYmMT5iP1wicm91bmRcIjpcImNlaWxcIixlPU1hdGhbZF0oYS5zaXplLm91dGVyV2lkdGgvdGhpcy5jb2x1bW5XaWR0aCk7ZT1NYXRoLm1pbihlLHRoaXMuY29scyk7Zm9yKHZhciBmPXRoaXMuX2dldENvbEdyb3VwKGUpLGc9TWF0aC5taW4uYXBwbHkoTWF0aCxmKSxoPWMuaW5kZXhPZihmLGcpLGk9e3g6dGhpcy5jb2x1bW5XaWR0aCpoLHk6Z30saj1nK2Euc2l6ZS5vdXRlckhlaWdodCxrPXRoaXMuY29scysxLWYubGVuZ3RoLGw9MDtrPmw7bCsrKXRoaXMuY29sWXNbaCtsXT1qO3JldHVybiBpfSxkLnByb3RvdHlwZS5fZ2V0Q29sR3JvdXA9ZnVuY3Rpb24oYSl7aWYoMj5hKXJldHVybiB0aGlzLmNvbFlzO2Zvcih2YXIgYj1bXSxjPXRoaXMuY29scysxLWEsZD0wO2M+ZDtkKyspe3ZhciBlPXRoaXMuY29sWXMuc2xpY2UoZCxkK2EpO2JbZF09TWF0aC5tYXguYXBwbHkoTWF0aCxlKX1yZXR1cm4gYn0sZC5wcm90b3R5cGUuX21hbmFnZVN0YW1wPWZ1bmN0aW9uKGEpe3ZhciBjPWIoYSksZD10aGlzLl9nZXRFbGVtZW50T2Zmc2V0KGEpLGU9dGhpcy5vcHRpb25zLmlzT3JpZ2luTGVmdD9kLmxlZnQ6ZC5yaWdodCxmPWUrYy5vdXRlcldpZHRoLGc9TWF0aC5mbG9vcihlL3RoaXMuY29sdW1uV2lkdGgpO2c9TWF0aC5tYXgoMCxnKTt2YXIgaD1NYXRoLmZsb29yKGYvdGhpcy5jb2x1bW5XaWR0aCk7aC09ZiV0aGlzLmNvbHVtbldpZHRoPzA6MSxoPU1hdGgubWluKHRoaXMuY29scy0xLGgpO2Zvcih2YXIgaT0odGhpcy5vcHRpb25zLmlzT3JpZ2luVG9wP2QudG9wOmQuYm90dG9tKStjLm91dGVySGVpZ2h0LGo9ZztoPj1qO2orKyl0aGlzLmNvbFlzW2pdPU1hdGgubWF4KGksdGhpcy5jb2xZc1tqXSl9LGQucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7dGhpcy5tYXhZPU1hdGgubWF4LmFwcGx5KE1hdGgsdGhpcy5jb2xZcyk7dmFyIGE9e2hlaWdodDp0aGlzLm1heFl9O3JldHVybiB0aGlzLm9wdGlvbnMuaXNGaXRXaWR0aCYmKGEud2lkdGg9dGhpcy5fZ2V0Q29udGFpbmVyRml0V2lkdGgoKSksYX0sZC5wcm90b3R5cGUuX2dldENvbnRhaW5lckZpdFdpZHRoPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLmNvbHM7LS1iJiYwPT09dGhpcy5jb2xZc1tiXTspYSsrO3JldHVybih0aGlzLmNvbHMtYSkqdGhpcy5jb2x1bW5XaWR0aC10aGlzLmd1dHRlcn0sZC5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRhaW5lcldpZHRoO3JldHVybiB0aGlzLmdldENvbnRhaW5lcldpZHRoKCksYSE9PXRoaXMuY29udGFpbmVyV2lkdGh9LGR9KTsiLCIvKiFcbiAqIGltYWdlc0xvYWRlZCBQQUNLQUdFRCB2My4xLjhcbiAqIEphdmFTY3JpcHQgaXMgYWxsIGxpa2UgXCJZb3UgaW1hZ2VzIGFyZSBkb25lIHlldCBvciB3aGF0P1wiXG4gKiBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9ZnVuY3Rpb24gdChlLHQpe2Zvcih2YXIgbj1lLmxlbmd0aDtuLS07KWlmKGVbbl0ubGlzdGVuZXI9PT10KXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbZV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgaT1lLnByb3RvdHlwZSxyPXRoaXMsbz1yLkV2ZW50RW1pdHRlcjtpLmdldExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5fZ2V0RXZlbnRzKCk7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpe3Q9e307Zm9yKG4gaW4gaSlpLmhhc093blByb3BlcnR5KG4pJiZlLnRlc3QobikmJih0W25dPWlbbl0pfWVsc2UgdD1pW2VdfHwoaVtlXT1bXSk7cmV0dXJuIHR9LGkuZmxhdHRlbkxpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0Kz0xKW4ucHVzaChlW3RdLmxpc3RlbmVyKTtyZXR1cm4gbn0saS5nZXRMaXN0ZW5lcnNBc09iamVjdD1mdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuZ2V0TGlzdGVuZXJzKGUpO3JldHVybiBuIGluc3RhbmNlb2YgQXJyYXkmJih0PXt9LHRbZV09biksdHx8bn0saS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLG4pe3ZhciBpLHI9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChlKSxvPVwib2JqZWN0XCI9PXR5cGVvZiBuO2ZvcihpIGluIHIpci5oYXNPd25Qcm9wZXJ0eShpKSYmLTE9PT10KHJbaV0sbikmJnJbaV0ucHVzaChvP246e2xpc3RlbmVyOm4sb25jZTohMX0pO3JldHVybiB0aGlzfSxpLm9uPW4oXCJhZGRMaXN0ZW5lclwiKSxpLmFkZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmFkZExpc3RlbmVyKGUse2xpc3RlbmVyOnQsb25jZTohMH0pfSxpLm9uY2U9bihcImFkZE9uY2VMaXN0ZW5lclwiKSxpLmRlZmluZUV2ZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldExpc3RlbmVycyhlKSx0aGlzfSxpLmRlZmluZUV2ZW50cz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrPTEpdGhpcy5kZWZpbmVFdmVudChlW3RdKTtyZXR1cm4gdGhpc30saS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlLG4pe3ZhciBpLHIsbz10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpO2ZvcihyIGluIG8pby5oYXNPd25Qcm9wZXJ0eShyKSYmKGk9dChvW3JdLG4pLC0xIT09aSYmb1tyXS5zcGxpY2UoaSwxKSk7cmV0dXJuIHRoaXN9LGkub2ZmPW4oXCJyZW1vdmVMaXN0ZW5lclwiKSxpLmFkZExpc3RlbmVycz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITEsZSx0KX0saS5yZW1vdmVMaXN0ZW5lcnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLGUsdCl9LGkubWFuaXB1bGF0ZUxpc3RlbmVycz1mdW5jdGlvbihlLHQsbil7dmFyIGkscixvPWU/dGhpcy5yZW1vdmVMaXN0ZW5lcjp0aGlzLmFkZExpc3RlbmVyLHM9ZT90aGlzLnJlbW92ZUxpc3RlbmVyczp0aGlzLmFkZExpc3RlbmVycztpZihcIm9iamVjdFwiIT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIFJlZ0V4cClmb3IoaT1uLmxlbmd0aDtpLS07KW8uY2FsbCh0aGlzLHQsbltpXSk7ZWxzZSBmb3IoaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihyPXRbaV0pJiYoXCJmdW5jdGlvblwiPT10eXBlb2Ygcj9vLmNhbGwodGhpcyxpLHIpOnMuY2FsbCh0aGlzLGkscikpO3JldHVybiB0aGlzfSxpLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGUpe3ZhciB0LG49dHlwZW9mIGUsaT10aGlzLl9nZXRFdmVudHMoKTtpZihcInN0cmluZ1wiPT09bilkZWxldGUgaVtlXTtlbHNlIGlmKFwib2JqZWN0XCI9PT1uKWZvcih0IGluIGkpaS5oYXNPd25Qcm9wZXJ0eSh0KSYmZS50ZXN0KHQpJiZkZWxldGUgaVt0XTtlbHNlIGRlbGV0ZSB0aGlzLl9ldmVudHM7cmV0dXJuIHRoaXN9LGkucmVtb3ZlQWxsTGlzdGVuZXJzPW4oXCJyZW1vdmVFdmVudFwiKSxpLmVtaXRFdmVudD1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLHM9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChlKTtmb3IociBpbiBzKWlmKHMuaGFzT3duUHJvcGVydHkocikpZm9yKGk9c1tyXS5sZW5ndGg7aS0tOyluPXNbcl1baV0sbi5vbmNlPT09ITAmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxuLmxpc3RlbmVyKSxvPW4ubGlzdGVuZXIuYXBwbHkodGhpcyx0fHxbXSksbz09PXRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGUsbi5saXN0ZW5lcik7cmV0dXJuIHRoaXN9LGkudHJpZ2dlcj1uKFwiZW1pdEV2ZW50XCIpLGkuZW1pdD1mdW5jdGlvbihlKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHRoaXMuZW1pdEV2ZW50KGUsdCl9LGkuc2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vbmNlUmV0dXJuVmFsdWU9ZSx0aGlzfSxpLl9nZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShcIl9vbmNlUmV0dXJuVmFsdWVcIik/dGhpcy5fb25jZVJldHVyblZhbHVlOiEwfSxpLl9nZXRFdmVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KX0sZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHIuRXZlbnRFbWl0dGVyPW8sZX0sXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixbXSxmdW5jdGlvbigpe3JldHVybiBlfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZTp0aGlzLkV2ZW50RW1pdHRlcj1lfSkuY2FsbCh0aGlzKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuZXZlbnQ7cmV0dXJuIG4udGFyZ2V0PW4udGFyZ2V0fHxuLnNyY0VsZW1lbnR8fHQsbn12YXIgbj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsaT1mdW5jdGlvbigpe307bi5hZGRFdmVudExpc3RlbmVyP2k9ZnVuY3Rpb24oZSx0LG4pe2UuYWRkRXZlbnRMaXN0ZW5lcih0LG4sITEpfTpuLmF0dGFjaEV2ZW50JiYoaT1mdW5jdGlvbihlLG4saSl7ZVtuK2ldPWkuaGFuZGxlRXZlbnQ/ZnVuY3Rpb24oKXt2YXIgbj10KGUpO2kuaGFuZGxlRXZlbnQuY2FsbChpLG4pfTpmdW5jdGlvbigpe3ZhciBuPXQoZSk7aS5jYWxsKGUsbil9LGUuYXR0YWNoRXZlbnQoXCJvblwiK24sZVtuK2ldKX0pO3ZhciByPWZ1bmN0aW9uKCl7fTtuLnJlbW92ZUV2ZW50TGlzdGVuZXI/cj1mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbiwhMSl9Om4uZGV0YWNoRXZlbnQmJihyPWZ1bmN0aW9uKGUsdCxuKXtlLmRldGFjaEV2ZW50KFwib25cIit0LGVbdCtuXSk7dHJ5e2RlbGV0ZSBlW3Qrbl19Y2F0Y2goaSl7ZVt0K25dPXZvaWQgMH19KTt2YXIgbz17YmluZDppLHVuYmluZDpyfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZXZlbnRpZS9ldmVudGllXCIsbyk6ZS5ldmVudGllPW99KHRoaXMpLGZ1bmN0aW9uKGUsdCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJldmVudEVtaXR0ZXIvRXZlbnRFbWl0dGVyXCIsXCJldmVudGllL2V2ZW50aWVcIl0sZnVuY3Rpb24obixpKXtyZXR1cm4gdChlLG4saSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10KGUscmVxdWlyZShcIndvbGZ5ODctZXZlbnRlbWl0dGVyXCIpLHJlcXVpcmUoXCJldmVudGllXCIpKTplLmltYWdlc0xvYWRlZD10KGUsZS5FdmVudEVtaXR0ZXIsZS5ldmVudGllKX0od2luZG93LGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWZ1bmN0aW9uIHIoZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09ZC5jYWxsKGUpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9W107aWYocihlKSl0PWU7ZWxzZSBpZihcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpZm9yKHZhciBuPTAsaT1lLmxlbmd0aDtpPm47bisrKXQucHVzaChlW25dKTtlbHNlIHQucHVzaChlKTtyZXR1cm4gdH1mdW5jdGlvbiBzKGUsdCxuKXtpZighKHRoaXMgaW5zdGFuY2VvZiBzKSlyZXR1cm4gbmV3IHMoZSx0KTtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlKSksdGhpcy5lbGVtZW50cz1vKGUpLHRoaXMub3B0aW9ucz1pKHt9LHRoaXMub3B0aW9ucyksXCJmdW5jdGlvblwiPT10eXBlb2YgdD9uPXQ6aSh0aGlzLm9wdGlvbnMsdCksbiYmdGhpcy5vbihcImFsd2F5c1wiLG4pLHRoaXMuZ2V0SW1hZ2VzKCksYSYmKHRoaXMuanFEZWZlcnJlZD1uZXcgYS5EZWZlcnJlZCk7dmFyIHI9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5jaGVjaygpfSl9ZnVuY3Rpb24gZihlKXt0aGlzLmltZz1lfWZ1bmN0aW9uIGMoZSl7dGhpcy5zcmM9ZSx2W2VdPXRoaXN9dmFyIGE9ZS5qUXVlcnksdT1lLmNvbnNvbGUsaD11IT09dm9pZCAwLGQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztzLnByb3RvdHlwZT1uZXcgdCxzLnByb3RvdHlwZS5vcHRpb25zPXt9LHMucHJvdG90eXBlLmdldEltYWdlcz1mdW5jdGlvbigpe3RoaXMuaW1hZ2VzPVtdO2Zvcih2YXIgZT0wLHQ9dGhpcy5lbGVtZW50cy5sZW5ndGg7dD5lO2UrKyl7dmFyIG49dGhpcy5lbGVtZW50c1tlXTtcIklNR1wiPT09bi5ub2RlTmFtZSYmdGhpcy5hZGRJbWFnZShuKTt2YXIgaT1uLm5vZGVUeXBlO2lmKGkmJigxPT09aXx8OT09PWl8fDExPT09aSkpZm9yKHZhciByPW4ucXVlcnlTZWxlY3RvckFsbChcImltZ1wiKSxvPTAscz1yLmxlbmd0aDtzPm87bysrKXt2YXIgZj1yW29dO3RoaXMuYWRkSW1hZ2UoZil9fX0scy5wcm90b3R5cGUuYWRkSW1hZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGYoZSk7dGhpcy5pbWFnZXMucHVzaCh0KX0scy5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7cmV0dXJuIHQub3B0aW9ucy5kZWJ1ZyYmaCYmdS5sb2coXCJjb25maXJtXCIsZSxyKSx0LnByb2dyZXNzKGUpLG4rKyxuPT09aSYmdC5jb21wbGV0ZSgpLCEwfXZhciB0PXRoaXMsbj0wLGk9dGhpcy5pbWFnZXMubGVuZ3RoO2lmKHRoaXMuaGFzQW55QnJva2VuPSExLCFpKXJldHVybiB0aGlzLmNvbXBsZXRlKCksdm9pZCAwO2Zvcih2YXIgcj0wO2k+cjtyKyspe3ZhciBvPXRoaXMuaW1hZ2VzW3JdO28ub24oXCJjb25maXJtXCIsZSksby5jaGVjaygpfX0scy5wcm90b3R5cGUucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7dGhpcy5oYXNBbnlCcm9rZW49dGhpcy5oYXNBbnlCcm9rZW58fCFlLmlzTG9hZGVkO3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3QuZW1pdChcInByb2dyZXNzXCIsdCxlKSx0LmpxRGVmZXJyZWQmJnQuanFEZWZlcnJlZC5ub3RpZnkmJnQuanFEZWZlcnJlZC5ub3RpZnkodCxlKX0pfSxzLnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGFzQW55QnJva2VuP1wiZmFpbFwiOlwiZG9uZVwiO3RoaXMuaXNDb21wbGV0ZT0hMDt2YXIgdD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZih0LmVtaXQoZSx0KSx0LmVtaXQoXCJhbHdheXNcIix0KSx0LmpxRGVmZXJyZWQpe3ZhciBuPXQuaGFzQW55QnJva2VuP1wicmVqZWN0XCI6XCJyZXNvbHZlXCI7dC5qcURlZmVycmVkW25dKHQpfX0pfSxhJiYoYS5mbi5pbWFnZXNMb2FkZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgcyh0aGlzLGUsdCk7cmV0dXJuIG4uanFEZWZlcnJlZC5wcm9taXNlKGEodGhpcykpfSksZi5wcm90b3R5cGU9bmV3IHQsZi5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXt2YXIgZT12W3RoaXMuaW1nLnNyY118fG5ldyBjKHRoaXMuaW1nLnNyYyk7aWYoZS5pc0NvbmZpcm1lZClyZXR1cm4gdGhpcy5jb25maXJtKGUuaXNMb2FkZWQsXCJjYWNoZWQgd2FzIGNvbmZpcm1lZFwiKSx2b2lkIDA7aWYodGhpcy5pbWcuY29tcGxldGUmJnZvaWQgMCE9PXRoaXMuaW1nLm5hdHVyYWxXaWR0aClyZXR1cm4gdGhpcy5jb25maXJtKDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgsXCJuYXR1cmFsV2lkdGhcIiksdm9pZCAwO3ZhciB0PXRoaXM7ZS5vbihcImNvbmZpcm1cIixmdW5jdGlvbihlLG4pe3JldHVybiB0LmNvbmZpcm0oZS5pc0xvYWRlZCxuKSwhMH0pLGUuY2hlY2soKX0sZi5wcm90b3R5cGUuY29uZmlybT1mdW5jdGlvbihlLHQpe3RoaXMuaXNMb2FkZWQ9ZSx0aGlzLmVtaXQoXCJjb25maXJtXCIsdGhpcyx0KX07dmFyIHY9e307cmV0dXJuIGMucHJvdG90eXBlPW5ldyB0LGMucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNDaGVja2VkKXt2YXIgZT1uZXcgSW1hZ2U7bi5iaW5kKGUsXCJsb2FkXCIsdGhpcyksbi5iaW5kKGUsXCJlcnJvclwiLHRoaXMpLGUuc3JjPXRoaXMuc3JjLHRoaXMuaXNDaGVja2VkPSEwfX0sYy5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJvblwiK2UudHlwZTt0aGlzW3RdJiZ0aGlzW3RdKGUpfSxjLnByb3RvdHlwZS5vbmxvYWQ9ZnVuY3Rpb24oZSl7dGhpcy5jb25maXJtKCEwLFwib25sb2FkXCIpLHRoaXMudW5iaW5kUHJveHlFdmVudHMoZSl9LGMucHJvdG90eXBlLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5jb25maXJtKCExLFwib25lcnJvclwiKSx0aGlzLnVuYmluZFByb3h5RXZlbnRzKGUpfSxjLnByb3RvdHlwZS5jb25maXJtPWZ1bmN0aW9uKGUsdCl7dGhpcy5pc0NvbmZpcm1lZD0hMCx0aGlzLmlzTG9hZGVkPWUsdGhpcy5lbWl0KFwiY29uZmlybVwiLHRoaXMsdCl9LGMucHJvdG90eXBlLnVuYmluZFByb3h5RXZlbnRzPWZ1bmN0aW9uKGUpe24udW5iaW5kKGUudGFyZ2V0LFwibG9hZFwiLHRoaXMpLG4udW5iaW5kKGUudGFyZ2V0LFwiZXJyb3JcIix0aGlzKX0sc30pOyIsIi8qXG4gKiBOaXZvIExpZ2h0Ym94IHYxLjIuMFxuICogaHR0cDovL2RldjdzdHVkaW9zLmNvbS9uaXZvLWxpZ2h0Ym94XG4gKlxuICogQ29weXJpZ2h0IDIwMTMsIERldjdzdHVkaW9zXG4gKiBGcmVlIHRvIHVzZSBhbmQgYWJ1c2UgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAqL1xuXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCl7XG5cbiAgICB2YXIgcGx1Z2luTmFtZSA9ICduaXZvTGlnaHRib3gnLFxuICAgICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIGVmZmVjdDogJ2ZhZGUnLFxuICAgICAgICAgICAgdGhlbWU6ICdkZWZhdWx0JyxcbiAgICAgICAgICAgIGtleWJvYXJkTmF2OiB0cnVlLFxuICAgICAgICAgICAgY2xpY2tPdmVybGF5VG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgICAgIG9uSW5pdDogZnVuY3Rpb24oKXt9LFxuICAgICAgICAgICAgYmVmb3JlU2hvd0xpZ2h0Ym94OiBmdW5jdGlvbigpe30sXG4gICAgICAgICAgICBhZnRlclNob3dMaWdodGJveDogZnVuY3Rpb24obGlnaHRib3gpe30sXG4gICAgICAgICAgICBiZWZvcmVIaWRlTGlnaHRib3g6IGZ1bmN0aW9uKCl7fSxcbiAgICAgICAgICAgIGFmdGVySGlkZUxpZ2h0Ym94OiBmdW5jdGlvbigpe30sXG4gICAgICAgICAgICBvblByZXY6IGZ1bmN0aW9uKGVsZW1lbnQpe30sXG4gICAgICAgICAgICBvbk5leHQ6IGZ1bmN0aW9uKGVsZW1lbnQpe30sXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICdUaGUgcmVxdWVzdGVkIGNvbnRlbnQgY2Fubm90IGJlIGxvYWRlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nXG4gICAgICAgIH07XG5cbiAgICBmdW5jdGlvbiBOaXZvTGlnaHRib3goZWxlbWVudCwgb3B0aW9ucyl7XG4gICAgICAgIHRoaXMuZWwgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLiRlbCA9ICQodGhpcy5lbCk7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLl9kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAgICAgICB0aGlzLl9uYW1lID0gcGx1Z2luTmFtZTtcblxuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICBOaXZvTGlnaHRib3gucHJvdG90eXBlID0ge1xuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgJHRoaXMgPSB0aGlzO1xuXG5cdFx0XHQvLyBOZWVkIHRoaXMgc28gd2UgZG9uJ3QgdXNlIENTUyB0cmFuc2l0aW9ucyBpbiBtb2JpbGVcblx0XHRcdGlmKCEkKCdodG1sJykuaGFzQ2xhc3MoJ25pdm8tbGlnaHRib3gtbm90b3VjaCcpKSAkKCdodG1sJykuYWRkQ2xhc3MoJ25pdm8tbGlnaHRib3gtbm90b3VjaCcpO1xuXHRcdFx0aWYoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQpICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbml2by1saWdodGJveC1ub3RvdWNoJyk7XG5cblx0XHRcdC8vIFNldHVwIHRoZSBjbGlja1xuICAgICAgICAgICAgdGhpcy4kZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgJHRoaXMuc2hvd0xpZ2h0Ym94KGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGtleWJvYXJkTmF2XG4gICAgICAgICAgICBpZih0aGlzLm9wdGlvbnMua2V5Ym9hcmROYXYpe1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5vZmYoJ2tleXVwJykub24oJ2tleXVwJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gKGUua2V5Q29kZSA/IGUua2V5Q29kZSA6IGUud2hpY2gpO1xuICAgICAgICAgICAgICAgICAgICAvLyBFc2NhcGVcbiAgICAgICAgICAgICAgICAgICAgaWYoY29kZSA9PSAyNykgJHRoaXMuZGVzdHJ1Y3RMaWdodGJveCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0XG4gICAgICAgICAgICAgICAgICAgIGlmKGNvZGUgPT0gMzcpICQoJy5uaXZvLWxpZ2h0Ym94LXByZXYnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICAvLyBSaWdodFxuICAgICAgICAgICAgICAgICAgICBpZihjb2RlID09IDM5KSAkKCcubml2by1saWdodGJveC1uZXh0JykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMub3B0aW9ucy5vbkluaXQuY2FsbCh0aGlzKTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dMaWdodGJveDogZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRMaW5rID0gdGhpcy4kZWw7XG5cblx0XHRcdC8vIENoZWNrIGNvbnRlbnRcblx0XHRcdHZhciBjaGVjayA9IHRoaXMuY2hlY2tDb250ZW50KGN1cnJlbnRMaW5rKTtcblx0XHRcdGlmKCFjaGVjaykgcmV0dXJuO1xuXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYmVmb3JlU2hvd0xpZ2h0Ym94LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB2YXIgbGlnaHRib3ggPSB0aGlzLmNvbnN0cnVjdExpZ2h0Ym94KCk7XG4gICAgICAgICAgICBpZighbGlnaHRib3gpIHJldHVybjtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gbGlnaHRib3guZmluZCgnLm5pdm8tbGlnaHRib3gtY29udGVudCcpO1xuICAgICAgICAgICAgaWYoIWNvbnRlbnQpIHJldHVybjtcblxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCduaXZvLWxpZ2h0Ym94LWJvZHktZWZmZWN0LScrIHRoaXMub3B0aW9ucy5lZmZlY3QpO1xuXG5cdFx0XHR0aGlzLnByb2Nlc3NDb250ZW50KCBjb250ZW50LCBjdXJyZW50TGluayApO1xuXG4gICAgICAgICAgICAvLyBOYXZcbiAgICAgICAgICAgIGlmKHRoaXMuJGVsLmF0dHIoJ2RhdGEtbGlnaHRib3gtZ2FsbGVyeScpKXtcbiAgICAgICAgICAgICAgICB2YXIgZ2FsbGVyeUl0ZW1zID0gJCgnW2RhdGEtbGlnaHRib3gtZ2FsbGVyeT1cIicrIHRoaXMuJGVsLmF0dHIoJ2RhdGEtbGlnaHRib3gtZ2FsbGVyeScpICsnXCJdJyk7XG5cbiAgICAgICAgICAgICAgICAkKCcubml2by1saWdodGJveC1uYXYnKS5zaG93KCk7XG5cblx0XHRcdFx0Ly8gUHJldlxuICAgICAgICAgICAgICAgICQoJy5uaXZvLWxpZ2h0Ym94LXByZXYnKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2FsbGVyeUl0ZW1zLmluZGV4KGN1cnJlbnRMaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExpbmsgPSBnYWxsZXJ5SXRlbXMuZXEoaW5kZXggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoISQoY3VycmVudExpbmspLmxlbmd0aCkgY3VycmVudExpbmsgPSBnYWxsZXJ5SXRlbXMubGFzdCgpO1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5wcm9jZXNzQ29udGVudChjb250ZW50LCBjdXJyZW50TGluayk7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm9wdGlvbnMub25QcmV2LmNhbGwodGhpcywgWyBjdXJyZW50TGluayBdKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIE5leHRcbiAgICAgICAgICAgICAgICAkKCcubml2by1saWdodGJveC1uZXh0Jykub2ZmKCdjbGljaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGdhbGxlcnlJdGVtcy5pbmRleChjdXJyZW50TGluayk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaW5rID0gZ2FsbGVyeUl0ZW1zLmVxKGluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmKCEkKGN1cnJlbnRMaW5rKS5sZW5ndGgpIGN1cnJlbnRMaW5rID0gZ2FsbGVyeUl0ZW1zLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnByb2Nlc3NDb250ZW50KGNvbnRlbnQsIGN1cnJlbnRMaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMub3B0aW9ucy5vbk5leHQuY2FsbCh0aGlzLCBbIGN1cnJlbnRMaW5rIF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgbGlnaHRib3guYWRkQ2xhc3MoJ25pdm8tbGlnaHRib3gtb3BlbicpO1xuICAgICAgICAgICAgICAgICR0aGlzLm9wdGlvbnMuYWZ0ZXJTaG93TGlnaHRib3guY2FsbCh0aGlzLCBbIGxpZ2h0Ym94IF0pO1xuICAgICAgICAgICAgfSwgMSk7IC8vIEZvciBDU1MgdHJhbnNpdGlvbnNcbiAgICAgICAgfSxcblxuXHRcdGNoZWNrQ29udGVudDogZnVuY3Rpb24oIGxpbmsgKSB7XG5cdFx0XHR2YXIgJHRoaXMgPSB0aGlzLFxuICAgICAgICAgICAgICAgIGhyZWYgPSBsaW5rLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgICAgICB2aWRlbyA9IGhyZWYubWF0Y2goLyh5b3V0dWJlfHlvdXR1fHZpbWVvKVxcLihjb218YmUpXFwvKHdhdGNoXFw/dj0oW1xcdy1dKyl8KFtcXHctXSspKS8pO1xuXG4gICAgICAgICAgICBpZihocmVmLm1hdGNoKC9cXC4oanBlZ3xqcGd8Z2lmfHBuZykkL2kpICE9PSBudWxsKXtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHQvLyBWaWRlbyAoWW91dHViZS9WaW1lbylcbiAgICAgICAgICAgIGVsc2UgaWYodmlkZW8pe1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdC8vIEFKQVhcblx0XHRcdGVsc2UgaWYobGluay5hdHRyKCdkYXRhLWxpZ2h0Ym94LXR5cGUnKSA9PSAnYWpheCcpe1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdC8vIElubGluZSBIVE1MXG5cdFx0XHRlbHNlIGlmKGhyZWYuc3Vic3RyaW5nKDAsIDEpID09ICcjJyAmJiBsaW5rLmF0dHIoJ2RhdGEtbGlnaHRib3gtdHlwZScpID09ICdpbmxpbmUnKXtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHQvLyBpRnJhbWUgKGRlZmF1bHQpXG5cdFx0XHRlbHNlIGlmKGxpbmsuYXR0cignZGF0YS1saWdodGJveC10eXBlJykgPT0gJ2lmcmFtZScpe1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cbiAgICAgICAgcHJvY2Vzc0NvbnRlbnQ6IGZ1bmN0aW9uKGNvbnRlbnQsIGxpbmspe1xuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcyxcbiAgICAgICAgICAgICAgICBocmVmID0gbGluay5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAgICAgdmlkZW8gPSBocmVmLm1hdGNoKC8oeW91dHViZXx5b3V0dXx2aW1lbylcXC4oY29tfGJlKVxcLyh3YXRjaFxcP3Y9KFtcXHctXSspfChbXFx3LV0rKSkvKTtcblxuICAgICAgICAgICAgY29udGVudC5odG1sKCcnKS5hZGRDbGFzcygnbml2by1saWdodGJveC1sb2FkaW5nJyk7XG5cbiAgICAgICAgICAgIC8vIElzIEhpRFBJP1xuICAgICAgICAgICAgaWYodGhpcy5pc0hpZHBpKCkgJiYgbGluay5hdHRyKCdkYXRhLWxpZ2h0Ym94LWhpZHBpJykpe1xuICAgICAgICAgICAgICAgIGhyZWYgPSBsaW5rLmF0dHIoJ2RhdGEtbGlnaHRib3gtaGlkcGknKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW1hZ2VcbiAgICAgICAgICAgIGlmKGhyZWYubWF0Y2goL1xcLihqcGVnfGpwZ3xnaWZ8cG5nKSQvaSkgIT09IG51bGwpe1xuICAgICAgICAgICAgICAgIHZhciBpbWcgPSAkKCc8aW1nPicsIHsgc3JjOiBocmVmIH0pO1xuICAgICAgICAgICAgICAgIGltZy5vbmUoJ2xvYWQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgd3JhcCA9ICQoJzxkaXYgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LWltYWdlXCIgLz4nKTtcbiAgICAgICAgICAgICAgICAgICAgd3JhcC5hcHBlbmQoaW1nKTtcblx0XHRcdFx0XHRjb250ZW50Lmh0bWwod3JhcCkucmVtb3ZlQ2xhc3MoJ25pdm8tbGlnaHRib3gtbG9hZGluZycpO1xuXG5cdFx0XHRcdFx0Ly8gVmVydGljYWxseSBjZW50ZXIgaW1hZ2VzXG5cdFx0XHRcdFx0d3JhcC5jc3Moe1xuXHRcdFx0XHRcdFx0J2xpbmUtaGVpZ2h0JzogJCgnLm5pdm8tbGlnaHRib3gtY29udGVudCcpLmhlaWdodCgpICsncHgnLFxuXHRcdFx0XHRcdFx0J2hlaWdodCc6ICQoJy5uaXZvLWxpZ2h0Ym94LWNvbnRlbnQnKS5oZWlnaHQoKSArJ3B4JyAvLyBGb3IgRmlyZWZveFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR3cmFwLmNzcyh7XG5cdFx0XHRcdFx0XHRcdCdsaW5lLWhlaWdodCc6ICQoJy5uaXZvLWxpZ2h0Ym94LWNvbnRlbnQnKS5oZWlnaHQoKSArJ3B4Jyxcblx0XHRcdFx0XHRcdFx0J2hlaWdodCc6ICQoJy5uaXZvLWxpZ2h0Ym94LWNvbnRlbnQnKS5oZWlnaHQoKSArJ3B4JyAvLyBGb3IgRmlyZWZveFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYodGhpcy5jb21wbGV0ZSkgJCh0aGlzKS5sb2FkKCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGltZy5lcnJvcihmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgd3JhcCA9ICQoJzxkaXYgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LWVycm9yXCI+PHA+JysgJHRoaXMub3B0aW9ucy5lcnJvck1lc3NhZ2UgKyc8L3A+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuaHRtbCh3cmFwKS5yZW1vdmVDbGFzcygnbml2by1saWdodGJveC1sb2FkaW5nJyk7XG5cdFx0XHRcdH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVmlkZW8gKFlvdXR1YmUvVmltZW8pXG4gICAgICAgICAgICBlbHNlIGlmKHZpZGVvKXtcbiAgICAgICAgICAgICAgICB2YXIgc3JjID0gJycsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzVGVybSA9ICduaXZvLWxpZ2h0Ym94LXZpZGVvJztcblxuICAgICAgICAgICAgICAgIGlmKHZpZGVvWzFdID09ICd5b3V0dWJlJyl7XG4gICAgICAgICAgICAgICAgICAgIHNyYyA9ICdodHRwOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLycrIHZpZGVvWzRdO1xuICAgICAgICAgICAgICAgICAgICBjbGFzc1Rlcm0gPSAnbml2by1saWdodGJveC15b3V0dWJlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodmlkZW9bMV0gPT0gJ3lvdXR1Jyl7XG4gICAgICAgICAgICAgICAgICAgIHNyYyA9ICdodHRwOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLycrIHZpZGVvWzNdO1xuICAgICAgICAgICAgICAgICAgICBjbGFzc1Rlcm0gPSAnbml2by1saWdodGJveC15b3V0dWJlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodmlkZW9bMV0gPT0gJ3ZpbWVvJyl7XG4gICAgICAgICAgICAgICAgICAgIHNyYyA9ICdodHRwOi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nKyB2aWRlb1szXTtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NUZXJtID0gJ25pdm8tbGlnaHRib3gtdmltZW8nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHNyYyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWVWaWRlbyA9ICQoJzxpZnJhbWU+Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBzcmMsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiBjbGFzc1Rlcm0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZWJvcmRlcjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZzcGFjZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhzcGFjZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGluZzogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50Lmh0bWwoaWZyYW1lVmlkZW8pO1xuICAgICAgICAgICAgICAgICAgICBpZnJhbWVWaWRlby5sb2FkKGZ1bmN0aW9uKCl7IGNvbnRlbnQucmVtb3ZlQ2xhc3MoJ25pdm8tbGlnaHRib3gtbG9hZGluZycpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBSkFYXG4gICAgICAgICAgICBlbHNlIGlmKGxpbmsuYXR0cignZGF0YS1saWdodGJveC10eXBlJykgPT0gJ2FqYXgnKXtcblx0XHRcdFx0JC5hamF4KHtcblx0XHRcdFx0XHR1cmw6IGhyZWYsXG5cdFx0XHRcdFx0Y2FjaGU6IGZhbHNlLFxuXHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRcdHZhciB3cmFwID0gJCgnPGRpdiBjbGFzcz1cIm5pdm8tbGlnaHRib3gtYWpheFwiIC8+Jyk7XG5cdFx0XHRcdFx0XHR3cmFwLmFwcGVuZChkYXRhKTtcblx0XHRcdFx0XHRcdGNvbnRlbnQuaHRtbCh3cmFwKS5yZW1vdmVDbGFzcygnbml2by1saWdodGJveC1sb2FkaW5nJyk7XG5cblx0XHRcdFx0XHRcdC8vIFZlcnRpY2FsbHkgY2VudGVyIGh0bWxcblx0XHRcdFx0XHRcdGlmKHdyYXAub3V0ZXJIZWlnaHQoKSA8IGNvbnRlbnQuaGVpZ2h0KCkpe1xuXHRcdFx0XHRcdFx0XHR3cmFwLmNzcyh7XG5cdFx0XHRcdFx0XHRcdFx0J3Bvc2l0aW9uJzogJ3JlbGF0aXZlJyxcblx0XHRcdFx0XHRcdFx0XHQndG9wJzogJzUwJScsXG5cdFx0XHRcdFx0XHRcdFx0J21hcmdpbi10b3AnOiAtKHdyYXAub3V0ZXJIZWlnaHQoKS8yKSArJ3B4J1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGlmKHdyYXAub3V0ZXJIZWlnaHQoKSA8IGNvbnRlbnQuaGVpZ2h0KCkpe1xuXHRcdFx0XHRcdFx0XHRcdHdyYXAuY3NzKHtcblx0XHRcdFx0XHRcdFx0XHRcdCdwb3NpdGlvbic6ICdyZWxhdGl2ZScsXG5cdFx0XHRcdFx0XHRcdFx0XHQndG9wJzogJzUwJScsXG5cdFx0XHRcdFx0XHRcdFx0XHQnbWFyZ2luLXRvcCc6IC0od3JhcC5vdXRlckhlaWdodCgpLzIpICsncHgnXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHR2YXIgd3JhcCA9ICQoJzxkaXYgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LWVycm9yXCI+PHA+JysgJHRoaXMub3B0aW9ucy5lcnJvck1lc3NhZ2UgKyc8L3A+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Lmh0bWwod3JhcCkucmVtb3ZlQ2xhc3MoJ25pdm8tbGlnaHRib3gtbG9hZGluZycpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJbmxpbmUgSFRNTFxuICAgICAgICAgICAgZWxzZSBpZihocmVmLnN1YnN0cmluZygwLCAxKSA9PSAnIycgJiYgbGluay5hdHRyKCdkYXRhLWxpZ2h0Ym94LXR5cGUnKSA9PSAnaW5saW5lJyl7XG4gICAgICAgICAgICAgICAgaWYoJChocmVmKS5sZW5ndGgpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcCA9ICQoJzxkaXYgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LWlubGluZVwiIC8+Jyk7XG5cdFx0XHRcdFx0d3JhcC5hcHBlbmQoJChocmVmKS5jbG9uZSgpLnNob3coKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuaHRtbCh3cmFwKS5yZW1vdmVDbGFzcygnbml2by1saWdodGJveC1sb2FkaW5nJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmVydGljYWxseSBjZW50ZXIgaHRtbFxuXHRcdFx0XHRcdGlmKHdyYXAub3V0ZXJIZWlnaHQoKSA8IGNvbnRlbnQuaGVpZ2h0KCkpe1xuXHRcdFx0XHRcdFx0d3JhcC5jc3Moe1xuXHRcdFx0XHRcdFx0XHQncG9zaXRpb24nOiAncmVsYXRpdmUnLFxuXHRcdFx0XHRcdFx0XHQndG9wJzogJzUwJScsXG5cdFx0XHRcdFx0XHRcdCdtYXJnaW4tdG9wJzogLSh3cmFwLm91dGVySGVpZ2h0KCkvMikgKydweCdcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYod3JhcC5vdXRlckhlaWdodCgpIDwgY29udGVudC5oZWlnaHQoKSl7XG5cdFx0XHRcdFx0XHRcdHdyYXAuY3NzKHtcblx0XHRcdFx0XHRcdFx0XHQncG9zaXRpb24nOiAncmVsYXRpdmUnLFxuXHRcdFx0XHRcdFx0XHRcdCd0b3AnOiAnNTAlJyxcblx0XHRcdFx0XHRcdFx0XHQnbWFyZ2luLXRvcCc6IC0od3JhcC5vdXRlckhlaWdodCgpLzIpICsncHgnXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciB3cmFwRXJyb3IgPSAkKCc8ZGl2IGNsYXNzPVwibml2by1saWdodGJveC1lcnJvclwiPjxwPicrICR0aGlzLm9wdGlvbnMuZXJyb3JNZXNzYWdlICsnPC9wPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50Lmh0bWwod3JhcEVycm9yKS5yZW1vdmVDbGFzcygnbml2by1saWdodGJveC1sb2FkaW5nJyk7XG5cdFx0XHRcdH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlGcmFtZSAoZGVmYXVsdClcbiAgICAgICAgICAgIGVsc2UgaWYobGluay5hdHRyKCdkYXRhLWxpZ2h0Ym94LXR5cGUnKSA9PSAnaWZyYW1lJyl7XG4gICAgICAgICAgICAgICAgdmFyIGlmcmFtZSA9ICQoJzxpZnJhbWU+Jywge1xuICAgICAgICAgICAgICAgICAgICBzcmM6IGhyZWYsXG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICduaXZvLWxpZ2h0Ym94LWl0ZW0nLFxuICAgICAgICAgICAgICAgICAgICBmcmFtZWJvcmRlcjogMCxcbiAgICAgICAgICAgICAgICAgICAgdnNwYWNlOiAwLFxuICAgICAgICAgICAgICAgICAgICBoc3BhY2U6IDAsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbGluZzogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGVudC5odG1sKGlmcmFtZSk7XG4gICAgICAgICAgICAgICAgaWZyYW1lLmxvYWQoZnVuY3Rpb24oKXsgY29udGVudC5yZW1vdmVDbGFzcygnbml2by1saWdodGJveC1sb2FkaW5nJyk7IH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIHRpdGxlXG4gICAgICAgICAgICBpZihsaW5rLmF0dHIoJ3RpdGxlJykpe1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZVdyYXAgPSAkKCc8c3Bhbj4nLCB7ICdjbGFzcyc6ICduaXZvLWxpZ2h0Ym94LXRpdGxlJyB9KTtcbiAgICAgICAgICAgICAgICB0aXRsZVdyYXAudGV4dChsaW5rLmF0dHIoJ3RpdGxlJykpO1xuICAgICAgICAgICAgICAgICQoJy5uaXZvLWxpZ2h0Ym94LXRpdGxlLXdyYXAnKS5odG1sKHRpdGxlV3JhcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5uaXZvLWxpZ2h0Ym94LXRpdGxlLXdyYXAnKS5odG1sKCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjb25zdHJ1Y3RMaWdodGJveDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKCQoJy5uaXZvLWxpZ2h0Ym94LW92ZXJsYXknKS5sZW5ndGgpIHJldHVybiAkKCcubml2by1saWdodGJveC1vdmVybGF5Jyk7XG5cbiAgICAgICAgICAgIHZhciBvdmVybGF5ID0gJCgnPGRpdj4nLCB7ICdjbGFzcyc6ICduaXZvLWxpZ2h0Ym94LW92ZXJsYXkgbml2by1saWdodGJveC10aGVtZS0nKyB0aGlzLm9wdGlvbnMudGhlbWUgKycgbml2by1saWdodGJveC1lZmZlY3QtJysgdGhpcy5vcHRpb25zLmVmZmVjdCB9KTtcbiAgICAgICAgICAgIHZhciB3cmFwID0gJCgnPGRpdj4nLCB7ICdjbGFzcyc6ICduaXZvLWxpZ2h0Ym94LXdyYXAnIH0pO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAkKCc8ZGl2PicsIHsgJ2NsYXNzJzogJ25pdm8tbGlnaHRib3gtY29udGVudCcgfSk7XG4gICAgICAgICAgICB2YXIgbmF2ID0gJCgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cIm5pdm8tbGlnaHRib3gtbmF2IG5pdm8tbGlnaHRib3gtcHJldlwiPlByZXZpb3VzPC9hPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJuaXZvLWxpZ2h0Ym94LW5hdiBuaXZvLWxpZ2h0Ym94LW5leHRcIj5OZXh0PC9hPicpO1xuICAgICAgICAgICAgdmFyIGNsb3NlID0gJCgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cIm5pdm8tbGlnaHRib3gtY2xvc2VcIiB0aXRsZT1cIkNsb3NlXCI+Q2xvc2U8L2E+Jyk7XG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAkKCc8ZGl2PicsIHsgJ2NsYXNzJzogJ25pdm8tbGlnaHRib3gtdGl0bGUtd3JhcCcgfSk7XG5cbiAgICAgICAgICAgIHZhciBpc01TSUUgPSAvKkBjY19vbiFAKi8wO1xuICAgICAgICAgICAgaWYoaXNNU0lFKSBvdmVybGF5LmFkZENsYXNzKCduaXZvLWxpZ2h0Ym94LWllJyk7XG5cbiAgICAgICAgICAgIHdyYXAuYXBwZW5kKGNvbnRlbnQpO1xuICAgICAgICAgICAgd3JhcC5hcHBlbmQodGl0bGUpO1xuICAgICAgICAgICAgb3ZlcmxheS5hcHBlbmQod3JhcCk7XG4gICAgICAgICAgICBvdmVybGF5LmFwcGVuZChuYXYpO1xuICAgICAgICAgICAgb3ZlcmxheS5hcHBlbmQoY2xvc2UpO1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChvdmVybGF5KTtcblxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmKCR0aGlzLm9wdGlvbnMuY2xpY2tPdmVybGF5VG9DbG9zZSl7XG4gICAgICAgICAgICAgICAgb3ZlcmxheS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoZS50YXJnZXQgPT09IHRoaXMgfHwgJChlLnRhcmdldCkuaGFzQ2xhc3MoJ25pdm8tbGlnaHRib3gtY29udGVudCcpIHx8ICQoZS50YXJnZXQpLmhhc0NsYXNzKCduaXZvLWxpZ2h0Ym94LWltYWdlJykpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZGVzdHJ1Y3RMaWdodGJveCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNsb3NlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5kZXN0cnVjdExpZ2h0Ym94KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG92ZXJsYXk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVzdHJ1Y3RMaWdodGJveDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYmVmb3JlSGlkZUxpZ2h0Ym94LmNhbGwodGhpcyk7XG5cbiAgICAgICAgICAgICQoJy5uaXZvLWxpZ2h0Ym94LW92ZXJsYXknKS5yZW1vdmVDbGFzcygnbml2by1saWdodGJveC1vcGVuJyk7XG4gICAgICAgICAgICAkKCcubml2by1saWdodGJveC1uYXYnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ25pdm8tbGlnaHRib3gtYm9keS1lZmZlY3QtJysgJHRoaXMub3B0aW9ucy5lZmZlY3QpO1xuXG4gICAgICAgICAgICAvLyBGb3IgSUVcbiAgICAgICAgICAgIHZhciBpc01TSUUgPSAvKkBjY19vbiFAKi8wO1xuICAgICAgICAgICAgaWYoaXNNU0lFKXtcbiAgICAgICAgICAgICAgICAkKCcubml2by1saWdodGJveC1vdmVybGF5IGlmcmFtZScpLmF0dHIoXCJzcmNcIiwgXCIgXCIpO1xuICAgICAgICAgICAgICAgICQoJy5uaXZvLWxpZ2h0Ym94LW92ZXJsYXkgaWZyYW1lJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSBjbGljayBoYW5kbGVyc1xuICAgICAgICAgICAgJCgnLm5pdm8tbGlnaHRib3gtcHJldicpLm9mZignY2xpY2snKTtcbiAgICAgICAgICAgICQoJy5uaXZvLWxpZ2h0Ym94LW5leHQnKS5vZmYoJ2NsaWNrJyk7XG5cbiAgICAgICAgICAgIC8vIEVtcHR5IGNvbnRlbnQgKGZvciB2aWRlb3MpXG4gICAgICAgICAgICAkKCcubml2by1saWdodGJveC1jb250ZW50JykuZW1wdHkoKTtcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFmdGVySGlkZUxpZ2h0Ym94LmNhbGwodGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNIaWRwaTogZnVuY3Rpb24oKXtcblx0XHRcdHZhciBtZWRpYVF1ZXJ5ID0gXCIoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAxLjUpLFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobWluLS1tb3otZGV2aWNlLXBpeGVsLXJhdGlvOiAxLjUpLFxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoLW8tbWluLWRldmljZS1waXhlbC1yYXRpbzogMy8yKSxcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1pbi1yZXNvbHV0aW9uOiAxLjVkcHB4KVwiO1xuXHRcdFx0aWYod2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxKSByZXR1cm4gdHJ1ZTtcblx0XHRcdGlmKHdpbmRvdy5tYXRjaE1lZGlhICYmIHdpbmRvdy5tYXRjaE1lZGlhKG1lZGlhUXVlcnkpLm1hdGNoZXMpIHJldHVybiB0cnVlO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuICAgIH07XG5cbiAgICAkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKCEkLmRhdGEodGhpcywgcGx1Z2luTmFtZSkpe1xuICAgICAgICAgICAgICAgICQuZGF0YSh0aGlzLCBwbHVnaW5OYW1lLCBuZXcgTml2b0xpZ2h0Ym94KHRoaXMsIG9wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcbiIsIi8qXG4gKiBSb3lhbFNsaWRlclxuICpcbiAqIEB2ZXJzaW9uIDkuNC42OlxuICpcbiAqIENvcHlyaWdodCAyMDExLTIwMTIsIERtaXRyeSBTZW1lbm92XG4gKlxuICovXG4oZnVuY3Rpb24oJCkge1xuXHRpZighJC5yc01vZHVsZXMpIHtcblx0XHQkLnJzTW9kdWxlcyA9IHt1aWQ6MH07XG5cdH1cblxuXG5cdGZ1bmN0aW9uIFJveWFsU2xpZGVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0XHR2YXIgaSxcblx0XHRcdHNlbGYgPSB0aGlzLFxuXHRcdFx0dWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG5cblx0XHRzZWxmLnVpZCA9ICQucnNNb2R1bGVzLnVpZCsrO1xuXHRcdHNlbGYubnMgPSAnLnJzJyArIHNlbGYudWlkOyAvLyB1bmlxdWUgbmFtZXNwYWNlIGZvciBldmVudHNcblxuXHRcdC8vIGZlYXR1cmUgZGV0ZWN0aW9uLCBzb21lIGlkZWFzIHRha2VuIGZyb20gTW9kZXJuaXpyXG5cdFx0dmFyIHRlbXBTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlLFxuXHRcdFx0dmVuZG9ycyA9IFsnd2Via2l0JywnTW96JywnbXMnLCdPJ10sXG5cdFx0XHR2ZW5kb3IgPSAnJyxcblx0XHRcdGxhc3RUaW1lID0gMCxcblx0XHRcdHRlbXBWO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHZlbmRvcnMubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHR0ZW1wViA9IHZlbmRvcnNbaV07XG5cdFx0XHRpZiAoIXZlbmRvciAmJiAodGVtcFYgKyAnVHJhbnNmb3JtJykgaW4gdGVtcFN0eWxlICkge1xuXHRcdFx0XHR2ZW5kb3IgPSB0ZW1wVjtcblx0XHRcdH1cblx0XHRcdHRlbXBWID0gdGVtcFYudG9Mb3dlckNhc2UoKTtcblx0XHRcdFxuXHRcdFx0aWYoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcblx0XHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvd1t0ZW1wVisnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgICAgXHRcdFx0d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3RlbXBWKydDYW5jZWxBbmltYXRpb25GcmFtZSddIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB3aW5kb3dbdGVtcFYrJ0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSddO1xuXHRcdFx0fVxuXHRcdH1cblxuIFx0XHQvLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgcG9seWZpbGwgYnkgRXJpayBNw7ZsbGVyXG5cdFx0Ly8gZml4ZXMgZnJvbSBQYXVsIElyaXNoIGFuZCBUaW5vIFppamRlbFxuXHQgICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG5cdCAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBlbGVtZW50KSB7XG5cdCAgICAgICAgICAgIHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuXHQgICAgICAgICAgICBcdHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSksXG5cdCAgICAgICAgICAgIFx0aWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTsgfSwgdGltZVRvQ2FsbCk7XG5cdCAgICAgICAgICAgIGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsO1xuXHQgICAgICAgICAgICByZXR1cm4gaWQ7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0ICAgIGlmICghd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKSBcblx0ICAgIFx0d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oaWQpIHsgY2xlYXJUaW1lb3V0KGlkKTsgfTtcblxuXHQgICAgc2VsZi5pc0lQQUQgPSB1YS5tYXRjaCgvKGlwYWQpLyk7XG5cblxuXHQgICAgLy8gYnJvd3NlciBVQSBzbmlmZmluZywgc2FkbHkgc3RpbGwgcmVxdWlyZWRcblx0ICAgIHZhciB1YU1hdGNoID0gZnVuY3Rpb24oIHVhICkge1xuXHRcdCAgICB2YXIgbWF0Y2ggPSAvKGNocm9tZSlbIFxcL10oW1xcdy5dKykvLmV4ZWMoIHVhICkgfHxcblx0XHQgICAgICAgIC8od2Via2l0KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyggdWEgKSB8fFxuXHRcdCAgICAgICAgLyhvcGVyYSkoPzouKnZlcnNpb258KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyggdWEgKSB8fFxuXHRcdCAgICAgICAgLyhtc2llKSAoW1xcdy5dKykvLmV4ZWMoIHVhICkgfHxcblx0XHQgICAgICAgIHVhLmluZGV4T2YoXCJjb21wYXRpYmxlXCIpIDwgMCAmJiAvKG1vemlsbGEpKD86Lio/IHJ2OihbXFx3Ll0rKXwpLy5leGVjKCB1YSApIHx8XG5cdFx0ICAgICAgICBbXTtcblxuXHRcdCAgICByZXR1cm4ge1xuXHRcdCAgICAgICAgYnJvd3NlcjogbWF0Y2hbIDEgXSB8fCBcIlwiLFxuXHRcdCAgICAgICAgdmVyc2lvbjogbWF0Y2hbIDIgXSB8fCBcIjBcIlxuXHRcdCAgICB9O1xuXHRcdH07XG5cdFx0dmFyIG1hdGNoZWQgPSB1YU1hdGNoKCB1YSApO1xuXHRcdHZhciBiciA9IHt9O1xuXHRcdGlmICggbWF0Y2hlZC5icm93c2VyICkge1xuXHRcdCAgICBiclsgbWF0Y2hlZC5icm93c2VyIF0gPSB0cnVlO1xuXHRcdCAgICBici52ZXJzaW9uID0gbWF0Y2hlZC52ZXJzaW9uO1xuXHRcdH1cblx0XHRpZihici5jaHJvbWUpIHsgYnIud2Via2l0ID0gdHJ1ZTsgfTtcblx0XHRzZWxmLl9icm93c2VyID0gYnI7XG5cblxuXG5cdCAgICBzZWxmLnNsaWRlciA9ICQoZWxlbWVudCk7IC8vIERPTSByZWZlcmVuY2Vcblx0XHRzZWxmLmV2ID0gJChzZWxmKTsgLy8gZXZlbnQgb2JqZWN0XG5cdFx0c2VsZi5fZG9jID0gJChkb2N1bWVudCk7XG5cdFx0c2VsZi5zdCA9ICQuZXh0ZW5kKHt9LCAkLmZuLnJveWFsU2xpZGVyLmRlZmF1bHRzLCBvcHRpb25zKTsgXG5cdFx0c2VsZi5fY3VyckFuaW1TcGVlZCA9IHNlbGYuc3QudHJhbnNpdGlvblNwZWVkO1xuIFx0XHRzZWxmLl9taW5Qb3NPZmZzZXQgPSAwO1xuXHRcdGlmKHNlbGYuc3QuYWxsb3dDU1MzKSB7XG5cdFx0XHRpZigoIWJyLndlYmtpdCB8fCBzZWxmLnN0LmFsbG93Q1NTM09uV2Via2l0KSApIHtcblx0XHQgICAgXHR2YXIgYlQgPSB2ZW5kb3IgKyAodmVuZG9yID8gJ1QnIDogJ3QnICk7XG5cdFx0ICAgIFx0c2VsZi5fdXNlQ1NTM1RyYW5zaXRpb25zID0gKCAoYlQgKyAncmFuc2Zvcm0nKSBpbiB0ZW1wU3R5bGUgKSAmJiAoIChiVCArICdyYW5zaXRpb24nKSBpbiB0ZW1wU3R5bGUgKTtcblx0XHRcdCAgICBpZihzZWxmLl91c2VDU1MzVHJhbnNpdGlvbnMpIHtcblx0XHRcdCAgICBcdHNlbGYuX3VzZTNkVHJhbnNmb3JtID0gKHZlbmRvciArICh2ZW5kb3IgPyAnUCcgOiAncCcgICkgKyAnZXJzcGVjdGl2ZScpIGluIHRlbXBTdHlsZTtcblx0XHRcdCAgICB9XG5cdFx0ICAgIH1cblx0XHR9XG5cdCAgICBcblx0ICAgIHZlbmRvciA9IHZlbmRvci50b0xvd2VyQ2FzZSgpO1xuXHQgICAgc2VsZi5fdmVuZG9yUHJlZiA9ICctJyt2ZW5kb3IrJy0nO1xuXHRcdFxuXHRcdHNlbGYuX3NsaWRlc0hvcml6b250YWwgPSAoc2VsZi5zdC5zbGlkZXNPcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJykgPyBmYWxzZSA6IHRydWU7XG5cdFx0c2VsZi5fcmVvcmRlclByb3AgPSBzZWxmLl9zbGlkZXNIb3Jpem9udGFsID8gJ2xlZnQnIDogJ3RvcCc7XG5cdFx0c2VsZi5fc2l6ZVByb3AgPSBzZWxmLl9zbGlkZXNIb3Jpem9udGFsID8gJ3dpZHRoJyA6ICdoZWlnaHQnO1xuXHRcdHNlbGYuX3ByZXZOYXZJdGVtSWQgPSAtMTtcblx0XHRzZWxmLl9pc01vdmUgPSAoc2VsZi5zdC50cmFuc2l0aW9uVHlwZSA9PT0gJ2ZhZGUnKSA/IGZhbHNlIDogdHJ1ZTtcblx0XHRpZighc2VsZi5faXNNb3ZlKSB7XG5cdFx0XHRzZWxmLnN0LnNsaWRlckRyYWcgPSBmYWxzZTtcblx0XHRcdHNlbGYuX2ZhZGVaSW5kZXggPSAxMDtcblx0XHR9XG5cdFx0c2VsZi5fb3BhY2l0eUNTUyA9ICd6LWluZGV4OjA7IGRpc3BsYXk6bm9uZTsgb3BhY2l0eTowOyc7XG5cblx0XHRzZWxmLl9uZXdTbGlkZUlkID0gMDtcblx0XHRzZWxmLl9zUG9zaXRpb24gPSAwO1xuXHRcdHNlbGYuX25leHRTbGlkZVBvcyA9IDA7XG5cblx0XHQvLyBpbml0IG1vZHVsZXNcblx0XHQkLmVhY2goJC5yc01vZHVsZXMsIGZ1bmN0aW9uIChoZWxwZXIsIG9wdHMpIHtcblx0XHRcdGlmKGhlbHBlciAhPT0gJ3VpZCcpXG5cdFx0XHRcdG9wdHMuY2FsbChzZWxmKTtcblx0XHR9KTtcblxuXHRcdC8vIHBhcnNlIGFsbCBzbGlkZXNcblx0XHRzZWxmLnNsaWRlcyA9IFtdO1xuXHRcdHNlbGYuX2lkQ291bnQgPSAwO1xuXHRcdHZhciByZXR1cm5WYWw7XG5cdFx0dmFyIHRzID0gc2VsZi5zdC5zbGlkZXMgPyAkKHNlbGYuc3Quc2xpZGVzKSA6IHNlbGYuc2xpZGVyLmNoaWxkcmVuKCkuZGV0YWNoKCk7XG5cdFx0XG5cdFx0dHMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHNlbGYuX3BhcnNlTm9kZSh0aGlzLCB0cnVlKTtcblx0XHR9KTtcblxuXHRcdGlmKHNlbGYuc3QucmFuZG9taXplU2xpZGVzKSB7XG5cdCAgICBcdHNlbGYuc2xpZGVzLnNvcnQoZnVuY3Rpb24oKSB7IHJldHVybiAwLjUgLSBNYXRoLnJhbmRvbSgpIH0pO1xuXHQgICAgfVxuXHRcdHNlbGYubnVtU2xpZGVzID0gc2VsZi5zbGlkZXMubGVuZ3RoO1xuXHRcdHNlbGYuX3JlZnJlc2hOdW1QcmVsb2FkSW1hZ2VzKCk7XG5cblx0XHRpZighc2VsZi5zdC5zdGFydFNsaWRlSWQpIHtcblx0XHRcdHNlbGYuc3Quc3RhcnRTbGlkZUlkID0gMDtcblx0XHR9IGVsc2UgaWYoc2VsZi5zdC5zdGFydFNsaWRlSWQgPiBzZWxmLm51bVNsaWRlcyAtIDEpIHtcblx0XHRcdHNlbGYuc3Quc3RhcnRTbGlkZUlkID0gc2VsZi5udW1TbGlkZXMgLSAxO1xuXHRcdH1cblxuXHRcdHNlbGYuX25ld1NsaWRlSWQgPSBzZWxmLnN0YXRpY1NsaWRlSWQgPSBzZWxmLmN1cnJTbGlkZUlkID0gc2VsZi5fcmVhbElkID0gIHNlbGYuc3Quc3RhcnRTbGlkZUlkO1xuXHRcdHNlbGYuY3VyclNsaWRlID0gc2VsZi5zbGlkZXNbc2VsZi5jdXJyU2xpZGVJZF07XG5cblx0XHRzZWxmLl9hY2NlbGVyYXRpb25Qb3MgPSAwO1xuXHRcdHNlbGYubXNUb3VjaCA9IGZhbHNlO1xuXHRcdHNlbGYuc2xpZGVyLmFkZENsYXNzKCAoc2VsZi5fc2xpZGVzSG9yaXpvbnRhbCA/ICdyc0hvcicgOiAncnNWZXInKSArIChzZWxmLl9pc01vdmUgPyAnJyA6ICcgcnNGYWRlJykgKTtcblxuXHRcdHZhciBzbGlkZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJyc092ZXJmbG93XCI+PGRpdiBjbGFzcz1cInJzQ29udGFpbmVyXCI+Jztcblx0XHRzZWxmLnNsaWRlc1NwYWNpbmcgPSBzZWxmLnN0LnNsaWRlc1NwYWNpbmc7XG5cdFx0c2VsZi5fc2xpZGVTaXplID0gKCBzZWxmLl9zbGlkZXNIb3Jpem9udGFsID8gc2VsZi5zbGlkZXIud2lkdGgoKSA6IHNlbGYuc2xpZGVyLmhlaWdodCgpICkgKyBzZWxmLnN0LnNsaWRlc1NwYWNpbmc7XG5cblx0XHRzZWxmLl9wcmVsb2FkID0gQm9vbGVhbihzZWxmLl9udW1QcmVsb2FkSW1hZ2VzID4gMCk7XG5cdFx0XG5cdFx0aWYoc2VsZi5udW1TbGlkZXMgPD0gMSkge1xuXHRcdFx0c2VsZi5fbG9vcCA9IGZhbHNlO1xuXHRcdH1cblx0XHR2YXIgbG9vcEhlbHBlcnMgPSAoc2VsZi5fbG9vcCAmJiBzZWxmLl9pc01vdmUpID8gKCBzZWxmLm51bVNsaWRlcyA9PT0gMiA/IDEgOiAyKSA6IDA7XG5cdFx0c2VsZi5fbG9vcEhlbHBlcnMgPSBsb29wSGVscGVycztcblxuXHRcdHNlbGYuX21heEltYWdlcyA9IHNlbGYubnVtU2xpZGVzIDwgNiA/IHNlbGYubnVtU2xpZGVzIDogNjtcblx0XHRzZWxmLl9jdXJyQmxvY2tJbmRleCA9IDA7XG5cblxuXHRcdHNlbGYuX2lkT2Zmc2V0ID0gMDtcblx0XHRzZWxmLnNsaWRlc0pRID0gW107XG5cdFx0XG5cdFx0Zm9yKGkgPTA7IGkgPCBzZWxmLm51bVNsaWRlczsgaSsrKSB7XG5cdFx0XHRzZWxmLnNsaWRlc0pRLnB1c2goICQoY3JlYXRlSXRlbUhUTUwoaSkpICk7XG5cdFx0fVxuXHRcdHNlbGYuX3NsaWRlck92ZXJmbG93ID0gc2xpZGVySFRNTCA9ICQoc2xpZGVySFRNTCArICc8L2Rpdj48L2Rpdj4nKTtcblxuXG5cdFx0dmFyIGFkZEN1cnNvcnMgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmKHNlbGYuc3Quc2xpZGVyRHJhZykge1xuXHRcdFx0XHRzZWxmLl9oYXNEcmFnID0gdHJ1ZTtcblx0XHRcdFx0aWYgKGJyLm1zaWUgfHwgYnIub3BlcmEpIHtcblx0XHRcdFx0XHRzZWxmLl9ncmFiQ3Vyc29yID0gc2VsZi5fZ3JhYmJpbmdDdXJzb3IgPSBcIm1vdmVcIjtcblx0XHRcdFx0fSBlbHNlIGlmKGJyLm1vemlsbGEpIHtcblx0XHRcdFx0XHRzZWxmLl9ncmFiQ3Vyc29yID0gXCItbW96LWdyYWJcIjtcblx0XHRcdFx0XHRzZWxmLl9ncmFiYmluZ0N1cnNvciA9IFwiLW1vei1ncmFiYmluZ1wiO1xuXHRcdFx0XHR9IGVsc2UgaWYoYnIud2Via2l0ICYmIChuYXZpZ2F0b3IucGxhdGZvcm0uaW5kZXhPZihcIk1hY1wiKSE9LTEpKSB7XG5cdFx0XHRcdFx0c2VsZi5fZ3JhYkN1cnNvciA9IFwiLXdlYmtpdC1ncmFiXCI7XG5cdFx0XHRcdFx0c2VsZi5fZ3JhYmJpbmdDdXJzb3IgPSBcIi13ZWJraXQtZ3JhYmJpbmdcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLl9zZXRHcmFiQ3Vyc29yKCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHR2YXIgcnNOUyA9IHNlbGYubnM7XG5cdFx0dmFyIGFkZEV2ZW50TmFtZXMgPSBmdW5jdGlvbihwcmVmLCBkb3duLCBtb3ZlLCB1cCwgY2FuY2VsKSB7XG5cdFx0XHRzZWxmLl9kb3duRXZlbnQgPSBwcmVmICsgZG93biArIHJzTlM7XG5cdFx0XHRzZWxmLl9tb3ZlRXZlbnQgPSBwcmVmICsgbW92ZSArIHJzTlM7XG5cdFx0XHRzZWxmLl91cEV2ZW50ID0gcHJlZiArIHVwICsgcnNOUztcblx0XHRcdGlmKGNhbmNlbClcblx0XHRcdFx0c2VsZi5fY2FuY2VsRXZlbnQgPSBwcmVmICsgY2FuY2VsICsgcnNOUztcblx0XHR9O1xuXG5cblx0XHQvLyBpZTEwXG5cdFx0c2VsZi5tc0VuYWJsZWQgPSB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQ7XG5cblx0XHRpZihzZWxmLm1zRW5hYmxlZCkge1xuXHRcdFx0c2VsZi5tc1RvdWNoID0gQm9vbGVhbih3aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAxKTtcblx0XHRcdHNlbGYuaGFzVG91Y2ggPSBmYWxzZTtcblx0XHRcdHNlbGYuX2xhc3RJdGVtRnJpY3Rpb24gPSAwLjI7XG5cdFx0XHRcblx0XHRcdGFkZEV2ZW50TmFtZXMoJ01TUG9pbnRlcicsICdEb3duJywgJ01vdmUnLCAnVXAnLCAnQ2FuY2VsJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFkZEV2ZW50TmFtZXMoJ21vdXNlJywgJ2Rvd24nLCAnbW92ZScsICd1cCcsICd1cCcpO1xuXG5cdFx0XHRpZignb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwgJ2NyZWF0ZVRvdWNoJyBpbiBkb2N1bWVudCkge1xuXHRcdFx0XHRzZWxmLmhhc1RvdWNoID0gdHJ1ZTtcblx0XHRcdFx0c2VsZi5fZG93bkV2ZW50ICs9ICcgdG91Y2hzdGFydCcgKyByc05TO1xuXHRcdFx0XHRzZWxmLl9tb3ZlRXZlbnQgKz0gJyB0b3VjaG1vdmUnICsgcnNOUztcblx0XHRcdFx0c2VsZi5fdXBFdmVudCArPSAnIHRvdWNoZW5kJyArIHJzTlM7XG5cdFx0XHRcdHNlbGYuX2NhbmNlbEV2ZW50ICs9ICcgdG91Y2hjYW5jZWwnICsgcnNOUztcblx0XHRcdFx0c2VsZi5fbGFzdEl0ZW1GcmljdGlvbiA9IDAuNTtcblx0XHRcdFx0aWYoc2VsZi5zdC5zbGlkZXJUb3VjaCkge1xuXHRcdFx0XHRcdHNlbGYuX2hhc0RyYWcgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLmhhc1RvdWNoID0gZmFsc2U7XG5cdFx0XHRcdHNlbGYuX2xhc3RJdGVtRnJpY3Rpb24gPSAwLjI7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGFkZEN1cnNvcnMoKTtcblx0XG5cdFx0c2VsZi5zbGlkZXIuaHRtbChzbGlkZXJIVE1MKTtcblxuXHRcdFxuXHRcdHNlbGYuX2NvbnRyb2xzQ29udGFpbmVyID0gc2VsZi5zdC5jb250cm9sc0luc2lkZSA/IHNlbGYuX3NsaWRlck92ZXJmbG93IDogc2VsZi5zbGlkZXI7XG5cdFx0XG5cdFx0c2VsZi5fc2xpZGVzQ29udGFpbmVyID0gc2VsZi5fc2xpZGVyT3ZlcmZsb3cuY2hpbGRyZW4oJy5yc0NvbnRhaW5lcicpO1xuXHRcdGlmKHNlbGYubXNFbmFibGVkKSB7XG5cdFx0XHRzZWxmLl9zbGlkZXNDb250YWluZXIuY3NzKCctbXMtdG91Y2gtYWN0aW9uJywgc2VsZi5fc2xpZGVzSG9yaXpvbnRhbCA/ICdwYW4teScgOiAncGFuLXgnKTtcblx0XHR9XG5cdFx0c2VsZi5fcHJlbG9hZGVyID0gJCgnPGRpdiBjbGFzcz1cInJzUHJlbG9hZGVyXCI+PC9kaXY+Jyk7XG5cdFx0dmFyIHNsaWRlcyA9IHNlbGYuX3NsaWRlc0NvbnRhaW5lci5jaGlsZHJlbignLnJzU2xpZGUnKTtcblxuXHRcdHNlbGYuX2N1cnJIb2xkZXIgPSBzZWxmLnNsaWRlc0pRW3NlbGYuY3VyclNsaWRlSWRdXG5cdFx0c2VsZi5fc2VsZWN0ZWRTbGlkZUhvbGRlciA9IDA7XG5cblx0XHRmdW5jdGlvbiBjcmVhdGVJdGVtSFRNTChpLCBjbGFzc05hbWUpIHtcblx0XHRcdHJldHVybiAnPGRpdiBzdHlsZT1cIicrIChzZWxmLl9pc01vdmUgPyAnJyA6IChpICE9PSBzZWxmLmN1cnJTbGlkZUlkICA/IHNlbGYuX29wYWNpdHlDU1MgOiAnei1pbmRleDowOycpICkgKydcIiBjbGFzcz1cInJzU2xpZGUgJysgKGNsYXNzTmFtZSB8fCAnJykrJ1wiPjwvZGl2Pic7XG5cdFx0fVxuXHRcdFxuXHRcdGlmKHNlbGYuX3VzZUNTUzNUcmFuc2l0aW9ucykge1xuXG5cdFx0XHQvLyBzb21lIGNvbnN0YW50cyBmb3IgQ1NTM1xuXHRcdFx0c2VsZi5fVFAgPSAndHJhbnNpdGlvbi1wcm9wZXJ0eSc7XG5cdFx0XHRzZWxmLl9URCA9ICd0cmFuc2l0aW9uLWR1cmF0aW9uJztcblx0XHRcdHNlbGYuX1RURiA9ICd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbic7XG5cblx0XHRcdHNlbGYuX3lQcm9wID0gc2VsZi5feFByb3AgPSBzZWxmLl92ZW5kb3JQcmVmICsndHJhbnNmb3JtJztcblxuXHRcdFx0aWYoc2VsZi5fdXNlM2RUcmFuc2Zvcm0pIHtcblx0XHRcdFx0aWYoYnIud2Via2l0KSB7XG5cdFx0XHRcdFx0c2VsZi5zbGlkZXIuYWRkQ2xhc3MoJ3JzV2Via2l0M2QnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNlbGYuX3RQcmVmMSA9ICd0cmFuc2xhdGUzZCgnO1xuXHRcdFx0XHRzZWxmLl90UHJlZjIgPSAncHgsICc7XG5cdFx0XHRcdHNlbGYuX3RQcmVmMyA9ICdweCwgMHB4KSc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLl90UHJlZjEgPSAndHJhbnNsYXRlKCc7XG5cdFx0XHRcdHNlbGYuX3RQcmVmMiA9ICdweCwgJztcblx0XHRcdFx0c2VsZi5fdFByZWYzID0gJ3B4KSc7XG5cdFx0XHR9XG5cdFx0XHRpZighc2VsZi5faXNNb3ZlKSB7XG5cdFx0XHRcdHZhciBhbmltT2JqID0ge307XG5cdFx0XHRcdGFuaW1PYmpbKHNlbGYuX3ZlbmRvclByZWYgKyBzZWxmLl9UUCldID0gJ29wYWNpdHknO1xuXHRcdFx0XHRhbmltT2JqWyhzZWxmLl92ZW5kb3JQcmVmICsgc2VsZi5fVEQpXSA9IHNlbGYuc3QudHJhbnNpdGlvblNwZWVkICsgJ21zJztcblx0XHRcdFx0YW5pbU9ialsoc2VsZi5fdmVuZG9yUHJlZiArIHNlbGYuX1RURildID0gc2VsZi5zdC5jc3MzZWFzZUluT3V0O1xuXHRcdFx0XHRzbGlkZXMuY3NzKGFuaW1PYmopO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2VsZi5fc2xpZGVzQ29udGFpbmVyWyhzZWxmLl92ZW5kb3JQcmVmICsgc2VsZi5fVFApXSA9IChzZWxmLl92ZW5kb3JQcmVmICsgJ3RyYW5zZm9ybScpO1xuXHRcdFx0fVxuXHRcdFx0XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZi5feFByb3AgPSAnbGVmdCc7XG5cdFx0XHRzZWxmLl95UHJvcCA9ICd0b3AnO1xuXHRcdH1cblxuXHRcdFxuXG5cdFx0Ly8gd2luZG93IHJlc2l6ZVxuXHRcdHZhciByZXNpemVUaW1lcjtcblx0XHQkKHdpbmRvdykub24oJ3Jlc2l6ZScrc2VsZi5ucywgZnVuY3Rpb24oKSB7XHRcblx0XHRcdGlmKHJlc2l6ZVRpbWVyKSB7XG5cdFx0XHRcdGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRyZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHNlbGYudXBkYXRlU2xpZGVyU2l6ZSgpOyB9LCA1MCk7XHRcdFx0XG5cdFx0fSk7XHRcblx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzQWZ0ZXJQcm9wc1NldHVwJyk7IC8vIG5hdmlnYXRpb24gKGJ1bGxldHMsIHRodW1icy4uLikgYXJlIGNyZWF0ZWQgaGVyZVxuXG5cdFx0c2VsZi51cGRhdGVTbGlkZXJTaXplKCk7XG5cblxuXHRcdC8vIGtleWJvYXJkIG5hdlxuXHRcdGlmKHNlbGYuc3Qua2V5Ym9hcmROYXZFbmFibGVkKSB7XG5cdFx0XHRzZWxmLl9iaW5kS2V5Ym9hcmROYXYoKTtcblx0XHR9XG5cblx0XHRpZihzZWxmLnN0LmFycm93c05hdkhpZGVPblRvdWNoICYmIChzZWxmLmhhc1RvdWNoIHx8IHNlbGYubXNUb3VjaCkgKSB7XG5cdFx0XHRzZWxmLnN0LmFycm93c05hdiA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vRGlyZWN0aW9uIG5hdmlnYXRpb24gKGFycm93cylcblx0XHRpZihzZWxmLnN0LmFycm93c05hdikge1xuXHRcdFx0dmFyIHJBcnIgPSAncnNBcnJvdycsXG5cdFx0XHRcdGNvbnRhaW5lciA9IHNlbGYuX2NvbnRyb2xzQ29udGFpbmVyO1xuXHRcdFx0JCgnPGRpdiBjbGFzcz1cIicrckFycisnICcrckFycisnTGVmdFwiPjxkaXYgY2xhc3M9XCInK3JBcnIrJ0ljblwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCInK3JBcnIrJyAnK3JBcnIrJ1JpZ2h0XCI+PGRpdiBjbGFzcz1cIicrckFycisnSWNuXCI+PC9kaXY+PC9kaXY+JykuYXBwZW5kVG8oY29udGFpbmVyKTtcblxuXHRcdFx0c2VsZi5fYXJyb3dMZWZ0ID0gY29udGFpbmVyLmNoaWxkcmVuKCcuJytyQXJyKydMZWZ0JykuY2xpY2soZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNlbGYucHJldigpO1xuXHRcdFx0fSk7XG5cdFx0XHRzZWxmLl9hcnJvd1JpZ2h0ID0gY29udGFpbmVyLmNoaWxkcmVuKCcuJytyQXJyKydSaWdodCcpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRzZWxmLm5leHQoKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZihzZWxmLnN0LmFycm93c05hdkF1dG9IaWRlICYmICFzZWxmLmhhc1RvdWNoKSB7XG5cdFx0XHRcdHNlbGYuX2Fycm93TGVmdC5hZGRDbGFzcygncnNIaWRkZW4nKTtcblx0XHRcdFx0c2VsZi5fYXJyb3dSaWdodC5hZGRDbGFzcygncnNIaWRkZW4nKTtcblxuXHRcdFx0XHR2YXIgaG92ZXJFbCA9IGNvbnRhaW5lcjtcblx0XHRcdFx0aG92ZXJFbC5vbmUoXCJtb3VzZW1vdmUuYXJyb3dzaG92ZXJcIixmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRzZWxmLl9hcnJvd0xlZnQucmVtb3ZlQ2xhc3MoJ3JzSGlkZGVuJyk7XG5cdFx0XHRcdFx0c2VsZi5fYXJyb3dSaWdodC5yZW1vdmVDbGFzcygncnNIaWRkZW4nKTtcdFx0XHRcblx0XHRcdFx0fSk7XG5cblxuXHRcdFx0XHRob3ZlckVsLmhvdmVyKFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYoIXNlbGYuX2Fycm93c0F1dG9IaWRlTG9ja2VkKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuX2Fycm93TGVmdC5yZW1vdmVDbGFzcygncnNIaWRkZW4nKTtcblx0XHRcdFx0XHRcdFx0c2VsZi5fYXJyb3dSaWdodC5yZW1vdmVDbGFzcygncnNIaWRkZW4nKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYoIXNlbGYuX2Fycm93c0F1dG9IaWRlTG9ja2VkKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuX2Fycm93TGVmdC5hZGRDbGFzcygncnNIaWRkZW4nKTtcblx0XHRcdFx0XHRcdFx0c2VsZi5fYXJyb3dSaWdodC5hZGRDbGFzcygncnNIaWRkZW4nKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XHRcblx0XHRcdH1cdFxuXHRcdFx0c2VsZi5ldi5vbigncnNPblVwZGF0ZU5hdicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLl91cGRhdGVBcnJvd3NOYXYoKTtcblx0XHRcdH0pO1xuXHRcdFx0c2VsZi5fdXBkYXRlQXJyb3dzTmF2KCk7XG5cdFx0fVxuXG5cdFx0XHRcblx0XHRcblx0XHRpZiggc2VsZi5faGFzRHJhZyApIHtcblx0XHRcdHNlbGYuX3NsaWRlc0NvbnRhaW5lci5vbihzZWxmLl9kb3duRXZlbnQsIGZ1bmN0aW9uKGUpIHsgc2VsZi5fb25EcmFnU3RhcnQoZSk7IH0pO1x0XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNlbGYuZHJhZ1N1Y2Nlc3MgPSBmYWxzZTtcblx0XHR9XG5cdFx0dmFyIHZpZGVvQ2xhc3NlcyA9IFsncnNQbGF5QnRuSWNvbicsICdyc1BsYXlCdG4nLCAncnNDbG9zZVZpZGVvQnRuJywgJ3JzQ2xvc2VWaWRlb0ljbiddO1xuXHRcdHNlbGYuX3NsaWRlc0NvbnRhaW5lci5jbGljayhmdW5jdGlvbihlKSB7XG5cdFx0XHRpZighc2VsZi5kcmFnU3VjY2Vzcykge1xuXHRcdFx0XHR2YXIgdCA9ICQoZS50YXJnZXQpO1xuXHRcdFx0XHR2YXIgdENsYXNzID0gdC5hdHRyKCdjbGFzcycpO1xuXHRcdFx0XHRpZiggJC5pbkFycmF5KHRDbGFzcywgdmlkZW9DbGFzc2VzKSAhPT0gLTEpIHtcblx0XHRcdCAgICAgICAgaWYoIHNlbGYudG9nZ2xlVmlkZW8oKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHQgICAgfVxuXHRcdFx0XHRpZihzZWxmLnN0Lm5hdmlnYXRlQnlDbGljayAmJiAhc2VsZi5fYmxvY2tBY3Rpb25zKSB7XG5cdFx0XHRcdFx0aWYoJChlLnRhcmdldCkuY2xvc2VzdCgnLnJzTm9EcmFnJywgc2VsZi5fY3VyckhvbGRlcikubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQgcmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNlbGYuX21vdXNlTmV4dChlKTtcblx0XHRcdFx0fSBcblx0XHRcdFx0c2VsZi5ldi50cmlnZ2VyKCdyc1NsaWRlQ2xpY2snKTtcblx0XHRcdH0gXG5cdFx0fSkub24oJ2NsaWNrLnJzJywgJ2EnLCBmdW5jdGlvbihlKSB7XHRcblx0XHRcdGlmKHNlbGYuZHJhZ1N1Y2Nlc3MpIHtcdFx0XHRcdFx0XHRcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2VsZi5fYmxvY2tBY3Rpb25zID0gdHJ1ZTtcblx0XHRcdFx0Ly9lLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHQvL2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5fYmxvY2tBY3Rpb25zID0gZmFsc2U7XG5cdFx0XHRcdH0sIDMpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHNlbGYuZXYudHJpZ2dlcigncnNBZnRlckluaXQnKTtcblx0fSAvKiBSb3lhbFNsaWRlciBDb25zdHJ1Y3RvciBFbmQgKi9cblxuXHQvKipcblx0ICpcblx0ICogUm95YWxTbGlkZXIgQ29yZSBQcm90b3R5cGVcblx0ICogXG5cdCAqL1xuXHRSb3lhbFNsaWRlci5wcm90b3R5cGUgPSB7XG5cdFx0Y29uc3RydWN0b3I6IFJveWFsU2xpZGVyLFxuXHRcdF9tb3VzZU5leHQ6IGZ1bmN0aW9uKGUpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0cmVsYXRpdmVQb3MgPSBlW3NlbGYuX3NsaWRlc0hvcml6b250YWwgPyAncGFnZVgnIDogJ3BhZ2VZJ10gLSBzZWxmLl9zbGlkZXJPZmZzZXQ7XG5cblx0XHQgIFx0aWYocmVsYXRpdmVQb3MgPj0gc2VsZi5fbmV4dFNsaWRlUG9zKSB7XG5cdFx0ICBcdFx0c2VsZi5uZXh0KCk7XG5cdFx0ICBcdH0gZWxzZSBpZihyZWxhdGl2ZVBvcyA8IDApIHtcblx0XHQgIFx0XHRzZWxmLnByZXYoKTtcblx0XHQgIFx0fVxuXHRcdH0sXG5cdFx0X3JlZnJlc2hOdW1QcmVsb2FkSW1hZ2VzOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0bjtcblx0XHRcdG4gPSBzZWxmLnN0Lm51bUltYWdlc1RvUHJlbG9hZDtcblx0XHRcdHNlbGYuX2xvb3AgPSBzZWxmLnN0Lmxvb3A7XG5cblx0XHRcdGlmKHNlbGYuX2xvb3ApIHtcblx0XHRcdFx0aWYoc2VsZi5udW1TbGlkZXMgPT09IDIpIHtcblx0XHRcdFx0XHRzZWxmLl9sb29wID0gZmFsc2U7XG5cdFx0XHRcdFx0c2VsZi5zdC5sb29wUmV3aW5kID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIGlmKHNlbGYubnVtU2xpZGVzIDwgMikge1xuXHRcdFx0XHRcdHNlbGYuc3QubG9vcFJld2luZCA9IHNlbGYuX2xvb3AgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRcdGlmKHNlbGYuX2xvb3AgJiYgbiA+IDApIHtcblx0XHRcdFx0aWYoc2VsZi5udW1TbGlkZXMgPD0gNCkge1xuXHRcdFx0XHRcdG4gPSAxO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmKHNlbGYuc3QubnVtSW1hZ2VzVG9QcmVsb2FkID4gKHNlbGYubnVtU2xpZGVzIC0gMSkgLyAyICkge1xuXHRcdFx0XHRcdFx0biA9IE1hdGguZmxvb3IoIChzZWxmLm51bVNsaWRlcyAtIDEpIC8gMiApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBcblx0XHRcdH1cblx0XHRcdHNlbGYuX251bVByZWxvYWRJbWFnZXMgPSBuO1xuXHRcdH0sXG5cdFx0X3BhcnNlTm9kZTogZnVuY3Rpb24oY29udGVudCwgcHVzaFRvU2xpZGVzKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdGhhc0ltZyxcblx0XHRcdFx0aXNSb290LFxuXHRcdFx0XHRoYXNDb3Zlcixcblx0XHRcdFx0b2JqID0ge30sXG5cdFx0XHRcdHRlbXBFbCxcblx0XHRcdFx0Zmlyc3QgPSB0cnVlO1xuXHRcdFx0Y29udGVudCA9ICQoY29udGVudCk7XG5cdFx0XHRzZWxmLl9jdXJyQ29udGVudCA9IGNvbnRlbnQ7XG5cdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzQmVmb3JlUGFyc2VOb2RlJywgW2NvbnRlbnQsIG9ial0pO1xuXHRcdFx0aWYob2JqLnN0b3BQYXJzaW5nKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNvbnRlbnQgPSBzZWxmLl9jdXJyQ29udGVudDtcblx0XHRcdG9iai5pZCA9IHNlbGYuX2lkQ291bnQ7XG5cdFx0XHRvYmouY29udGVudEFkZGVkID0gZmFsc2U7XG5cdFx0XHRzZWxmLl9pZENvdW50Kys7XG5cdFx0XHRvYmouaW1hZ2VzID0gW107XG5cdFx0XHRvYmouaXNCaWcgPSBmYWxzZTtcblxuXHRcdFx0aWYoIW9iai5oYXNDb3Zlcikge1xuXHRcdFx0XHRpZihjb250ZW50Lmhhc0NsYXNzKCdyc0ltZycpKSB7XG5cdFx0XHRcdFx0dGVtcEVsID0gY29udGVudDtcblx0XHRcdFx0XHRoYXNJbWcgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRlbXBFbCA9IGNvbnRlbnQuZmluZCgnLnJzSW1nJyk7XG5cdFx0XHRcdFx0aWYodGVtcEVsLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0aGFzSW1nID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihoYXNJbWcpIHtcblx0XHRcdFx0XHRvYmouYmlnSW1hZ2UgPSB0ZW1wRWwuZXEoMCkuYXR0cignZGF0YS1yc0JpZ0ltZycpO1xuXHRcdFx0XHRcdHRlbXBFbC5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dmFyIGl0ZW0gPSAkKHRoaXMpO1xuXHRcdFx0XHRcdFx0aWYoaXRlbS5pcygnYScpKSB7XG5cdFx0XHRcdFx0XHRcdHBhcnNlRWwoaXRlbSwgJ2hyZWYnKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihpdGVtLmlzKCdpbWcnKSkge1xuXHRcdFx0XHRcdFx0XHRwYXJzZUVsKGl0ZW0sICdzcmMnKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHBhcnNlRWwoaXRlbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSBpZihjb250ZW50LmlzKCdpbWcnKSkge1xuXHRcdFx0XHRcdGNvbnRlbnQuYWRkQ2xhc3MoJ3JzSW1nIHJzTWFpblNsaWRlSW1hZ2UnKTtcblx0XHRcdFx0XHRwYXJzZUVsKGNvbnRlbnQsICdzcmMnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dGVtcEVsID0gY29udGVudC5maW5kKCcucnNDYXB0aW9uJyk7XG5cdFx0XHRpZih0ZW1wRWwubGVuZ3RoKSB7XG5cdFx0XHRcdG9iai5jYXB0aW9uID0gdGVtcEVsLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0b2JqLmNvbnRlbnQgPSBjb250ZW50O1xuXG5cdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzQWZ0ZXJQYXJzZU5vZGUnLCBbY29udGVudCwgb2JqXSk7XG5cdFx0XHRmdW5jdGlvbiBwYXJzZUVsKGVsLCBzKSB7XG5cdFx0XHRcdGlmKHMpIHtcblx0XHRcdFx0XHRvYmouaW1hZ2VzLnB1c2goIGVsLmF0dHIocykgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRvYmouaW1hZ2VzLnB1c2goIGVsLnRleHQoKSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGZpcnN0KSB7XG5cdFx0XHRcdFx0Zmlyc3QgPSBmYWxzZTtcblx0XHRcdFx0XHRvYmouY2FwdGlvbiA9IChzID09PSAnc3JjJykgPyBlbC5hdHRyKCdhbHQnKSA6IGVsLmNvbnRlbnRzKCk7XG5cdFx0XHRcdFx0b2JqLmltYWdlID0gb2JqLmltYWdlc1swXTtcblx0XHRcdFx0XHRvYmoudmlkZW9VUkwgPSBlbC5hdHRyKCdkYXRhLXJzVmlkZW8nKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRcblx0XHRcdFx0XHR2YXIgd0F0dCA9IGVsLmF0dHIoJ2RhdGEtcnN3JyksXG5cdFx0XHRcdFx0XHRoQXR0ID0gZWwuYXR0cignZGF0YS1yc2gnKTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIHdBdHQgIT09ICd1bmRlZmluZWQnICYmIHdBdHQgIT09IGZhbHNlICYmIHR5cGVvZiBoQXR0ICE9PSAndW5kZWZpbmVkJyAmJiBoQXR0ICE9PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdCAgIG9iai5pVyA9IHBhcnNlSW50KHdBdHQpO1xuXHRcdFx0XHRcdFx0ICAgb2JqLmlIID0gcGFyc2VJbnQoaEF0dCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKHNlbGYuc3QuaW1nV2lkdGggJiYgc2VsZi5zdC5pbWdIZWlnaHQgKSB7XG5cdFx0XHRcdFx0XHRvYmouaVcgPSBzZWxmLnN0LmltZ1dpZHRoO1xuXHRcdFx0XHRcdFx0b2JqLmlIID0gc2VsZi5zdC5pbWdIZWlnaHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihwdXNoVG9TbGlkZXMpIHtcblx0XHRcdFx0c2VsZi5zbGlkZXMucHVzaChvYmopO1xuXHRcdFx0fVxuXHRcdFx0aWYob2JqLmltYWdlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0b2JqLmlzTG9hZGVkID0gdHJ1ZTtcblx0XHRcdFx0b2JqLmlzUmVuZGVyZWQgPSBmYWxzZTtcblx0XHRcdFx0b2JqLmlzTG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHRvYmouaW1hZ2VzID0gbnVsbDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBvYmo7XG5cdFx0fSxcblx0XHRfYmluZEtleWJvYXJkTmF2OiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0aW50ZXJ2YWwsXG5cdFx0XHRcdGtleUNvZGUsXG5cdFx0XHRcdG9uS2V5Ym9hcmRBY3Rpb24gPSBmdW5jdGlvbiAoa2V5Q29kZSkge1xuXHRcdFx0XHQgICAgaWYgKGtleUNvZGUgPT09IDM3KSB7XG5cdFx0XHRcdFx0XHRzZWxmLnByZXYoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGtleUNvZGUgPT09IDM5KSB7XG5cdFx0XHRcdFx0XHRzZWxmLm5leHQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdHNlbGYuX2RvYy5vbigna2V5ZG93bicgKyBzZWxmLm5zLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGlmKCFzZWxmLl9pc0RyYWdnaW5nKSB7XG5cdFx0XHRcdFx0a2V5Q29kZSA9IGUua2V5Q29kZTtcblx0XHRcdFx0XHRpZihrZXlDb2RlID09PSAzNyB8fCBrZXlDb2RlID09PSAzOSkge1xuXHRcdFx0XHRcdFx0aWYoIWludGVydmFsKSB7XG5cdFx0XHRcdFx0ICAgICAgICBvbktleWJvYXJkQWN0aW9uKGtleUNvZGUpO1xuXHRcdFx0XHRcdCAgICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICBvbktleWJvYXJkQWN0aW9uKGtleUNvZGUpO1xuXHRcdFx0XHRcdCAgICAgICAgfSwgNzAwKTtcblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkub24oJ2tleXVwJyArIHNlbGYubnMsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0aWYoaW50ZXJ2YWwpIHtcblx0XHRcdFx0XHRjbGVhckludGVydmFsKGludGVydmFsKTsgXG5cdFx0XHQgICBcdCAgICBpbnRlcnZhbCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRcblx0XHRcdFxuXHRcdH0sXG5cblxuXG5cblx0XHRnb1RvOiBmdW5jdGlvbihpZCwgbm90VXNlckFjdGlvbikge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0aWYoaWQgIT09IHNlbGYuY3VyclNsaWRlSWQpIHtcblx0XHRcdFx0c2VsZi5fbW92ZVRvKGlkLHNlbGYuc3QudHJhbnNpdGlvblNwZWVkLCB0cnVlLCAhbm90VXNlckFjdGlvbik7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRkZXN0cm95OiBmdW5jdGlvbihyZW1vdmUpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHNlbGYuZXYudHJpZ2dlcigncnNCZWZvcmVEZXN0cm95Jyk7XG5cdFx0XHRzZWxmLl9kb2Mub2ZmKCdrZXlkb3duJyArc2VsZi5ucysgJyBrZXl1cCcgKyBzZWxmLm5zICsgJyAnICsgc2VsZi5fbW92ZUV2ZW50ICsnICcrIHNlbGYuX3VwRXZlbnQgKTtcblx0XHRcdHNlbGYuX3NsaWRlc0NvbnRhaW5lci5vZmYoc2VsZi5fZG93bkV2ZW50ICsgJyBjbGljaycpO1x0XG5cdFx0XHRzZWxmLnNsaWRlci5kYXRhKCdyb3lhbFNsaWRlcicsIG51bGwpO1xuXHRcdFx0JC5yZW1vdmVEYXRhKHNlbGYuc2xpZGVyLCAncm95YWxTbGlkZXInKTtcblx0XHRcdCQod2luZG93KS5vZmYoJ3Jlc2l6ZScgKyBzZWxmLm5zKTtcblx0XHRcdGlmKHJlbW92ZSkge1xuXHRcdFx0XHRzZWxmLnNsaWRlci5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHRcdHNlbGYuc2xpZGVzID0gbnVsbDtcblx0XHRcdHNlbGYuc2xpZGVyID0gbnVsbDtcblx0XHRcdHNlbGYuZXYgPSBudWxsO1xuXHRcdH0sXG5cdFx0X3VwZGF0ZUJsb2Nrc0NvbnRlbnQ6IGZ1bmN0aW9uKGJlZm9yZVRyYW5zaXRpb24sIGdldElkKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdGl0ZW0sXG5cdFx0XHRcdGksXG5cdFx0XHRcdG4sXG5cdFx0XHRcdHByZWYsXG5cdFx0XHRcdGdyb3VwLFxuXHRcdFx0XHRncm91cElkLFxuXHRcdFx0XHRzbGlkZUNvZGUsXG5cdFx0XHRcdGxvb3AgPSBzZWxmLl9sb29wLFxuXHRcdFx0XHRudW1TbGlkZXMgPSBzZWxmLm51bVNsaWRlcztcblx0XHRcdGlmKCFpc05hTihnZXRJZCkgKSB7XG5cdFx0XHRcdHJldHVybiBnZXRDb3JyZWN0TG9vcGVkSWQoZ2V0SWQpO1xuXHRcdFx0fVxuXG5cblx0XHRcdHZhciBpZCA9IHNlbGYuY3VyclNsaWRlSWQ7XG5cdFx0XHR2YXIgZ3JvdXBPZmZzZXQ7XG5cdFx0XHRcblx0XHRcdHZhciBpdGVtc09uU2lkZSA9IGJlZm9yZVRyYW5zaXRpb24gPyAoTWF0aC5hYnMoc2VsZi5fcHJldlNsaWRlSWQgLSBzZWxmLmN1cnJTbGlkZUlkKSA+PSBzZWxmLm51bVNsaWRlcyAtIDEgPyAwIDogMSkgOiBzZWxmLl9udW1QcmVsb2FkSW1hZ2VzO1xuXHRcdFx0dmFyIGl0ZW1zVG9DaGVjayA9IE1hdGgubWluKDIsIGl0ZW1zT25TaWRlKTsgXG5cdFx0XHRcblx0XHRcdHZhciB1cGRhdGVBZnRlciA9IGZhbHNlO1xuXHRcdFx0dmFyIHVwZGF0ZUJlZm9yZSA9IGZhbHNlO1xuXHRcdFx0dmFyIHRlbXBJZDtcblxuXG5cdFx0XHRcblx0XHRcdGZvcihpID0gaWQ7IGkgPCBpZCArIDEgKyBpdGVtc1RvQ2hlY2s7IGkrKykge1xuXHRcdFx0XHR0ZW1wSWQgPSBnZXRDb3JyZWN0TG9vcGVkSWQoaSk7XG5cdFx0XHRcdGl0ZW0gPSBzZWxmLnNsaWRlc1t0ZW1wSWRdO1xuXHRcdFx0XHRpZihpdGVtICYmICghaXRlbS5pc0FkZGVkIHx8ICFpdGVtLnBvc2l0aW9uU2V0KSApIHtcblx0XHRcdFx0XHR1cGRhdGVBZnRlciA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZvcihpID0gaWQgLSAxOyBpID4gaWQgLSAxIC0gaXRlbXNUb0NoZWNrOyBpLS0pIHtcblx0XHRcdFx0dGVtcElkID0gZ2V0Q29ycmVjdExvb3BlZElkKGkpO1xuXHRcdFx0XHRpdGVtID0gc2VsZi5zbGlkZXNbdGVtcElkXTtcblx0XHRcdFx0aWYoaXRlbSAmJiAoIWl0ZW0uaXNBZGRlZCB8fCAhaXRlbS5wb3NpdGlvblNldCkgKSB7XG5cdFx0XHRcdFx0dXBkYXRlQmVmb3JlID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYodXBkYXRlQWZ0ZXIpIHtcblx0XHRcdFx0Zm9yKGkgPSBpZDsgaSA8IGlkICsgaXRlbXNPblNpZGUgKyAxOyBpKyspIHtcblx0XHRcdFx0XHR0ZW1wSWQgPSBnZXRDb3JyZWN0TG9vcGVkSWQoaSk7XG5cdFx0XHRcdFx0Z3JvdXBPZmZzZXQgPSBNYXRoLmZsb29yKCAoc2VsZi5fcmVhbElkIC0gKGlkIC0gaSkpIC8gc2VsZi5udW1TbGlkZXMpICogc2VsZi5udW1TbGlkZXM7XG5cdFx0XHRcdFx0aXRlbSA9IHNlbGYuc2xpZGVzW3RlbXBJZF07XG5cdFx0XHRcdFx0aWYoaXRlbSkge1xuXHRcdFx0XHRcdFx0dXBkYXRlSXRlbShpdGVtLCB0ZW1wSWQpO1x0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZih1cGRhdGVCZWZvcmUpIHtcblx0XHRcdFx0Zm9yKGkgPSBpZCAtIDE7IGkgPiBpZCAtIDEgLSBpdGVtc09uU2lkZTsgaS0tKSB7XG5cdFx0XHRcdFx0dGVtcElkID0gZ2V0Q29ycmVjdExvb3BlZElkKGkpO1xuXHRcdFx0XHRcdGdyb3VwT2Zmc2V0ID0gTWF0aC5mbG9vciggKHNlbGYuX3JlYWxJZCAtIChpZCAtIGkpICkgLyBudW1TbGlkZXMpICogbnVtU2xpZGVzO1xuXHRcdFx0XHRcdGl0ZW0gPSBzZWxmLnNsaWRlc1t0ZW1wSWRdO1xuXHRcdFx0XHRcdGlmKGl0ZW0pIHtcblx0XHRcdFx0XHRcdHVwZGF0ZUl0ZW0oaXRlbSwgdGVtcElkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKCFiZWZvcmVUcmFuc2l0aW9uKSB7XG5cdFx0XHRcdHZhciBzdGFydCA9IGlkO1xuXHRcdFx0XHR2YXIgZGlzdGFuY2UgPSBpdGVtc09uU2lkZTtcblx0XHRcdFx0dmFyIG1pbiA9IGdldENvcnJlY3RMb29wZWRJZChpZCAtIGl0ZW1zT25TaWRlKTtcblx0XHRcdFx0dmFyIG1heCA9IGdldENvcnJlY3RMb29wZWRJZChpZCArIGl0ZW1zT25TaWRlKTtcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBubWluID0gbWluID4gbWF4ID8gMCA6IG1pbjtcblx0XHRcdFx0XG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBudW1TbGlkZXM7IGkrKykgeyBcblx0XHRcdFx0XHRpZihtaW4gPiBtYXgpIHtcblx0XHRcdFx0XHRcdGlmKGkgPiBtaW4gLSAxKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihpIDwgbm1pbiB8fCBpID4gbWF4KSB7XG5cdFx0XHRcdFx0XHQgaXRlbSA9IHNlbGYuc2xpZGVzW2ldO1xuXHRcdFx0XHRcdFx0aWYoaXRlbSAmJiBpdGVtLmhvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly9zbGlkZUNvZGUgPSBzZWxmLnNsaWRlc0pRW2ldO1xuXHRcdFx0XHRcdFx0XHQvL2lmKHR5cGVvZiBzbGlkZUNvZGUgIT09IFwic3RyaW5nXCIpIHsgXG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5ob2xkZXIuZGV0YWNoKCk7XG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5pc0FkZGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdC8vfVxuXHRcdFx0XHRcdFx0fSAgICAgXG5cdFx0XHRcdFx0fSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblx0XHRcdCAgICB9ICAgXG5cdFx0XHR9XG5cblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRcdFxuXHRcdFx0XHRcblx0XHRcdGZ1bmN0aW9uIHVwZGF0ZUl0ZW0oaXRlbSAsIGksIHNsaWRlQ29kZSkge1xuXG5cdFx0XHRcdGlmKCFpdGVtLmlzQWRkZWQpIHtcblx0XHRcdFx0XHRpZighc2xpZGVDb2RlKVxuXHRcdFx0XHRcdFx0c2xpZGVDb2RlID0gc2VsZi5zbGlkZXNKUVtpXTtcblxuXHRcdFx0XHRcdGlmKCFpdGVtLmhvbGRlcikge1xuXHRcdFx0XHRcdFx0c2xpZGVDb2RlID0gc2VsZi5zbGlkZXNKUVtpXSA9ICQoc2xpZGVDb2RlKTtcblx0XHRcdFx0XHRcdGl0ZW0uaG9sZGVyID0gc2xpZGVDb2RlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzbGlkZUNvZGUgPSBpdGVtLmhvbGRlcjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpdGVtLmFwcGVuZE9uTG9hZGVkID0gZmFsc2U7XG5cblx0XHRcdFx0XHRcblx0XHRcdFx0XHR1cGRhdGVQb3MoaSwgaXRlbSwgc2xpZGVDb2RlKTtcblx0XHRcdFx0XHRhZGRDb250ZW50KGksIGl0ZW0pO1xuXHRcdFx0XHRcdHNlbGYuX2FkZEJsb2NrVG9Db250YWluZXIoaXRlbSwgc2xpZGVDb2RlLCBiZWZvcmVUcmFuc2l0aW9uKTtcblx0XHRcdFx0XHRpdGVtLmlzQWRkZWQgPSB0cnVlO1xuXHRcdFx0XHRcdGFwcGVuZGVkID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhZGRDb250ZW50KGksIGl0ZW0pO1xuXHRcdFx0XHRcdHVwZGF0ZVBvcyhpLCBpdGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZnVuY3Rpb24gYWRkQ29udGVudChpLCBpdGVtKSB7XG5cdFx0XHRcdGlmKCFpdGVtLmNvbnRlbnRBZGRlZCkge1xuXHRcdFx0XHRcdHNlbGYuc2V0SXRlbUh0bWwoaXRlbSwgYmVmb3JlVHJhbnNpdGlvbik7XG5cdFx0XHRcdFx0aWYoIWJlZm9yZVRyYW5zaXRpb24pIHtcblx0XHRcdFx0XHRcdGl0ZW0uY29udGVudEFkZGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZ1bmN0aW9uIHVwZGF0ZVBvcyhpLCBpdGVtLCBzbGlkZUNvZGUpIHtcblx0XHRcdFx0aWYoc2VsZi5faXNNb3ZlKSB7XG5cdFx0XHRcdFx0aWYoIXNsaWRlQ29kZSkge1xuXHRcdFx0XHRcdFx0c2xpZGVDb2RlID0gc2VsZi5zbGlkZXNKUVtpXTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRzbGlkZUNvZGUuY3NzKHNlbGYuX3Jlb3JkZXJQcm9wLCAoaSArIHNlbGYuX2lkT2Zmc2V0ICsgZ3JvdXBPZmZzZXQpICogc2VsZi5fc2xpZGVTaXplKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZnVuY3Rpb24gZ2V0Q29ycmVjdExvb3BlZElkKGluZGV4KSB7XG5cdFx0XHRcdHZhciBjaGFuZ2VkID0gZmFsc2U7XG5cdFx0XHRcdGlmKGxvb3ApIHtcblx0XHRcdFx0XHRpZihpbmRleCA+IG51bVNsaWRlcyAtIDEpIHtcblx0XHRcdFx0XHRcdHJldHVybiBnZXRDb3JyZWN0TG9vcGVkSWQoaW5kZXggLSBudW1TbGlkZXMpO1xuXHRcdFx0XHRcdH0gZWxzZSAgaWYoaW5kZXggPCAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2V0Q29ycmVjdExvb3BlZElkKG51bVNsaWRlcyArIGluZGV4KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGluZGV4O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNldHMgb3IgbG9hZHMgSFRNTCBmb3Igc3BlY2lmaWVkIHNsaWRlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IGN1cnJTbGlkZU9iamVjdCAgaG9sZHMgZGF0YSBhYm91dCBjdXJyIHNsaWRlIChyZWFkIGFib3V0IHJzQWZ0ZXJQYXJzZU5vZGUgZm9yIG1vcmUgaW5mbylcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGJlZm9yZVRyYW5zaXRpb24gZGV0ZXJtaW5lcyBpZiBzZXRJdGVtSFRNTCBtZXRob2QgaXMgY2FsbGVkIGJlZm9yZSBvciBhZnRlciB0cmFuc2l0aW9uXG5cdFx0ICovXG5cdFx0c2V0SXRlbUh0bWw6IGZ1bmN0aW9uKGN1cnJTbGlkZU9iamVjdCwgYmVmb3JlVHJhbnNpdGlvbikge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdGlmKGN1cnJTbGlkZU9iamVjdC5pc0xvYWRlZCkge1xuXHRcdFx0XHRhcHBlbmRDb250ZW50KCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKGJlZm9yZVRyYW5zaXRpb24pIHtcblx0XHRcdFx0XHR3YWl0Rm9yVHJhbnNpdGlvbigpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHBhcnNlRGF0YUFuZExvYWQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBwYXJzZURhdGFBbmRMb2FkKCkge1xuXHRcdFx0XHRpZighY3VyclNsaWRlT2JqZWN0LmltYWdlcykge1xuXHRcdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5pc1JlbmRlcmVkID0gdHJ1ZTtcblx0XHRcdFx0ICAgIGN1cnJTbGlkZU9iamVjdC5pc0xvYWRlZCA9IHRydWU7XG5cdFx0XHRcdFx0Y3VyclNsaWRlT2JqZWN0LmlzTG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdGFwcGVuZENvbnRlbnQodHJ1ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGN1cnJTbGlkZU9iamVjdC5pc0xvYWRpbmcpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdHZhciBlbCxcblx0XHRcdFx0XHRpc1Jvb3Q7XG5cdFx0XHRcdGlmKGN1cnJTbGlkZU9iamVjdC5jb250ZW50Lmhhc0NsYXNzKCdyc0ltZycpICkge1xuXHRcdFx0XHRcdGVsID0gY3VyclNsaWRlT2JqZWN0LmNvbnRlbnQ7XG5cdFx0XHRcdFx0aXNSb290ID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbCA9IGN1cnJTbGlkZU9iamVjdC5jb250ZW50LmZpbmQoJy5yc0ltZzpub3QoaW1nKScpXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoZWwgJiYgIWVsLmlzKCdpbWcnKSkge1xuXHRcdFx0XHRcdGVsLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR2YXIgaXRlbSA9ICQodGhpcyksXG5cdFx0XHRcdFx0XHRcdG5ld0VsID0gJzxpbWcgY2xhc3M9XCJyc0ltZ1wiIHNyYz1cIicrICggaXRlbS5pcygnYScpID8gaXRlbS5hdHRyKCdocmVmJykgOiBpdGVtLnRleHQoKSApICsnXCIgLz4nO1xuXG5cdFx0XHRcdFx0XHRpZighaXNSb290KSB7XG5cdFx0XHRcdFx0XHRcdGl0ZW0ucmVwbGFjZVdpdGgoIG5ld0VsICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjdXJyU2xpZGVPYmplY3QuY29udGVudCA9ICQobmV3RWwpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRlbCA9IGlzUm9vdCA/IGN1cnJTbGlkZU9iamVjdC5jb250ZW50IDogY3VyclNsaWRlT2JqZWN0LmNvbnRlbnQuZmluZCgnaW1nLnJzSW1nJyk7XG5cdFx0XHRcdHNldFByZWxvYWRlcigpO1xuXHRcdFx0XHRcblx0XHRcdFx0ZWwuZXEoMCkuYWRkQ2xhc3MoJ3JzTWFpblNsaWRlSW1hZ2UnKTtcblx0XHRcdFx0aWYoY3VyclNsaWRlT2JqZWN0LmlXICYmIGN1cnJTbGlkZU9iamVjdC5pSCkge1xuXHRcdFx0XHRcdGlmKCFjdXJyU2xpZGVPYmplY3QuaXNMb2FkZWQpIHtcblx0XHRcdFx0XHRcdHNlbGYuX3Jlc2l6ZUltYWdlKCBjdXJyU2xpZGVPYmplY3QgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YXBwZW5kQ29udGVudCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y3VyclNsaWRlT2JqZWN0LmlzTG9hZGluZyA9IHRydWU7XG5cdFx0XHRcdHZhciBuZXdFbDtcblxuXHRcdFx0XHRpZihjdXJyU2xpZGVPYmplY3QuaXNCaWcpIHtcblx0XHRcdFx0XHQkKCc8aW1nIC8+Jykub24oJ2xvYWQucnMgZXJyb3IucnMnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0XHRcdG9uTG9hZCggW3RoaXNdLCB0cnVlICk7XG5cdFx0XHRcdFx0fSkuYXR0cignc3JjJywgY3VyclNsaWRlT2JqZWN0LmltYWdlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjdXJyU2xpZGVPYmplY3QubG9hZGVkID0gW107XG5cdFx0XHRcdFx0Y3VyclNsaWRlT2JqZWN0LmltZ0xvYWRlcnMgPSBbXTtcblx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgY3VyclNsaWRlT2JqZWN0LmltYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0dmFyIGltYWdlID0gJCgnPGltZyAvPicpO1xuXG5cdFx0XHRcdFx0XHRjdXJyU2xpZGVPYmplY3QuaW1nTG9hZGVycy5wdXNoKCB0aGlzICk7XG5cdFx0XHRcdFx0XHRpbWFnZS5vbignbG9hZC5ycyBlcnJvci5ycycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdFx0XHRjdXJyU2xpZGVPYmplY3QubG9hZGVkLnB1c2goIHRoaXMgKTtcblx0XHRcdFx0XHRcdFx0aWYoY3VyclNsaWRlT2JqZWN0LmxvYWRlZC5sZW5ndGggPT09IGN1cnJTbGlkZU9iamVjdC5pbWdMb2FkZXJzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdG9uTG9hZCggY3VyclNsaWRlT2JqZWN0LmxvYWRlZCwgZmFsc2UgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSkuYXR0cignc3JjJywgY3VyclNsaWRlT2JqZWN0LmltYWdlc1tpXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gb2xkIGltYWdlcyBsb2FkaW5nXG5cdFx0XHRcdC8vIGVsLmltYWdlc0xvYWRlZCggZnVuY3Rpb24oICRpbWFnZXMsICRwcm9wZXIsICRicm9rZW4gKSB7XG5cdFx0XHRcdC8vIFx0aWYoJGJyb2tlbi5sZW5ndGgpIHtcblx0XHRcdFx0Ly8gXHRcdGN1cnJTbGlkZU9iamVjdC5pc0xvYWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0Ly8gXHRcdHZhciBpbWcgPSAgJGltYWdlc1swXSxcblx0XHRcdFx0Ly8gICAgIFx0XHRzcmMgPSBpbWcuc3JjO1xuXHRcdFx0XHQvLyBcdFx0aWYoc3JjICYmIHNyYy5pbmRleE9mKGN1cnJTbGlkZU9iamVjdC5pbWFnZSkgPT09IC0xICkge1xuXHRcdFx0XHQvLyAgICAgXHRcdHJldHVybjtcblx0XHRcdFx0Ly8gICAgIFx0fVxuXHRcdFx0XHQvLyBcdFx0aWYoIWN1cnJTbGlkZU9iamVjdC50cnlBZ2FpbkNvdW50KSB7IGN1cnJTbGlkZU9iamVjdC50cnlBZ2FpbkNvdW50ID0gMDsgfVxuXHRcdFx0XHQvLyBcdFx0aWYoY3VyclNsaWRlT2JqZWN0LnRyeUFnYWluQ291bnQgPCAzKSB7XG5cdFx0XHRcdC8vIFx0XHRcdGN1cnJTbGlkZU9iamVjdC50cnlBZ2FpbkNvdW50Kys7XG5cdFx0XHRcdC8vIFx0XHRcdHNlbGYuc2V0SXRlbUh0bWwoY3VyclNsaWRlT2JqZWN0LCBiZWZvcmVUcmFuc2l0aW9uKTtcblx0XHRcdFx0Ly8gXHRcdFx0cmV0dXJuO1xuXHRcdFx0XHQvLyBcdFx0fVxuXHRcdFx0XHQvLyBcdH1cblx0XHRcdFx0Ly8gICAgIG9uTG9hZCgkaW1hZ2VzKTtcblx0XHRcdFx0Ly8gfSk7XG5cdFx0XHR9XG5cdFx0XHRmdW5jdGlvbiBvbkxvYWQoJGltYWdlcywgaXNCaWcpIHtcblx0XHRcdFx0aWYoJGltYWdlcy5sZW5ndGgpIHtcblx0XHRcdCAgICBcdHZhciBpbWcgPSAkaW1hZ2VzWzBdLFxuXHRcdFx0ICAgIFx0XHRzcmMgPSBpbWcuc3JjO1xuXHRcdFx0ICAgIFx0XG5cdFx0ICAgIFx0XHRpZihpc0JpZyAhPT0gY3VyclNsaWRlT2JqZWN0LmlzQmlnKSB7XG5cdFx0ICAgIFx0XHRcdHZhciBjID0gY3VyclNsaWRlT2JqZWN0LmhvbGRlci5jaGlsZHJlbigpO1xuXHRcdFx0ICAgIFx0XHRpZihjICYmIGMubGVuZ3RoID4gMSkge1xuXHRcdFx0ICAgIFx0XHRcdHJlbW92ZVByZWxvYWRlcigpO1xuXHRcdFx0ICAgIFx0XHR9XG5cdFx0XHQgICAgXHRcdHJldHVybjtcblx0XHQgICAgXHRcdH1cblx0XHRcdCAgICBcdFxuXHRcdFx0ICAgIFx0aWYoY3VyclNsaWRlT2JqZWN0LmlXICYmIGN1cnJTbGlkZU9iamVjdC5pSCkge1xuXHRcdFx0ICAgIFx0XHRpbWFnZUxvYWRpbmdDb21wbGV0ZSgpO1xuXHRcdFx0ICAgIFx0XHRyZXR1cm47XG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgXHRjdXJyU2xpZGVPYmplY3QuaVcgPSBpbWcud2lkdGg7XG5cdFx0XHRcdCAgICBjdXJyU2xpZGVPYmplY3QuaUggPSBpbWcuaGVpZ2h0O1xuXHRcdFx0XHQgICAgaWYoY3VyclNsaWRlT2JqZWN0LmlXICYmIGN1cnJTbGlkZU9iamVjdC5pSCkge1xuXHRcdFx0ICAgIFx0XHRpbWFnZUxvYWRpbmdDb21wbGV0ZSgpO1xuXHRcdFx0ICAgIFx0XHRyZXR1cm47XG5cdFx0XHQgICAgXHR9IGVsc2Uge1xuXHRcdFx0ICAgIFx0XHQvLyBpZiBubyBzaXplLCB0cnkgYWdhaW5cblx0XHRcdCAgICBcdFx0dmFyIGxvYWRlciA9IG5ldyBJbWFnZSgpO1xuXHRcdFx0ICAgIFx0XHRsb2FkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgXHRcdFx0aWYobG9hZGVyLndpZHRoKSB7XG5cdFx0XHQgICAgXHRcdFx0XHRjdXJyU2xpZGVPYmplY3QuaVcgPSBsb2FkZXIud2lkdGg7XG5cdFx0XHRcdCAgICBcdFx0XHRjdXJyU2xpZGVPYmplY3QuaUggPSBsb2FkZXIuaGVpZ2h0O1xuXHRcdFx0XHQgICAgXHRcdFx0aW1hZ2VMb2FkaW5nQ29tcGxldGUoKTtcblx0XHRcdCAgICBcdFx0XHR9IGVsc2Uge1xuXHRcdFx0ICAgIFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdCAgICBcdFx0XHRcdFx0aWYobG9hZGVyLndpZHRoKSB7XG5cdFx0XHQgICAgXHRcdFx0XHRcdFx0Y3VyclNsaWRlT2JqZWN0LmlXID0gbG9hZGVyLndpZHRoO1xuXHRcdFx0XHQgICAgXHRcdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5pSCA9IGxvYWRlci5oZWlnaHQ7XG5cdFx0XHQgICAgXHRcdFx0XHRcdH1cblxuXHRcdFx0ICAgIFx0XHRcdFx0XHQvLyBmYWlsZWQgdG8gZ2V0IHNpemUgb24gbGFzdCB0aWVyLCBqdXN0IG91dHB1dCBpbWFnZVxuXHRcdFx0ICAgIFx0XHRcdFx0XHRpbWFnZUxvYWRpbmdDb21wbGV0ZSgpO1xuXHRcdFx0ICAgIFx0XHRcdFx0fSwgMTAwMCk7XG5cdFx0XHQgICAgXHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHQgICAgbG9hZGVyLnNyYyA9IGltZy5zcmM7XG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfSBlbHNlIHtcblx0XHRcdCAgICBcdGltYWdlTG9hZGluZ0NvbXBsZXRlKCk7XG5cdFx0XHQgICAgfVxuXHRcdFx0fVxuXHRcdFx0ZnVuY3Rpb24gaW1hZ2VMb2FkaW5nQ29tcGxldGUoKSB7XG5cdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5pc0xvYWRlZCA9IHRydWU7XG5cdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5pc0xvYWRpbmcgPSBmYWxzZTtcblxuXHRcdFx0ICAgIGFwcGVuZENvbnRlbnQoKTtcblx0XHRcdCAgICByZW1vdmVQcmVsb2FkZXIoKTtcblx0XHRcdCAgICB0cmlnZ2VyTG9hZGVkKCk7XG5cdFx0XHR9XG5cdFx0XHRmdW5jdGlvbiB3YWl0Rm9yVHJhbnNpdGlvbigpIHtcblx0XHRcdFx0aWYoIXNlbGYuX2lzTW92ZSAmJiBjdXJyU2xpZGVPYmplY3QuaW1hZ2VzICYmIGN1cnJTbGlkZU9iamVjdC5pVyAmJiBjdXJyU2xpZGVPYmplY3QuaUgpIHtcblx0XHRcdFx0XHRwYXJzZURhdGFBbmRMb2FkKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5ob2xkZXIuaXNXYWl0aW5nID0gdHJ1ZTtcblx0XHRcdFx0c2V0UHJlbG9hZGVyKCk7XG5cdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5ob2xkZXIuc2xpZGVJZCA9IC05OTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0ZnVuY3Rpb24gYXBwZW5kQ29udGVudCgpIHtcblx0XHRcdFx0aWYoIWN1cnJTbGlkZU9iamVjdC5pc0FwcGVuZGVkKSB7XG5cblx0XHRcdFx0XHR2YXIgdmlzaWJsZU5lYXJieSA9IHNlbGYuc3QudmlzaWJsZU5lYXJieSxcblx0XHRcdFx0XHRiSWQgPSBjdXJyU2xpZGVPYmplY3QuaWQgLSBzZWxmLl9uZXdTbGlkZUlkO1xuXHRcdFx0XHRcdGlmKCFiZWZvcmVUcmFuc2l0aW9uICYmICFjdXJyU2xpZGVPYmplY3QuYXBwZW5kT25Mb2FkZWQgJiYgc2VsZi5zdC5mYWRlaW5Mb2FkZWRTbGlkZSAgJiYgKCBiSWQgPT09IDAgfHwgKCAodmlzaWJsZU5lYXJieSB8fCBzZWxmLl9pc0FuaW1hdGluZyB8fCBzZWxmLl9pc0RyYWdnaW5nKSAmJiAoYklkID09PSAtMSB8fCBiSWQgPT09IDEpICkgKSApIHtcblx0XHRcdFx0XHRcdHZhciBjc3MgPSB7XG5cdFx0XHRcdFx0XHRcdHZpc2liaWxpdHk6ICd2aXNpYmxlJywgXG5cdFx0XHRcdFx0XHRcdG9wYWNpdHk6IDBcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRjc3Nbc2VsZi5fdmVuZG9yUHJlZiArICd0cmFuc2l0aW9uJ10gPSAnb3BhY2l0eSA0MDBtcyBlYXNlLWluLW91dCc7XG5cdFx0XHRcdFx0XHRjdXJyU2xpZGVPYmplY3QuY29udGVudC5jc3MoY3NzKTtcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5jb250ZW50LmNzcygnb3BhY2l0eScsIDEpO1xuXHRcdFx0XHRcdFx0fSwgMTYpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKGN1cnJTbGlkZU9iamVjdC5ob2xkZXIuZmluZCgnLnJzUHJlbG9hZGVyJykubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRjdXJyU2xpZGVPYmplY3QuaG9sZGVyLmFwcGVuZCggY3VyclNsaWRlT2JqZWN0LmNvbnRlbnQgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y3VyclNsaWRlT2JqZWN0LmhvbGRlci5odG1sKCBjdXJyU2xpZGVPYmplY3QuY29udGVudCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblxuXHRcdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5pc0FwcGVuZGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRpZihjdXJyU2xpZGVPYmplY3QuaXNMb2FkZWQpIHtcblx0XHRcdFx0XHRcdHNlbGYuX3Jlc2l6ZUltYWdlKGN1cnJTbGlkZU9iamVjdCk7XG5cdFx0XHRcdFx0XHR0cmlnZ2VyTG9hZGVkKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKCFjdXJyU2xpZGVPYmplY3Quc2l6ZVJlYWR5KSB7XG5cdFx0XHRcdFx0XHRjdXJyU2xpZGVPYmplY3Quc2l6ZVJlYWR5ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdC8vIHRyaWdnZXJzIGFmdGVyIGNvbnRlbnQgaXMgYWRkZWQsIHVzdWFsbHkgaXMgdHJ1ZSB3aGVuIHBhZ2UgaXMgcmVmcmVzaGVkIGZyb20gY2FjaGVcblx0XHRcdFx0XHRcdFx0c2VsZi5ldi50cmlnZ2VyKCdyc01heWJlU2l6ZVJlYWR5JywgY3VyclNsaWRlT2JqZWN0KTtcblx0XHRcdFx0XHRcdH0sIDEwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRmdW5jdGlvbiB0cmlnZ2VyTG9hZGVkKCkge1xuXHRcdFx0XHRpZighY3VyclNsaWRlT2JqZWN0LmxvYWRlZFRyaWdnZXJlZCkge1xuXHRcdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5pc0xvYWRlZCA9IGN1cnJTbGlkZU9iamVjdC5sb2FkZWRUcmlnZ2VyZWQgPSB0cnVlO1xuXHRcdFx0XHRcdGN1cnJTbGlkZU9iamVjdC5ob2xkZXIudHJpZ2dlcigncnNBZnRlckNvbnRlbnRTZXQnKTtcblx0XHQgXHRcdFx0c2VsZi5ldi50cmlnZ2VyKCdyc0FmdGVyQ29udGVudFNldCcsIGN1cnJTbGlkZU9iamVjdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZ1bmN0aW9uIHNldFByZWxvYWRlcigpIHtcblx0XHRcdFx0aWYoc2VsZi5zdC51c2VQcmVsb2FkZXIpXG5cdFx0XHRcdFx0Y3VyclNsaWRlT2JqZWN0LmhvbGRlci5odG1sKHNlbGYuX3ByZWxvYWRlci5jbG9uZSgpKTtcblx0XHRcdH1cblx0XHRcdGZ1bmN0aW9uIHJlbW92ZVByZWxvYWRlcihub3cpIHtcblx0XHRcdFx0aWYoc2VsZi5zdC51c2VQcmVsb2FkZXIpIHtcblx0XHRcdFx0XHR2YXIgcHJlbG9hZGVyID0gY3VyclNsaWRlT2JqZWN0LmhvbGRlci5maW5kKCcucnNQcmVsb2FkZXInKTtcblx0XHRcdFx0XHRpZihwcmVsb2FkZXIubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRwcmVsb2FkZXIucmVtb3ZlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9LFxuXHRcdF9hZGRCbG9ja1RvQ29udGFpbmVyOiBmdW5jdGlvbihzbGlkZU9iamVjdCwgY29udGVudCwgZG9udEZhZGUpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHZhciBob2xkZXIgPSBzbGlkZU9iamVjdC5ob2xkZXI7XG5cdFx0XHR2YXIgYklkID0gc2xpZGVPYmplY3QuaWQgLSBzZWxmLl9uZXdTbGlkZUlkO1xuXHRcdFx0XG5cdFx0XHR2YXIgdmlzaWJsZU5lYXJieSA9IGZhbHNlO1xuXHRcdFx0Ly8gaWYoc2VsZi5faXNNb3ZlICYmICFkb250RmFkZSAmJiBzZWxmLnN0LmZhZGVpbkxvYWRlZFNsaWRlICAmJiAoIGJJZCA9PT0gMCB8fCAoICh2aXNpYmxlTmVhcmJ5IHx8IHNlbGYuX2lzQW5pbWF0aW5nIHx8IHNlbGYuX2lzRHJhZ2dpbmcpICYmIChiSWQgPT09IC0xIHx8IGJJZCA9PT0gMSkgKSApICkge1xuXHRcdFx0Ly8gXHR2YXIgY29udGVudCA9IHNsaWRlT2JqZWN0LmNvbnRlbnQ7XG5cdFx0XHQvLyBcdGNvbnRlbnQuY3NzKHNlbGYuX3ZlbmRvclByZWYgKyAndHJhbnNpdGlvbicsICdvcGFjaXR5IDQwMG1zIGVhc2UtaW4tb3V0JykuY3NzKHt2aXNpYmlsaXR5OiAndmlzaWJsZScsIG9wYWNpdHk6IDB9KTtcblx0XHRcdC8vIFx0Ly9ob2xkZXIuY3NzKCdvcGFjaXR5JywgMCk7XG5cdFx0XHQvLyBcdHNlbGYuX3NsaWRlc0NvbnRhaW5lci5hcHBlbmQoaG9sZGVyKTtcblx0XHRcdC8vIFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdC8vIFx0XHRjb250ZW50LmNzcygnb3BhY2l0eScsIDEpO1xuXHRcdFx0Ly8gXHRcdC8vc2VsZi5ldi50cmlnZ2VyKCdyc0FmdGVyQ29udGVudFNldCcsIGhvbGRlcik7XG5cdFx0XHQvLyBcdH0sIDYpO1xuXHRcdFx0Ly8gfSBlbHNlIHtcblx0XHRcdFx0c2VsZi5fc2xpZGVzQ29udGFpbmVyLmFwcGVuZChob2xkZXIpO1xuXHRcdFx0Ly99XG5cdFx0XHRzbGlkZU9iamVjdC5hcHBlbmRPbkxvYWRlZCA9IGZhbHNlO1xuXHRcdH0sXG5cdFxuXHRcdF9vbkRyYWdTdGFydDpmdW5jdGlvbihlLCBpc1RodW1icykge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRwb2ludCxcblx0XHRcdFx0d2FzQW5pbWF0aW5nLFxuXHRcdFx0XHRpc1RvdWNoID0gKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKTtcblxuXHRcdFx0c2VsZi5faXNUb3VjaEdlc3R1cmUgPSBpc1RvdWNoO1x0XG5cblx0XHRcdHNlbGYuZXYudHJpZ2dlcigncnNEcmFnU3RhcnQnKTtcblx0XHRcdGlmKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5yc05vRHJhZycsIHNlbGYuX2N1cnJIb2xkZXIpLmxlbmd0aCkge1xuXHRcdFx0XHQgc2VsZi5kcmFnU3VjY2VzcyA9IGZhbHNlO1xuXHRcdFx0XHQgcmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdFxuXG5cdFx0XHRpZighaXNUaHVtYnMpIHtcblx0XHRcdFx0aWYoc2VsZi5faXNBbmltYXRpbmcpIHtcblx0XHRcdFx0XHRzZWxmLl93YXNBbmltYXRpbmcgPSB0cnVlO1xuXG5cdFx0XHRcdFx0c2VsZi5fc3RvcEFuaW1hdGlvbigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRzZWxmLmRyYWdTdWNjZXNzID0gZmFsc2U7XG5cdFx0XHRpZihzZWxmLl9pc0RyYWdnaW5nKSB7XG5cdFx0XHRcdGlmKGlzVG91Y2gpIHtcblx0XHRcdFx0XHRzZWxmLl9tdWx0aXBsZVRvdWNoZXMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKGlzVG91Y2gpIHtcblx0XHRcdFx0XHRzZWxmLl9tdWx0aXBsZVRvdWNoZXMgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRzZWxmLl9zZXRHcmFiYmluZ0N1cnNvcigpO1xuXHRcdFx0XG5cdFx0XHRpZihpc1RvdWNoKSB7XG5cdFx0XHRcdC8vcGFyc2luZyB0b3VjaCBldmVudFxuXHRcdFx0XHR2YXIgdG91Y2hlcyA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzO1xuXHRcdFx0XHRpZih0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHBvaW50ID0gdG91Y2hlc1swXTtcblx0XHRcdFx0XHRpZih0b3VjaGVzLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHRcdHNlbGYuX211bHRpcGxlVG91Y2hlcyA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XHRcdFx0XHRcdFxuXHRcdFx0XHRlbHNlIHtcdFxuXHRcdFx0XHRcdHJldHVybjtcdFx0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1x0XHRcdFx0XG5cdFx0XHRcdHBvaW50ID0gZTtcblx0XHRcdFx0aWYoc2VsZi5tc0VuYWJsZWQpIHBvaW50ID0gcG9pbnQub3JpZ2luYWxFdmVudDtcdFx0XG5cdFx0XHR9XG5cblx0XHRcdHNlbGYuX2lzRHJhZ2dpbmcgPSB0cnVlO1xuXHRcdFx0c2VsZi5fZG9jLm9uKHNlbGYuX21vdmVFdmVudCwgZnVuY3Rpb24oZSkgeyBzZWxmLl9vbkRyYWdNb3ZlKGUsIGlzVGh1bWJzKTsgfSlcblx0XHRcdFx0XHRcdC5vbihzZWxmLl91cEV2ZW50LCBmdW5jdGlvbihlKSB7IHNlbGYuX29uRHJhZ1JlbGVhc2UoZSwgaXNUaHVtYnMpOyB9KTtcblx0XHRcdFxuXHRcdFx0c2VsZi5fY3Vyck1vdmVBeGlzID0gJyc7XG5cdFx0XHRzZWxmLl9oYXNNb3ZlZCA9IGZhbHNlO1xuXHRcdFx0c2VsZi5fcGFnZVggPSBwb2ludC5wYWdlWDtcblx0XHRcdHNlbGYuX3BhZ2VZID0gcG9pbnQucGFnZVk7XG5cdFx0XHRzZWxmLl9zdGFydFBhZ2VQb3MgPSBzZWxmLl9hY2NlbGVyYXRpb25Qb3MgPSAoIWlzVGh1bWJzID8gc2VsZi5fc2xpZGVzSG9yaXpvbnRhbCA6IHNlbGYuX3RodW1ic0hvcml6b250YWwpID8gcG9pbnQucGFnZVggOiBwb2ludC5wYWdlWTtcblx0XHRcdFxuXHRcdFx0c2VsZi5faG9yRGlyID0gMDtcblx0XHRcdHNlbGYuX3ZlckRpciA9IDA7XG5cblxuXHRcdFx0c2VsZi5fY3VyclJlbmRlclBvc2l0aW9uID0gIWlzVGh1bWJzID8gc2VsZi5fc1Bvc2l0aW9uIDogc2VsZi5fdGh1bWJzUG9zaXRpb247XG5cblx0XHRcdHNlbGYuX3N0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdFx0aWYoaXNUb3VjaCkge1xuXHRcdFx0XHRzZWxmLl9zbGlkZXJPdmVyZmxvdy5vbihzZWxmLl9jYW5jZWxFdmVudCwgZnVuY3Rpb24oZSkgeyBzZWxmLl9vbkRyYWdSZWxlYXNlKGUsIGlzVGh1bWJzKTsgfSk7XHRcblx0XHRcdH1cblx0XHR9LFxuXHRcdF9yZW5kZXJNb3ZlbWVudDpmdW5jdGlvbihwb2ludCwgaXNUaHVtYnMpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdGlmKHNlbGYuX2NoZWNrZWRBeGlzKSB7XG5cblx0XHRcdFx0dmFyIHRpbWVTdGFtcCA9IHNlbGYuX3JlbmRlck1vdmVUaW1lLFxuXHRcdFx0XHRcdGRlbHRhWCA9IHBvaW50LnBhZ2VYIC0gc2VsZi5fcGFnZVgsXG5cdFx0XHRcdFx0ZGVsdGFZID0gcG9pbnQucGFnZVkgLSBzZWxmLl9wYWdlWSxcblx0XHRcdFx0XHRuZXdYID0gc2VsZi5fY3VyclJlbmRlclBvc2l0aW9uICsgZGVsdGFYLFxuXHRcdFx0XHRcdG5ld1kgPSBzZWxmLl9jdXJyUmVuZGVyUG9zaXRpb24gKyBkZWx0YVksXG5cdFx0XHRcdFx0aXNIb3Jpem9udGFsID0gKCFpc1RodW1icyA/IHNlbGYuX3NsaWRlc0hvcml6b250YWwgOiBzZWxmLl90aHVtYnNIb3Jpem9udGFsKSxcblx0XHRcdFx0XHRuZXdQb3MgPSBpc0hvcml6b250YWwgPyBuZXdYIDogbmV3WSxcblx0XHRcdFx0XHRtQXhpcyA9IHNlbGYuX2N1cnJNb3ZlQXhpcztcblxuXHRcdFx0XHRzZWxmLl9oYXNNb3ZlZCA9IHRydWU7XG5cdFx0XHRcdHNlbGYuX3BhZ2VYID0gcG9pbnQucGFnZVg7XG5cdFx0XHRcdHNlbGYuX3BhZ2VZID0gcG9pbnQucGFnZVk7XG5cblx0XHRcdFx0aWYobUF4aXMgPT09ICd4JyAmJiBkZWx0YVggIT09IDApIHtcblx0XHRcdFx0XHRzZWxmLl9ob3JEaXIgPSBkZWx0YVggPiAwID8gMSA6IC0xO1xuXHRcdFx0XHR9IGVsc2UgaWYobUF4aXMgPT09ICd5JyAmJiBkZWx0YVkgIT09IDApIHtcblx0XHRcdFx0XHRzZWxmLl92ZXJEaXIgPSBkZWx0YVkgPiAwID8gMSA6IC0xO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIHBvaW50UG9zID0gaXNIb3Jpem9udGFsID8gc2VsZi5fcGFnZVggOiBzZWxmLl9wYWdlWSxcblx0XHRcdFx0XHRkZWx0YVBvcyA9IGlzSG9yaXpvbnRhbCA/IGRlbHRhWCA6IGRlbHRhWTtcblx0XHRcdFx0aWYoIWlzVGh1bWJzKSB7XG5cdFx0XHRcdFx0aWYoIXNlbGYuX2xvb3ApIHtcblx0XHRcdFx0XHRcdGlmKHNlbGYuY3VyclNsaWRlSWQgPD0gMCkge1xuXHRcdFx0XHRcdFx0XHRpZihwb2ludFBvcyAtIHNlbGYuX3N0YXJ0UGFnZVBvcyA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHRuZXdQb3MgPSBzZWxmLl9jdXJyUmVuZGVyUG9zaXRpb24gKyBkZWx0YVBvcyAqIHNlbGYuX2xhc3RJdGVtRnJpY3Rpb247XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKHNlbGYuY3VyclNsaWRlSWQgPj0gc2VsZi5udW1TbGlkZXMgLSAxKSB7XG5cdFx0XHRcdFx0XHRcdGlmKHBvaW50UG9zIC0gc2VsZi5fc3RhcnRQYWdlUG9zIDwgMCkge1xuXHRcdFx0XHRcdFx0XHRcdG5ld1BvcyA9IHNlbGYuX2N1cnJSZW5kZXJQb3NpdGlvbiArIGRlbHRhUG9zICogc2VsZi5fbGFzdEl0ZW1GcmljdGlvbiA7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYobmV3UG9zID4gc2VsZi5fdGh1bWJzTWluUG9zaXRpb24pIHtcblx0XHRcdFx0XHRcdG5ld1BvcyA9IHNlbGYuX2N1cnJSZW5kZXJQb3NpdGlvbiArIGRlbHRhUG9zICogc2VsZi5fbGFzdEl0ZW1GcmljdGlvbjtcblx0XHRcdFx0XHR9IGVsc2UgaWYobmV3UG9zIDwgc2VsZi5fdGh1bWJzTWF4UG9zaXRpb24pIHtcblx0XHRcdFx0XHRcdG5ld1BvcyA9IHNlbGYuX2N1cnJSZW5kZXJQb3NpdGlvbiArIGRlbHRhUG9zICogc2VsZi5fbGFzdEl0ZW1GcmljdGlvbiA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0c2VsZi5fY3VyclJlbmRlclBvc2l0aW9uID0gbmV3UG9zO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKHRpbWVTdGFtcCAtIHNlbGYuX3N0YXJ0VGltZSA+IDIwMCkge1xuXHRcdFx0IFx0XHRzZWxmLl9zdGFydFRpbWUgPSB0aW1lU3RhbXA7XG5cdFx0XHRcdFx0c2VsZi5fYWNjZWxlcmF0aW9uUG9zID0gcG9pbnRQb3M7XHRcdFx0XHRcdFx0XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZighaXNUaHVtYnMpIHtcblx0XHRcdFx0XHRpZihzZWxmLl9pc01vdmUpIHtcblx0XHRcdFx0XHRcdHNlbGYuX3NldFBvc2l0aW9uKHNlbGYuX2N1cnJSZW5kZXJQb3NpdGlvbik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuX3NldFRodW1ic1Bvc2l0aW9uKHNlbGYuX2N1cnJSZW5kZXJQb3NpdGlvbik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdH0sXG5cdFx0X29uRHJhZ01vdmU6ZnVuY3Rpb24oZSwgaXNUaHVtYnMpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0cG9pbnQsXG5cdFx0XHRcdGlzVG91Y2ggPSAoZS50eXBlID09PSAndG91Y2htb3ZlJyk7XG5cblx0XHRcdGlmKHNlbGYuX2lzVG91Y2hHZXN0dXJlICYmICFpc1RvdWNoKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYoaXNUb3VjaCkge1xuXHRcdFx0XHRpZihzZWxmLl9sb2NrQXhpcykge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVx0XG5cdFx0XHRcdHZhciB0b3VjaGVzID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XG5cdFx0XHRcdGlmKHRvdWNoZXMpIHtcblx0XHRcdFx0XHRpZih0b3VjaGVzLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cG9pbnQgPSB0b3VjaGVzWzBdO1x0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cG9pbnQgPSBlO1xuXHRcdFx0XHRpZihzZWxmLm1zRW5hYmxlZCkgcG9pbnQgPSBwb2ludC5vcmlnaW5hbEV2ZW50O1x0XG5cdFx0XHR9XG5cdFx0XHRcblxuXHRcdFx0aWYoIXNlbGYuX2hhc01vdmVkKSB7XG5cdFx0XHRcdGlmKHNlbGYuX3VzZUNTUzNUcmFuc2l0aW9ucykge1xuXHRcdFx0XHRcdCghaXNUaHVtYnMgPyBzZWxmLl9zbGlkZXNDb250YWluZXIgOiBzZWxmLl90aHVtYnNDb250YWluZXIpLmNzcygoc2VsZi5fdmVuZG9yUHJlZiArIHNlbGYuX1REKSwgJzBzJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0KGZ1bmN0aW9uIGFuaW1sb29wKCl7XG5cdFx0XHRcdFx0aWYoc2VsZi5faXNEcmFnZ2luZykge1xuXHRcdFx0XHRcdFx0c2VsZi5fYW5pbUZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1sb29wKTtcblx0XHRcdFx0XHRcdGlmKHNlbGYuX3JlbmRlck1vdmVFdmVudClcblx0XHRcdFx0XHRcdFx0c2VsZi5fcmVuZGVyTW92ZW1lbnQoc2VsZi5fcmVuZGVyTW92ZUV2ZW50LCBpc1RodW1icyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0ICAgIH0pKCk7XG5cdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0aWYoIXNlbGYuX2NoZWNrZWRBeGlzKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgZGlyID0gKCFpc1RodW1icyA/IHNlbGYuX3NsaWRlc0hvcml6b250YWwgOiBzZWxmLl90aHVtYnNIb3Jpem9udGFsKSxcblx0XHRcdFx0XHRkaWZmID0gKE1hdGguYWJzKHBvaW50LnBhZ2VYIC0gc2VsZi5fcGFnZVgpIC0gTWF0aC5hYnMocG9pbnQucGFnZVkgLSBzZWxmLl9wYWdlWSkgKSAtIChkaXIgPyAtNyA6IDcpO1xuXG5cdFx0XHRcdGlmKGRpZmYgPiA3KSB7XG5cdFx0XHRcdFx0Ly8gaG9yIG1vdmVtZW50XG5cdFx0XHRcdFx0aWYoZGlyKSB7XG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRzZWxmLl9jdXJyTW92ZUF4aXMgPSAneCc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKGlzVG91Y2gpIHtcblx0XHRcdFx0XHRcdHNlbGYuX2NvbXBsZXRlR2VzdHVyZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH0gXG5cdFx0XHRcdFx0c2VsZi5fY2hlY2tlZEF4aXMgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2UgaWYoZGlmZiA8IC03KSB7XG5cdFx0XHRcdFx0Ly8gdmVyIG1vdmVtZW50XG5cdFx0XHRcdFx0aWYoIWRpcikge1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0c2VsZi5fY3Vyck1vdmVBeGlzID0gJ3knO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihpc1RvdWNoKSB7XG5cdFx0XHRcdFx0XHRzZWxmLl9jb21wbGV0ZUdlc3R1cmUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9IFxuXHRcdFx0XHRcdHNlbGYuX2NoZWNrZWRBeGlzID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcdFxuXHRcdFx0c2VsZi5fcmVuZGVyTW92ZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XHRcdHNlbGYuX3JlbmRlck1vdmVFdmVudCA9IHBvaW50O1xuXHRcdH0sXG5cdFx0X2NvbXBsZXRlR2VzdHVyZTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRzZWxmLl9sb2NrQXhpcyA9IHRydWU7XG5cdFx0XHRzZWxmLl9oYXNNb3ZlZCA9IHNlbGYuX2lzRHJhZ2dpbmcgPSBmYWxzZTtcblx0XHRcdHNlbGYuX29uRHJhZ1JlbGVhc2UoKTtcblx0XHR9LFxuXHRcdF9vbkRyYWdSZWxlYXNlOmZ1bmN0aW9uKGUsIGlzVGh1bWJzKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdHRvdGFsTW92ZURpc3QsXG5cdFx0XHRcdGFjY0Rpc3QsXG5cdFx0XHRcdGR1cmF0aW9uLFxuXHRcdFx0XHR2MCxcblx0XHRcdFx0bmV3UG9zLFxuXHRcdFx0XHRuZXdEaXN0LFxuXHRcdFx0XHRuZXdEdXJhdGlvbixcblx0XHRcdFx0YmxvY2tMaW5rLFxuXHRcdFx0XHRpc1RvdWNoID0gKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpO1xuXG5cblx0XHRcdGlmKHNlbGYuX2lzVG91Y2hHZXN0dXJlICYmICFpc1RvdWNoKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHNlbGYuX2lzVG91Y2hHZXN0dXJlID0gZmFsc2U7XG5cdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzRHJhZ1JlbGVhc2UnKTtcblxuXHRcdFx0c2VsZi5fcmVuZGVyTW92ZUV2ZW50ID0gbnVsbDtcblx0XHRcdHNlbGYuX2lzRHJhZ2dpbmcgPSBmYWxzZTtcblx0XHRcdHNlbGYuX2xvY2tBeGlzID0gZmFsc2U7XG5cdFx0XHRzZWxmLl9jaGVja2VkQXhpcyA9IGZhbHNlO1xuXHRcdFx0c2VsZi5fcmVuZGVyTW92ZVRpbWUgPSAwO1xuXHRcdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUoc2VsZi5fYW5pbUZyYW1lKTtcblx0XHRcdGlmKHNlbGYuX2hhc01vdmVkKSB7XG5cdFx0XHRcdGlmKCFpc1RodW1icykge1xuXHRcdFx0XHRcdGlmKHNlbGYuX2lzTW92ZSkge1xuXHRcdFx0XHRcdFx0c2VsZi5fc2V0UG9zaXRpb24oc2VsZi5fY3VyclJlbmRlclBvc2l0aW9uKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZi5fc2V0VGh1bWJzUG9zaXRpb24oc2VsZi5fY3VyclJlbmRlclBvc2l0aW9uKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cblx0XHRcdHNlbGYuX2RvYy5vZmYoc2VsZi5fbW92ZUV2ZW50KS5vZmYoc2VsZi5fdXBFdmVudCk7XG5cblx0XHRcdGlmKGlzVG91Y2gpIHtcblx0XHRcdFx0c2VsZi5fc2xpZGVyT3ZlcmZsb3cub2ZmKHNlbGYuX2NhbmNlbEV2ZW50KTtcdFxuXHRcdFx0fVxuXG5cdFx0XHRcblx0XHRcdHNlbGYuX3NldEdyYWJDdXJzb3IoKTtcblx0XHRcdGlmICghc2VsZi5faGFzTW92ZWQgJiYgIXNlbGYuX211bHRpcGxlVG91Y2hlcykge1xuXHRcdFx0XHRpZihpc1RodW1icyAmJiBzZWxmLl90aHVtYnNFbmFibGVkKSB7XG5cdFx0XHRcdFx0dmFyIGl0ZW0gPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcucnNOYXZJdGVtJyk7XG5cdFx0XHRcdFx0aWYoaXRlbS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdHNlbGYuZ29UbyhpdGVtLmluZGV4KCkpO1xuXHRcdFx0XHRcdH1cdFxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dmFyIG9yaWVudCA9ICghaXNUaHVtYnMgPyBzZWxmLl9zbGlkZXNIb3Jpem9udGFsIDogc2VsZi5fdGh1bWJzSG9yaXpvbnRhbCk7XG5cdFx0XHRpZighc2VsZi5faGFzTW92ZWQgfHwgKHNlbGYuX2N1cnJNb3ZlQXhpcyA9PT0gJ3knICYmIG9yaWVudCkgfHwgKHNlbGYuX2N1cnJNb3ZlQXhpcyA9PT0gJ3gnICYmICFvcmllbnQpICkge1xuXHRcdFx0XHRpZighaXNUaHVtYnMgJiYgc2VsZi5fd2FzQW5pbWF0aW5nKSB7XG5cdFx0XHRcdFx0c2VsZi5fd2FzQW5pbWF0aW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0aWYoIXNlbGYuc3QubmF2aWdhdGVCeUNsaWNrKSB7XG5cdFx0XHRcdFx0XHRzZWxmLmRyYWdTdWNjZXNzID0gdHJ1ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZi5fbW91c2VOZXh0KCAoc2VsZi5tc0VuYWJsZWQgPyBlLm9yaWdpbmFsRXZlbnQgOiBlKSApO1xuXHRcdFx0XHRcdFx0c2VsZi5kcmFnU3VjY2VzcyA9IHRydWU7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuX3dhc0FuaW1hdGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdHNlbGYuZHJhZ1N1Y2Nlc3MgPSBmYWxzZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLmRyYWdTdWNjZXNzID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0c2VsZi5fd2FzQW5pbWF0aW5nID0gZmFsc2U7XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0c2VsZi5fY3Vyck1vdmVBeGlzID0gJyc7XG5cblx0XHRcdFxuXHRcdFx0ZnVuY3Rpb24gZ2V0Q29ycmVjdFNwZWVkKG5ld1NwZWVkKSB7XG5cdFx0XHRcdGlmKG5ld1NwZWVkIDwgMTAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIDEwMDtcblx0XHRcdFx0fSBlbHNlIGlmKG5ld1NwZWVkID4gNTAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIDUwMDtcblx0XHRcdFx0fSBcblx0XHRcdFx0cmV0dXJuIG5ld1NwZWVkO1xuXHRcdFx0fVxuXHRcdFx0ZnVuY3Rpb24gcmV0dXJuVG9DdXJyZW50KGlzU2xvdywgdjApIHtcblx0XHRcdFx0aWYoc2VsZi5faXNNb3ZlIHx8IGlzVGh1bWJzKSB7XG5cblx0XHRcdFx0XHRuZXdQb3MgPSAoLXNlbGYuX3JlYWxJZCAtIHNlbGYuX2lkT2Zmc2V0KSAqIHNlbGYuX3NsaWRlU2l6ZTtcblx0XHRcdFx0XHRuZXdEaXN0ID0gTWF0aC5hYnMoc2VsZi5fc1Bvc2l0aW9uICAtIG5ld1Bvcyk7XG5cdFx0XHRcdFx0c2VsZi5fY3VyckFuaW1TcGVlZCA9IG5ld0Rpc3QgLyB2MDtcblx0XHRcdFx0XHRpZihpc1Nsb3cpIHtcblx0XHRcdFx0XHRcdHNlbGYuX2N1cnJBbmltU3BlZWQgKz0gMjUwOyBcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2VsZi5fY3VyckFuaW1TcGVlZCA9IGdldENvcnJlY3RTcGVlZChzZWxmLl9jdXJyQW5pbVNwZWVkKTtcblxuXHRcdFx0XHRcdHNlbGYuX2FuaW1hdGVUbyhuZXdQb3MsIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgc25hcERpc3QgPSBzZWxmLnN0Lm1pblNsaWRlT2Zmc2V0LFxuXHRcdFx0XHRwb2ludCA9IGlzVG91Y2ggPyBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0gOiAoc2VsZi5tc0VuYWJsZWQgPyBlLm9yaWdpbmFsRXZlbnQgOiBlKSxcblx0XHRcdFx0cFBvcyA9IG9yaWVudCA/IHBvaW50LnBhZ2VYIDogcG9pbnQucGFnZVksXG5cdFx0XHRcdHNQb3MgPSBzZWxmLl9zdGFydFBhZ2VQb3MsXG5cdFx0XHRcdGF4UG9zID0gc2VsZi5fYWNjZWxlcmF0aW9uUG9zLFxuXHRcdFx0XHRheEN1cnJJdGVtID0gc2VsZi5jdXJyU2xpZGVJZCxcblx0XHRcdFx0YXhOdW1JdGVtcyA9IHNlbGYubnVtU2xpZGVzLFxuXHRcdFx0XHRkaXIgPSBvcmllbnQgPyBzZWxmLl9ob3JEaXIgOiBzZWxmLl92ZXJEaXIsXG5cdFx0XHRcdGxvb3AgPSBzZWxmLl9sb29wLFxuXHRcdFx0XHRjaGFuZ2VIYXNoID0gZmFsc2UsXG5cdFx0XHRcdGRpc3RPZmZzZXQgPSAwO1xuXHRcdFx0XG5cdFx0XHR0b3RhbE1vdmVEaXN0ID0gTWF0aC5hYnMocFBvcyAtIHNQb3MpO1xuXHRcdFx0YWNjRGlzdCA9IHBQb3MgLSBheFBvcztcblxuXG5cdFx0XHRkdXJhdGlvbiA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSkgLSBzZWxmLl9zdGFydFRpbWU7XG5cdFx0XHR2MCA9IE1hdGguYWJzKGFjY0Rpc3QpIC8gZHVyYXRpb247XHRcblxuXHRcdFx0aWYoZGlyID09PSAwIHx8IGF4TnVtSXRlbXMgPD0gMSkge1xuXHRcdFx0XHRyZXR1cm5Ub0N1cnJlbnQodHJ1ZSwgdjApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmKCFsb29wICYmICFpc1RodW1icykge1xuXHRcdFx0XHRpZihheEN1cnJJdGVtIDw9IDApIHtcblx0XHRcdFx0XHRpZihkaXIgPiAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm5Ub0N1cnJlbnQodHJ1ZSwgdjApO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmKGF4Q3Vyckl0ZW0gPj0gYXhOdW1JdGVtcyAtIDEpIHtcblx0XHRcdFx0XHRpZihkaXIgPCAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm5Ub0N1cnJlbnQodHJ1ZSwgdjApO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZighaXNUaHVtYnMpIHtcblx0XHRcdFx0aWYoc1BvcyArIHNuYXBEaXN0IDwgcFBvcykge1xuXHRcdFx0XHRcdGlmKGRpciA8IDApIHtcdFx0XG5cdFx0XHRcdFx0XHRyZXR1cm5Ub0N1cnJlbnQoZmFsc2UsIHYwKTtcblx0XHRcdFx0XHRcdHJldHVybjtcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNlbGYuX21vdmVUbygncHJldicsIGdldENvcnJlY3RTcGVlZChNYXRoLmFicyhzZWxmLl9zUG9zaXRpb24gIC0gKC1zZWxmLl9yZWFsSWQgLSBzZWxmLl9pZE9mZnNldCArIDEpICogc2VsZi5fc2xpZGVTaXplKSAvIHYwKSwgY2hhbmdlSGFzaCwgdHJ1ZSwgdHJ1ZSk7XG5cdFx0XHRcdH0gZWxzZSBpZihzUG9zIC0gc25hcERpc3QgPiBwUG9zKSB7XG5cdFx0XHRcdFx0aWYoZGlyID4gMCkge1x0XHRcblx0XHRcdFx0XHRcdHJldHVyblRvQ3VycmVudChmYWxzZSwgdjApO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1x0XHRcdFx0XHRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2VsZi5fbW92ZVRvKCduZXh0JywgZ2V0Q29ycmVjdFNwZWVkKE1hdGguYWJzKHNlbGYuX3NQb3NpdGlvbiAgLSAoLXNlbGYuX3JlYWxJZCAtIHNlbGYuX2lkT2Zmc2V0IC0gMSkgKiBzZWxmLl9zbGlkZVNpemUpIC8gdjApLCBjaGFuZ2VIYXNoLCB0cnVlLCB0cnVlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm5Ub0N1cnJlbnQoZmFsc2UsIHYwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIG5ld1BvcyA9IHNlbGYuX3RodW1ic1Bvc2l0aW9uO1xuXHRcdFx0XHR2YXIgdHJhbnNpdGlvblNwZWVkO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYobmV3UG9zID4gc2VsZi5fdGh1bWJzTWluUG9zaXRpb24pIHtcblx0XHRcdFx0XHRuZXdQb3MgPSBzZWxmLl90aHVtYnNNaW5Qb3NpdGlvbjtcblx0XHRcdFx0fSBlbHNlIGlmKG5ld1BvcyA8IHNlbGYuX3RodW1ic01heFBvc2l0aW9uKSB7XG5cdFx0XHRcdFx0bmV3UG9zID0gc2VsZi5fdGh1bWJzTWF4UG9zaXRpb247XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFyIGZyaWN0aW9uID0gMC4wMDMsXG5cdFx0XHRcdFx0XHRTID0gKHYwICogdjApIC8gKGZyaWN0aW9uICogMiksXG5cdFx0XHRcdFx0XHRtaW5YRGlzdCA9IC1zZWxmLl90aHVtYnNQb3NpdGlvbixcblx0XHRcdFx0XHRcdG1heFhEaXN0ID0gc2VsZi5fdGh1bWJzQ29udGFpbmVyU2l6ZSAtIHNlbGYuX3RodW1ic1ZpZXdwb3J0U2l6ZSArIHNlbGYuX3RodW1ic1Bvc2l0aW9uO1xuXG5cdFx0XHRcdFx0aWYgKGFjY0Rpc3QgPiAwICYmIFMgPiBtaW5YRGlzdCkge1xuXHRcdFx0XHRcdFx0bWluWERpc3QgPSBtaW5YRGlzdCArIHNlbGYuX3RodW1ic1ZpZXdwb3J0U2l6ZSAvICgxNSAvIChTIC8gdjAgKiBmcmljdGlvbikpO1xuXHRcdFx0XHRcdFx0djAgPSB2MCAqIG1pblhEaXN0IC8gUztcblx0XHRcdFx0XHRcdFMgPSBtaW5YRGlzdDtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGFjY0Rpc3QgPCAwICYmIFMgPiBtYXhYRGlzdCkge1xuXHRcdFx0XHRcdFx0bWF4WERpc3QgPSBtYXhYRGlzdCArIHNlbGYuX3RodW1ic1ZpZXdwb3J0U2l6ZSAvICgxNSAvIChTIC8gdjAgKiBmcmljdGlvbikpO1xuXHRcdFx0XHRcdFx0djAgPSB2MCAqIG1heFhEaXN0IC8gUztcblx0XHRcdFx0XHRcdFMgPSBtYXhYRGlzdDtcblx0XHRcdFx0XHR9XG5cblxuXG5cblx0XHRcdFx0XHR0cmFuc2l0aW9uU3BlZWQgPSAgTWF0aC5tYXgoTWF0aC5yb3VuZCh2MCAvIGZyaWN0aW9uKSwgNTApO1xuXHRcdFx0XHRcdG5ld1BvcyA9IG5ld1BvcyArIFMgKiAoYWNjRGlzdCA8IDAgPyAtMSA6IDEpO1xuXG5cblx0XHRcdFx0XHRpZihuZXdQb3MgPiBzZWxmLl90aHVtYnNNaW5Qb3NpdGlvbikge1xuXHRcdFx0XHRcdFx0c2VsZi5fYW5pbWF0ZVRodW1ic1RvKG5ld1BvcywgdHJhbnNpdGlvblNwZWVkLCB0cnVlLCBzZWxmLl90aHVtYnNNaW5Qb3NpdGlvbiwgMjAwKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHQgfSBlbHNlIGlmKG5ld1BvcyA8IHNlbGYuX3RodW1ic01heFBvc2l0aW9uKSB7XG5cdFx0XHRcdFx0XHRzZWxmLl9hbmltYXRlVGh1bWJzVG8oIG5ld1BvcywgdHJhbnNpdGlvblNwZWVkLCB0cnVlLCBzZWxmLl90aHVtYnNNYXhQb3NpdGlvbiwgMjAwKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzZWxmLl9hbmltYXRlVGh1bWJzVG8obmV3UG9zLCB0cmFuc2l0aW9uU3BlZWQsIHRydWUpO1xuXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRfc2V0UG9zaXRpb246IGZ1bmN0aW9uKHBvcykge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0cG9zID0gc2VsZi5fc1Bvc2l0aW9uID0gcG9zO1xuXHRcdFx0aWYoc2VsZi5fdXNlQ1NTM1RyYW5zaXRpb25zKSB7XG5cdFx0XHRcdHNlbGYuX3NsaWRlc0NvbnRhaW5lci5jc3Moc2VsZi5feFByb3AsIHNlbGYuX3RQcmVmMSArICggc2VsZi5fc2xpZGVzSG9yaXpvbnRhbCA/IChwb3MgKyBzZWxmLl90UHJlZjIgKyAwKSA6ICgwICsgc2VsZi5fdFByZWYyICsgcG9zKSApICsgc2VsZi5fdFByZWYzICk7XHRcdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2VsZi5fc2xpZGVzQ29udGFpbmVyLmNzcyhzZWxmLl9zbGlkZXNIb3Jpem9udGFsID8gc2VsZi5feFByb3AgOiBzZWxmLl95UHJvcCwgcG9zKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdFxuXHRcdFxuXHRcdHVwZGF0ZVNsaWRlclNpemU6IGZ1bmN0aW9uKGZvcmNlKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdG5ld1dpZHRoLFxuXHRcdFx0XHRuZXdIZWlnaHQ7XG5cblx0XHRcdGlmKHNlbGYuc3QuYXV0b1NjYWxlU2xpZGVyKSB7XG5cdFx0XHRcdHZhciBhc3cgPSBzZWxmLnN0LmF1dG9TY2FsZVNsaWRlcldpZHRoLFxuXHRcdFx0XHRcdGFzaCA9IHNlbGYuc3QuYXV0b1NjYWxlU2xpZGVySGVpZ2h0O1xuXG5cdFx0XHRcdGlmKHNlbGYuc3QuYXV0b1NjYWxlSGVpZ2h0KSB7XG5cdFx0XHRcdFx0bmV3V2lkdGggPSBzZWxmLnNsaWRlci53aWR0aCgpO1xuXHRcdFx0XHRcdGlmKG5ld1dpZHRoICE9IHNlbGYud2lkdGgpIHtcblx0XHRcdFx0XHRcdHNlbGYuc2xpZGVyLmNzcyhcImhlaWdodFwiLCBuZXdXaWR0aCAqIChhc2ggLyBhc3cpICk7XG5cdFx0XHRcdFx0XHRuZXdXaWR0aCA9IHNlbGYuc2xpZGVyLndpZHRoKCk7XG5cdFx0XHRcdFx0fVx0XG5cdFx0XHRcdFx0bmV3SGVpZ2h0ID0gc2VsZi5zbGlkZXIuaGVpZ2h0KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3SGVpZ2h0ID0gc2VsZi5zbGlkZXIuaGVpZ2h0KCk7XG5cdFx0XHRcdFx0aWYobmV3SGVpZ2h0ICE9IHNlbGYuaGVpZ2h0KSB7XG5cdFx0XHRcdFx0XHRzZWxmLnNsaWRlci5jc3MoXCJ3aWR0aFwiLCBuZXdIZWlnaHQgKiAoYXN3IC8gYXNoKSk7XG5cdFx0XHRcdFx0XHRuZXdIZWlnaHQgPSBzZWxmLnNsaWRlci5oZWlnaHQoKTtcblx0XHRcdFx0XHR9XHRcdFxuXHRcdFx0XHRcdG5ld1dpZHRoID0gc2VsZi5zbGlkZXIud2lkdGgoKTtcblx0XHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXdXaWR0aCA9IHNlbGYuc2xpZGVyLndpZHRoKCk7XG5cdFx0XHRcdG5ld0hlaWdodCA9IHNlbGYuc2xpZGVyLmhlaWdodCgpO1xuXHRcdFx0fVxuXHRcdFx0XG5cblxuXHRcdFx0aWYoZm9yY2UgfHwgbmV3V2lkdGggIT0gc2VsZi53aWR0aCB8fCBuZXdIZWlnaHQgIT0gc2VsZi5oZWlnaHQpIHtcblx0XHRcdFx0c2VsZi53aWR0aCA9IG5ld1dpZHRoO1xuXHRcdFx0XHRzZWxmLmhlaWdodCA9IG5ld0hlaWdodDtcblxuXHRcdFx0XHRzZWxmLl93cmFwV2lkdGggPSBuZXdXaWR0aDtcblx0XHRcdFx0c2VsZi5fd3JhcEhlaWdodCA9IG5ld0hlaWdodDtcblxuXHRcdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzQmVmb3JlU2l6ZVNldCcpO1xuXHRcdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzQWZ0ZXJTaXplUHJvcFNldCcpO1xuXG5cdFx0XHRcdHNlbGYuX3NsaWRlck92ZXJmbG93LmNzcyh7XG5cdFx0XHRcdFx0d2lkdGg6IHNlbGYuX3dyYXBXaWR0aCxcblx0XHRcdFx0XHRoZWlnaHQ6IHNlbGYuX3dyYXBIZWlnaHRcblx0XHRcdFx0fSk7XG5cblxuXHRcdFx0XHRzZWxmLl9zbGlkZVNpemUgPSAoc2VsZi5fc2xpZGVzSG9yaXpvbnRhbCA/IHNlbGYuX3dyYXBXaWR0aCA6IHNlbGYuX3dyYXBIZWlnaHQpICsgc2VsZi5zdC5zbGlkZXNTcGFjaW5nO1xuXHRcdFx0XHRcblxuXHRcdFx0XHRzZWxmLl9pbWFnZVBhZGRpbmcgPSBzZWxmLnN0LmltYWdlU2NhbGVQYWRkaW5nO1xuXHRcdFx0XHR2YXIgaXRlbSxcblx0XHRcdFx0XHRzbGlkZUl0ZW0sXG5cdFx0XHRcdFx0aSxcblx0XHRcdFx0XHRpbWc7XG5cdFx0XHRcdGZvcihpID0gMDsgaSA8IHNlbGYuc2xpZGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aXRlbSA9IHNlbGYuc2xpZGVzW2ldO1xuXHRcdFx0XHRcdGl0ZW0ucG9zaXRpb25TZXQgPSBmYWxzZTtcblxuXHRcdFx0XHRcdGlmKGl0ZW0gJiYgaXRlbS5pbWFnZXMgJiYgaXRlbS5pc0xvYWRlZCkge1xuXHRcdFx0XHRcdFx0aXRlbS5pc1JlbmRlcmVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRzZWxmLl9yZXNpemVJbWFnZShpdGVtKTtcblx0XHRcdFx0XHR9IFxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHNlbGYuX2Nsb25lSG9sZGVycykge1xuXHRcdFx0XHRcdGZvcihpID0gMDsgaSA8IHNlbGYuX2Nsb25lSG9sZGVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0aXRlbSA9IHNlbGYuX2Nsb25lSG9sZGVyc1tpXTtcblx0XHRcdFx0XHRcdGl0ZW0uaG9sZGVyLmNzcyhzZWxmLl9yZW9yZGVyUHJvcCwgKGl0ZW0uaWQgKyBzZWxmLl9pZE9mZnNldCkgKiBzZWxmLl9zbGlkZVNpemUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0c2VsZi5fdXBkYXRlQmxvY2tzQ29udGVudCgpO1xuXG5cdFx0XHRcdGlmKHNlbGYuX2lzTW92ZSkge1xuXHRcdFx0XHRcdGlmKHNlbGYuX3VzZUNTUzNUcmFuc2l0aW9ucykge1xuXHRcdFx0XHRcdFx0c2VsZi5fc2xpZGVzQ29udGFpbmVyLmNzcyhzZWxmLl92ZW5kb3JQcmVmICsgJ3RyYW5zaXRpb24tZHVyYXRpb24nLCAnMHMnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2VsZi5fc2V0UG9zaXRpb24oICgtc2VsZi5fcmVhbElkIC0gc2VsZi5faWRPZmZzZXQpICogc2VsZi5fc2xpZGVTaXplKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzT25VcGRhdGVOYXYnKTtcblx0XHRcdH1cblx0XHRcdHNlbGYuX3NsaWRlck9mZnNldCA9IHNlbGYuX3NsaWRlck92ZXJmbG93Lm9mZnNldCgpO1xuXHRcdFx0c2VsZi5fc2xpZGVyT2Zmc2V0ID0gc2VsZi5fc2xpZGVyT2Zmc2V0W3NlbGYuX3Jlb3JkZXJQcm9wXTtcblxuXG5cdFx0fSxcblx0XHQvL3NldFNsaWRlc09yaWVudGF0aW9uOiBmdW5jdGlvbihvcmllbnQpIHtcblx0XHRcdC8vIFRPRE9cblx0XHRcdC8vIHZhciBzZWxmID0gdGhpcyxcblx0XHRcdC8vIFx0bmV3SG9yID0gQm9vbGVhbihvcmllbnQgPT09ICdob3Jpem9udGFsJyk7XG5cdFx0XHQvLyBpZihzZWxmLl9zbGlkZXNIb3Jpem9udGFsICE9PSBuZXdIb3IpIHtcblx0XHRcdC8vIFx0c2VsZi5fc2V0UG9zaXRpb24oMCk7XG5cdFx0XHQvLyBcdGlmKHNlbGYuX2lzTW92ZSkge1xuXHRcdFx0Ly8gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzZWxmLl9zbGlkZUhvbGRlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdC8vIFx0XHRcdHNlbGYuX3NsaWRlSG9sZGVyc1tpXS5ibG9jay5jc3Moc2VsZi5fcmVvcmRlclByb3AsICcnKTtcblx0XHRcdC8vIFx0XHR9XG5cdFx0XHQvLyBcdH1cblx0XHRcdC8vIFx0c2VsZi5zbGlkZXIucmVtb3ZlQ2xhc3Moc2VsZi5fc2xpZGVzSG9yaXpvbnRhbCA/ICdyc0hvcicgOiAncnNWZXInKS5hZGRDbGFzcyhuZXdIb3IgPyAncnNIb3InIDogJ3JzVmVyJyk7XG5cdFx0XHQvLyBcdHNlbGYuX3NsaWRlc0hvcml6b250YWwgPSBuZXdIb3I7XG5cdFx0XHQvLyBcdHNlbGYuX3Jlb3JkZXJQcm9wID0gbmV3SG9yID8gJ2xlZnQnIDogJ3RvcCc7XG5cdFx0XHQvLyBcdHNlbGYudXBkYXRlU2xpZGVyU2l6ZSh0cnVlKTtcblx0XHRcdC8vIH1cblx0XHQvL30sXG5cdFx0LyoqXG5cdFx0ICogQWRkcyBzbGlkZVxuXHRcdCAqIEBwYXJhbSAge2pRdWVyeSBvYmplY3Qgb3IgcmF3IEhUTUx9IGh0bWx0ZXh0IFxuXHRcdCAqIEBwYXJhbSAge2ludH0gaW5kZXggICAgKG9wdGlvbmFsKSBJbmRleCB3aGVyZSBpdGVtIHNob3VsZCBiZSBhZGRlZCAobGFzdCBpdGVtIGlzIHJlbW92ZWQgb2Ygbm90IHNwZWNpZmllZClcblx0XHQgKi9cblx0XHRhcHBlbmRTbGlkZTogZnVuY3Rpb24oaHRtbHRleHQsIGluZGV4KSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdHBhcnNlZFNsaWRlID0gc2VsZi5fcGFyc2VOb2RlKGh0bWx0ZXh0KTtcblxuXHRcdFx0aWYoaXNOYU4oaW5kZXgpIHx8IGluZGV4ID4gc2VsZi5udW1TbGlkZXMpIHtcblx0XHRcdFx0aW5kZXggPSBzZWxmLm51bVNsaWRlcztcblx0XHRcdH1cblx0XHRcdHNlbGYuc2xpZGVzLnNwbGljZShpbmRleCwgMCwgcGFyc2VkU2xpZGUpO1xuXHRcdFx0c2VsZi5zbGlkZXNKUS5zcGxpY2UoaW5kZXgsIDAsICc8ZGl2IHN0eWxlPVwiJysgKHNlbGYuX2lzTW92ZSA/ICdwb3NpdGlvbjphYnNvbHV0ZTsnIDogc2VsZi5fb3BhY2l0eUNTUyApICsnXCIgY2xhc3M9XCJyc1NsaWRlXCI+PC9kaXY+Jyk7XG5cblx0XHRcdGlmKGluZGV4IDwgc2VsZi5jdXJyU2xpZGVJZCkge1xuXHRcdFx0XHRzZWxmLmN1cnJTbGlkZUlkKys7XG5cdFx0XHR9XG5cdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzT25BcHBlbmRTbGlkZScsIFtwYXJzZWRTbGlkZSwgaW5kZXhdKTtcblx0XHRcdFxuXHRcdFx0c2VsZi5fcmVmcmVzaFNsaWRlcyhpbmRleCk7XG5cblx0XHRcdGlmKGluZGV4ID09PSBzZWxmLmN1cnJTbGlkZUlkKSB7XG5cdFx0XHRcdHNlbGYuZXYudHJpZ2dlcigncnNBZnRlclNsaWRlQ2hhbmdlJyk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgc2xpZGVcblx0XHQgKiBAcGFyYW0gIHtpbnR9IEluZGV4IG9mIGl0ZW0gdGhhdCBzaG91bGQgYmUgcmVtb3ZlZFxuXHRcdCAqL1xuXHRcdHJlbW92ZVNsaWRlOiBmdW5jdGlvbihpbmRleCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRzbGlkZVRvUmVtb3ZlID0gc2VsZi5zbGlkZXNbaW5kZXhdO1xuXG5cdFx0XHRpZihzbGlkZVRvUmVtb3ZlKSB7XG5cdFx0XHRcdGlmKHNsaWRlVG9SZW1vdmUuaG9sZGVyKSB7XG5cdFx0XHRcdFx0c2xpZGVUb1JlbW92ZS5ob2xkZXIucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoaW5kZXggPCBzZWxmLmN1cnJTbGlkZUlkKSB7XG5cdFx0XHRcdFx0c2VsZi5jdXJyU2xpZGVJZC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNlbGYuc2xpZGVzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdHNlbGYuc2xpZGVzSlEuc3BsaWNlKGluZGV4LCAxKTtcblxuXHRcdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzT25SZW1vdmVTbGlkZScsIFtpbmRleF0pO1xuXHRcdFx0XHRzZWxmLl9yZWZyZXNoU2xpZGVzKGluZGV4KTtcblxuXHRcdFx0XHRpZihpbmRleCA9PT0gc2VsZi5jdXJyU2xpZGVJZCkge1xuXHRcdFx0XHRcdHNlbGYuZXYudHJpZ2dlcigncnNBZnRlclNsaWRlQ2hhbmdlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdF9yZWZyZXNoU2xpZGVzOiBmdW5jdGlvbihyZWZyZXNoSW5kZXgpIHtcblxuXHRcdFx0Ly8gdG9kbzogb3B0aW1pemUgdGhpcyBzdHVmZlxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR2YXIgb2xkTnVtU2xpZGVzID0gc2VsZi5udW1TbGlkZXM7XG5cdFx0XHR2YXIgbnVtTG9vcHMgPSBzZWxmLl9yZWFsSWQgPD0gMCA/IDAgOiBNYXRoLmZsb29yKHNlbGYuX3JlYWxJZCAvIG9sZE51bVNsaWRlcyk7XG5cblx0XHRcdHNlbGYubnVtU2xpZGVzID0gc2VsZi5zbGlkZXMubGVuZ3RoO1xuXHRcdFx0aWYoc2VsZi5udW1TbGlkZXMgPT09IDApIHtcblx0XHRcdFx0c2VsZi5jdXJyU2xpZGVJZCA9IHNlbGYuX2lkT2Zmc2V0ID0gc2VsZi5fcmVhbElkID0gMDtcblx0XHRcdFx0c2VsZi5jdXJyU2xpZGUgPSBzZWxmLl9vbGRIb2xkZXIgPSBudWxsO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2VsZi5fcmVhbElkID0gbnVtTG9vcHMgKiBzZWxmLm51bVNsaWRlcyArIHNlbGYuY3VyclNsaWRlSWQ7XG5cdFx0XHR9XG5cblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzZWxmLm51bVNsaWRlczsgaSsrKSB7XG5cdFx0XHRcdHNlbGYuc2xpZGVzW2ldLmlkID0gaTtcblx0XHRcdH1cblxuXHRcdFx0c2VsZi5jdXJyU2xpZGUgPSBzZWxmLnNsaWRlc1tzZWxmLmN1cnJTbGlkZUlkXTtcblx0XHRcdHNlbGYuX2N1cnJIb2xkZXIgPSBzZWxmLnNsaWRlc0pRW3NlbGYuY3VyclNsaWRlSWRdO1xuXG5cdFx0XHRpZihzZWxmLmN1cnJTbGlkZUlkID49IHNlbGYubnVtU2xpZGVzKSB7XG5cdFx0XHRcdHNlbGYuZ29UbyhzZWxmLm51bVNsaWRlcyAtIDEpO1xuXHRcdFx0fSBlbHNlIGlmKHNlbGYuY3VyclNsaWRlSWQgPCAwKSB7XG5cdFx0XHRcdHNlbGYuZ29UbygwKTtcblx0XHRcdH1cblxuXHRcdFx0c2VsZi5fcmVmcmVzaE51bVByZWxvYWRJbWFnZXMoKTtcblxuXHRcdFx0aWYoc2VsZi5faXNNb3ZlICYmIHNlbGYuX2xvb3ApIHtcblx0XHRcdFx0c2VsZi5fc2xpZGVzQ29udGFpbmVyLmNzcygoc2VsZi5fdmVuZG9yUHJlZiArIHNlbGYuX1REKSwgJzBtcycpO1xuXHRcdFx0fVxuXHRcdFx0aWYoc2VsZi5fcmVmcmVzaFNsaWRlc1RpbWVvdXQpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHNlbGYuX3JlZnJlc2hTbGlkZXNUaW1lb3V0KTtcblx0XHRcdH1cblxuXG5cdFx0XHRzZWxmLl9yZWZyZXNoU2xpZGVzVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmKHNlbGYuX2lzTW92ZSkge1xuXHRcdFx0XHRcdHNlbGYuX3NldFBvc2l0aW9uKCAoLXNlbGYuX3JlYWxJZCAtIHNlbGYuX2lkT2Zmc2V0KSAqIHNlbGYuX3NsaWRlU2l6ZSk7XHRcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLl91cGRhdGVCbG9ja3NDb250ZW50KCk7XG5cdFx0XHRcdGlmKCFzZWxmLl9pc01vdmUpIHtcblx0XHRcdFx0XHRzZWxmLl9jdXJySG9sZGVyLmNzcyh7XG5cdFx0XHRcdFx0XHRkaXNwbGF5OiAnYmxvY2snLFxuXHRcdFx0XHRcdFx0b3BhY2l0eTogMVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0fSwgMTQpO1xuXHRcdFx0c2VsZi5ldi50cmlnZ2VyKCdyc09uVXBkYXRlTmF2Jyk7XG5cdFx0fSxcblx0XHRfc2V0R3JhYkN1cnNvcjpmdW5jdGlvbigpIHtcdFxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0aWYoc2VsZi5faGFzRHJhZyAmJiBzZWxmLl9pc01vdmUpIHtcblx0XHRcdFx0aWYoc2VsZi5fZ3JhYkN1cnNvcikge1xuXHRcdFx0XHRcdHNlbGYuX3NsaWRlck92ZXJmbG93LmNzcygnY3Vyc29yJywgc2VsZi5fZ3JhYkN1cnNvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZi5fc2xpZGVyT3ZlcmZsb3cucmVtb3ZlQ2xhc3MoJ2dyYWJiaW5nLWN1cnNvcicpO1xuXHRcdFx0XHRcdHNlbGYuX3NsaWRlck92ZXJmbG93LmFkZENsYXNzKCdncmFiLWN1cnNvcicpO1x0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdF9zZXRHcmFiYmluZ0N1cnNvcjpmdW5jdGlvbigpIHtcdFx0XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRpZihzZWxmLl9oYXNEcmFnICYmIHNlbGYuX2lzTW92ZSkge1xuXHRcdFx0XHRpZihzZWxmLl9ncmFiYmluZ0N1cnNvcikge1xuXHRcdFx0XHRcdHNlbGYuX3NsaWRlck92ZXJmbG93LmNzcygnY3Vyc29yJywgc2VsZi5fZ3JhYmJpbmdDdXJzb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuX3NsaWRlck92ZXJmbG93LnJlbW92ZUNsYXNzKCdncmFiLWN1cnNvcicpO1xuXHRcdFx0XHRcdHNlbGYuX3NsaWRlck92ZXJmbG93LmFkZENsYXNzKCdncmFiYmluZy1jdXJzb3InKTtcdFxuXHRcdFx0XHR9XHRcblx0XHRcdH1cblx0XHR9LFxuXHRcdG5leHQ6IGZ1bmN0aW9uKG5vdFVzZXJBY3Rpb24pIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHNlbGYuX21vdmVUbygnbmV4dCcsICBzZWxmLnN0LnRyYW5zaXRpb25TcGVlZCwgdHJ1ZSwgIW5vdFVzZXJBY3Rpb24pO1xuXHRcdH0sXG5cdFx0cHJldjogZnVuY3Rpb24obm90VXNlckFjdGlvbikge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0c2VsZi5fbW92ZVRvKCdwcmV2Jywgc2VsZi5zdC50cmFuc2l0aW9uU3BlZWQsIHRydWUsICFub3RVc2VyQWN0aW9uKTtcblx0XHR9LFxuXHRcdF9tb3ZlVG86ZnVuY3Rpb24odHlwZSwgIHNwZWVkLCBpbk91dEVhc2luZywgdXNlckFjdGlvbiwgZnJvbVN3aXBlKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdG5ld1Bvcyxcblx0XHRcdFx0ZGlmZmVyZW5jZSxcblx0XHRcdFx0aTtcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzQmVmb3JlTW92ZScsIFt0eXBlLCB1c2VyQWN0aW9uXSk7XG5cdFx0XHRpZih0eXBlID09PSAnbmV4dCcpIHtcblx0XHRcdFx0bmV3SXRlbUlkID0gc2VsZi5jdXJyU2xpZGVJZCsxO1xuXHRcdFx0fSBlbHNlIGlmKHR5cGUgPT09ICdwcmV2Jykge1xuXHRcdFx0XHRuZXdJdGVtSWQgPSBzZWxmLmN1cnJTbGlkZUlkLTE7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXdJdGVtSWQgPSB0eXBlID0gcGFyc2VJbnQodHlwZSwgMTApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZighc2VsZi5fbG9vcCkge1xuXHRcdFx0XHRpZihuZXdJdGVtSWQgPCAwKSB7XG5cdFx0XHRcdFx0c2VsZi5fZG9CYWNrQW5kRm9ydGhBbmltKCdsZWZ0JywgIXVzZXJBY3Rpb24pO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmKG5ld0l0ZW1JZCA+PSBzZWxmLm51bVNsaWRlcyApIHtcblx0XHRcdFx0XHRzZWxmLl9kb0JhY2tBbmRGb3J0aEFuaW0oJ3JpZ2h0JywgIXVzZXJBY3Rpb24pO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZihzZWxmLl9pc0FuaW1hdGluZykge1xuXHRcdFx0XHRzZWxmLl9zdG9wQW5pbWF0aW9uKHRydWUpO1xuXHRcdFx0XHRpbk91dEVhc2luZyA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRkaWZmZXJlbmNlID0gbmV3SXRlbUlkIC0gc2VsZi5jdXJyU2xpZGVJZDtcblxuXG5cblx0XHRcdHNlbGYuX3ByZXZTbGlkZUlkID0gc2VsZi5jdXJyU2xpZGVJZDtcblx0XHRcdHZhciBwcmV2SWQgPSBzZWxmLmN1cnJTbGlkZUlkO1xuXHRcdFx0dmFyIGlkID0gc2VsZi5jdXJyU2xpZGVJZCArIGRpZmZlcmVuY2U7XG5cdFx0XHR2YXIgcmVhbElkID0gc2VsZi5fcmVhbElkO1xuXHRcdFx0dmFyIHRlbXA7XG5cdFx0XHR2YXIgZGVsYXllZDtcblx0XHRcdGlmKHNlbGYuX2xvb3ApIHtcblx0XHRcdFx0aWQgPSBzZWxmLl91cGRhdGVCbG9ja3NDb250ZW50KGZhbHNlLCBpZCk7XG5cdFx0XHRcdHJlYWxJZCArPSBkaWZmZXJlbmNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVhbElkID0gaWQ7XG5cdFx0XHR9XG5cdFx0XHRzZWxmLl9uZXdTbGlkZUlkID0gaWQ7XG5cblx0XHRcdHNlbGYuX29sZEhvbGRlciA9IHNlbGYuc2xpZGVzSlFbc2VsZi5jdXJyU2xpZGVJZF07XG5cblx0XHRcdFxuXHRcdFx0c2VsZi5fcmVhbElkID0gcmVhbElkO1xuXHRcdFx0c2VsZi5jdXJyU2xpZGVJZCA9IHNlbGYuX25ld1NsaWRlSWQ7XG5cblx0XHRcdHNlbGYuY3VyclNsaWRlID0gc2VsZi5zbGlkZXNbc2VsZi5jdXJyU2xpZGVJZF07XG5cdFx0XHRzZWxmLl9jdXJySG9sZGVyID0gc2VsZi5zbGlkZXNKUVtzZWxmLmN1cnJTbGlkZUlkXTtcblxuXHRcdFx0XG5cdFx0XHR2YXIgY2hlY2tEaXN0ID0gc2VsZi5zdC5zbGlkZXNEaWZmO1xuXHRcdFx0dmFyIG5leHQgPSBCb29sZWFuKGRpZmZlcmVuY2UgPiAwKTtcblx0XHRcdHZhciBhYnNEaWZmID0gTWF0aC5hYnMoZGlmZmVyZW5jZSk7XG5cdFx0XHR2YXIgZzEgPSBNYXRoLmZsb29yKCBwcmV2SWQgLyBzZWxmLl9udW1QcmVsb2FkSW1hZ2VzKTtcblx0XHRcdHZhciBnMiA9IE1hdGguZmxvb3IoICggcHJldklkICsgKG5leHQgPyBjaGVja0Rpc3QgOiAtY2hlY2tEaXN0ICApICkgLyBzZWxmLl9udW1QcmVsb2FkSW1hZ2VzKTtcblx0XHRcdHZhciBiaWdnZXN0ID0gbmV4dCA/IE1hdGgubWF4KGcxLGcyKSA6IE1hdGgubWluKGcxLGcyKTtcblx0XHRcdHZhciBiaWdnZXN0SWQgPSBiaWdnZXN0ICogc2VsZi5fbnVtUHJlbG9hZEltYWdlcyArICAoIG5leHQgPyAoc2VsZi5fbnVtUHJlbG9hZEltYWdlcyAtIDEpIDogMCApO1xuXHRcdFx0aWYoYmlnZ2VzdElkID4gc2VsZi5udW1TbGlkZXMgLSAxKSB7XG5cdFx0XHRcdGJpZ2dlc3RJZCA9IHNlbGYubnVtU2xpZGVzIC0gMTtcblx0XHRcdH0gZWxzZSBpZihiaWdnZXN0SWQgPCAwKSB7XG5cdFx0XHRcdGJpZ2dlc3RJZCA9IDA7XG5cdFx0XHR9XG5cdFx0XHR2YXIgdG9MYXN0ID0gIG5leHQgPyAoYmlnZ2VzdElkIC0gcHJldklkKSA6ICAocHJldklkIC0gYmlnZ2VzdElkKTtcblx0XHRcdGlmKHRvTGFzdCA+IHNlbGYuX251bVByZWxvYWRJbWFnZXMpIHtcblx0XHRcdFx0dG9MYXN0ID0gc2VsZi5fbnVtUHJlbG9hZEltYWdlcztcblx0XHRcdH1cblx0XHRcdGlmKGFic0RpZmYgPiB0b0xhc3QgKyBjaGVja0Rpc3QpIHtcblx0XHRcdFx0c2VsZi5faWRPZmZzZXQgKz0gICggYWJzRGlmZiAtICh0b0xhc3QgKyBjaGVja0Rpc3QpICkgKiAoIG5leHQgPyAtMSA6IDEgKTtcblx0XHRcdFx0c3BlZWQgPSBzcGVlZCAqIDEuNDtcblx0XHRcdFx0Zm9yKGkgPSAwOyBpIDwgc2VsZi5udW1TbGlkZXM7IGkrKykge1xuXHRcdFx0XHRcdHNlbGYuc2xpZGVzW2ldLnBvc2l0aW9uU2V0ID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHNlbGYuX2N1cnJBbmltU3BlZWQgPSBzcGVlZDtcblxuXHRcdFx0c2VsZi5fdXBkYXRlQmxvY2tzQ29udGVudCh0cnVlKTtcblx0XHRcdGlmKCFmcm9tU3dpcGUpIHtcblx0XHRcdFx0ZGVsYXllZCA9IHRydWU7XG5cdFx0XHR9XG5cblxuXHRcdFx0bmV3UG9zID0gKC1yZWFsSWQgLSBzZWxmLl9pZE9mZnNldCkgKiBzZWxmLl9zbGlkZVNpemU7XG5cblx0XHRcdFxuXG5cdFx0XHRpZihkZWxheWVkKSB7XG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5faXNXb3JraW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0c2VsZi5fYW5pbWF0ZVRvKG5ld1BvcywgdHlwZSwgZmFsc2UsIGluT3V0RWFzaW5nKTtcblx0XHRcdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzT25VcGRhdGVOYXYnKTtcblx0XHRcdFx0fSwgMCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLl9hbmltYXRlVG8obmV3UG9zLCB0eXBlLCBmYWxzZSwgaW5PdXRFYXNpbmcpO1xuXHRcdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzT25VcGRhdGVOYXYnKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRmdW5jdGlvbiBpc1NldFRvQ3VycmVudCh0ZXN0SWQpIHtcblx0XHRcdFx0aWYodGVzdElkIDwgMCkge1xuXHRcdFx0XHRcdHRlc3RJZCA9IHNlbGYubnVtU2xpZGVzICsgdGVzdElkO1xuXHRcdFx0XHR9IGVsc2UgaWYodGVzdElkID4gc2VsZi5udW1TbGlkZXMgLSAxKSB7XG5cdFx0XHRcdFx0dGVzdElkID0gdGVzdElkIC0gc2VsZi5udW1TbGlkZXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYodGVzdElkICE9PSBzZWxmLmN1cnJTbGlkZUlkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0fSxcblx0XHRfdXBkYXRlQXJyb3dzTmF2OiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0YXJyRGlzQ2xhc3MgPSAncnNBcnJvd0Rpc2FibGVkJztcblx0XHRcdGlmKHNlbGYuc3QuYXJyb3dzTmF2KSB7XG5cdFx0XHRcdGlmKHNlbGYubnVtU2xpZGVzIDw9IDEpIHtcblx0XHRcdFx0XHRzZWxmLl9hcnJvd0xlZnQuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcblx0XHRcdFx0XHRzZWxmLl9hcnJvd1JpZ2h0LmNzcygnZGlzcGxheScsICdub25lJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuX2Fycm93TGVmdC5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblx0XHRcdFx0XHRzZWxmLl9hcnJvd1JpZ2h0LmNzcygnZGlzcGxheScsICdibG9jaycpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCFzZWxmLl9sb29wICYmICFzZWxmLnN0Lmxvb3BSZXdpbmQpIHtcblx0XHRcdFx0XHRpZihzZWxmLmN1cnJTbGlkZUlkID09PSAwKSB7XG5cdFx0XHRcdFx0XHRzZWxmLl9hcnJvd0xlZnQuYWRkQ2xhc3MoYXJyRGlzQ2xhc3MpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxmLl9hcnJvd0xlZnQucmVtb3ZlQ2xhc3MoYXJyRGlzQ2xhc3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihzZWxmLmN1cnJTbGlkZUlkID09PSBzZWxmLm51bVNsaWRlcyAtIDEpIHtcblx0XHRcdFx0XHRcdHNlbGYuX2Fycm93UmlnaHQuYWRkQ2xhc3MoYXJyRGlzQ2xhc3MpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxmLl9hcnJvd1JpZ2h0LnJlbW92ZUNsYXNzKGFyckRpc0NsYXNzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdF9hbmltYXRlVG86ZnVuY3Rpb24ocG9zLCBkaXIsICBsb2FkQWxsLCBpbk91dEVhc2luZywgY3VzdG9tQ29tcGxldGUpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0bW92ZVByb3AsXG5cdFx0XHRcdG9sZEJsb2NrLFxuXHRcdFx0XHRhbmltQmxvY2s7XG5cblx0XHRcdHZhciBhbmltT2JqID0ge307XG5cdFx0XHRpZihpc05hTihzZWxmLl9jdXJyQW5pbVNwZWVkKSkge1xuXHRcdFx0XHRzZWxmLl9jdXJyQW5pbVNwZWVkID0gNDAwO1xuXHRcdFx0fSBcblx0XHRcdFxuXG5cblx0XHRcdHNlbGYuX3NQb3NpdGlvbiA9IHNlbGYuX2N1cnJSZW5kZXJQb3NpdGlvbiA9IHBvcztcblxuXHRcdFx0c2VsZi5ldi50cmlnZ2VyKCdyc0JlZm9yZUFuaW1TdGFydCcpO1xuXG5cdFx0XHRpZighc2VsZi5fdXNlQ1NTM1RyYW5zaXRpb25zKSB7XG5cdFx0XHRcdGlmKHNlbGYuX2lzTW92ZSkge1xuXHRcdFx0XHRcdGFuaW1PYmpbc2VsZi5fc2xpZGVzSG9yaXpvbnRhbCA/IHNlbGYuX3hQcm9wIDogc2VsZi5feVByb3BdID0gcG9zICsgJ3B4JztcblxuXG5cdFx0XHRcdFx0c2VsZi5fc2xpZGVzQ29udGFpbmVyLmFuaW1hdGUoYW5pbU9iaiwgc2VsZi5fY3VyckFuaW1TcGVlZCwgLyonZWFzZU91dFF1YXJ0JyovIGluT3V0RWFzaW5nID8gc2VsZi5zdC5lYXNlSW5PdXQgOiBzZWxmLnN0LmVhc2VPdXQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG9sZEJsb2NrID0gc2VsZi5fb2xkSG9sZGVyO1xuXHRcdFx0XHRcdGFuaW1CbG9jayA9IHNlbGYuX2N1cnJIb2xkZXI7XHRcdFx0XHRcdFxuXG5cdFx0XHRcdFx0YW5pbUJsb2NrLnN0b3AodHJ1ZSwgdHJ1ZSkuY3NzKHtcblx0XHRcdFx0XHRcdG9wYWNpdHk6IDAsXG5cdFx0XHRcdFx0XHRkaXNwbGF5OiAnYmxvY2snLFxuXHRcdFx0XHRcdFx0ekluZGV4OiBzZWxmLl9mYWRlWkluZGV4XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0c2VsZi5fY3VyckFuaW1TcGVlZCA9IHNlbGYuc3QudHJhbnNpdGlvblNwZWVkO1xuXHRcdFx0XHRcdGFuaW1CbG9jay5hbmltYXRlKHtvcGFjaXR5OiAxfSwgc2VsZi5fY3VyckFuaW1TcGVlZCwgc2VsZi5zdC5lYXNlSW5PdXQpO1xuXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0cygpO1xuXHRcdFx0XHRcdGlmKG9sZEJsb2NrKSB7XG5cdCBcdFx0XHRcdFx0b2xkQmxvY2suZGF0YSgncnNUaW1lb3V0Jywgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0b2xkQmxvY2suc3RvcCh0cnVlLCB0cnVlKS5jc3Moe1xuXHRcdFx0XHRcdFx0XHRcdG9wYWNpdHk6IDAsXG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGxheTogJ25vbmUnLFxuXHRcdFx0XHRcdFx0XHRcdHpJbmRleDogMFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0sIHNlbGYuX2N1cnJBbmltU3BlZWQgKyA2MCkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZihzZWxmLl9pc01vdmUpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRcblxuXHRcdFx0XHRcdFx0c2VsZi5fY3VyckFuaW1TcGVlZCA9IHBhcnNlSW50KHNlbGYuX2N1cnJBbmltU3BlZWQpO1xuXHRcdFx0XHRcdFx0dmFyIHRkID0gc2VsZi5fdmVuZG9yUHJlZiArIHNlbGYuX1REO1xuXHRcdFx0XHRcdFx0dmFyIHR0ZiA9IHNlbGYuX3ZlbmRvclByZWYgKyBzZWxmLl9UVEY7XG5cblx0XHRcdFx0XHRcdGFuaW1PYmpbdGRdID0gc2VsZi5fY3VyckFuaW1TcGVlZCsnbXMnO1xuXHRcdFx0XHRcdFx0YW5pbU9ialt0dGZdID0gaW5PdXRFYXNpbmcgPyAkLnJzQ1NTM0Vhc2luZ1tzZWxmLnN0LmVhc2VJbk91dF0gOiAkLnJzQ1NTM0Vhc2luZ1tzZWxmLnN0LmVhc2VPdXRdO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRzZWxmLl9zbGlkZXNDb250YWluZXIuY3NzKGFuaW1PYmopO1xuXHRcdFx0XHRcdGlmKGluT3V0RWFzaW5nIHx8ICFzZWxmLmhhc1RvdWNoKSB7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLl9zZXRQb3NpdGlvbihwb3MpO1xuXHRcdFx0XHRcdFx0fSwgNSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuX3NldFBvc2l0aW9uKHBvcyk7XG5cdFx0XHRcdFx0fSBcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vc2VsZi5fY3VyckFuaW1TcGVlZCA9IDEwXG5cdFx0XHRcdFx0c2VsZi5fY3VyckFuaW1TcGVlZCA9IHNlbGYuc3QudHJhbnNpdGlvblNwZWVkO1xuXHRcdFx0XHRcdG9sZEJsb2NrID0gc2VsZi5fb2xkSG9sZGVyO1xuXHRcdFx0XHRcdGFuaW1CbG9jayA9IHNlbGYuX2N1cnJIb2xkZXI7XHRcdFxuXHRcdFx0XHRcdGlmKGFuaW1CbG9jay5kYXRhKCdyc1RpbWVvdXQnKSkge1xuXHRcdFx0XHRcdFx0YW5pbUJsb2NrLmNzcygnb3BhY2l0eScsIDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjbGVhclRpbWVvdXRzKCk7XG5cdFx0XHRcdFx0aWYob2xkQmxvY2spIHtcblx0XHRcdFx0XHRcdC8vaWYob2xkQmxvY2spXG5cdFx0XHRcdFx0XHRvbGRCbG9jay5kYXRhKCdyc1RpbWVvdXQnLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRhbmltT2JqW3NlbGYuX3ZlbmRvclByZWYgKyBzZWxmLl9URF0gPSAnMG1zJztcblx0XHRcdFx0XHRcdFx0YW5pbU9iai56SW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHRhbmltT2JqLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRcdFx0XHRcdG9sZEJsb2NrLmRhdGEoJ3JzVGltZW91dCcsICcnKTtcblx0XHRcdFx0XHRcdFx0b2xkQmxvY2suY3NzKGFuaW1PYmopO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdG9sZEJsb2NrLmNzcygnb3BhY2l0eScsIDApO1xuXHRcdFx0XHRcdFx0XHR9LCAxNik7XG5cdFx0XHRcdFx0XHR9LCBzZWxmLl9jdXJyQW5pbVNwZWVkICsgNjApICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YW5pbU9iai5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdFx0XHRhbmltT2JqLnpJbmRleCA9IHNlbGYuX2ZhZGVaSW5kZXg7XG5cdFx0XHRcdFx0YW5pbU9iai5vcGFjaXR5ID0gMDtcblx0XHRcdFx0XHRhbmltT2JqW3NlbGYuX3ZlbmRvclByZWYgKyBzZWxmLl9URF0gPSAnMG1zJztcblx0XHRcdFx0XHRhbmltT2JqW3NlbGYuX3ZlbmRvclByZWYgKyBzZWxmLl9UVEZdID0gJC5yc0NTUzNFYXNpbmdbc2VsZi5zdC5lYXNlSW5PdXRdO1xuXHRcdFx0XHRcdGFuaW1CbG9jay5jc3MoYW5pbU9iaik7XG5cdFx0XHRcdFx0YW5pbUJsb2NrLmRhdGEoJ3JzVGltZW91dCcsIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQvL2FuaW1CbG9jay5jc3MoJ29wYWNpdHknLCAwKTtcblx0XHRcdFx0XHRcdGFuaW1CbG9jay5jc3Moc2VsZi5fdmVuZG9yUHJlZiArIHNlbGYuX1RELCAgc2VsZi5fY3VyckFuaW1TcGVlZCsnbXMnKTtcblxuXHRcdFx0XHRcdFx0Ly9vbGRCbG9jay5jc3Moc2VsZi5fdmVuZG9yUHJlZiArIHNlbGYuX1RELCAgJzBtcycpO1xuXHRcdFx0XHRcdFx0YW5pbUJsb2NrLmRhdGEoJ3JzVGltZW91dCcsIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGFuaW1CbG9jay5jc3MoJ29wYWNpdHknLCAxKTtcblx0XHRcdFx0XHRcdFx0YW5pbUJsb2NrLmRhdGEoJ3JzVGltZW91dCcsICcnKTtcblx0XHRcdFx0XHRcdH0sIDIwKSApO1xuXHRcdFx0XHRcdH0sIDIwKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRzZWxmLl9pc0FuaW1hdGluZyA9IHRydWU7XG5cdFx0XHRpZihzZWxmLmxvYWRpbmdUaW1lb3V0KSB7XG5cdFx0XHRcdGNsZWFyVGltZW91dChzZWxmLmxvYWRpbmdUaW1lb3V0KTtcblx0XHRcdH1cblx0XHRcdGlmKGN1c3RvbUNvbXBsZXRlKSB7XG5cdFx0XHRcdHNlbGYubG9hZGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYubG9hZGluZ1RpbWVvdXQgPSBudWxsO1xuXHRcdFx0XHRcdGN1c3RvbUNvbXBsZXRlLmNhbGwoKTtcblxuXHRcdFx0XHR9LCBzZWxmLl9jdXJyQW5pbVNwZWVkICsgNjApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2VsZi5sb2FkaW5nVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5sb2FkaW5nVGltZW91dCA9IG51bGw7XG5cdFx0XHRcdFx0c2VsZi5fYW5pbWF0aW9uQ29tcGxldGUoZGlyKTtcblx0XHRcdFx0fSwgc2VsZi5fY3VyckFuaW1TcGVlZCArIDYwKTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gY2xlYXJUaW1lb3V0cygpIHtcblx0XHRcdFx0dmFyIHQ7XG5cdFx0XHRcdGlmKG9sZEJsb2NrKSB7XG5cdFx0XHRcdFx0dCA9IG9sZEJsb2NrLmRhdGEoJ3JzVGltZW91dCcpO1xuXHRcdFx0XHRcdGlmKHQpIHtcblx0XHRcdFx0XHRcdGlmKG9sZEJsb2NrICE9PSBhbmltQmxvY2spIHtcblx0XHRcdFx0XHRcdFx0b2xkQmxvY2suY3NzKHtcblx0XHRcdFx0XHRcdFx0XHRcdG9wYWNpdHk6IDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRkaXNwbGF5OiAnbm9uZScsXG5cdFx0XHRcdFx0XHRcdFx0XHR6SW5kZXg6IDBcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCh0KTtcblx0XHRcdFx0XHRcdG9sZEJsb2NrLmRhdGEoJ3JzVGltZW91dCcsICcnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdHQgPSBhbmltQmxvY2suZGF0YSgncnNUaW1lb3V0Jyk7XG5cdFx0XHRcdGlmKHQpIHtcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQodCk7XG5cdFx0XHRcdFx0YW5pbUJsb2NrLmRhdGEoJ3JzVGltZW91dCcsICcnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0X3N0b3BBbmltYXRpb246IGZ1bmN0aW9uKG5vQ1NTMykge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0c2VsZi5faXNBbmltYXRpbmcgPSBmYWxzZTtcblx0XHRcdGNsZWFyVGltZW91dChzZWxmLmxvYWRpbmdUaW1lb3V0KTtcblx0XHRcdGlmKHNlbGYuX2lzTW92ZSkge1xuXG5cdFx0XHRcdGlmKCFzZWxmLl91c2VDU1MzVHJhbnNpdGlvbnMpIHtcblx0XHRcdFx0XHRzZWxmLl9zbGlkZXNDb250YWluZXIuc3RvcCh0cnVlKTtcblx0XHRcdFx0XHRzZWxmLl9zUG9zaXRpb24gPSBwYXJzZUludChzZWxmLl9zbGlkZXNDb250YWluZXIuY3NzKHNlbGYuX3hQcm9wKSwgMTApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCFub0NTUzMpIHtcblx0XHRcdFx0XHR2YXIgb2xkUG9zID0gc2VsZi5fc1Bvc2l0aW9uO1xuXHRcdFx0XHRcdHZhciBuZXdQb3MgPSAgc2VsZi5fY3VyclJlbmRlclBvc2l0aW9uID0gc2VsZi5fZ2V0VHJhbnNmb3JtUHJvcCgpO1xuXHRcdFx0XHRcdHNlbGYuX3NsaWRlc0NvbnRhaW5lci5jc3MoKHNlbGYuX3ZlbmRvclByZWYgKyBzZWxmLl9URCksICcwbXMnKTtcblx0XHRcdFx0XHRpZihvbGRQb3MgIT09bmV3UG9zKSB7XG5cdFx0XHRcdFx0XHRzZWxmLl9zZXRQb3NpdGlvbihuZXdQb3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8ga3VuZyBmdVxuXHRcdFx0XHRpZihzZWxmLl9mYWRlWkluZGV4ID4gMjApIHtcblx0XHRcdFx0XHRzZWxmLl9mYWRlWkluZGV4ID0gMTA7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZi5fZmFkZVpJbmRleCsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdFxuXHRcdH0sXG5cdFx0Ly8gVGhhbmtzIHRvIEBiZW5wYmFybmV0dFxuXHRcdF9nZXRUcmFuc2Zvcm1Qcm9wOmZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdHRyYW5zZm9ybSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHNlbGYuX3NsaWRlc0NvbnRhaW5lci5nZXQoMCksIG51bGwpLmdldFByb3BlcnR5VmFsdWUoc2VsZi5fdmVuZG9yUHJlZiArICd0cmFuc2Zvcm0nKSxcdFx0XHRcblx0XHRcdFx0ZXhwbG9kZWRNYXRyaXggPSB0cmFuc2Zvcm0ucmVwbGFjZSgvXm1hdHJpeFxcKC9pLCAnJykuc3BsaXQoLywgfFxcKSQvZyksXG5cdFx0XHRcdGlzTWF0cml4M2QgPSAoZXhwbG9kZWRNYXRyaXhbMF0uaW5kZXhPZignbWF0cml4M2QnKSA9PT0gMCk7XG5cdFx0XHRyZXR1cm4gcGFyc2VJbnQoZXhwbG9kZWRNYXRyaXhbKHNlbGYuX3NsaWRlc0hvcml6b250YWwgPyAoaXNNYXRyaXgzZCA/IDEyIDogNCkgOiAoaXNNYXRyaXgzZCA/IDEzIDogNSkgKV0sIDEwKTtcblx0XHR9LFxuXHRcdF9nZXRDU1MzUHJvcDogZnVuY3Rpb24ocG9zLCBob3IpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHJldHVybiBzZWxmLl91c2VDU1MzVHJhbnNpdGlvbnMgPyBzZWxmLl90UHJlZjEgKyAoIGhvciA/IChwb3MgKyBzZWxmLl90UHJlZjIgKyAwKSA6ICgwICsgc2VsZi5fdFByZWYyICsgcG9zKSApICsgc2VsZi5fdFByZWYzIDogcG9zO1xuXHRcdH0sXG5cdFx0X2FuaW1hdGlvbkNvbXBsZXRlOiBmdW5jdGlvbihkaXIpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdGlmKCFzZWxmLl9pc01vdmUpIHtcblx0XHRcdFx0c2VsZi5fY3VyckhvbGRlci5jc3MoJ3otaW5kZXgnLCAwKTtcblx0XHRcdFx0c2VsZi5fZmFkZVpJbmRleCA9IDEwO1xuXHRcdFx0fVxuXHRcdFx0c2VsZi5faXNBbmltYXRpbmcgPSBmYWxzZTtcblx0XHRcdFxuXHRcdFx0c2VsZi5zdGF0aWNTbGlkZUlkID0gc2VsZi5jdXJyU2xpZGVJZDtcblx0XHRcdHNlbGYuX3VwZGF0ZUJsb2Nrc0NvbnRlbnQoKTtcblxuXG5cdFx0XHRzZWxmLl9zbGlkZXNNb3ZlZCA9IGZhbHNlO1xuXHRcdFx0XG5cdFx0XHRzZWxmLmV2LnRyaWdnZXIoJ3JzQWZ0ZXJTbGlkZUNoYW5nZScpO1xuXHRcdH0sXG5cdFx0X2RvQmFja0FuZEZvcnRoQW5pbTpmdW5jdGlvbih0eXBlLCB1c2VyQWN0aW9uKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdG5ld1BvcyA9ICgtc2VsZi5fcmVhbElkIC0gc2VsZi5faWRPZmZzZXQpICogc2VsZi5fc2xpZGVTaXplO1xuXG5cdFx0XHRpZihzZWxmLm51bVNsaWRlcyA9PT0gMCB8fCBzZWxmLl9pc0FuaW1hdGluZykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9IFxuXHRcdFx0aWYoc2VsZi5zdC5sb29wUmV3aW5kKSB7XG5cdFx0XHRcdHNlbGYuZ29Ubyh0eXBlID09PSAnbGVmdCcgPyBzZWxmLm51bVNsaWRlcyAtIDEgOiAwLCB1c2VyQWN0aW9uKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZihzZWxmLl9pc01vdmUpIHtcblx0XHRcdFx0c2VsZi5fY3VyckFuaW1TcGVlZCA9IDIwMDtcblxuXHRcdFx0XHRmdW5jdGlvbiBhbGxBbmltQ29tcGxldGUoKSB7XG5cdFx0XHRcdFx0c2VsZi5faXNBbmltYXRpbmcgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRmdW5jdGlvbiBmaXJzdEFuaW1Db21wbGV0ZSgpIHtcblx0XHRcdFx0XHRzZWxmLl9pc0FuaW1hdGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdHNlbGYuX2FuaW1hdGVUbyhuZXdQb3MsICcnLCBmYWxzZSwgdHJ1ZSwgYWxsQW5pbUNvbXBsZXRlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLl9hbmltYXRlVG8obmV3UG9zICsgKHR5cGUgPT09ICdsZWZ0JyA/IDMwIDogLTMwKSwnJywgZmFsc2UsIHRydWUsIGZpcnN0QW5pbUNvbXBsZXRlKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdH0sXG5cdFx0X3Jlc2l6ZUltYWdlOmZ1bmN0aW9uKHNsaWRlT2JqZWN0LCB1c2VDbG9uZSkge1xuXG5cdFx0XHR2YXIgaXNSb290ID0gdHJ1ZTtcblx0XHRcdGlmKHNsaWRlT2JqZWN0LmlzUmVuZGVyZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGltZyA9IHNsaWRlT2JqZWN0LmNvbnRlbnQ7XG5cdFx0XHR2YXIgY2xhc3NUb0ZpbmQgPSAncnNNYWluU2xpZGVJbWFnZSc7XG5cdFx0XHR2YXIgaXNWaWRlbztcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0aW1nQWxpZ25DZW50ZXIgPSBzZWxmLnN0LmltYWdlQWxpZ25DZW50ZXIsXG5cdFx0XHRcdGltZ1NjYWxlTW9kZSA9IHNlbGYuc3QuaW1hZ2VTY2FsZU1vZGUsXG5cdFx0XHRcdHRlbXBFbDtcblxuXHRcdFx0aWYoc2xpZGVPYmplY3QudmlkZW9VUkwpIHtcblx0XHRcdFx0Y2xhc3NUb0ZpbmQgPSAncnNWaWRlb0NvbnRhaW5lcic7XG5cdFx0XHRcdGlmKGltZ1NjYWxlTW9kZSAhPT0gJ2ZpbGwnKSB7XG5cdFx0XHRcdFx0aXNWaWRlbyA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGVtcEVsID0gaW1nO1xuXHRcdFx0XHRcdGlmKCF0ZW1wRWwuaGFzQ2xhc3MoY2xhc3NUb0ZpbmQpKSB7XG5cdFx0XHRcdFx0XHR0ZW1wRWwgPSB0ZW1wRWwuZmluZCgnLicrY2xhc3NUb0ZpbmQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0ZW1wRWwuY3NzKHt3aWR0aDonMTAwJScsaGVpZ2h0OiAnMTAwJSd9KTtcblx0XHRcdFx0XHRjbGFzc1RvRmluZCA9ICdyc01haW5TbGlkZUltYWdlJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoIWltZy5oYXNDbGFzcyhjbGFzc1RvRmluZCkpIHtcblx0XHRcdFx0aXNSb290ID0gZmFsc2U7XG5cdFx0XHRcdGltZyA9IGltZy5maW5kKCcuJytjbGFzc1RvRmluZCk7XG5cdFx0XHR9XG5cdFx0XHRpZighaW1nKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGJhc2VJbWFnZVdpZHRoID0gc2xpZGVPYmplY3QuaVcsXG5cdFx0XHRcdGJhc2VJbWFnZUhlaWdodCA9IHNsaWRlT2JqZWN0LmlIO1xuXG5cdFx0XHRzbGlkZU9iamVjdC5pc1JlbmRlcmVkID0gdHJ1ZTtcblx0XHRcdGlmKGltZ1NjYWxlTW9kZSA9PT0gJ25vbmUnICYmICFpbWdBbGlnbkNlbnRlcikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZihpbWdTY2FsZU1vZGUgIT09ICdmaWxsJykge1xuXHRcdFx0XHRiTWFyZ2luID0gc2VsZi5faW1hZ2VQYWRkaW5nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Yk1hcmdpbiA9IDA7XG5cdFx0XHR9XG5cdFx0XHQvL3ZhciBibG9jayA9IGltZy5wYXJlbnQoJy5ibG9jay1pbnNpZGUnKS5jc3MoJ21hcmdpbicsIGJNYXJnaW4pO1xuXHRcdFx0dmFyIGNvbnRhaW5lcldpZHRoID0gc2VsZi5fd3JhcFdpZHRoIC0gYk1hcmdpbiAqIDIsXG5cdFx0XHRcdGNvbnRhaW5lckhlaWdodCA9IHNlbGYuX3dyYXBIZWlnaHQgLSBiTWFyZ2luICogMixcblx0XHRcdFx0aFJhdGlvLFxuXHRcdFx0XHR2UmF0aW8sXG5cdFx0XHRcdHJhdGlvLFxuXHRcdFx0XHRuV2lkdGgsXG5cdFx0XHRcdG5IZWlnaHQsXG5cdFx0XHRcdGNzc09iaiA9IHt9O1xuXG5cdFx0XHRpZihpbWdTY2FsZU1vZGUgPT09ICdmaXQtaWYtc21hbGxlcicpIHtcblx0XHRcdFx0aWYoYmFzZUltYWdlV2lkdGggPiBjb250YWluZXJXaWR0aCB8fCBiYXNlSW1hZ2VIZWlnaHQgPiBjb250YWluZXJIZWlnaHQpIHtcblx0XHRcdFx0XHRpbWdTY2FsZU1vZGUgPSAnZml0Jztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoaW1nU2NhbGVNb2RlID09PSAnZmlsbCcgfHwgaW1nU2NhbGVNb2RlID09PSAnZml0Jykge1x0XHRcblx0XHRcdFx0aFJhdGlvID0gY29udGFpbmVyV2lkdGggLyBiYXNlSW1hZ2VXaWR0aDtcblx0XHRcdFx0dlJhdGlvID0gY29udGFpbmVySGVpZ2h0IC8gYmFzZUltYWdlSGVpZ2h0O1xuXG5cdFx0XHRcdGlmIChpbWdTY2FsZU1vZGUgID09IFwiZmlsbFwiKSB7XG5cdFx0XHRcdFx0cmF0aW8gPSBoUmF0aW8gPiB2UmF0aW8gPyBoUmF0aW8gOiB2UmF0aW87ICAgICAgICAgICAgICAgICAgICBcdFx0XHRcblx0XHRcdFx0fSBlbHNlIGlmIChpbWdTY2FsZU1vZGUgID09IFwiZml0XCIpIHtcblx0XHRcdFx0XHRyYXRpbyA9IGhSYXRpbyA8IHZSYXRpbyA/IGhSYXRpbyA6IHZSYXRpbzsgICAgICAgICAgICAgXHRcdCAgIFx0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmF0aW8gPSAxO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bldpZHRoID0gTWF0aC5jZWlsKGJhc2VJbWFnZVdpZHRoICogcmF0aW8sIDEwKTtcblx0XHRcdFx0bkhlaWdodCA9IE1hdGguY2VpbChiYXNlSW1hZ2VIZWlnaHQgKiByYXRpbywgMTApO1xuXHRcdFx0fSBlbHNlIHtcdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdG5XaWR0aCA9IGJhc2VJbWFnZVdpZHRoO1xuXHRcdFx0XHRuSGVpZ2h0ID0gYmFzZUltYWdlSGVpZ2h0O1x0XHRcblx0XHRcdH1cblx0XHRcdGlmKGltZ1NjYWxlTW9kZSAhPT0gJ25vbmUnKSB7XG5cdFx0XHRcdGNzc09iai53aWR0aCA9IG5XaWR0aDtcblx0XHRcdFx0Y3NzT2JqLmhlaWdodCA9IG5IZWlnaHQ7XG5cdFx0XHRcdGlmKGlzVmlkZW8pIHtcblx0XHRcdFx0XHRpbWcuZmluZCgnLnJzSW1nJykuY3NzKHt3aWR0aDogJzEwMCUnLCBoZWlnaHQ6JzEwMCUnfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChpbWdBbGlnbkNlbnRlcikgeyAgICAgXG5cdFx0XHRcdGNzc09iai5tYXJnaW5MZWZ0ID0gTWF0aC5mbG9vcigoY29udGFpbmVyV2lkdGggLSBuV2lkdGgpIC8gMikgKyAgYk1hcmdpbjtcblx0XHRcdFx0Y3NzT2JqLm1hcmdpblRvcCA9IE1hdGguZmxvb3IoKGNvbnRhaW5lckhlaWdodCAtIG5IZWlnaHQpIC8gMikgKyAgYk1hcmdpbjtcblx0XHRcdH1cblx0XHRcdGltZy5jc3MoY3NzT2JqKTtcblx0XHR9XG5cdH07IC8qIFJveWFsU2xpZGVyIGNvcmUgcHJvdG90eXBlIGVuZCAqL1xuXHQkLnJzUHJvdG8gPSBSb3lhbFNsaWRlci5wcm90b3R5cGU7XG5cblx0JC5mbi5yb3lhbFNsaWRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsgICAgXHRcblx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgc2VsZiA9ICQodGhpcyk7XG5cdFx0XHRpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgfHwgICFvcHRpb25zKSB7XG5cdFx0XHRcdGlmKCAhc2VsZi5kYXRhKCdyb3lhbFNsaWRlcicpICkge1xuXHRcdFx0XHRcdHNlbGYuZGF0YSgncm95YWxTbGlkZXInLCBuZXcgUm95YWxTbGlkZXIoc2VsZiwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgcm95YWxTbGlkZXIgPSBzZWxmLmRhdGEoJ3JveWFsU2xpZGVyJyk7XG5cdFx0XHRcdGlmIChyb3lhbFNsaWRlciAmJiByb3lhbFNsaWRlcltvcHRpb25zXSkge1xuXHRcdFx0XHRcdHJldHVybiByb3lhbFNsaWRlcltvcHRpb25zXS5hcHBseShyb3lhbFNsaWRlciwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywgMSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0JC5mbi5yb3lhbFNsaWRlci5kZWZhdWx0cyA9IHsgICAgXG5cdFx0c2xpZGVzU3BhY2luZzogOCxcblx0XHRzdGFydFNsaWRlSWQ6IDAsXG5cdFx0bG9vcDogZmFsc2UsXG5cdFx0bG9vcFJld2luZDogZmFsc2UsXG5cdFx0bnVtSW1hZ2VzVG9QcmVsb2FkOiA0LFxuXHRcdGZhZGVpbkxvYWRlZFNsaWRlOiB0cnVlLFxuXHRcdHNsaWRlc09yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcsIFxuXHRcdHRyYW5zaXRpb25UeXBlOiAnbW92ZScsIFxuXHRcdHRyYW5zaXRpb25TcGVlZDogNjAwLFxuXHRcdGNvbnRyb2xOYXZpZ2F0aW9uOiAnYnVsbGV0cycsXG5cdFx0Y29udHJvbHNJbnNpZGU6IHRydWUsIFxuXHRcdGFycm93c05hdjogdHJ1ZSxcblx0XHRhcnJvd3NOYXZBdXRvSGlkZTogdHJ1ZSxcblx0XHRuYXZpZ2F0ZUJ5Q2xpY2s6IHRydWUsXG5cdFx0cmFuZG9taXplU2xpZGVzOiBmYWxzZSxcblx0XHRzbGlkZXJEcmFnOiB0cnVlLCBcblx0XHRzbGlkZXJUb3VjaDogdHJ1ZSxcblx0XHRrZXlib2FyZE5hdkVuYWJsZWQ6IGZhbHNlLFxuXHRcdGZhZGVJbkFmdGVyTG9hZGVkOiB0cnVlLFxuXG5cdFx0YWxsb3dDU1MzOiB0cnVlLFxuXHRcdGFsbG93Q1NTM09uV2Via2l0OiB0cnVlLFxuXG5cdFx0XG5cdFx0YWRkQWN0aXZlQ2xhc3M6IGZhbHNlLFxuXHRcdGF1dG9IZWlnaHQ6IGZhbHNlLFxuXG5cdFx0ZWFzZU91dDogJ2Vhc2VPdXRTaW5lJyxcblx0XHRlYXNlSW5PdXQ6ICdlYXNlSW5PdXRTaW5lJyxcblxuXHRcdG1pblNsaWRlT2Zmc2V0OiAxMCxcblxuXHRcdGltYWdlU2NhbGVNb2RlOlwiZml0LWlmLXNtYWxsZXJcIiwgICAgICAgICAgICAgICAgIFxuXHRcdGltYWdlQWxpZ25DZW50ZXI6dHJ1ZSxcdFx0XHRcdFxuXHRcdGltYWdlU2NhbGVQYWRkaW5nOiA0LFxuXHRcdHVzZVByZWxvYWRlcjogdHJ1ZSxcblxuXHRcdGF1dG9TY2FsZVNsaWRlcjogZmFsc2UsICAgICAgICAgICAgICAgXG4gICBcdFx0XHRcdFx0XG4gICBcdFx0YXV0b1NjYWxlU2xpZGVyV2lkdGg6IDgwMCwgICAgICAgXG4gICBcdFx0YXV0b1NjYWxlU2xpZGVySGVpZ2h0OiA0MDAsICAgXG5cbiAgIFx0XHRhdXRvU2NhbGVIZWlnaHQ6IHRydWUsXHQgICAgXG5cbiAgIFx0XHRhcnJvd3NOYXZIaWRlT25Ub3VjaDogZmFsc2UsXG4gICBcdFx0Z2xvYmFsQ2FwdGlvbjogZmFsc2UsXG5cbiAgIFx0XHRzbGlkZXNEaWZmOiAyXG5cdH07IC8qIGRlZmF1bHQgb3B0aW9ucyBlbmQgKi9cblxuXHQkLnJzQ1NTM0Vhc2luZyA9IHtcblx0XHRlYXNlT3V0U2luZTogJ2N1YmljLWJlemllcigwLjM5MCwgMC41NzUsIDAuNTY1LCAxLjAwMCknLFxuXHRcdGVhc2VJbk91dFNpbmU6ICdjdWJpYy1iZXppZXIoMC40NDUsIDAuMDUwLCAwLjU1MCwgMC45NTApJ1xuXHR9O1xuXG5cdCQuZXh0ZW5kKGpRdWVyeS5lYXNpbmcsIHtcblx0XHRlYXNlSW5PdXRTaW5lOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuXHRcdFx0cmV0dXJuIC1jLzIgKiAoTWF0aC5jb3MoTWF0aC5QSSp0L2QpIC0gMSkgKyBiO1xuXHRcdH0sXG5cdFx0ZWFzZU91dFNpbmU6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0XHRyZXR1cm4gYyAqIE1hdGguc2luKHQvZCAqIChNYXRoLlBJLzIpKSArIGI7XG5cdFx0fSxcblx0XHRlYXNlT3V0Q3ViaWM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0XHRyZXR1cm4gYyooKHQ9dC9kLTEpKnQqdCArIDEpICsgYjtcblx0XHR9XG5cdH0pO1xuXG5cbn0pKGpRdWVyeSwgd2luZG93KTsiLCJqUXVlcnkoZnVuY3Rpb24gKCQpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8vIGluaXRpYWxpemUgQ29FbnZNZW51IHBsdWdpblxuXHQvLyBJRTkrIG9ubHlcblx0JCgnaHRtbCcpLm5vdCgnLmx0LWllOScpLmNvZW52bWVudSgpO1xuXG59KTtcblxuKGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8vIFBsdWdpbiBkZWZpbml0aW9uXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0JC5Db0Vudk1lbnUgPSBmdW5jdGlvbiAoIG9wdGlvbnMsIGVsZW1lbnQgKSB7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLmVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuXG5cdFx0dGhpcy5fY3JlYXRlKCBvcHRpb25zICk7XG5cdH07XG5cblx0JC5Db0Vudk1lbnUuc2V0dGluZ3MgPSB7XG5cdFx0b3V0ZXJTZWxlY3RvcjogJyNvdXRlcicsXG5cdFx0d3JhcHBlclNlbGVjdG9yOiAnI3dyYXBwZXInLFxuXHRcdG1lbnVTZWxlY3RvcjogJy5tYWluLW1lbnUnLFxuXHRcdHN1Ym1lbnVDbGFzczogJ2NoaWxkcmVuJyxcblx0XHR0b3BNZW51U2VsZWN0b3I6ICcudG9wLW1lbnUnLFxuXHRcdG1lbnVCdXR0b25TZWxlY3RvcjogJyNzaG93LW1lbnUgYnV0dG9uJyxcblx0XHR0b3BMZXZlbEl0ZW1TZWxlY3RvcjogJy5wYWdlLWRlcHRoLTAnLFxuXHRcdG1vYmlsZU1lbnVDbGFzczogJ21vYmlsZS1tZW51Jyxcblx0XHRub3JtYWxNZW51Q2xhc3M6ICdub3JtYWwtbWVudScsXG5cdFx0bm9ybWFsVG9wTWVudUNsYXNzOiAnbm9ybWFsLXRvcC1tZW51Jyxcblx0XHRtb2JpbGVUb3BNZW51Q2xhc3M6ICdtb2JpbGUtdG9wLW1lbnUnLFxuXHRcdG1vYmlsZU1lbnVBY3RpdmVDbGFzczogJ21vYmlsZS1tZW51LWFjdGl2ZScsXG5cdFx0bW9iaWxlVG9wTWVudUFjdGl2ZUNsYXNzOiAnbW9iaWxlLXRvcC1tZW51LWFjdGl2ZScsXG5cdFx0bWVudUl0ZW1BY3RpdmVDbGFzczogJ21lbnUtaXRlbS1hY3RpdmUnXG5cdH07XG5cblx0Ly8gQ3JlYXRlXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0JC5Db0Vudk1lbnUucHJvdG90eXBlLl9jcmVhdGUgPSBmdW5jdGlvbiAoIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBzZXQgb3B0aW9uc1xuXHRcdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkLkNvRW52TWVudS5zZXR0aW5ncywgb3B0aW9ucyk7XG5cblx0XHQvLyBpbml0aWFsaXplXG5cdFx0dGhpcy5faW5pdCgpO1xuXG5cdH07XG5cblx0Ly8gSW5pdGlhbGl6ZVxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCQuQ29FbnZNZW51LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHRoaXMuJG91dGVyID0gJCh0aGlzLm9wdGlvbnMub3V0ZXJTZWxlY3Rvcik7XG5cdFx0dGhpcy4kd3JhcHBlciA9ICQodGhpcy5vcHRpb25zLndyYXBwZXJTZWxlY3Rvcik7XG5cdFx0dGhpcy4kbWVudSA9ICQodGhpcy5vcHRpb25zLm1lbnVTZWxlY3Rvcik7XG5cdFx0dGhpcy4kdG9wTWVudSA9ICQodGhpcy5vcHRpb25zLnRvcE1lbnVTZWxlY3Rvcik7XG5cdFx0dGhpcy4kbWVudUJ1dHRvbiA9ICQodGhpcy5vcHRpb25zLm1lbnVCdXR0b25TZWxlY3Rvcik7XG5cblx0XHQvLyBzZXQgdXAgbWVudSBET00gc3RydWN0dXJlXG5cdFx0dGhpcy5fYnVpbGRNZW51KCk7XG5cblx0XHQvLyBoYW5kbGUgbWFpbiBtZW51IGRyb3Bkb3duc1xuXHRcdHRoaXMuX2Ryb3Bkb3ducygpO1xuXG5cdFx0Ly8gc2V0IHVwIG1vYmlsZSBtZW51XG5cdFx0dGhpcy5fc2V0dXBNb2JpbGVNZW51KCk7XG5cblx0XHQvLyBhZGQgYXJyb3cgaWNvbnMgYmVmb3JlIG5hdiBpdGVtc1xuXHRcdHRoaXMuX2FkZEFycm93SWNvbnMoKTtcblxuXHRcdC8vIHNldCB1cCB0b3AgbWVudVxuXHRcdHRoaXMuX3NldHVwVG9wTWVudSgpO1xuXG5cdFx0Ly8gaGFuZGxlIG1lbnUgYnV0dG9uIGludGVyYWN0aW9uc1xuXHRcdHRoaXMuX2hhbmRsZU1lbnVCdXR0b24oKTtcblxuXHRcdC8vIGhhbmRsZSBjbGlja2luZyBvbiB0aGlzLiR3cmFwcGVyIHdoZW4gbW9iaWxlIG1lbnUgaXMgYWN0aXZlXG5cdFx0dGhpcy5faGFuZGxlV3JhcHBlckNsaWNraW5nKCk7XG5cblx0XHQvLyBoYW5kbGUgaW50ZXJhY3Rpbmcgb24gdG9wIGxldmVsIGl0ZW1zIGluIG1vYmlsZSBtZW51XG5cdFx0dGhpcy5faGFuZGxlTWVudUludGVyYWN0aW9ucygpO1xuXG5cdFx0Ly8gaGFuZGxlIHdpbmRvdyByZXNpemUgd2l0aCBtb2JpbGUgbWVudSBzdGlsbCB2aXNpYmxlXG5cdFx0dGhpcy5faGFuZGxlV2luZG93UmVzaXplKCk7XG5cblx0fTtcblxuXHQvKipcblx0ICogQnVpbGQgbWVudSBET00gc3RydWN0dXJlXG5cdCAqL1xuXHQkLkNvRW52TWVudS5wcm90b3R5cGUuX2J1aWxkTWVudSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHQvLyBzZWxlY3QgdG9wIGxldmVsIG1lbnUgaXRlbXNcblx0XHR2YXIgJG5hdkl0ZW0gPSB0aGlzLiRtZW51LmZpbmQoIHRoaXMub3B0aW9ucy50b3BMZXZlbEl0ZW1TZWxlY3RvciApO1xuXG5cdFx0Ly8gc2VsZWN0IGFsbCBzdWJtZW51cyBpbiB0aGUgbWVudVxuXHRcdHZhciAkc3VibWVudSA9ICRuYXZJdGVtLmZpbmQoJz4gLicgKyB0aGlzLm9wdGlvbnMuc3VibWVudUNsYXNzKTtcblxuXHRcdHZhciAkc3VibWVudUNvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJzdWJtZW51LWNvbnRhaW5lclwiPjwvZGl2PicpO1xuXG5cdFx0Ly8gZm9yIGVhY2ggdG9wIGxldmVsIG5hdiBpdGVtXG5cdFx0JG5hdkl0ZW0uZWFjaCggZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgJGxpbmsgPSAkKHRoaXMpLmZpbmQoJz4gc3BhbiA+IGEnKSxcblx0XHRcdFx0XHRsaW5rVGl0bGUgPSAkbGluay5hdHRyKCd0aXRsZScpLFxuXHRcdFx0XHRcdHRpdGxlLFxuXHRcdFx0XHRcdHVybDtcblxuXHRcdFx0dGl0bGUgPSBsaW5rVGl0bGUgIT09IHVuZGVmaW5lZCAmJiBsaW5rVGl0bGUgIT09IGZhbHNlID8gbGlua1RpdGxlIDogJGxpbmsudGV4dCgpO1xuXHRcdFx0dXJsID0gJGxpbmsuYXR0cignaHJlZicpO1xuXG5cdFx0XHQvLyBhZGQgc3VibWVudSBpZiBpdCBkb2VzIG5vdCBleGlzdFxuXHRcdFx0aWYgKCAhJCh0aGlzKS5maW5kKCc+IC4nICsgX3RoaXMub3B0aW9ucy5zdWJtZW51Q2xhc3MpLmxlbmd0aCApIHtcblx0XHRcdFx0JCh0aGlzKS5hcHBlbmQoJzx1bCBjbGFzcz1cIicgKyBfdGhpcy5vcHRpb25zLnN1Ym1lbnVDbGFzcyArICdcIj48L3VsPicpO1xuXHRcdFx0fVxuXG5cdFx0XHQkKHRoaXMpLmZpbmQoJz4gLicgKyBfdGhpcy5vcHRpb25zLnN1Ym1lbnVDbGFzcykucHJlcGVuZCgnPGxpIGNsYXNzPVwicGFnZW5hdlwiPjxhIGhyZWY9XCInICsgdXJsICsgJ1wiPicgKyB0aXRsZSArICc8L2E+PC9saT4nKTtcblx0XHR9ICk7XG5cblx0XHQvLyB3cmFwIGZpcnN0IHN1YiBtZW51IGluIC5zdWJtZW51LWNvbnRhaW5lclxuXHRcdHRoaXMuJG1lbnUuZmluZCggdGhpcy5vcHRpb25zLnRvcExldmVsSXRlbVNlbGVjdG9yICsgJyA+IC4nICsgdGhpcy5vcHRpb25zLnN1Ym1lbnVDbGFzcyApLndyYXAoICRzdWJtZW51Q29udGFpbmVyICk7XG5cblx0fTtcblxuXHQvLyBIYW5kbGUgZHJvcGRvd25zXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0JC5Db0Vudk1lbnUucHJvdG90eXBlLl9kcm9wZG93bnMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdC8vIHVzZSBob3ZlciBpbnRlbnQgdG8gYXBwbHkgYWN0aXZlIGNsYXNzIHRvIHRvcCBsZXZlbCBuYXYgaXRlbXNcblx0XHR0aGlzLiRtZW51LmZpbmQoIHRoaXMub3B0aW9ucy50b3BMZXZlbEl0ZW1TZWxlY3RvciApLmhhcygnLicgKyB0aGlzLm9wdGlvbnMuc3VibWVudUNsYXNzKS5ob3ZlckludGVudCggZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh0aGlzKS50b2dnbGVDbGFzcyggX3RoaXMub3B0aW9ucy5tZW51SXRlbUFjdGl2ZUNsYXNzICk7XG5cdFx0fSApO1xuXHR9O1xuXG5cdC8vIFNldCB1cCBtb2JpbGUgbWVudVxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCQuQ29FbnZNZW51LnByb3RvdHlwZS5fc2V0dXBNb2JpbGVNZW51ID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vIG1ha2UgYSBjb3B5IG9mIHRoaXMuJG1lbnUgdG8gcGxhY2UgYmVoaW5kIHRoaXMuJHdyYXBwZXIgd2l0aGluIHRoaXMuJG91dGVyXG5cdFx0dGhpcy4kbW9iaWxlTWVudSA9IHRoaXMuJG1lbnUuY2xvbmUoKTtcblx0XHR0aGlzLiRtb2JpbGVNZW51LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMubm9ybWFsTWVudUNsYXNzICkuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5tb2JpbGVNZW51Q2xhc3MgKTtcblxuXHRcdC8vIGFkZCBhIFwiaG9tZVwiIGxpbmsgdG8gdGhlIHRvcCBvZiB0aGUgbW9iaWxlIG1lbnVcblx0XHQvL3RoaXMuJG1vYmlsZU1lbnUuZmluZCgndWwnKS5wcmVwZW5kKCc8bGk+PGEgaHJlZj1cIi9cIj5Ib21lPC9hPjwvbGk+Jyk7XG5cblx0XHR0aGlzLiRtb2JpbGVNZW51LmFwcGVuZFRvKCB0aGlzLiRvdXRlciApLnNob3coKTtcblx0fTtcblxuXHQvLyBBZGQgYXJyb3cgaWNvbnMgdG8gbWVudSBpdGVtc1xuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCQuQ29FbnZNZW51LnByb3RvdHlwZS5fYWRkQXJyb3dJY29ucyA9IGZ1bmN0aW9uICgpIHtcblx0XHR0aGlzLiRtb2JpbGVNZW51LmZpbmQoIHRoaXMub3B0aW9ucy50b3BMZXZlbEl0ZW1TZWxlY3RvciApLmhhcygnLicgKyB0aGlzLm9wdGlvbnMuc3VibWVudUNsYXNzKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdCQodGhpcykuZmluZCgnYScpLmZpcnN0KCkucHJlcGVuZCgnPGk+PC9pPicpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdC8vIFNldCB1cCB0b3AgbGlua3MgbWVudVxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCQuQ29FbnZNZW51LnByb3RvdHlwZS5fc2V0dXBUb3BNZW51ID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vIG1ha2UgYSBjb3B5IG9mIHRoaXMuJHRvcE1lbnUgdG8gcGxhY2Ugd2l0aGluIHRoaXMuJG1vYmlsZU1lbnVcblx0XHR0aGlzLiRtb2JpbGVUb3BNZW51ID0gdGhpcy4kdG9wTWVudS5jbG9uZSgpO1xuXHRcdHRoaXMuJG1vYmlsZVRvcE1lbnUucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5ub3JtYWxUb3BNZW51Q2xhc3MgKS5hZGRDbGFzcyggdGhpcy5vcHRpb25zLm1vYmlsZVRvcE1lbnVDbGFzcyApO1xuXHRcdHRoaXMuJG1vYmlsZVRvcE1lbnUuYXBwZW5kVG8oIHRoaXMuJG1vYmlsZU1lbnUgKS5zaG93KCk7XG4gICAgICAgIHRoaXMuJG1vYmlsZU1lbnUuZmluZCgnZGl2LCB1bCwgbGksIHNwYW4sIGEnKS5yZW1vdmVBdHRyKCdpZCcpO1xuXHR9O1xuXG5cdC8vIEhhbmRsZSBtZW51IGJ1dHRvbiBpbnRlcmFjdGlvbnNcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQkLkNvRW52TWVudS5wcm90b3R5cGUuX2hhbmRsZU1lbnVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdC8vIGhhbmRsZSBjbGlja2luZyBvbiBtZW51IGJ1dHRvbiAodXNpbmcgZmFzdENsaWNrKVxuXHRcdHRoaXMuJG1lbnVCdXR0b24uZmFzdENsaWNrKCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0X3RoaXMuX3RvZ2dsZU1vYmlsZU1lbnUoKTtcblx0XHR9ICk7XG5cdH07XG5cblx0Ly8gU2hvdy9oaWRlIG1vYmlsZSBtZW51XG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0JC5Db0Vudk1lbnUucHJvdG90eXBlLl90b2dnbGVNb2JpbGVNZW51ID0gZnVuY3Rpb24gKCkge1xuXHRcdCQoJ2h0bWwnKS50b2dnbGVDbGFzcyggdGhpcy5vcHRpb25zLm1vYmlsZU1lbnVBY3RpdmVDbGFzcyApO1xuXHR9O1xuXG5cdC8vIEhhbmRsZSB3aW5kb3cgcmVzaXplIHdoZW4gbW9iaWxlIG1lbnUgaXMgc3RpbGwgdmlzaWJsZVxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCQuQ29FbnZNZW51LnByb3RvdHlwZS5faGFuZGxlV2luZG93UmVzaXplID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0JCh3aW5kb3cpLm9uKCAncmVzaXplJywgJC5kZWJvdW5jZSggMTAwLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAoICggJCh3aW5kb3cpLndpZHRoKCkgPj0gNzY4ICkgJiYgJCgnaHRtbCcpLmhhc0NsYXNzKCBfdGhpcy5vcHRpb25zLm1vYmlsZU1lbnVBY3RpdmVDbGFzcyApICkge1xuXHRcdFx0XHRfdGhpcy5fdG9nZ2xlTW9iaWxlTWVudSgpO1xuXHRcdFx0fVxuXHRcdH0gKSApO1xuXHR9O1xuXG5cdC8vIEhhbmRsZSBjbGlja2luZyBvbiB0aGlzLiR3cmFwcGVyIHdoZW4gbW9iaWxlIG1lbnUgaXMgYWN0aXZlXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0JC5Db0Vudk1lbnUucHJvdG90eXBlLl9oYW5kbGVXcmFwcGVyQ2xpY2tpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdHRoaXMuJHdyYXBwZXIub24oICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cblx0XHRcdGlmICggJCgnaHRtbCcpLmhhc0NsYXNzKCBfdGhpcy5vcHRpb25zLm1vYmlsZU1lbnVBY3RpdmVDbGFzcyApICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdF90aGlzLl90b2dnbGVNb2JpbGVNZW51KCk7XG5cdFx0XHR9XG5cblx0XHR9ICk7XG4gICAgICAgIFxuICAgICAgICAkKCcuY2xvc2UtbW9iaWxlJykub24oICd0b3VjaGVuZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRpZiAoICQoJ2h0bWwnKS5oYXNDbGFzcyggX3RoaXMub3B0aW9ucy5tb2JpbGVNZW51QWN0aXZlQ2xhc3MgKSApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRfdGhpcy5fdG9nZ2xlTW9iaWxlTWVudSgpO1xuXHRcdFx0fVxuXG5cdFx0fSApO1xuICAgICAgICBcbiAgICAgICAgJCgnLmNsb3NlLW1vYmlsZScpLm9uKCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0aWYgKCAkKCdodG1sJykuaGFzQ2xhc3MoIF90aGlzLm9wdGlvbnMubW9iaWxlTWVudUFjdGl2ZUNsYXNzICkgKSB7XG5cdFx0XHRcdF90aGlzLl90b2dnbGVNb2JpbGVNZW51KCk7XG5cdFx0XHR9XG5cblx0XHR9ICk7XG5cdH07XG5cblx0Ly8gSGFuZGxlIG1lbnUgaW50ZXJhY3Rpb25zXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0JC5Db0Vudk1lbnUucHJvdG90eXBlLl9oYW5kbGVNZW51SW50ZXJhY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIF90aGlzID0gdGhpcyxcblx0XHRcdFx0JGl0ZW1zID0gdGhpcy4kbW9iaWxlTWVudS5maW5kKCB0aGlzLm9wdGlvbnMudG9wTGV2ZWxJdGVtU2VsZWN0b3IgKSxcblx0XHRcdFx0JGl0ZW1MaW5rcyA9ICRpdGVtcy5maW5kKCc+IHNwYW4gPiBhJyk7XG5cblx0XHQvLyBvbiBwYWdlIGxvYWQsIG1ha2Ugc3VyZSBhcHByb3ByaWF0ZSBpdGVtIGhhcyB0aGUgZXhwYW5kZWQgY2xhc3Ncblx0XHQkaXRlbXMuZmlsdGVyKCcubWVudS1pdGVtLWFjdGl2ZSwgLmN1cnJlbnRfcGFnZV9pdGVtLCAuY3VycmVudC1wYWdlLWFuY2VzdG9yJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdleHBhbmRlZCcpO1xuXHRcdFx0Ly8kKHRoaXMpLmZpbmQoJz4gc3BhbiA+IGEgPiBpJykuY3NzKCdvdXRsaW5lJywgJzFweCBzb2xpZCByZWQnKTtcblx0XHR9KTtcblxuXHRcdCRpdGVtTGlua3MuZmFzdENsaWNrKCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHR2YXIgJGl0ZW0gPSAkKHRoaXMpLnBhcmVudHMoIF90aGlzLm9wdGlvbnMudG9wTGV2ZWxJdGVtU2VsZWN0b3IgKSxcblx0XHRcdFx0XHQkaWNvbiA9ICQodGhpcykuZmluZCgnaScpLFxuXHRcdFx0XHRcdCRzdWJNZW51ID0gJGl0ZW0uZmluZCgnLicgKyBfdGhpcy5vcHRpb25zLnN1Ym1lbnVDbGFzcyk7XG5cblx0XHRcdGlmICggJGl0ZW0uaGFzQ2xhc3MoJ2V4cGFuZGVkJykgKSB7XG5cdFx0XHRcdCRzdWJNZW51LnNsaWRlVXAoIDIwMCApO1xuXHRcdFx0XHQkaXRlbS5yZW1vdmVDbGFzcygnZXhwYW5kZWQnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRzdWJNZW51LnNsaWRlRG93biggMjAwICk7XG5cdFx0XHRcdCRpdGVtLmFkZENsYXNzKCdleHBhbmRlZCcpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHR9O1xuXG5cdC8vIFBsdWdpbiBicmlkZ2Vcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBMZXZlcmFnZXMgZGF0YSBtZXRob2QgdG8gZWl0aGVyIGNyZWF0ZSBvciByZXR1cm4gcGx1Z2luIGNvbnN0cnVjdG9yXG5cdC8vXG5cdC8vIFBhdHRlcm4gZGV2ZWxvcGVkIGJ5IGRlc2FuZHJvIGZvciBNYXNvbnJ5XG5cdC8vXHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9kZXNhbmRyby9tYXNvbnJ5L2Jsb2IvbWFzdGVyL2pxdWVyeS5tYXNvbnJ5LmpzXG5cdC8vIEJhc2VkIG9mZiBvZiBqUXVlcnkgVUkncyB3aWRnZXQgZmFjdG9yeVxuXHQvL1x0XHRodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS11aS9ibG9iL21hc3Rlci91aS9qcXVlcnkudWkud2lkZ2V0LmpzXG5cdC8vIEFuZCBhIGJpdCBmcm9tIGpjYXJvdXNlbFxuXHQvL1x0XHRodHRwczovL2dpdGh1Yi5jb20vanNvci9qY2Fyb3VzZWwvYmxvYi9tYXN0ZXIvbGliL2pxdWVyeS5qY2Fyb3VzZWwuanNcblxuXHQkLkNvRW52TWVudS5wcm90b3R5cGUub3B0aW9uID0gZnVuY3Rpb24oIGtleSApe1xuXHRcdGlmICggJC5pc1BsYWluT2JqZWN0KCBrZXkgKSApe1xuXHRcdFx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQodHJ1ZSwgdGhpcy5vcHRpb25zLCBrZXkpO1xuXHRcdH1cblx0fTtcblxuXHQkLmZuLmNvZW52bWVudSA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnICkge1xuXHRcdFx0Ly8gY2FsbCBtZXRob2Rcblx0XHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApO1xuXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBpbnN0YW5jZSA9ICQuZGF0YSggdGhpcywgJ2NvZW52bWVudScgKTtcblx0XHRcdFx0aWYgKCAhaW5zdGFuY2UgKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coICdlcnJvcicsICdjYW5ub3QgY2FsbCBtZXRob2RzIG9uIGNvZW52bWVudSBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgJyArXG5cdFx0XHRcdFx0XHQnYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kIFwiJyArIG9wdGlvbnMgKyAnXCInICk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggISQuaXNGdW5jdGlvbiggaW5zdGFuY2Vbb3B0aW9uc10gKSB8fCBvcHRpb25zLmNoYXJBdCgwKSA9PT0gJ18nICkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCAnZXJyb3InLCAnbm8gc3VjaCBtZXRob2QgXCInICsgb3B0aW9ucyArICdcIiBmb3IgY29lbnZtZW51IGluc3RhbmNlJyApO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGFwcGx5IG1ldGhvZFxuXHRcdFx0XHRpbnN0YW5jZVsgb3B0aW9ucyBdLmFwcGx5KCBpbnN0YW5jZSwgYXJncyApO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCAnY29lbnZtZW51JyApO1xuXHRcdFx0XHRpZiAoIGluc3RhbmNlICl7XG5cdFx0XHRcdFx0Ly8gYXBwbHkgb3B0aW9ucyAmIGluaXRcblx0XHRcdFx0XHRpbnN0YW5jZS5vcHRpb24oIG9wdGlvbnMgfHwge30gKTtcblx0XHRcdFx0XHRpbnN0YW5jZS5faW5pdCgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIGluaXRpYWxpemUgbmV3IGluc3RhbmNlXG5cdFx0XHRcdFx0JC5kYXRhKCB0aGlzLCAnY29lbnZtZW51JywgbmV3ICQuQ29FbnZNZW51KCBvcHRpb25zLCB0aGlzICkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xuXG4oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHQgICAgJCgnI3NlY29uZGFyeS1uYXYgbGk6aGFzKGxpLmN1cnJlbnRfcGFnZV9pdGVtKScpLmFkZENsYXNzKCdwYXJlbnRfcGFnZV9pdGVtIGN1cnJlbnRfcGFnZV9wYXJlbnQnKTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gJCgnLnBhZ2UtaXRlbS0yNzAnKS5maW5kKCcuY2hpbGRyZW4nKTtcbiAgICAgICAgY2hpbGRyZW4uZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzb3J0ZWQgPSAkKHRoaXMpLmNoaWxkcmVuKCdsaScpLmRldGFjaCgpLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0QSA9ICQoYSkuY2hpbGRyZW4oJ2EnKS5odG1sKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dEIgPSAkKGIpLmNoaWxkcmVuKCdhJykuaHRtbCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHRBLmxvY2FsZUNvbXBhcmUodGV4dEIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKHRoaXMpLmFwcGVuZChzb3J0ZWQpO1xuICAgICAgICB9KTtcbiAgICB9KVxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcbiIsIiIsImpRdWVyeShmdW5jdGlvbiAoJCkge1xuXHQndXNlIHN0cmljdCc7XG5cbiAgICAkLmZuLmJsb2dIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICB2YXIgJGhlYWRlciA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgJHNlbGVjdENhdGVnb3J5ID0gJGhlYWRlci5maW5kKCcuc2VsZWN0LWNhdGVnb3J5IHNlbGVjdCcpLFxuICAgICAgICAgICAgICAgICRzZWxlY3RNb250aCA9ICRoZWFkZXIuZmluZCgnLnNlbGVjdC1tb250aCBzZWxlY3QnKTtcblxuICAgICAgICAkc2VsZWN0Q2F0ZWdvcnkub24oICdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGVybV9pZCA9ICQodGhpcykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHVybCA9ICQodGhpcykucGFyZW50KCdkaXYnKS5hdHRyKCdkYXRhLXVybCcpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwgKyB0ZXJtX2lkO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJHNlbGVjdE1vbnRoLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVybCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgfSApO1xuICAgIH07XG5cblx0Ly8gaGFuZGxlIGJsb2cgaGVhZGVyIGZvcm1cblx0JCgnI2Jsb2ctaGVhZGVyJykuYmxvZ0hlYWRlcigpO1xuXHQkKCcjY2FyZWVycy1maWx0ZXInKS5ibG9nSGVhZGVyKCk7XG5cbn0pO1xuXG5cbiIsIi8qKlxuICogU2hhcmUgbW9kYWxzXG4gKiBmb3IgYmxvZyBwb3N0c1xuICovXG4oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvLyBQbHVnaW4gZGVmaW5pdGlvblxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdCQuY29lbnZzaGFyZSA9IGZ1bmN0aW9uICggb3B0aW9ucywgZWxlbWVudCApIHtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdHRoaXMuZWxlbWVudCA9ICQoZWxlbWVudCk7XG5cblx0XHR0aGlzLl9jcmVhdGUoIG9wdGlvbnMgKTtcblx0fTtcblxuXHQkLmNvZW52c2hhcmUuc2V0dGluZ3MgPSB7fTtcblxuXHQvLyBDcmVhdGVcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQkLmNvZW52c2hhcmUucHJvdG90eXBlLl9jcmVhdGUgPSBmdW5jdGlvbiAoIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBzZXQgb3B0aW9uc1xuXHRcdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkLmNvZW52c2hhcmUuc2V0dGluZ3MsIG9wdGlvbnMpO1xuXG5cdFx0Ly8gaW5pdGlhbGl6ZVxuXHRcdHRoaXMuX2luaXQoKTtcblxuXHR9O1xuXG5cdC8vIEluaXRpYWxpemVcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQkLmNvZW52c2hhcmUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dGhpcy5hcnRpY2xlSUQgPSB0aGlzLmVsZW1lbnQuYXR0cignZGF0YS1hcnRpY2xlLWlkJyk7XG5cdFx0dGhpcy5hcnRpY2xlVGl0bGUgPSB0aGlzLmVsZW1lbnQuYXR0cignZGF0YS1hcnRpY2xlLXRpdGxlJyk7XG5cdFx0dGhpcy5hcnRpY2xlU2hvcnRMaW5rID0gdGhpcy5lbGVtZW50LmF0dHIoJ2RhdGEtYXJ0aWNsZS1zaG9ydGxpbmsnKTtcblx0XHR0aGlzLmFydGljbGVQZXJtYWxpbmsgPSB0aGlzLmVsZW1lbnQuYXR0cignZGF0YS1hcnRpY2xlLXBlcm1hbGluaycpO1xuXG5cdFx0Ly8gc2hvdyBzaGFyZSBidXR0b25cblx0XHQvLyBtdXN0IGhhdmUgZGF0YS1hcnRpY2xlLWlkIHNldFxuXHRcdGlmIChcblx0XHRcdHR5cGVvZiggdGhpcy5hcnRpY2xlSUQgKSAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0XHRcdHR5cGVvZiggdGhpcy5hcnRpY2xlVGl0bGUgKSAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0XHRcdHR5cGVvZiggdGhpcy5hcnRpY2xlU2hvcnRMaW5rICkgIT09ICd1bmRlZmluZWQnICYmXG5cdFx0XHR0eXBlb2YoIHRoaXMuYXJ0aWNsZVBlcm1hbGluayApICE9PSAndW5kZWZpbmVkJyApIHtcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBidWlsZCBtb2RhbFxuXHRcdHRoaXMuX2J1aWxkTW9kYWwoKTtcblxuXHRcdC8vIGhhbmRsZSBpbnRlcmFjdGlvbnNcblx0XHR0aGlzLl9pbnRlcmFjdGlvbnMoKTtcblx0fTtcblxuXHQvKipcblx0ICogQnVpbGQgbW9kYWxcblx0ICogQnVpbGRpbmcgRE9NIGVsZW1lbnRzIGhlcmUgdG8ga2VlcCB0aGluZ3MgcXVpY2sgYW5kIHNpbXBsZSwgYnV0IHRoaXMgc2hvdWxkIHJlYWxseSBiZSBpbiBhIHRlbXBsYXRlXG5cdCAqL1xuXHQkLmNvZW52c2hhcmUucHJvdG90eXBlLl9idWlsZE1vZGFsID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIHNlcnZpY2VzID0gW1xuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiAnVHdpdHRlcicsXG5cdFx0XHRcdGNsYXNzTmFtZTogJ3R3aXR0ZXInLFxuXHRcdFx0XHR1cmw6ICdodHRwOi8vdHdpdHRlci5jb20vaG9tZT9zdGF0dXM9JyArIHRoaXMuYXJ0aWNsZVRpdGxlICsgJyAnICsgdGhpcy5hcnRpY2xlU2hvcnRMaW5rICsgJyBmcm9tIEBVV19Db0VudlwiIHRhcmdldD1cIl9ibGFuaydcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6ICdGYWNlYm9vaycsXG5cdFx0XHRcdGNsYXNzTmFtZTogJ2ZhY2Vib29rJyxcblx0XHRcdFx0dXJsOiAnaHR0cDovL3d3dy5mYWNlYm9vay5jb20vc2hhcmVyL3NoYXJlci5waHA/cz0xMDAmcFt1cmxdPScgKyB0aGlzLmFydGljbGVTaG9ydExpbmsgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rJ1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bmFtZTogJ0VtYWlsJyxcblx0XHRcdFx0Y2xhc3NOYW1lOiAnZW1haWwnLFxuXHRcdFx0XHR1cmw6ICdtYWlsdG86P3N1YmplY3Q9JyArIHRoaXMuYXJ0aWNsZVRpdGxlICsgJyZib2R5PUNoZWNrJTIwb3V0JTIwdGhpcyUyMGFydGljbGUlMjBmcm9tJTIwdGhlJTIwVVclMjBDb2xsZWdlJTIwb2YlMjB0aGUlMjBFbnZpcm9ubWVudDolMjAnICsgdGhpcy5hcnRpY2xlU2hvcnRMaW5rXG5cdFx0XHR9XG5cdFx0XTtcblxuXHRcdHRoaXMuJG1vZGFsID0gJCgnPGRpdiBjbGFzcz1cInNoYXJlLW1vZGFsXCIgcm9sZT1cImRpYWxvZ1wiIGFyaWEtbGFiZWxsZWRieT1cInNoYXJlTW9kYWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2Rpdj4nKTtcblx0XHR0aGlzLiRtb2RhbC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzaGFyZS1tb2RhbC1pbm5lclwiPjx1bCBjbGFzcz1cInNoYXJlLW1vZGFsLWNvbnRlbnRcIj48L3VsPjwvZGl2PicpO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBsZW4gPSBzZXJ2aWNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdHRoaXMuJG1vZGFsLmZpbmQoJy5zaGFyZS1tb2RhbC1jb250ZW50JykuYXBwZW5kKCc8YSBocmVmPVwiJyArIHNlcnZpY2VzWyBpIF0udXJsICsgJ1wiID48bGkgY2xhc3M9XCJzb2NpYWwtbGluayBzaGFyZS0nICsgc2VydmljZXNbIGkgXS5jbGFzc05hbWUgKyAnXCI+PC9saT48L2E+Jyk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBIYW5kbGUgaW50ZXJhY3Rpb25zXG5cdCAqL1xuXHQkLmNvZW52c2hhcmUucHJvdG90eXBlLl9pbnRlcmFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdC8vIGNsaWNraW5nIG9uIGxpbmtcblx0XHR0aGlzLmVsZW1lbnQub24oICdjbGljaycsIGZ1bmN0aW9uICggZXYgKSB7XG5cdFx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRpZiAoIF90aGlzLm1vZGFsSXNBY3RpdmUgIT09IHRydWUgKSB7XG5cdFx0XHRcdF90aGlzLl9sYXVuY2hNb2RhbCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0X3RoaXMuX2hpZGVNb2RhbCgpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHRcdC8vIGNsaWNraW5nIG91dHNpZGUgb2YgbW9kYWxcblx0XHQkKCdib2R5Jykub24oICdjbGljaycsIGZ1bmN0aW9uICggZXYgKSB7XG5cdFx0XHRpZiAoIF90aGlzLm1vZGFsSXNBY3RpdmUgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0aWYgKCAhJChldi50YXJnZXQpLmlzKCcuc29jaWFsLWxpbmsnKSApIHtcblx0XHRcdFx0XHRfdGhpcy5faGlkZU1vZGFsKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBMYXVuY2ggc2hhcmUgbW9kYWxcblx0ICovXG5cdCQuY29lbnZzaGFyZS5wcm90b3R5cGUuX2xhdW5jaE1vZGFsID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHQvLyBhcHBlbmQgbW9kYWxcblx0XHQkKCcucG9zdC0nICsgdGhpcy5hcnRpY2xlSUQgKyAnIC5hcnRpY2xlX19tZXRhJykucHJlcGVuZCggdGhpcy4kbW9kYWwgKTtcblxuXHRcdC8vIHNob3cgbW9kYWxcblx0XHR0aGlzLiRtb2RhbC5hZGRDbGFzcygnYWN0aXZlJyk7XG5cblx0XHR0aGlzLm1vZGFsSXNBY3RpdmUgPSB0cnVlO1xuXG5cdFx0c2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xuXHRcdFx0X3RoaXMuJG1vZGFsLmFkZENsYXNzKCdhY3RpdmUtdmlzaWJsZScpO1xuXHRcdH0sIDEwICk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEhpZGUgbW9kYWxcblx0ICovXG5cdCQuY29lbnZzaGFyZS5wcm90b3R5cGUuX2hpZGVNb2RhbCA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0dGhpcy4kbW9kYWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS12aXNpYmxlJyk7XG5cblx0XHQvL3NldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcblx0XHRfdGhpcy4kbW9kYWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdF90aGlzLiRtb2RhbC5yZW1vdmUoKTtcblx0XHRfdGhpcy5tb2RhbElzQWN0aXZlID0gZmFsc2U7XG5cdFx0Ly99LCAxMCApO1xuXG5cdH07XG5cblx0Ly8gUGx1Z2luIGJyaWRnZVxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdC8vIExldmVyYWdlcyBkYXRhIG1ldGhvZCB0byBlaXRoZXIgY3JlYXRlIG9yIHJldHVybiBwbHVnaW4gY29uc3RydWN0b3Jcblx0Ly9cblx0Ly8gUGF0dGVybiBkZXZlbG9wZWQgYnkgZGVzYW5kcm8gZm9yIE1hc29ucnlcblx0Ly9cdFx0aHR0cHM6Ly9naXRodWIuY29tL2Rlc2FuZHJvL21hc29ucnkvYmxvYi9tYXN0ZXIvanF1ZXJ5Lm1hc29ucnkuanNcblx0Ly8gQmFzZWQgb2ZmIG9mIGpRdWVyeSBVSSdzIHdpZGdldCBmYWN0b3J5XG5cdC8vXHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LXVpL2Jsb2IvbWFzdGVyL3VpL2pxdWVyeS51aS53aWRnZXQuanNcblx0Ly8gQW5kIGEgYml0IGZyb20gamNhcm91c2VsXG5cdC8vXHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9qc29yL2pjYXJvdXNlbC9ibG9iL21hc3Rlci9saWIvanF1ZXJ5LmpjYXJvdXNlbC5qc1xuXG5cdCQuY29lbnZzaGFyZS5wcm90b3R5cGUub3B0aW9uID0gZnVuY3Rpb24oIGtleSApe1xuXHRcdGlmICggJC5pc1BsYWluT2JqZWN0KCBrZXkgKSApe1xuXHRcdFx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQodHJ1ZSwgdGhpcy5vcHRpb25zLCBrZXkpO1xuXHRcdH1cblx0fTtcblxuXHQkLmZuLmNvZW52c2hhcmUgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0XHRpZiAoIHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyApIHtcblx0XHRcdC8vIGNhbGwgbWV0aG9kXG5cdFx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKTtcblxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgaW5zdGFuY2UgPSAkLmRhdGEoIHRoaXMsICdjb2VudnNoYXJlJyApO1xuXHRcdFx0XHRpZiAoICFpbnN0YW5jZSApIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggJ2Vycm9yJywgJ2Nhbm5vdCBjYWxsIG1ldGhvZHMgb24gY29lbnZzaGFyZSBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgJyArXG5cdFx0XHRcdFx0XHQnYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kIFwiJyArIG9wdGlvbnMgKyAnXCInICk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggISQuaXNGdW5jdGlvbiggaW5zdGFuY2Vbb3B0aW9uc10gKSB8fCBvcHRpb25zLmNoYXJBdCgwKSA9PT0gJ18nICkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCAnZXJyb3InLCAnbm8gc3VjaCBtZXRob2QgXCInICsgb3B0aW9ucyArICdcIiBmb3IgY29lbnZzaGFyZSBpbnN0YW5jZScgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBhcHBseSBtZXRob2Rcblx0XHRcdFx0aW5zdGFuY2VbIG9wdGlvbnMgXS5hcHBseSggaW5zdGFuY2UsIGFyZ3MgKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBpbnN0YW5jZSA9ICQuZGF0YSggdGhpcywgJ2NvZW52c2hhcmUnICk7XG5cdFx0XHRcdGlmICggaW5zdGFuY2UgKXtcblx0XHRcdFx0XHQvLyBhcHBseSBvcHRpb25zICYgaW5pdFxuXHRcdFx0XHRcdGluc3RhbmNlLm9wdGlvbiggb3B0aW9ucyB8fCB7fSApO1xuXHRcdFx0XHRcdGluc3RhbmNlLl9pbml0KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBuZXcgaW5zdGFuY2Vcblx0XHRcdFx0XHQkLmRhdGEoIHRoaXMsICdjb2VudnNoYXJlJywgbmV3ICQuY29lbnZzaGFyZSggb3B0aW9ucywgdGhpcyApICk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsiLCIoZnVuY3Rpb24oJCkge1xuXG4vKlxuKiAgbmV3X21hcFxuKlxuKiAgVGhpcyBmdW5jdGlvbiB3aWxsIHJlbmRlciBhIEdvb2dsZSBNYXAgb250byB0aGUgc2VsZWN0ZWQgalF1ZXJ5IGVsZW1lbnRcbipcbiogIEB0eXBlXHRmdW5jdGlvblxuKiAgQGRhdGVcdDgvMTEvMjAxM1xuKiAgQHNpbmNlXHQ0LjMuMFxuKlxuKiAgQHBhcmFtXHQkZWwgKGpRdWVyeSBlbGVtZW50KVxuKiAgQHJldHVyblx0bi9hXG4qL1xuXG5mdW5jdGlvbiBuZXdfbWFwKCAkZWwgKSB7XG5cdFxuXHQvLyB2YXJcblx0dmFyICRtYXJrZXJzID0gJGVsLmZpbmQoJy5tYXJrZXInKTtcblx0XG5cdHZhciBzdHlsZWRNYXBUeXBlID0gbmV3IGdvb2dsZS5tYXBzLlN0eWxlZE1hcFR5cGUoW1xuXHRcdHtcblx0XHRcdFwiZmVhdHVyZVR5cGVcIjogXCJhZG1pbmlzdHJhdGl2ZVwiLFxuXHRcdFx0XCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcblx0XHRcdFwic3R5bGVyc1wiOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcImNvbG9yXCI6IFwiIzQ0NDQ0NFwiXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdHtcblx0XHRcdFwiZmVhdHVyZVR5cGVcIjogXCJhZG1pbmlzdHJhdGl2ZS5jb3VudHJ5XCIsXG5cdFx0XHRcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHRcIixcblx0XHRcdFwic3R5bGVyc1wiOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcInNhdHVyYXRpb25cIjogXCIxOFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcImxpZ2h0bmVzc1wiOiBcIi01NVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcInZpc2liaWxpdHlcIjogXCJzaW1wbGlmaWVkXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFwiY29sb3JcIjogXCIjNDQ4NGExXCJcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0XCJmZWF0dXJlVHlwZVwiOiBcImxhbmRzY2FwZVwiLFxuXHRcdFx0XCJlbGVtZW50VHlwZVwiOiBcImFsbFwiLFxuXHRcdFx0XCJzdHlsZXJzXCI6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFwiY29sb3JcIjogXCIjZjJmMmYyXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFwic2F0dXJhdGlvblwiOiBcIjI4XCJcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFwibGlnaHRuZXNzXCI6IFwiNDJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJnYW1tYVwiOiBcIjIuMDFcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJ3ZWlnaHRcIjogXCIxXCJcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0XCJmZWF0dXJlVHlwZVwiOiBcInBvaVwiLFxuXHRcdFx0XCJlbGVtZW50VHlwZVwiOiBcImFsbFwiLFxuXHRcdFx0XCJzdHlsZXJzXCI6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFwidmlzaWJpbGl0eVwiOiBcIm9mZlwiXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdHtcblx0XHRcdFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkXCIsXG5cdFx0XHRcImVsZW1lbnRUeXBlXCI6IFwiYWxsXCIsXG5cdFx0XHRcInN0eWxlcnNcIjogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJzYXR1cmF0aW9uXCI6IC0xMDBcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFwibGlnaHRuZXNzXCI6IDQ1XG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdHtcblx0XHRcdFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmhpZ2h3YXlcIixcblx0XHRcdFwiZWxlbWVudFR5cGVcIjogXCJhbGxcIixcblx0XHRcdFwic3R5bGVyc1wiOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcInZpc2liaWxpdHlcIjogXCJzaW1wbGlmaWVkXCJcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0XCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuYXJ0ZXJpYWxcIixcblx0XHRcdFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMuaWNvblwiLFxuXHRcdFx0XCJzdHlsZXJzXCI6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFwidmlzaWJpbGl0eVwiOiBcIm9mZlwiXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9LFxuXHRcdHtcblx0XHRcdFwiZmVhdHVyZVR5cGVcIjogXCJ0cmFuc2l0XCIsXG5cdFx0XHRcImVsZW1lbnRUeXBlXCI6IFwiYWxsXCIsXG5cdFx0XHRcInN0eWxlcnNcIjogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0XCJmZWF0dXJlVHlwZVwiOiBcIndhdGVyXCIsXG5cdFx0XHRcImVsZW1lbnRUeXBlXCI6IFwiYWxsXCIsXG5cdFx0XHRcInN0eWxlcnNcIjogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJjb2xvclwiOiBcIiNhYWNlZDlcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0XCJ2aXNpYmlsaXR5XCI6IFwib25cIlxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fVxuXHRdKTtcblxuXHQvLyB2YXJzXG5cdHZhciBhcmdzID0ge1xuXHRcdHpvb21cdFx0OiA2LFxuXHRcdGNlbnRlclx0XHQ6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMCwgMCksXG5cdFx0bWFwVHlwZUNvbnRyb2xPcHRpb25zOiB7XG5cdFx0XHRtYXBUeXBlSWRzOiBbJ3N0eWxlZF9tYXAnXVxuXHRcdH0sXG5cdFx0ZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcblx0XHRkcmFnZ2FibGU6IGZhbHNlLFxuXHRcdGdlc3R1cmVIYW5kbGluZzogJ25vbmUnXHRcdFxuXHR9O1xuXHRcblx0Ly8gY3JlYXRlIG1hcFxuXHR2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcCggJGVsWzBdLCBhcmdzKTtcblxuXHRtYXAubWFwVHlwZXMuc2V0KCdzdHlsZWRfbWFwJywgc3R5bGVkTWFwVHlwZSk7XG5cdG1hcC5zZXRNYXBUeXBlSWQoJ3N0eWxlZF9tYXAnKTtcblx0XG5cdFxuXHQvLyBhZGQgYSBtYXJrZXJzIHJlZmVyZW5jZVxuXHRtYXAubWFya2VycyA9IFtdO1xuXHRcblx0XG5cdC8vIGFkZCBtYXJrZXJzXG5cdCRtYXJrZXJzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcbiAgICBcdGFkZF9tYXJrZXIoICQodGhpcyksIG1hcCApO1xuXHRcdFxuXHR9KTtcblx0XG5cdFxuXHQvLyBjZW50ZXIgbWFwXG5cdGNlbnRlcl9tYXAoIG1hcCApO1xuXHRcblx0XG5cdC8vIHJldHVyblxuXHRyZXR1cm4gbWFwO1xuXHRcbn1cblxuLypcbiogIGFkZF9tYXJrZXJcbipcbiogIFRoaXMgZnVuY3Rpb24gd2lsbCBhZGQgYSBtYXJrZXIgdG8gdGhlIHNlbGVjdGVkIEdvb2dsZSBNYXBcbipcbiogIEB0eXBlXHRmdW5jdGlvblxuKiAgQGRhdGVcdDgvMTEvMjAxM1xuKiAgQHNpbmNlXHQ0LjMuMFxuKlxuKiAgQHBhcmFtXHQkbWFya2VyIChqUXVlcnkgZWxlbWVudClcbiogIEBwYXJhbVx0bWFwIChHb29nbGUgTWFwIG9iamVjdClcbiogIEByZXR1cm5cdG4vYVxuKi9cblxuZnVuY3Rpb24gYWRkX21hcmtlciggJG1hcmtlciwgbWFwICkge1xuXG5cdC8vIHZhclxuXHR2YXIgbGF0bG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggJG1hcmtlci5hdHRyKCdkYXRhLWxhdCcpLCAkbWFya2VyLmF0dHIoJ2RhdGEtbG5nJykgKTtcblxuICAgIHZhciBpY29uQWN0aXZlID0ge1xuXHRcdHVybDogJG1hcmtlci5hdHRyKCdkYXRhLWFjdGl2ZScpLFxuXHRcdHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDIwLCAyMCksXG5cdFx0b3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG5cdFx0YW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTAsIDEwKVxuXHR9O1xuXG4gICAgdmFyIGljb25JbkFjdGl2ZSA9IHtcblx0XHR1cmw6ICRtYXJrZXIuYXR0cignZGF0YS1pbmFjdGl2ZScpLFxuXHRcdHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDIwLCAyMCksXG5cdFx0b3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG5cdFx0YW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTAsIDEwKVxuXHR9O1xuXG5cdHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcblx0XHRwb3NpdGlvblx0OiBsYXRsbmcsXG4gICAgICAgIGljb24gICAgICAgIDogaWNvbkluQWN0aXZlLFxuXHRcdG1hcFx0XHRcdDogbWFwXG5cdH0pO1xuXG5cdC8vIGFkZCB0byBhcnJheVxuXHRtYXAubWFya2Vycy5wdXNoKCBtYXJrZXIgKTtcblxuXHQvLyBpZiBtYXJrZXIgY29udGFpbnMgSFRNTCwgYWRkIGl0IHRvIGFuIGluZm9XaW5kb3dcblx0aWYoICRtYXJrZXIuaHRtbCgpIClcblx0e1xuXHRcdC8vIHNob3cgaW5mbyB3aW5kb3cgd2hlbiBtYXJrZXIgaXMgY2xpY2tlZFxuXHRcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQkLmVhY2gobWFwLm1hcmtlcnMsIGZ1bmN0aW9uKGksIG1hcmtlcikge1xuXHRcdFx0XHRtYXJrZXIuc2V0SWNvbihpY29uSW5BY3RpdmUpO1xuXHRcdFx0fSk7XG5cdFx0XHQkKCcubWFwLWJveCwgLmljb24nKS5zdG9wKCkuZmFkZU91dCgxMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuaHRtbCgkbWFya2VyLmh0bWwoKSkuc3RvcCgpLmZhZGVJbig2MDApO1xuICAgICAgICAgICAgfSk7XG5cdFx0XHRtYXJrZXIuc2V0SWNvbihpY29uQWN0aXZlKTtcblx0XHR9KTtcblx0XHRnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdtb3VzZW92ZXInLCBmdW5jdGlvbigpIHtcblx0XHRcdCQuZWFjaChtYXAubWFya2VycywgZnVuY3Rpb24oaSwgbWFya2VyKSB7XG5cdFx0XHRcdG1hcmtlci5zZXRJY29uKGljb25JbkFjdGl2ZSk7XG5cdFx0XHR9KTtcblx0XHRcdCQoJy5tYXAtYm94LCAuaWNvbicpLnN0b3AoKS5mYWRlT3V0KDEwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5odG1sKCRtYXJrZXIuaHRtbCgpKS5zdG9wKCkuZmFkZUluKDYwMCk7XG4gICAgICAgICAgICB9KTtcblx0XHRcdG1hcmtlci5zZXRJY29uKGljb25BY3RpdmUpO1xuXHRcdH0pO1xuXHR9XG5cbn1cblxuLypcbiogIGNlbnRlcl9tYXBcbipcbiogIFRoaXMgZnVuY3Rpb24gd2lsbCBjZW50ZXIgdGhlIG1hcCwgc2hvd2luZyBhbGwgbWFya2VycyBhdHRhY2hlZCB0byB0aGlzIG1hcFxuKlxuKiAgQHR5cGVcdGZ1bmN0aW9uXG4qICBAZGF0ZVx0OC8xMS8yMDEzXG4qICBAc2luY2VcdDQuMy4wXG4qXG4qICBAcGFyYW1cdG1hcCAoR29vZ2xlIE1hcCBvYmplY3QpXG4qICBAcmV0dXJuXHRuL2FcbiovXG5cbmZ1bmN0aW9uIGNlbnRlcl9tYXAoIG1hcCApIHtcblx0Ly8gdmFyc1xuXHR2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuXG5cdC8vIGxvb3AgdGhyb3VnaCBhbGwgbWFya2VycyBhbmQgY3JlYXRlIGJvdW5kc1xuXHQkLmVhY2goIG1hcC5tYXJrZXJzLCBmdW5jdGlvbiggaSwgbWFya2VyICl7XG5cblx0XHR2YXIgbGF0bG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggbWFya2VyLnBvc2l0aW9uLmxhdCgpLCBtYXJrZXIucG9zaXRpb24ubG5nKCkgKTtcblxuXHRcdGJvdW5kcy5leHRlbmQoIGxhdGxuZyApO1xuXG5cdH0pO1xuXG5cdC8vIG9ubHkgMSBtYXJrZXI/XG5cdGlmKCBtYXAubWFya2Vycy5sZW5ndGggPT0gMSApXG5cdHtcblx0XHQvLyBzZXQgY2VudGVyIG9mIG1hcFxuXHQgICAgbWFwLnNldENlbnRlciggYm91bmRzLmdldENlbnRlcigpICk7XG5cdCAgICBtYXAuc2V0Wm9vbSggMTYgKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHQvLyBmaXQgdG8gYm91bmRzXG5cdFx0bWFwLmZpdEJvdW5kcyggYm91bmRzICk7XG5cdH1cblxufVxuXG4vKlxuKiAgZG9jdW1lbnQgcmVhZHlcbipcbiogIFRoaXMgZnVuY3Rpb24gd2lsbCByZW5kZXIgZWFjaCBtYXAgd2hlbiB0aGUgZG9jdW1lbnQgaXMgcmVhZHkgKHBhZ2UgaGFzIGxvYWRlZClcbipcbiogIEB0eXBlXHRmdW5jdGlvblxuKiAgQGRhdGVcdDgvMTEvMjAxM1xuKiAgQHNpbmNlXHQ1LjAuMFxuKlxuKiAgQHBhcmFtXHRuL2FcbiogIEByZXR1cm5cdG4vYVxuKi9cbi8vIGdsb2JhbCB2YXJcbnZhciBtYXAgPSBudWxsO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuXG5cdCQoJy5hY2YtbWFwJykuZWFjaChmdW5jdGlvbigpe1xuXG5cdFx0Ly8gY3JlYXRlIG1hcFxuXHRcdG1hcCA9IG5ld19tYXAoICQodGhpcykgKTtcblxuXHR9KTtcblxuXHR2YXIgc2l6ZSA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHQkKHdpbmRvdykucmVzaXplZChmdW5jdGlvbigpIHtcblx0XHRpZihzaXplIDwgODAwICYmIHdpbmRvdy5pbm5lcldpZHRoID49IDgwMCkge1xuXHRcdFx0Y2VudGVyX21hcChtYXApO1xuXHRcdFx0c2l6ZSA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdH1cblx0XHRpZihzaXplID49IDEwMjAgJiYgd2luZG93LmlubmVyV2lkdGggPCAxMDIwKSB7XG5cdFx0XHRjZW50ZXJfbWFwKG1hcCk7XG5cdFx0XHRzaXplID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0fVxuXHRcdGlmKHNpemUgPj0gODAwICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgODAwKSB7XG5cdFx0XHRjZW50ZXJfbWFwKG1hcCk7XG5cdFx0XHRzaXplID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0fVxuXHR9KTtcblxuXHQkKHdpbmRvdykub24oIFwib3JpZW50YXRpb25jaGFuZ2VcIiwgZnVuY3Rpb24oZSkge1xuXHRcdGNlbnRlcl9tYXAobWFwKTtcblx0fSk7XG59KTtcblxufSkoalF1ZXJ5KTtcblxuKGZ1bmN0aW9uKCQpIHtcbiAgICB2YXIgdW5pcXVlQ250ciA9IDA7XG4gICAgJC5mbi5yZXNpemVkID0gZnVuY3Rpb24gKHdhaXRUaW1lLCBmbikge1xuICAgICAgICBpZiAodHlwZW9mIHdhaXRUaW1lID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGZuID0gd2FpdFRpbWU7XG4gICAgICAgICAgICB3YWl0VGltZSA9IDI1MDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFnID0gXCJyZXNpemVUaW1lclwiICsgdW5pcXVlQ250cisrO1xuICAgICAgICB0aGlzLnJlc2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgdGltZXIgPSBzZWxmLmRhdGEodGFnKTtcbiAgICAgICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlRGF0YSh0YWcpO1xuICAgICAgICAgICAgICAgIGZuLmNhbGwoc2VsZlswXSk7XG4gICAgICAgICAgICB9LCB3YWl0VGltZSk7XG4gICAgICAgICAgICBzZWxmLmRhdGEodGFnLCB0aW1lcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKGpRdWVyeSk7XG4iLCJqUXVlcnkoZnVuY3Rpb24gKCQpIHtcbiAgICAvKipcbiAgICAgKiBCYW5uZXIgaW1hZ2UgcmV2ZWFsc1xuICAgICAqL1xuICAgICQuZm4uYmFubmVyUmV2ZWFscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyICRjb250YWluZXIgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAkcmV2ZWFsQnRuID0gJCgnLmJhbm5lci1pbmZvJyksXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzID0gJ2Jhbm5lci1yZXZlYWxlZCc7XG5cblxuXG4gICAgICAgICAgICAkcmV2ZWFsQnRuLm9uKCAnY2xpY2snLCBmdW5jdGlvbiAoIGUgKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoIGFjdGl2ZUNsYXNzICk7XG4gICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICRjb250YWluZXIub24oICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoICQoJ2JvZHknKS5oYXNDbGFzcyggYWN0aXZlQ2xhc3MgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCBhY3RpdmVDbGFzcyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcblxuICAgICAgICB9ICk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSByZXNwb25zaXZlIHZpZGVvc1xuICAgICAqL1xuICAgICQuZm4uaGFuZGxlRml0VmlkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICQodGhpcykuZml0VmlkcygpO1xuXG4gICAgICAgICQoJy5mbHVpZC13aWR0aC12aWRlby13cmFwcGVyJykuZWFjaCggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGggPSBwYXJzZUZsb2F0KCAkdGhpcy5jc3MoJ21heC13aWR0aCcpICksXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3AgPSBwYXJzZUZsb2F0KCAkdGhpc1swXS5zdHlsZVsncGFkZGluZy10b3AnXSApO1xuXG4gICAgICAgICAgICAvLyBpbmNyZWFzZSBwYWRkaW5nLXRvcCByZWxhdGl2ZSB0byBtYXgtd2lkdGggc2V0IG9uIHRoaXMgZWxlbWVudFxuICAgICAgICAgICAgdmFyIGFkanVzdG1lbnQgPSBtYXhXaWR0aCAqICggcGFkZGluZ1RvcCAqIDAuMDEgKSArICclJztcblxuICAgICAgICAgICAgJHRoaXMuY3NzKCAncGFkZGluZy10b3AnLCBhZGp1c3RtZW50ICk7XG4gICAgICAgIH0gKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmFjdWx0eSBtZW1iZXIgdGFic1xuICAgICAqL1xuXG4gICAgJC5mbi5tZW1iZXJUYWJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgdmFyICRuYXYgPSAkKHRoaXMpLFxuICAgICAgICAgICAgJHRhYnMgPSAkKCcuRmFjdWx0eS1tZW1iZXItdGFicycpLFxuICAgICAgICAgICAgYWN0aXZlQ2xhc3MgPSAnYWN0aXZlLXRhYic7XG5cbiAgICAgICAgJG5hdi5maW5kKCdhJykuY2xpY2soIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciAkbmF2SXRlbSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICR0YWIgPSAkdGFicy5maW5kKCcuJyArICQodGhpcykuYXR0cignZGF0YS10YWInKSApO1xuXG4gICAgICAgICAgICAkbmF2LmZpbmQoJy4nICsgYWN0aXZlQ2xhc3MpLnJlbW92ZUNsYXNzKCBhY3RpdmVDbGFzcyApO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoJ2xpJykuYWRkQ2xhc3MoIGFjdGl2ZUNsYXNzICk7XG5cbiAgICAgICAgICAgICR0YWJzLmZpbmQoJy4nICsgYWN0aXZlQ2xhc3MpLnJlbW92ZUNsYXNzKCBhY3RpdmVDbGFzcyApO1xuICAgICAgICAgICAgJHRhYi5hZGRDbGFzcyggYWN0aXZlQ2xhc3MgKTtcbiAgICAgICAgfSApO1xuICAgIH07XG4gICAgXG4gICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3MoJ2x0LWllOCcpKSB7XG4gICAgICAgIGF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgdmFyIHBwYnV0dG9uID0gJCgnLnBsYXktcGF1c2UtaGVybycpO1xuICAgICAgICB2YXIgaGVybyA9ICQoJyNoZXJvLXZpZGVvJyk7XG4gICAgICAgIHBwYnV0dG9uLmh0bWwoJzxpIGNsYXNzPVwiZmktcGF1c2VcIj7ilpDilpA8L2k+Jyk7XG4gICAgICAgIGhlcm8ucmVtb3ZlQ2xhc3MoXCJmdWxsZmFkZVwiKTtcbiAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1yZWR1Y2VkLW1vdGlvbiknKS5tYXRjaGVzKSB7XG4gICAgICAgICAgICBoZXJvLnJlbW92ZUF0dHJpYnV0ZShcImF1dG9wbGF5XCIpO1xuICAgICAgICAgICAgaGVyby5nZXQoMCkucGF1c2UoKVxuICAgICAgICAgICAgaGVyby5hZGRDbGFzcyhcImZhZGVcIik7XG4gICAgICAgICAgICBwcGJ1dHRvbi5odG1sKCc8aSBjbGFzcz1cImZpLXBsYXlcIj4g4pa6PC9pPicpO1xuICAgICAgICAgICAgYXV0b3BsYXkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBwcGJ1dHRvbi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBoZXJvLnRvZ2dsZUNsYXNzKFwiZmFkZVwiKTtcbiAgICAgICAgICAgIGhlcm8uZ2V0KDApLnBhdXNlKClcbiAgICAgICAgICAgIGlmIChhdXRvcGxheSA9PSBudWxsIHx8IGF1dG9wbGF5ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuaHRtbCgnPGkgY2xhc3M9XCJmaS1wYXVzZVwiPuKWkOKWkDwvaT4nKTtcbiAgICAgICAgICAgICAgICBoZXJvLmdldCgwKS5wbGF5KClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhdXRvcGxheSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcHBidXR0b24uaHRtbCgnPGkgY2xhc3M9XCJmaS1wYXVzZVwiPuKWkOKWkDwvaT4nKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGhlcm8uZ2V0KDApLnBhdXNlKClcbiAgICAgICAgICAgICAgICAgICAgaGVyby5hZGRDbGFzcyhcImZhZGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHBwYnV0dG9uLmh0bWwoJzxpIGNsYXNzPVwiZmktcGxheVwiPiDilro8L2k+Jyk7XG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSwgOTAwMDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmh0bWwoJzxpIGNsYXNzPVwiZmktcGxheVwiPiDilro8L2k+Jyk7XG4gICAgICAgICAgICAgICAgaGVyby5nZXQoMCkucGF1c2UoKVxuICAgICAgICAgICAgICAgIGF1dG9wbGF5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaGVyby5nZXQoMCkucGF1c2UoKVxuICAgICAgICAgICAgICAgIGhlcm8uYWRkQ2xhc3MoXCJmYWRlXCIpO1xuICAgICAgICAgICAgICAgIHBwYnV0dG9uLmh0bWwoJzxpIGNsYXNzPVwiZmktcGxheVwiPiDilro8L2k+Jyk7XG4gICAgICAgICAgICAgICAgYXV0b3BsYXkgPSBmYWxzZTtcbiAgICAgICAgfSwgOTAwMDApO1xufTtcbn0pO1xuXG4vKipcbiAqIENsb3NlIFVXIEFsZXJ0XG4gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKSB7XG4gICAgZnVuY3Rpb24gY2xvc2VVV0FsZXJ0ICgpIHtcbiAgICAgIGlmKCQoJyN1d2FsZXJ0LWFsZXJ0LW1lc3NhZ2UnKS5pcygnOmhpZGRlbicpKXsgLy9pZiB0aGUgY29udGFpbmVyIGlzIHZpc2libGUgb24gdGhlIHBhZ2VcbiAgICAgICAgaWYgKCQoJyN1d2FsZXJ0LWFsZXJ0LW1lc3NhZ2UnKSl7XG4gICAgICAgICAgICAkKCcjdXdhbGVydC1hbGVydC1oZWFkZXInKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJidXR0b24gcmlnaHRcIiBpZD1cImNsb3NlclwiPlg8L2Rpdj4nKTtcbiAgICAgICAgICAgIHZhciBhbGVydEhlYWRpbmcgPSAkKCcjdXdhbGVydC1hbGVydC1oZWFkZXInKVswXTtcbiAgICAgICAgICAgICQoJyNjbG9zZXInKS5saXZlKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICQoJyN1d2FsZXJ0LWFsZXJ0LW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygncGxlYXNlLXVuaGlkZScpO1xuICAgICAgICAgICAgICAgICQoJyN1d2FsZXJ0LWFsZXJ0LW1lc3NhZ2UnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsaWNrZWQgPSBhbGVydEhlYWRpbmcuaW5uZXJIVE1MO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZihsb2NhbFN0b3JhZ2UuY2xpY2tlZCA9PT0gYWxlcnRIZWFkaW5nLmlubmVySFRNTCl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VXIEFsZXJ0IGlzIGhpZGRlbiAnICsgbG9jYWxTdG9yYWdlLmNsaWNrZWQpO1xuICAgICAgICAgICAgICAgICQoJyN1d2FsZXJ0LWFsZXJ0LW1lc3NhZ2UnKS5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyN1d2FsZXJ0LWFsZXJ0LW1lc3NhZ2UnKS5hZGRDbGFzcygncGxlYXNlLXVuaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KGNsb3NlVVdBbGVydCwgNTApOyAvL3dhaXQgNTAgbXMsIHRoZW4gdHJ5IGFnYWluXG4gICAgICB9XG4gICAgfVxuXG4gICAgY2xvc2VVV0FsZXJ0KCk7XG5cbiAgIHZhciAkZWwsICRwcywgJHVwLCB0b3RhbEhlaWdodDtcblxuICAgICQoXCIuYXJ0aWNsZV9fY29udGVudCAucmVhZC1tb3JlIC5idXR0b25cIikub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgIHRvdGFsSGVpZ2h0ID0gMFxuXG4gICAgICAkZWwgPSAkKHRoaXMpO1xuICAgICAgJHAgID0gJGVsLnBhcmVudCgpO1xuICAgICAgJHVwID0gJHAucGFyZW50KCk7XG4gICAgICAkcHMgPSAkdXAuZmluZChcInA6bm90KCcucmVhZC1tb3JlJylcIik7XG4gICAgICAkZSAgPSAkdXAuZmluZChcIi5leHRlcm5hbFwiKTtcblxuICAgICAgLy8gbWVhc3VyZSBob3cgdGFsbCBpbnNpZGUgc2hvdWxkIGJlIGJ5IGFkZGluZyB0b2dldGhlciBoZWlnaHRzIG9mIGFsbCBpbnNpZGUgcGFyYWdyYXBocyAoZXhjZXB0IHJlYWQtbW9yZSBwYXJhZ3JhcGgpXG4gICAgICAkcHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdG90YWxIZWlnaHQgKz0gJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICAgIH0pO1xuICAgICAgdG90YWxIZWlnaHQgKz0gJGUub3V0ZXJIZWlnaHQodHJ1ZSkgKyAxMDtcblxuICAgICAgJHVwXG4gICAgICAgIC5hbmltYXRlKHtcbiAgICAgICAgICBcIm1heC1oZWlnaHRcIjogOTk5OVxuICAgICAgICB9KTtcblxuICAgICAgLy8gZmFkZSBvdXQgcmVhZC1tb3JlXG4gICAgICAkcC5mYWRlT3V0KCk7XG5cbiAgICAgIC8vIHByZXZlbnQganVtcC1kb3duXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9KTtcblxufSk7XG5cbmpRdWVyeShmdW5jdGlvbiAoJCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0aWYgKCAhJCgnYm9keScpLmhhc0NsYXNzKCdsdC1pZTgnKSApIHtcblxuXHRcdC8vIHBsYWNlaG9sZGVycyBmb3Igb2xkZXIgYnJvd3NlcnNcblx0XHQkKCdpbnB1dCwgdGV4dGFyZWEnKS5wbGFjZWhvbGRlcigpO1xuXG5cdFx0Ly8gZml0dmlkcyBmb3IgcmVzcG9uc2l2ZSB2aWRlb3Ncblx0XHQkKCdhcnRpY2xlJykuZml0VmlkcygpO1xuXG5cdFx0Ly8gc2luZ2xlIGZhY3VsdHkgbWVtYmVyIHRhYnNcblx0XHQkKCcuRmFjdWx0eS1tZW1iZXItdGFiLW5hdicpLm1lbWJlclRhYnMoKTtcblxuXHRcdC8vIGJhbm5lciBpbWFnZSByZXZlYWxzXG5cdFx0JCgnLmJhbm5lci13cmFwcGVyJykuYmFubmVyUmV2ZWFscygpO1xuXHRcdFxuXHRcdC8vIHNoYXJlIGJ1dHRvbnNcblx0XHQkKCcuc2hhcmUnKS5jb2VudnNoYXJlKCk7XG5cdFx0XG5cdFx0Ly8gbGlnaHRib3hcblx0XHQkKCdhOm5vdChbaHJlZio9eW91dHViZV0pOm5vdChbaHJlZio9eW91dHVdKTpub3QoW2hyZWYqPXZpbWVvXSknKS5uaXZvTGlnaHRib3goKTtcbiAgICAgICAgXG4gICAgICAgICQoJ2ZpZ3VyZSBhIGltZycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICR0aGlzLnBhcmVudCgpLmF0dHIoJ3RpdGxlJywgJHRoaXMuYXR0cignYWx0JykpO1xuXHRcdH0pO1xuICAgICAgICBcbiAgICAgICAgJCgnZGl2LmdhbGxlcnkgaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgJHRoaXMucGFyZW50KCkuYXR0cigndGl0bGUnLCAkdGhpcy5hdHRyKCdhbHQnKSk7XG5cdFx0fSk7XG5cbiAgICAgICAgLy8gc3BsaXQgZ2FsbGVyaWVzIHVzaW5nIHBhcmVudCBpZCBcblx0XHQkKCdkaXYuZ2FsbGVyeSBhJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgJHRoaXMuYXR0cignZGF0YS1saWdodGJveC1nYWxsZXJ5JywgJHRoaXMuY2xvc2VzdCgnZGl2JykuYXR0cignaWQnKSk7XG5cdFx0fSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoICQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10eXBlLWFyY2hpdmUtZmFjdWx0eScpICkge1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIGN1c3RvbSBzY3JvbGxiYXJcbiAgICAgICAgICAgICQoJy5qcyAuZmFjdWx0eS10b29sYm94LXJvbGxlci1pdGVtcycpLm1DdXN0b21TY3JvbGxiYXIoe1xuICAgICAgICAgICAgICAgIGF1dG9IaWRlU2Nyb2xsYmFyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzZXRIZWlnaHQ6MTc1LFxuICAgICAgICAgICAgICAgIHRoZW1lOiAnbWluaW1hbC1kYXJrJyxcbiAgICAgICAgICAgICAgICBzY3JvbGxJbnRlcmlhOiAxLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHNjcm9sbCB0byBzZWxlY3Rpb25cbiAgICAgICAgICAgICQoJy5qcyAuZmFjdWx0eS10b29sYm94LXJvbGxlci1pdGVtcycpLm1DdXN0b21TY3JvbGxiYXIoXG4gICAgICAgICAgICAgICAgJ3Njcm9sbFRvJywgJy5GYWN1bHR5LXRvb2xib3gtcm9sbGVyLWl0ZW0tLWFjdGl2ZSdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICggJCgnYm9keScpLmhhc0NsYXNzKCdob21lJykgKSB7XG4gICAgICAgICAgICB2YXIgJGJveGVzID0gJCgnLnN0b3J5LXRodW5nJyk7XG4gICAgICAgICAgICAkYm94ZXMuaGlkZSgpO1xuXG4gICAgICAgICAgICAkKCcuc3Rvcmllcy1jb250YWluZXInKS5pbWFnZXNMb2FkZWQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRib3hlcy5mYWRlSW4oKTtcblxuICAgICAgICAgICAgICAgICQoJy5zdG9yaWVzLWNvbnRhaW5lcicpLm1hc29ucnkoe1xuICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogJy5zdG9yeScsXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbldpZHRoOiAnLnN0b3J5LXNpemVyJyxcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudFBvc2l0aW9uOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgICQoJy5GYWN1bHR5LW1lbWJlci1jb250YWN0LWxpc3QnKS5jbGljayhmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG5cblx0fVxuICAgIFxufSk7XG5cbmpRdWVyeShcImRvY3VtZW50XCIpLnJlYWR5KGZ1bmN0aW9uKCQpe1xuXHRcblx0dmFyIG5hdiA9ICQoJyNjYXJlZXJzLWZpbHRlcicpO1xuXHRcblx0JCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPiAzNTUpIHtcblx0XHRcdG5hdi5hZGRDbGFzcyhcImYtbmF2XCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuYXYucmVtb3ZlQ2xhc3MoXCJmLW5hdlwiKTtcblx0XHR9XG5cbiAgICAgICAgLy8gZGlzdGFuY2UgZnJvbSB0b3Agb2YgZm9vdGVyIHRvIHRvcCBvZiBkb2N1bWVudFxuICAgICAgICBmb290ZXJ0b3RvcCA9ICgkKCcjZm9vdGVyJykucG9zaXRpb24oKS50b3ApO1xuICAgICAgICAvLyBkaXN0YW5jZSB1c2VyIGhhcyBzY3JvbGxlZCBmcm9tIHRvcCwgYWRqdXN0ZWQgdG8gdGFrZSBpbiBoZWlnaHQgb2Ygc2lkZWJhciAoODUwIHBpeGVscyBpbmMuIHBhZGRpbmcpXG4gICAgICAgIHNjcm9sbHRvcCA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKzg1MDtcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSB0d29cbiAgICAgICAgZGlmZmVyZW5jZSA9IHNjcm9sbHRvcC1mb290ZXJ0b3RvcDtcblxuICAgICAgICAvLyBpZiB1c2VyIGhhcyBzY3JvbGxlZCBmdXJ0aGVyIHRoYW4gZm9vdGVyLFxuICAgICAgICAvLyBwdWxsIHNpZGViYXIgdXAgdXNpbmcgYSBuZWdhdGl2ZSBtYXJnaW5cblxuICAgICAgICBpZiAoc2Nyb2xsdG9wID4gZm9vdGVydG90b3ApIHtcbiAgICAgICAgICAgIG5hdi5jc3MoJ21hcmdpbi10b3AnLCAgMC1kaWZmZXJlbmNlKTtcbiAgICAgICAgfSBlbHNlICB7XG4gICAgICAgICAgICBuYXYuY3NzKCdtYXJnaW4tdG9wJywgMCk7XG4gICAgICAgIH1cblx0fSk7XG4gXG4gICAgXG59KTtcblxuXG5cblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
